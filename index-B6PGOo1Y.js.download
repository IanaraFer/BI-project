const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/Index-Ci9aYCEP.js","assets/vendor-DQYrLAfZ.js","assets/sentry-D3-uqDEW.js","assets/index-D_k0knri.js","assets/deferred-DCyD0Jms.js","assets/math.scalar.functions-C0i4R8fp.js","assets/animationGroup-DIngQ1Tp.js","assets/skeleton-B2VTCv81.js","assets/rawTexture-B67t_JNj.js","assets/easing-Do1VYSvy.js","assets/weightedsound-9438F3s5.js","assets/audioEngine-DA8p2W_8.js","assets/babylonFileParser.function-CWsVgwsY.js","assets/assetContainer-BMzSff7s.js","assets/asyncLock-BmyOuK35.js","assets/ray-DzOTs_mb.js","assets/webgpuEngine-DtEYvvUF.js","assets/bakedVertexAnimation-CUuZbGxI.js","assets/helperFunctions-B5tNuBlB.js","assets/fresnelFunction-CJhv7EIa.js","assets/meshUboDeclaration-CygOeI6i.js","assets/sceneUboDeclaration-BuP9N1UO.js","assets/decalFragment-Dcdn7jvT.js","assets/dataReader-DtEgVPQ-.js","assets/standardMaterial-Br4F-G05.js","assets/shaderMaterial-Dn58ryxJ.js","assets/bakedVertexAnimation-BLCTbRIA.js","assets/morphTargetsVertex-DiGR-l07.js","assets/shadowsVertex-eE23xhZ_.js","assets/vertexColorMixing-B8xo0Anc.js","assets/discBuilder-CEQodQWo.js","assets/abstractEngine.cubeTexture-DGNZrQMW.js","assets/engine.multiRender-CIwkk6Gv.js","assets/environmentTextureTools-AcLGWmbn.js","assets/dumpTools-Da7nNam0.js","assets/engine.multiRender-BmCZskY7.js","assets/flowGraphParser-7HXoJTo1.js","assets/flowGraphRichTypes-YWngRab7.js","assets/flowGraphJsonPointerParserBlock-DGnuNR0p.js","assets/flowGraphCachedOperationBlock-Bp9ikwqU.js","assets/flowGraphConsoleLogBlock-DsCwub1X.js","assets/flowGraphBranchBlock-CZ6VQa6G.js","assets/flowGraphDoNBlock-DqjEGmRC.js","assets/flowGraphForLoopBlock-Dhas7C19.js","assets/flowGraphThrottleBlock-BSC3uEiS.js","assets/flowGraphMultiGateBlock-Bxad9iSh.js","assets/flowGraphSwitchBlock-B7cVnZ4w.js","assets/flowGraphWaitAllBlock-DdzBuEta.js","assets/flowGraphCounterBlock-Cw0JMcuX.js","assets/flowGraphWhileLoopBlock-Cve49-Kt.js","assets/flowGraphDebounceBlock-BXyUoaG7.js","assets/flowGraphFlipFlopBlock-Cugz-BAA.js","assets/flowGraphSequenceBlock-Cza7C3wU.js","assets/flowGraphSetDelayBlock-98Ia5D7H.js","assets/flowGraphCancelDelayBlock-BfdEEn1Z.js","assets/flowGraphPlayAnimationBlock-CrQFVHDz.js","assets/flowGraphStopAnimationBlock-B5hWDaNC.js","assets/flowGraphPauseAnimationBlock-BAy-PK1M.js","assets/flowGraphInterpolationBlock-BagD1FxJ.js","assets/flowGraphEasingBlock-DUPJntdr.js","assets/flowGraphBezierCurveEasingBlock-CIKCI7oY.js","assets/flowGraphConditionalDataBlock-CYX-Xfje.js","assets/flowGraphGetVariableBlock-CSikEIG4.js","assets/flowGraphSetVariableBlock-DKhKvJ2m.js","assets/flowGraphTransformCoordinatesSystemBlock-CDG-F6lt.js","assets/flowGraphGetPropertyBlock-Djdr_ZSR.js","assets/flowGraphSetPropertyBlock-6momoCI-.js","assets/flowGraphConstantBlock-CpGH01tp.js","assets/flowGraphGetAssetBlock-C4FBOrsu.js","assets/flowGraphDataSwitchBlock-BI7yZakt.js","assets/flowGraphMathBlocks-BrRug5da.js","assets/flowGraphBinaryOperationBlock-B8xbvHyC.js","assets/flowGraphUnaryOperationBlock-DbmmK7aE.js","assets/flowGraphMathCombineExtractBlocks-BdOaGXBU.js","assets/flowGraphMatrixMathBlocks-5zZz0BeH.js","assets/flowGraphVectorMathBlocks-Dn86YXLI.js","assets/flowGraphTypeToTypeBlocks-ZH3As7DX.js","assets/flowGraphContextBlock-DGM_uAXa.js","assets/flowGraphArrayIndexBlock-Dm7Xe7r0.js","assets/flowGraphCodeExecutionBlock-BVX24QKq.js","assets/flowGraphIndexOfBlock--trV2zyW.js","assets/flowGraphFunctionReferenceBlock-BYWXaGI0.js","assets/flowGraphMeshPickEventBlock-BCNDSTQC.js","assets/flowGraphSceneReadyEventBlock-CBAQrhtw.js","assets/flowGraphReceiveCustomEventBlock-nK4JBVTt.js","assets/flowGraphSendCustomEventBlock-BBTornir.js","assets/flowGraphSceneTickEventBlock-CYNxUADb.js","assets/flowGraphPointerOutEventBlock-DZGQ8ihJ.js","assets/flowGraphPointerOverEventBlock-CLdDnzf-.js","assets/shadowGeneratorSceneComponent-BiwQSLIr.js","assets/shadowGenerator-BXmOnvMa.js","assets/clipPlaneFragment-BiZU81no.js","assets/clipPlaneVertex-BjZ8ZB9t.js","assets/pointCloudVertex-BgLiB9y3.js","assets/pointLight-CgVI6o8h.js","assets/cubeTexture-B20NaKnW.js","assets/dds-DGMPq3TW.js","assets/ktxTextureLoader-BOd1pdux.js","assets/workerPool-H9Ji3mCo.js","assets/iblCdfGenerator-DYQCz23W.js","assets/helperFunctions-wd7BNMF_.js","assets/fogFragment-73jFQixA.js","assets/logDepthVertex-DPU2Djp_.js","assets/sceneUboDeclaration-BxSbjA7u.js","assets/meshUboDeclaration-Pb9wqORD.js","assets/iesTextureLoader-jaYDMBUn.js","assets/hdrCubeTexture-Ys8dsLrt.js","assets/hdr-CaFQuCZs.js","assets/background.vertex-Cev9dZez.js","assets/backgroundUboDeclaration-CazJeqRm.js","assets/logDepthDeclaration-CsW3tLmT.js","assets/background.fragment-C-aiC9QO.js","assets/lightFragment-DPpkOBmu.js","assets/lightsFragmentFunctions-Bo9WuaBy.js","assets/background.vertex-CAIjXDyX.js","assets/backgroundUboDeclaration-K_ak34mH.js","assets/logDepthVertex-B-h0ownc.js","assets/shadowsVertex-BUpaiMjz.js","assets/logDepthDeclaration-B5HEE-pP.js","assets/background.fragment-DkWRenXo.js","assets/lightFragment-y8U-8EJZ.js","assets/lightsFragmentFunctions-fViou24q.js","assets/fogFragmentDeclaration-_osQ_uom.js","assets/samplerVertexImplementation-DYlcQkAa.js","assets/pbr.vertex-sZrB0fVX.js","assets/harmonicsFunctions-wRoCE8b8.js","assets/mainUVVaryingDeclaration-BoXnel-x.js","assets/pbr.fragment-DOxL8obV.js","assets/oitFragment-DXazIdWS.js","assets/pbr.vertex-SphEaxr2.js","assets/harmonicsFunctions-C0vmByOY.js","assets/mainUVVaryingDeclaration-DRqRaSLR.js","assets/bumpVertex-BtkqHkto.js","assets/pbr.fragment-TAbM0ptT.js","assets/oitFragment-dUkJ4As5.js","assets/bumpFragment-CWGbGGkQ.js","assets/shaderLanguage-BjwqUAVi.js","assets/ddsTextureLoader-DKeazAHq.js","assets/envTextureLoader-irX1dAUS.js","assets/tgaTextureLoader-B768UDoU.js","assets/hdrTextureLoader-DmSjZn-M.js","assets/basisTextureLoader-0PKgM23g.js","assets/exrTextureLoader-CQqT94j5.js","assets/iblShadowsRenderPipeline-Bqlz1ZFY.js","assets/rawCubeTexture-CVGOu3_n.js","assets/pointsCloudSystem-BpcY7-Mw.js","assets/thinInstanceMesh-Cir2058S.js","assets/default.fragment-AEoKFFlM.js","assets/defaultUboDeclaration-BCUy-_qQ.js","assets/default.vertex-Bh01oIQr.js","assets/default.fragment-B93oR08P.js","assets/defaultUboDeclaration-zs6h19d0.js","assets/default.vertex-CwFKy25i.js","assets/dracoDecoder-CoukhDk0.js","assets/meshoptCompression-mwqQqH_3.js","assets/mesh.vertexData.functions-BXkNVxNr.js","assets/lodCube.fragment-BlGbKkOC.js","assets/lod.fragment-JKQmcll4.js","assets/lodCube.fragment-92OE_gVE.js","assets/lod.fragment-Ck-mlZag.js","assets/rgbdDecode.fragment-BuSN7qJ-.js","assets/rgbdEncode.fragment-DmyZkHlr.js","assets/rgbdDecode.fragment-CSFXBRYZ.js","assets/rgbdEncode.fragment-CZOtewWx.js","assets/postProcessRenderPipelineManagerSceneComponent-CX8wJUjG.js","assets/postprocess.vertex-CrWRK2US.js","assets/pass.fragment-BRiKfsPJ.js","assets/passCube.fragment-Cu5pAzaU.js","assets/pass.fragment-5_b0UUY9.js","assets/passCube.fragment-Dggyzh8S.js","assets/index-CA1cktYq.js","assets/glTFLoader-CbtpMoPl.js","assets/glTFLoaderExtensionRegistry-Ctiboy-n.js","assets/objectModelMapping-DYP3qd9J.js","assets/KHR_animation_pointer-CzTVX6wp.js","assets/EXT_lights_image_based-C97sdv5j.js","assets/EXT_mesh_gpu_instancing-6lnE9vnT.js","assets/EXT_meshopt_compression-DJ6QC1w2.js","assets/EXT_texture_webp-xIdvw3Jm.js","assets/EXT_texture_avif-BIdOsc8z.js","assets/EXT_lights_ies-CVejKNgY.js","assets/KHR_draco_mesh_compression-5dSlwfsB.js","assets/KHR_lights_punctual-UO1DkiDy.js","assets/KHR_materials_pbrSpecularGlossiness-Cvvp9q0L.js","assets/KHR_materials_unlit-s3tmAYlt.js","assets/KHR_materials_clearcoat-7PooXoC_.js","assets/KHR_materials_iridescence-DV_RO9P0.js","assets/KHR_materials_anisotropy-CXHlnSIv.js","assets/KHR_materials_emissive_strength-DtkE0Ssq.js","assets/KHR_materials_sheen-D97NKIOi.js","assets/KHR_materials_specular-Bdq1BUki.js","assets/KHR_materials_ior-BVQ8HoWm.js","assets/KHR_materials_variants-DOTKdW2I.js","assets/KHR_materials_transmission-sA4Dum2n.js","assets/KHR_materials_diffuse_transmission-DLVcQkn0.js","assets/KHR_materials_volume-C-0kwTgy.js","assets/KHR_materials_dispersion-zNeVSF5R.js","assets/EXT_materials_diffuse_roughness-DmVhYIUC.js","assets/KHR_mesh_quantization-C61apWOv.js","assets/KHR_texture_basisu-BvYHyFsY.js","assets/KHR_texture_transform-CFeoGw3l.js","assets/KHR_xmp_json_ld-CyOlejua.js","assets/MSFT_audio_emitter-C58upzBb.js","assets/MSFT_lod-D-ngUeJn.js","assets/MSFT_minecraftMesh-BFA0MovT.js","assets/MSFT_sRGBFactors-7giHKGt4.js","assets/KHR_interactivity-BWrlljB7.js","assets/declarationMapper-CI4Qc-SH.js","assets/KHR_node_visibility-CrEKhwFa.js","assets/KHR_node_selectability-Dn5ApVPF.js","assets/KHR_node_hoverability-Cd5ApZTr.js","assets/ExtrasAsMetadata-BjzFVEbc.js","assets/index-CaFtCeSc.js","assets/stlFileLoader.metadata-D34mcJg2.js","assets/babylon.inspector.bundle-CuybGsoS.js","assets/objFileLoader-BNok5gLm.js","assets/stlFileLoader-DlXx-GuI.js","assets/splatFileLoader-C7BtWge2.js","assets/index-BN3euqQO.js","assets/index.es-xEQWo7JZ.js","assets/core-BiIOkrJH.js","assets/language-loader-Dg2dKVYB.js","assets/code-BX0RYvBe.js","assets/copy-DFXNQOLY.js","assets/index-BbM94OpA.js","assets/index-Chjiymov.js","assets/sender-share-conversation-modal-mViRbgQ-.js","assets/alert-dWeidd5k.js","assets/error-3X_QF9y7.js","assets/character-BvPQJS6D.js","assets/use-set-up-babylon-DN_tY-_8.js","assets/product-purchase-BX-QLk-z.js","assets/constants-BrKR_Djr.js","assets/utils-Dzu06gYL.js","assets/wallet-element-factory-BNDmq1fB.js","assets/pidl-pages-CNZVPolF.js","assets/constants-BnxRz7co.js","assets/payment-methods-management-C4CX9DIJ.js","assets/v4-CtRu48qb.js","assets/index-DmSGk4sl.js","assets/upsell-block-CS4B43uq.js","assets/cross-selling-strip-BuQ_VAh6.js","assets/price-tracking-block-jnIGWj1x.js","assets/use-price-tracking-Bp33bMnq.js","assets/use-shopping-telemetry-D0-NFoPe.js","assets/shopping-telemetry-DNgj1kYA.js","assets/chevron-bolded-DIfrwvVl.js","assets/format-money-5coY0IJJ.js","assets/composer-auto-complete-y_rmBgxo.js","assets/composer-actions-prompt-suggestions-DAQLOWPV.js","assets/booking-Clud76Sy.js","assets/expedia-BfAqCF1K.js","assets/flower-DK0y8uMs.js","assets/hotels-B4522AzB.js","assets/kayak-DAkGnAgk.js","assets/open-table-CTs_ZYem.js","assets/priceline-CgjEIt_D.js","assets/sky-scanner-gjl9NbZV.js","assets/trip-advisor-D9wf-lYV.js","assets/viator-xMFGjfFg.js","assets/voice-options-CzIEydkw.js","assets/think-deeper-pro-subscription-DPRAwU8N.js","assets/over-task-quota-CVgos6OK.js","assets/composer-action-DCqABhNR.js","assets/computer-use-task-closed-DqX5oLRQ.js","assets/audio-controls-Dr3hO5Hl.js","assets/next-BHLSfitU.js","assets/pause-cLqYkqtt.js","assets/play-C2IEmCl_.js","assets/progress-bar-CxBz7lK7.js","assets/close-button-DRWZOoyY.js","assets/replay-mproVwjx.js","assets/safety-risk-card-B82OdvVB.js","assets/use-send-action-command-C-0T67P-.js","assets/add-to-page-BB6TUIrU.js","assets/cross-selling-strip-consumer-DIz85p53.js","assets/composer-prompt-review-DJfiBtRG.js","assets/use-ocv-feedback-cULTLegQ.js","assets/biometric-consent-Dxtk_1He.js","assets/daily-briefing-chat-3MbAqTmN.js","assets/contract-down-left-TcmJ2Huf.js","assets/dailly-briefing-composer-input-CiaH56l5.js","assets/composer-sign-in-DmvZ0ATv.js","assets/merge-conversation-checkbox-9xU30TEk.js","assets/daily-briefing-composer-player-DCDAhbPN.js","assets/sidebar-pages-Co_2Dopo.js","assets/use-supports-hover-CxoLFeGx.js","assets/conversations-PCpfdoIJ.js","assets/delete-B-1Tm4rY.js","assets/dots-horizontal-DqAJ6n0S.js","assets/use-share-message-C5X6SvV_.js","assets/use-list-key-down-BxCJll7n.js","assets/settings-Dgk5npv1.js","assets/privacy-choices-MS2zuLHS.js","assets/dev-mode-state-1FwjHA5w.js","assets/use-is-lab-enabled-B9TBL5M8.js","assets/mask-wrapper-p2EVKaVT.js","assets/atoms-Cn1c-hJ0.js","assets/order-details-view-CAJZRszq.js","assets/card-info-BteUe81J.js","assets/visa-DNBWtMre.js","assets/product-info-DEvmWpFH.js","assets/wallet-icon-button-CiUdDWoq.js","assets/minus-DKvysHnG.js","assets/shipping-address-DodjGgdL.js","assets/faq-link-B6kZ-mBH.js","assets/utils-CxEW8zQb.js","assets/qr-BqTLVOAw.js","assets/moon-D1BtJ4xX.js","assets/sun-16-swokU.js","assets/rewards-link-B81E-1Vv.js","assets/gift-BDPWnTRw.js","assets/link-CRdbC53x.js","assets/rewards-badge-background-dark-DPVvSh5K.js","assets/rewards-badge-background-DyK4XVmt.js","assets/rewards-badge-container-dark-B5pSX5g6.js","assets/rewards-badge-container-Btkyrv5M.js","assets/rewards-badge-dark-KxRaXe-e.js","assets/rewards-badge-CbjmnkqJ.js","assets/plus-CGccfs09.js","assets/base-modal-Czm8ffki.js","assets/media-viewer-DiZqzZm3.js","assets/image-wrapper-DMyVt2tk.js","assets/image-off-Br4m11nP.js","assets/utils-C_ZBDyqB.js","assets/picture-in-picture-CwdUze7e.js","assets/video-player-Dn5zx1vl.js","assets/native-player-scqF-G9A.js","assets/card-carousel-DQucHmEt.js","assets/use-carousel-C3h47PSQ.js","assets/utils-ifQmq0fb.js","assets/composer-large-screen-LJ2UzgBX.js","assets/types-S47nI6MK.js","assets/discover-BxQ0PB77.js","assets/use-discover-feed-ku8DKimh.js","assets/podcast-schemas-BDscSFl_.js","assets/block-Bmmr270b.js","assets/thumbs-up-filled-49lTPs5F.js","assets/document-one-page-sparkle-DeP9Gp7X.js","assets/food-apple-Dca4G5zs.js","assets/lightbulb-tlTwY1bg.js","assets/location-ripple-BLPwzvuk.js","assets/podcast-BSxLJDVU.js","assets/scales-zwe8PIDA.js","assets/tag-B2TMVOZx.js","assets/play-outline-DNx8Mi2k.js","assets/weather-states-categories-CmeEET4X.js","assets/use-open-finance-dashboard-Byt_hW8t.js","assets/widget-player-DUKSiH15.js","assets/parseISO-DShryWeA.js","assets/generateCategoricalChart-D6NASyJH.js","assets/headphones-CYjuGlKp.js","assets/use-podcasts-navigation-Qcrf1-Ak.js","assets/audio-recorder-Sc-z7_UX.js","assets/actions-chat-detail-DSrVP4io.js","assets/expand-pane-DGr0mV1R.js","assets/save-action-D38jbhEJ.js","assets/external-link-DQRIUNfa.js","assets/new-tab-Xn4IzLIT.js","assets/pause-outline-Cao4hAq3.js","assets/showroom-chat-detail-Bsr4w-dW.js","assets/contextual-shopping-card-DdCQzaf9.js","assets/product-rating-CXthh28H.js","assets/buy-button-C6NjS5fb.js","assets/use-shopping-visibility-telemetry-CVRBoXCG.js","assets/shopping-utils-BREHETqQ.js","assets/citation-chips-row-D_8KvW_U.js","assets/bell-alert-BwF_JmDj.js","assets/bell-C9I0TGgE.js","assets/star-DO4Xdo1U.js","assets/arrow-trending-down-CQcecjhB.js","assets/price-history-chart-BVp4iVCC.js","assets/appearance-chat-CDw1O7wz.js","assets/ai-message-CpIQGH9j.js","assets/use-page-Car5mb2y.js","assets/use-ads-card-operations-DgaTkUWb.js","assets/use-podcast-share-BwHEMUYi.js","assets/side-by-side-messages-CCZSeufN.js","assets/topic-selection.lazy-Cmwt7m3I.js","assets/login.lazy-BGRW2qNd.js","assets/gaming.lazy-Db6xawJL.js","assets/gallery.lazy-Dp4XTZRb.js","assets/daily.lazy-CmDdu5_h.js","assets/daily-briefing-Do3htBbV.js","assets/formatDistanceToNow-Cqi3hJIr.js","assets/constructNow-CoinEwTG.js","assets/use-scroll-element-into-view-C-KmFvSU.js","assets/arrow-maximize-C1x85AI7.js","assets/arrow-minimize-Dybu42Bu.js","assets/use-is-portrait-Bvkhrduk.js","assets/wand-CgdDQYEQ.js","assets/agents.lazy-CAxV22uy.js","assets/index.lazy-jLp0yI0y.js","assets/arrow-referral-DANwekdu.js","assets/copliot-referral-D0WI_qeY.js","assets/four-leaf-clover-BK5ZLQS5.js","assets/hexagon-D8IdZH3i.js","assets/message-referral-CuadtkZe.js","assets/rewards-h4KuI3s2.js","assets/index.lazy-B1YF079A.js","assets/use-labs-telemetry-DDLIYSYS.js","assets/index-D7-m-K6D.js","assets/labs-social-icon-discord-D3UiX2U_.js","assets/labs-social-icon-instagram-vCxNp2DL.js","assets/labs-social-icon-x-CnC9VnMY.js","assets/labs-social-icon-youtube-C9Jv2Z8Z.js","assets/labs-logo-DpiTqaVZ.js","assets/subscription.start.lazy-DphNRaTu.js","assets/subscription.manage.lazy-DsjvSxgj.js","assets/shares._conversationId.lazy-CaN1YCvx.js","assets/rules.lazy-C6ShG77E.js","assets/link-multiple-CBnXNe5Z.js","assets/pro.subscribe.lazy-CRVxcb44.js","assets/checkout-wrapper-Cs-Li9sT.js","assets/paywall-container-BCTv-O1s.js","assets/add-address-tFi4fx-j.js","assets/address-BPRWO1xg.js","assets/pidl-element-factory-DVangO1v.js","assets/workflow-pi-dropdown-disabler-75P0Tk77.js","assets/react-number-format.es-ClFKd707.js","assets/wallet-dropdown-DR_GEKZJ.js","assets/wallet-list-BjMq0Xki.js","assets/current-C7rGJcUv.js","assets/pidl-element-factory-DikK38DI.css","assets/add-address-view-C18H0IGF.js","assets/form-field-skeleton-DVbPiI_p.js","assets/add-payment-instrument-Dbn2L3nq.js","assets/add-payment-instrument-view-BkCMfIFv.js","assets/add-ewallet-skeleton-VcvcgfOd.js","assets/select-payment-instrument-C5lwKd3U.js","assets/start-line-BzIZc9V4.js","assets/credit-card-prELKtrs.js","assets/pro.subscribe-DU9qjcuZ.css","assets/pages._pageId.lazy-DaPeKC1Y.js","assets/use-clean-history-state-CrqojYpG.js","assets/text-bold-TCgcKiq1.js","assets/text-bullet-list-cAEpTIT_.js","assets/text-code-ZEdNTP2E.js","assets/text-italic-CMStR0Ob.js","assets/text-numbered-list-BFn_u911.js","assets/text-paragraph-DaUDAbPM.js","assets/pages-welcome-dark-r64A2mUI.js","assets/pages-welcome-light-DDUDcHxX.js","assets/arrow-enter-up-CvINpBqu.js","assets/use-clean-history-state-M2dXb9ex.css","assets/copy-add-sm7NUgsU.js","assets/memory.narrative.lazy-CR0Qwo-u.js","assets/gallery._galleryItemId.lazy-CmKfS4YZ.js","assets/chats.private.lazy-CVOd5IiC.js","assets/campaigns._campaignId.lazy-DLJE0IuL.js","assets/shares.podcasts._shareId.lazy-C_izoiJV.js","assets/shares.pages._shareId.lazy-xGVP3W0-.js","assets/eye-D1k7VHKE.js","assets/pro.redeem._redeemCode.lazy-BQ3AjGZU.js","assets/pro.ewallet.return.lazy-DQIzPOSr.js","assets/podcasts._podcastType._podcastId.lazy-CqKwr4-O.js","assets/experiments._experimentAlias.lazy-Del7zFgV.js","assets/chats_._conversationId.talk.lazy-fPi48_ok.js","assets/timer-mfU0gJHZ.js","assets/voicemail-dark-BtARQIb1.js","assets/voicemail-light-DeMSWjpH.js","assets/index.lazy-WxYY6LWA.js","assets/my-creations.lazy-nIN1Hg0E.js","assets/my-creations-DV8PrLMj.css","assets/talk.lazy-B9L4ztjn.js","assets/shares._shareId.lazy-DetqN_EA.js"])))=>i.map(i=>d[i]);
var sF=Object.defineProperty;var Ok=t=>{throw TypeError(t)};var aF=(t,e,n)=>e in t?sF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var J=(t,e,n)=>aF(t,typeof e!="symbol"?e+"":e,n),Qb=(t,e,n)=>e.has(t)||Ok("Cannot "+n);var pe=(t,e,n)=>(Qb(t,e,"read from private field"),n?n.call(t):e.get(t)),sn=(t,e,n)=>e.has(t)?Ok("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ut=(t,e,n,r)=>(Qb(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ze=(t,e,n)=>(Qb(t,e,"access private method"),n);import{r as m,a as M,n as rt,b as O,j as h,T as cF,R as el,u as _e,p as lF,z as l,t as Zw,w as qv,Z as dg,U as Q2,e as lt,f as eI,A as xn,m as xe,K as J2,k as tp,x as np,V as X2,l as bd,B as tI,C as nI,D as rI,W as uF,X as dF,E as oI,F as Yv,Y as Qv,s as Z2,G as eO,o as Cd,y as Sd,_ as tO,P as nO,$ as Wu,a0 as hF,a1 as fF,a2 as rO,H as pF,d as iI,a3 as mF,M as oO,a4 as gF,a5 as iO,a6 as vF,a7 as yF,a8 as bF,a9 as CF,O as SF,aa as EF,ab as wF,g as Et,ac as IF,ad as sO,h as TF,ae as _F,af as AF,ag as kF}from"./vendor-DQYrLAfZ.js";import{g as aO}from"./sentry-D3-uqDEW.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}})();const xF="modulepreload",RF=function(t){return"https://studiostaticassetsprod.azureedge.net/bundle-cmc/"+t},Mk={},z=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){let s=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));o=s(n.map(u=>{if(u=RF(u),u in Mk)return;Mk[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":xF,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((g,v)=>{p.addEventListener("load",g),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(s){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=s,window.dispatchEvent(a),!a.defaultPrevented)throw s}return o.then(s=>{for(const a of s||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})},NF=t=>{const e="input"in t?t.input:"input",n="output"in t?t.output:"output",r="schema"in t?t.schema._input:t._input,o="schema"in t?t.schema._output:t._output;return{types:{input:e==="output"?o:r,output:n==="input"?r:o},parse:i=>"schema"in t?t.schema.parse(i):t.parse(i)}},cO=m.createContext(null),Jb={didCatch:!1,error:null};class lO extends m.Component{constructor(e){super(e),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Jb}static getDerivedStateFromError(e){return{didCatch:!0,error:e}}resetErrorBoundary(){const{error:e}=this.state;if(e!==null){for(var n,r,o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:i,reason:"imperative-api"}),this.setState(Jb)}}componentDidCatch(e,n){var r,o;(r=(o=this.props).onError)===null||r===void 0||r.call(o,e,n)}componentDidUpdate(e,n){const{didCatch:r}=this.state,{resetKeys:o}=this.props;if(r&&n.error!==null&&PF(e.resetKeys,o)){var i,s;(i=(s=this.props).onReset)===null||i===void 0||i.call(s,{next:o,prev:e.resetKeys,reason:"keys"}),this.setState(Jb)}}render(){const{children:e,fallbackRender:n,FallbackComponent:r,fallback:o}=this.props,{didCatch:i,error:s}=this.state;let a=e;if(i){const c={error:s,resetErrorBoundary:this.resetErrorBoundary};if(typeof n=="function")a=n(c);else if(r)a=m.createElement(r,c);else if(o!==void 0)a=o;else throw s}return m.createElement(cO.Provider,{value:{didCatch:i,error:s,resetErrorBoundary:this.resetErrorBoundary}},a)}}function PF(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return t.length!==e.length||t.some((n,r)=>!Object.is(n,e[r]))}function OF(t){if(t==null||typeof t.didCatch!="boolean"||typeof t.resetErrorBoundary!="function")throw new Error("ErrorBoundaryContext not found")}function uO(){const t=m.useContext(cO);OF(t);const[e,n]=m.useState({error:null,hasError:!1}),r=m.useMemo(()=>({resetBoundary:()=>{t.resetErrorBoundary(),n({error:null,hasError:!1})},showBoundary:o=>n({error:o,hasError:!0})}),[t.resetErrorBoundary]);if(e.hasError)throw e.error;return r}var Xb,Lk;function MF(){return Lk||(Lk=1,Xb={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Xb}var LF=MF();const DF=aO(LF);var jF=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function Dk(t){var e={type:"tag",name:"",voidElement:!1,attrs:{},children:[]},n=t.match(/<\/?([^\s]+?)[/\s>]/);if(n&&(e.name=n[1],(DF[n[1]]||t.charAt(t.length-2)==="/")&&(e.voidElement=!0),e.name.startsWith("!--"))){var r=t.indexOf("-->");return{type:"comment",comment:r!==-1?t.slice(4,r):""}}for(var o=new RegExp(jF),i=null;(i=o.exec(t))!==null;)if(i[0].trim())if(i[1]){var s=i[1].trim(),a=[s,""];s.indexOf("=")>-1&&(a=s.split("=")),e.attrs[a[0]]=a[1],o.lastIndex--}else i[2]&&(e.attrs[i[2]]=i[3].trim().substring(1,i[3].length-1));return e}var UF=/<[a-zA-Z0-9\-\!\/](?:"[^"]*"|'[^']*'|[^'">])*>/g,FF=/^\s*$/,BF=Object.create(null);function dO(t,e){switch(e.type){case"text":return t+e.content;case"tag":return t+="<"+e.name+(e.attrs?function(n){var r=[];for(var o in n)r.push(o+'="'+n[o]+'"');return r.length?" "+r.join(" "):""}(e.attrs):"")+(e.voidElement?"/>":">"),e.voidElement?t:t+e.children.reduce(dO,"")+"</"+e.name+">";case"comment":return t+"<!--"+e.comment+"-->"}}var HF={parse:function(t,e){e||(e={}),e.components||(e.components=BF);var n,r=[],o=[],i=-1,s=!1;if(t.indexOf("<")!==0){var a=t.indexOf("<");r.push({type:"text",content:a===-1?t:t.substring(0,a)})}return t.replace(UF,function(c,u){if(s){if(c!=="</"+n.name+">")return;s=!1}var d,f=c.charAt(1)!=="/",p=c.startsWith("<!--"),g=u+c.length,v=t.charAt(g);if(p){var b=Dk(c);return i<0?(r.push(b),r):((d=o[i]).children.push(b),r)}if(f&&(i++,(n=Dk(c)).type==="tag"&&e.components[n.name]&&(n.type="component",s=!0),n.voidElement||s||!v||v==="<"||n.children.push({type:"text",content:t.slice(g,t.indexOf("<",g))}),i===0&&r.push(n),(d=o[i-1])&&d.children.push(n),o[i]=n),(!f||n.voidElement)&&(i>-1&&(n.voidElement||n.name===c.slice(2,-1))&&(i--,n=i===-1?r:o[i]),!s&&v!=="<"&&v)){d=i===-1?r:o[i].children;var y=t.indexOf("<",g),C=t.slice(g,y===-1?void 0:y);FF.test(C)&&(C=" "),(y>-1&&i+d.length>=0||C!==" ")&&d.push({type:"text",content:C})}}),r},stringify:function(t){return t.reduce(function(e,n){return e+dO("",n)},"")}};function Um(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];_o(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const jk={};function hg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];_o(e[0])&&jk[e[0]]||(_o(e[0])&&(jk[e[0]]=new Date),Um(...e))}const hO=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},Uk=(t,e,n)=>{t.loadNamespaces(e,hO(t,n))},Fk=(t,e,n,r)=>{_o(n)&&(n=[n]),n.forEach(o=>{t.options.ns.indexOf(o)<0&&t.options.ns.push(o)}),t.loadLanguages(e,hO(t,r))},zF=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=e.languages[0],o=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const s=(a,c)=>{const u=e.services.backendConnector.state[`${a}|${c}`];return u===-1||u===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!s(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(r,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||s(r,t)&&(!o||s(i,t)))},VF=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(hg("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(o,i)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&o.services.backendConnector.backend&&o.isLanguageChangingTo&&!i(o.isLanguageChangingTo,t))return!1}}):zF(t,e,n)},_o=t=>typeof t=="string",lu=t=>typeof t=="object"&&t!==null,$F=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,GF={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},KF=t=>GF[t],WF=t=>t.replace($F,KF);let E0={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:WF};const qF=function(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};E0={...E0,...t}},fO=()=>E0;let pO;const YF=t=>{pO=t},sI=()=>pO,Zb=(t,e)=>{if(!t)return!1;const n=t.props?t.props.children:t.children;return e?n.length>0:!!n},eC=t=>{if(!t)return[];const e=t.props?t.props.children:t.children;return t.props&&t.props.i18nIsDynamicList?uu(e):e},QF=t=>Array.isArray(t)&&t.every(m.isValidElement),uu=t=>Array.isArray(t)?t:[t],JF=(t,e)=>{const n={...e};return n.props=Object.assign(t.props,e.props),n},mO=(t,e)=>{if(!t)return"";let n="";const r=uu(t),o=e.transSupportBasicHtmlNodes&&e.transKeepBasicHtmlNodesFor?e.transKeepBasicHtmlNodesFor:[];return r.forEach((i,s)=>{if(_o(i))n+=`${i}`;else if(m.isValidElement(i)){const{props:a,type:c}=i,u=Object.keys(a).length,d=o.indexOf(c)>-1,f=a.children;if(!f&&d&&!u)n+=`<${c}/>`;else if(!f&&(!d||u)||a.i18nIsDynamicList)n+=`<${s}></${s}>`;else if(d&&u===1&&_o(f))n+=`<${c}>${f}</${c}>`;else{const p=mO(f,e);n+=`<${s}>${p}</${s}>`}}else if(i===null)Um("Trans: the passed in value is invalid - seems you passed in a null child.");else if(lu(i)){const{format:a,...c}=i,u=Object.keys(c);if(u.length===1){const d=a?`${u[0]}, ${a}`:u[0];n+=`{{${d}}}`}else Um("react-i18next: the passed in object contained more than one variable - the object should look like {{ value, format }} where format is optional.",i)}else Um("Trans: the passed in value is invalid - seems you passed in a variable like {number} - please pass in variables for interpolation as full objects like {{number}}.",i)}),n},XF=(t,e,n,r,o,i)=>{if(e==="")return[];const s=r.transKeepBasicHtmlNodesFor||[],a=e&&new RegExp(s.map(y=>`<${y}`).join("|")).test(e);if(!t&&!a&&!i)return[e];const c={},u=y=>{uu(y).forEach(S=>{_o(S)||(Zb(S)?u(eC(S)):lu(S)&&!m.isValidElement(S)&&Object.assign(c,S))})};u(t);const d=HF.parse(`<0>${e}</0>`),f={...c,...o},p=(y,C,S)=>{const w=eC(y),E=v(w,C.children,S);return QF(w)&&E.length===0||y.props&&y.props.i18nIsDynamicList?w:E},g=(y,C,S,w,E)=>{y.dummy?(y.children=C,S.push(m.cloneElement(y,{key:w},E?void 0:C))):S.push(...m.Children.map([y],I=>{const T={...I.props};return delete T.i18nIsDynamicList,m.createElement(I.type,{...T,key:w,ref:I.ref},E?null:C)}))},v=(y,C,S)=>{const w=uu(y);return uu(C).reduce((I,T,A)=>{const _=T.children&&T.children[0]&&T.children[0].content&&n.services.interpolator.interpolate(T.children[0].content,f,n.language);if(T.type==="tag"){let U=w[parseInt(T.name,10)];S.length===1&&!U&&(U=S[0][T.name]),U||(U={});const k=Object.keys(T.attrs).length!==0?JF({props:T.attrs},U):U,G=m.isValidElement(k),K=G&&Zb(T,!0)&&!T.voidElement,ie=a&&lu(k)&&k.dummy&&!G,P=lu(t)&&Object.hasOwnProperty.call(t,T.name);if(_o(k)){const $=n.services.interpolator.interpolate(k,f,n.language);I.push($)}else if(Zb(k)||K){const $=p(k,T,S);g(k,$,I,A)}else if(ie){const $=v(w,T.children,S);g(k,$,I,A)}else if(Number.isNaN(parseFloat(T.name)))if(P){const $=p(k,T,S);g(k,$,I,A,T.voidElement)}else if(r.transSupportBasicHtmlNodes&&s.indexOf(T.name)>-1)if(T.voidElement)I.push(m.createElement(T.name,{key:`${T.name}-${A}`}));else{const $=v(w,T.children,S);I.push(m.createElement(T.name,{key:`${T.name}-${A}`},$))}else if(T.voidElement)I.push(`<${T.name} />`);else{const $=v(w,T.children,S);I.push(`<${T.name}>${$}</${T.name}>`)}else if(lu(k)&&!G){const $=T.children[0]?_:null;$&&I.push($)}else g(k,_,I,A,T.children.length!==1||!_)}else if(T.type==="text"){const U=r.transWrapTextNodes,k=i?r.unescape(n.services.interpolator.interpolate(T.content,f,n.language)):n.services.interpolator.interpolate(T.content,f,n.language);U?I.push(m.createElement(U,{key:`${T.name}-${A}`},k)):I.push(k)}return I},[])},b=v([{dummy:!0,children:t||[]}],d,uu(t||[]));return eC(b[0])};function ZF(t){let{children:e,count:n,parent:r,i18nKey:o,context:i,tOptions:s={},values:a,defaults:c,components:u,ns:d,i18n:f,t:p,shouldUnescape:g,...v}=t;const b=f||sI();if(!b)return hg("You will need to pass in an i18next instance by using i18nextReactModule"),e;const y=p||b.t.bind(b)||(K=>K),C={...fO(),...b.options&&b.options.react};let S=d||y.ns||b.options&&b.options.defaultNS;S=_o(S)?[S]:S||["translation"];const w=mO(e,C),E=c||w||C.transEmptyNodeValue||o,{hashTransKey:I}=C,T=o||(I?I(w||E):w||E);b.options&&b.options.interpolation&&b.options.interpolation.defaultVariables&&(a=a&&Object.keys(a).length>0?{...a,...b.options.interpolation.defaultVariables}:{...b.options.interpolation.defaultVariables});const A=a||n!==void 0||!e?s.interpolation:{interpolation:{...s.interpolation,prefix:"#$?",suffix:"?$#"}},_={...s,context:i||s.context,count:n,...a,...A,defaultValue:E,ns:S},U=T?y(T,_):E;u&&Object.keys(u).forEach(K=>{const ie=u[K];if(typeof ie.type=="function"||!ie.props||!ie.props.children||U.indexOf(`${K}/>`)<0&&U.indexOf(`${K} />`)<0)return;function P(){return m.createElement(m.Fragment,null,ie)}u[K]=m.createElement(P)});const k=XF(u||e,U,b,C,_,g),G=r!==void 0?r:C.defaultTransParent;return G?m.createElement(G,v,k):k}const eB={type:"3rdParty",init(t){qF(t.options.react),YF(t)}},gO=m.createContext();class tB{constructor(){J(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}}function $o(t){let{children:e,count:n,parent:r,i18nKey:o,context:i,tOptions:s={},values:a,defaults:c,components:u,ns:d,i18n:f,t:p,shouldUnescape:g,...v}=t;const{i18n:b,defaultNS:y}=m.useContext(gO)||{},C=f||b||sI(),S=p||C&&C.t.bind(C);return ZF({children:e,count:n,parent:r,i18nKey:o,context:i,tOptions:s,values:a,defaults:c,components:u,ns:d||S&&S.ns||y||C&&C.options&&C.options.defaultNS,i18n:C,t:p,shouldUnescape:g,...v})}const nB=(t,e)=>{const n=m.useRef();return m.useEffect(()=>{n.current=t},[t,e]),n.current},vO=(t,e,n,r)=>t.getFixedT(e,n,r),rB=(t,e,n,r)=>m.useCallback(vO(t,e,n,r),[t,e,n,r]),He=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:r,defaultNS:o}=m.useContext(gO)||{},i=n||r||sI();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new tB),!i){hg("You will need to pass in an i18next instance by using initReactI18next");const E=(T,A)=>_o(A)?A:lu(A)&&_o(A.defaultValue)?A.defaultValue:Array.isArray(T)?T[T.length-1]:T,I=[E,{},!1];return I.t=E,I.i18n={},I.ready=!1,I}i.options.react&&i.options.react.wait!==void 0&&hg("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const s={...fO(),...i.options.react,...e},{useSuspense:a,keyPrefix:c}=s;let u=t||o||i.options&&i.options.defaultNS;u=_o(u)?[u]:u||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(u);const d=(i.isInitialized||i.initializedStoreOnce)&&u.every(E=>VF(E,i,s)),f=rB(i,e.lng||null,s.nsMode==="fallback"?u:u[0],c),p=()=>f,g=()=>vO(i,e.lng||null,s.nsMode==="fallback"?u:u[0],c),[v,b]=m.useState(p);let y=u.join();e.lng&&(y=`${e.lng}${y}`);const C=nB(y),S=m.useRef(!0);m.useEffect(()=>{const{bindI18n:E,bindI18nStore:I}=s;S.current=!0,!d&&!a&&(e.lng?Fk(i,e.lng,u,()=>{S.current&&b(g)}):Uk(i,u,()=>{S.current&&b(g)})),d&&C&&C!==y&&S.current&&b(g);const T=()=>{S.current&&b(g)};return E&&i&&i.on(E,T),I&&i&&i.store.on(I,T),()=>{S.current=!1,E&&i&&E.split(" ").forEach(A=>i.off(A,T)),I&&i&&I.split(" ").forEach(A=>i.store.off(A,T))}},[i,y]),m.useEffect(()=>{S.current&&d&&b(p)},[i,c,d]);const w=[v,i,d];if(w.t=v,w.i18n=i,w.ready=d,d||!d&&!a)return w;throw new Promise(E=>{e.lng?Fk(i,e.lng,u,()=>E()):Uk(i,u,()=>E())})},yO=M([]),Bk=new Map,tl=t=>{let e=Bk.get(t);return e||(e=M(n=>n(yO).includes(t)),Bk.set(t,e),e)};function me(t){return O(tl(t))}function et(t){return rt().get(tl(t))}function ci(t){return O(tl(t))}function Fi(t){return rt().get(tl(t))}function Jv(t){const e=ci("kill-domain-referrer");return t==="html"?e?"noopener noreferrer":"noopener":e?"noopener,noreferrer":"noopener"}function sa(t){const e=t.split("://");return e.length===1?`https://${t}`:e[0]==="http"?`https://${e[1]}`:t}function oB(t){return t==="."||t==="!"||t==="?"}function iB(t){return t===" "||t===`
`||t==="	"}function sB(t){let e=t.length-1;for(;e>=0&&iB(t[e]);)e-=1;return[t.slice(0,e+1),t.slice(e+1)]}function aB(t,e,n){return t.slice(0,n)+e+t.slice(n)}const cB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-banner-Dtr5ysxQ.webp",lB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-copied-popup-BRVm_KWU.webp",uB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-engaging-popup-YSBImXns.webp",dB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-secondday-popup--nxha975.webp",hB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-setting-TTFEOcbN.webp",fB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-think-deeper-popup-FHodYGgC.webp",pB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-thumbsup-card-DH3zTT3T.webp",mB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-aggressive-thumbsup-popup-D7hBD_1Q.webp",gB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-desktop-discover-strip-DnlsnV3g.webp",vB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-desktop-setting-banner-CqsoJ8gk.webp",yB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-dark-desktop-setting-menu-item-C25mGU_p.webp",bB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-banner-CKv2a8_f.webp",CB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-copied-popup-M4nhJM3H.webp",SB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-engaging-popup-B-vXLUhP.webp",EB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-secondday-popup-DBikSjcg.webp",wB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-setting-D2OBsvlS.webp",IB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-think-deeper-popup-D5tA7N2r.webp",TB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-thumbsup-card-CwLVOvcv.webp",_B="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-aggressive-thumbsup-popup-DM6aMFdv.webp",AB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-desktop-discover-strip-flsYDh7H.webp",kB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-desktop-setting-banner-C2lNCEe_.webp",xB="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-desktop-setting-menu-item-BzBe-XWV.webp",Hk="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-qr-light-shopping-Dm2se5Rq.png",RB={appLayout:{showSettings:!0,showCookieBanner:!0,showSettingsRelyOnChatDetailLayout:!0,showMobileCrossSelling:!0},surfaceQueryParam:null,showScrollbarOnHover:!1,dailyBriefingOcid:"cp_web_daily",persistThemeChoice:!0,entraRedirectModalBehaviour:"replace",redirectBackEnabled:!0,crossPromotion:{discoverStrip:{dark:gB,light:AB,fontSize:"m"},settingMenuItem:{dark:yB,light:xB},settingBanner:{dark:vB,light:kB},aggressive:{banner:{dark:cB,light:bB},setting:{dark:hB,light:wB},card:{thumbsUp:{dark:pB,light:TB}},popup:{secondDay:{dark:dB,light:EB},thumbsUp:{dark:mB,light:_B},copied:{dark:lB,light:CB},engaging:{dark:uB,light:SB},thinkDeeper:{dark:fB,light:IB}}}},proSubscription:{enabled:!0,manageRefId:"cmc",urlParams:{client:"cmc",ocids:{ActionsLimit:{freeTrial:"cmmmcpyae96",buy:"cmm46gj0qnu"},VoiceLimit:{freeTrial:"cmm0ghcr8ka",buy:"cmmxki6wg02"},Settings:{freeTrial:"cmma4vbm2dq",buy:"cmmugsiwg58"},ChatReasoningLimit:{freeTrial:"cmmtjssvrv9",buy:"cmmzn5kdy9p"},MarketSelect:{freeTrial:"cmmxe0nad8b",buy:"cmmtbwi4652",market:"none"},RedirectFromAuth0Account:{freeTrial:"cmmxe0nad8b",buy:"cmmtbwi4652"},PodcastLimit:{buy:"cmmtzkwxk60"},ResearchReportLimit:{buy:"cmmoe57pdco"}}},upsellFromAuth0:{navigateToProSubPageAfterLogin:!0}},referralEnabled:!0,adsEnabled:!0,adsShowroomEnabled:!0,thinkDeeperFreemiumEnabled:!0,monitorAccountChangesAcrossTabs:!0,shopping:{upsell:{banner:{light:Hk,dark:Hk}}},sidebarNavigation:!0,showChatDetail:!0,enableAuth0:!0,settingsOverrides:{shouldShowActivityHistory:!0,shouldShowMemoryDelete:!0},enableCustom1DS:!0,actions:{enableActions:()=>Promise.resolve(!0)},landingPage:{enableLandingRoute:!0,enableCentralComposer:!0,enableStarterPrompts:!0,enableAutoSuggest:!0,enableWidgets:!0,enablePromptedGreetings:!0,shouldFetchWidgetsData:!0,regexForAutoSuggest:/\S+\s+/},supportsYouTubeVideos:!0,useMSALPwBApp:!0},rc=class rc{constructor(){J(this,"cfg",RB)}static instance(){return rc.singleton||(rc.singleton=new rc),rc.singleton}config(){return this.cfg}setConfig(e){this.cfg=e}};J(rc,"singleton",null);let ye=rc;const NB=/^(?:(?:https?):\/\/)?(?:(?:[A-Za-z0-9](?:[A-Za-z0-9-]*[A-Za-z0-9])?\.))+[a-z]{2,}(?:\/[\w.-]*)*\/?(?:\?[^\s#]*)?(?:#[^\s]*)?$/,PB=/\b((https?:\/\/|www\.)?([a-zA-Z0-9-]+\.)+[a-zA-Z]{2,})([/?#][\w\-._~:/?#@!$&'()*+,;=%]*)?(?=[\s<>()"'.,!?)}\]“”‘’《》「」『』【】]|$)/gi;function bO(t){return NB.test(t)}function OB(t){const[e,n]=sB(t),r=oB(e[e.length-1]),o=r?e.slice(0,-1):e;if(bO(o)){const i=r?e[e.length-1]:"";return{url:sa(o),word:o,suffix:`${i}${n}`}}return{word:t}}function w0(t){let e="";try{e=new URL(t).hostname}catch{}return e}function MB(t,e,n){const{overwrite:r}=n??{};try{const o=new URL(t);for(const[i,s]of Object.entries(e))r&&o.searchParams.delete(i),o.searchParams.append(i,s);return o.toString()}catch{}return t}function yf(t){const{formCodeParamOnLinks:e}=ye.instance().config();return e?MB(t,{form:e}):t}function LB(t){return t.replace(/[.,!?]+$/,"")}function DB(t,e){return!t||e<=0?!1:t[e-1]==="@"||/[\w.-]+@/.test(t.slice(Math.max(0,e-20),e+1))}function Rke(t){const e=[];if(!t)return e;for(const n of t.matchAll(PB)){const r=n[0],{index:o}=n;if(o<0||DB(t,o))continue;const i=LB(r),s=sa(i),a=o+i.length;e.push({url:s,from:o,to:a})}return e}const aa=m.forwardRef((t,e)=>{const{children:n,href:r,className:o,title:i,"aria-controls":s,"aria-expanded":a,"aria-haspopup":c,"aria-label":u,id:d,target:f,onClick:p,onPointerDown:g,onFocus:v}=t,b=Jv("html");return h.jsx("a",{id:d,ref:e,"aria-controls":s,"aria-expanded":a,"aria-haspopup":c,"aria-label":u,className:o,title:i,href:r&&yf(r),target:f??"_blank",rel:b,onClick:p,onPointerDown:g,onFocus:v,children:n})});aa.displayName="Link";const jB="SN:ROOT",UB=m.createContext(null);function FB(){return m.useContext(UB)}const aI=m.createContext(jB);aI.displayName="FocusContext";function BB(){return m.useContext(aI)}function lh(){}function HB({focusable:t=!0,saveLastFocusedChild:e=!0,trackChildren:n=!1,autoRestoreFocus:r=!0,forceFocus:o=!1,isFocusBoundary:i=!1,focusBoundaryDirections:s,focusKey:a,preferredChildFocusKey:c,onEnterPress:u=lh,onEnterRelease:d=lh,onArrowPress:f=()=>!0,onArrowRelease:p=lh,onFocus:g=lh,onBlur:v=lh}){const b=FB(),y=m.useCallback(P=>{P&&u(P)},[u]),C=m.useCallback(()=>{d()},[d]),S=m.useCallback((P,$)=>f(P,$),[f]),w=m.useCallback(P=>{p(P)},[p]),E=m.useCallback((P,$)=>{g(P,$)},[g]),I=m.useCallback((P,$)=>{v(P,$)},[v]),T=m.useRef(null),[A,_]=m.useState(!1),[U,k]=m.useState(!1),G=BB(),K=m.useMemo(()=>b?a??crypto.randomUUID():void 0,[a,b]),ie=m.useCallback((P={})=>{K&&(b==null||b.setFocus(K,P))},[K,b]);return m.useEffect(()=>{const P=T.current;return P&&K&&(b==null||b.addFocusable({focusKey:K,node:P,parentFocusKey:G,preferredChildFocusKey:c,onEnterPress:y,onEnterRelease:C,onArrowPress:S,onArrowRelease:w,onFocus:E,onBlur:I,onUpdateFocus:($=!1)=>_($),onUpdateHasFocusedChild:($=!1)=>k($),saveLastFocusedChild:e,trackChildren:n,isFocusBoundary:i,focusBoundaryDirections:s,autoRestoreFocus:r,forceFocus:o,focusable:t})),()=>{K&&(b==null||b.removeFocusable({focusKey:K}))}},[]),m.useEffect(()=>{const P=T.current;P&&K&&(b==null||b.updateFocusable(K,{node:P,preferredChildFocusKey:c,focusable:t,isFocusBoundary:i,focusBoundaryDirections:s,onEnterPress:y,onEnterRelease:C,onArrowPress:S,onArrowRelease:w,onFocus:E,onBlur:I}))},[K,c,t,i,s,y,C,S,w,E,I,b]),{ref:T,focusSelf:ie,focused:A,hasFocusedChild:U,focusKey:K}}function Ed(t,...e){const n=HB({onEnterPress:()=>{var o;(o=n.ref.current)==null||o.click()},onFocus:()=>{var o,i;(o=n.ref.current)==null||o.focus(),t.scrollIntoViewOnFocus&&((i=n.ref.current)==null||i.scrollIntoView({block:"nearest"}))},onBlur:()=>{var o;(o=n.ref.current)==null||o.blur()},...t}),r=zB(...e,n.ref);return{focusable:n,refCallback:r}}function zB(...t){return e=>{for(const n of t)n&&(typeof n=="function"?n(e):n.current=e)}}function CO(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var o=t.length;for(e=0;e<o;e++)t[e]&&(n=CO(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function W(){for(var t,e,n=0,r="",o=arguments.length;n<o;n++)(t=arguments[n])&&(e=CO(t))&&(r&&(r+=" "),r+=e);return r}const cI="-",VB=t=>{const e=GB(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:s=>{const a=s.split(cI);return a[0]===""&&a.length!==1&&a.shift(),SO(a,e)||$B(s)},getConflictingClassGroupIds:(s,a)=>{const c=n[s]||[];return a&&r[s]?[...c,...r[s]]:c}}},SO=(t,e)=>{var s;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),o=r?SO(t.slice(1),r):void 0;if(o)return o;if(e.validators.length===0)return;const i=t.join(cI);return(s=e.validators.find(({validator:a})=>a(i)))==null?void 0:s.classGroupId},zk=/^\[(.+)\]$/,$B=t=>{if(zk.test(t)){const e=zk.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},GB=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return WB(Object.entries(t.classGroups),n).forEach(([i,s])=>{I0(s,r,i,e)}),r},I0=(t,e,n,r)=>{t.forEach(o=>{if(typeof o=="string"){const i=o===""?e:Vk(e,o);i.classGroupId=n;return}if(typeof o=="function"){if(KB(o)){I0(o(r),e,n,r);return}e.validators.push({validator:o,classGroupId:n});return}Object.entries(o).forEach(([i,s])=>{I0(s,Vk(e,i),n,r)})})},Vk=(t,e)=>{let n=t;return e.split(cI).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},KB=t=>t.isThemeGetter,WB=(t,e)=>e?t.map(([n,r])=>{const o=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([s,a])=>[e+s,a])):i);return[n,o]}):t,qB=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const o=(i,s)=>{n.set(i,s),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let s=n.get(i);if(s!==void 0)return s;if((s=r.get(i))!==void 0)return o(i,s),s},set(i,s){n.has(i)?n.set(i,s):o(i,s)}}},EO="!",YB=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,o=e[0],i=e.length,s=a=>{const c=[];let u=0,d=0,f;for(let y=0;y<a.length;y++){let C=a[y];if(u===0){if(C===o&&(r||a.slice(y,y+i)===e)){c.push(a.slice(d,y)),d=y+i;continue}if(C==="/"){f=y;continue}}C==="["?u++:C==="]"&&u--}const p=c.length===0?a:a.substring(d),g=p.startsWith(EO),v=g?p.substring(1):p,b=f&&f>d?f-d:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:v,maybePostfixModifierPosition:b}};return n?a=>n({className:a,parseClassName:s}):s},QB=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},JB=t=>({cache:qB(t.cacheSize),parseClassName:YB(t),...VB(t)}),XB=/\s+/,ZB=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:o}=e,i=[],s=t.trim().split(XB);let a="";for(let c=s.length-1;c>=0;c-=1){const u=s[c],{modifiers:d,hasImportantModifier:f,baseClassName:p,maybePostfixModifierPosition:g}=n(u);let v=!!g,b=r(v?p.substring(0,g):p);if(!b){if(!v){a=u+(a.length>0?" "+a:a);continue}if(b=r(p),!b){a=u+(a.length>0?" "+a:a);continue}v=!1}const y=QB(d).join(":"),C=f?y+EO:y,S=C+b;if(i.includes(S))continue;i.push(S);const w=o(b,v);for(let E=0;E<w.length;++E){const I=w[E];i.push(C+I)}a=u+(a.length>0?" "+a:a)}return a};function eH(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=wO(e))&&(r&&(r+=" "),r+=n);return r}const wO=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=wO(t[r]))&&(n&&(n+=" "),n+=e);return n};function tH(t,...e){let n,r,o,i=s;function s(c){const u=e.reduce((d,f)=>f(d),t());return n=JB(u),r=n.cache.get,o=n.cache.set,i=a,a(c)}function a(c){const u=r(c);if(u)return u;const d=ZB(c,n);return o(c,d),d}return function(){return i(eH.apply(null,arguments))}}const an=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},IO=/^\[(?:([a-z-]+):)?(.+)\]$/i,nH=/^\d+\/\d+$/,rH=new Set(["px","full","screen"]),oH=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,iH=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,sH=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,aH=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,cH=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,ts=t=>Tu(t)||rH.has(t)||nH.test(t),Ds=t=>wd(t,"length",gH),Tu=t=>!!t&&!Number.isNaN(Number(t)),tC=t=>wd(t,"number",Tu),uh=t=>!!t&&Number.isInteger(Number(t)),lH=t=>t.endsWith("%")&&Tu(t.slice(0,-1)),mt=t=>IO.test(t),js=t=>oH.test(t),uH=new Set(["length","size","percentage"]),dH=t=>wd(t,uH,TO),hH=t=>wd(t,"position",TO),fH=new Set(["image","url"]),pH=t=>wd(t,fH,yH),mH=t=>wd(t,"",vH),dh=()=>!0,wd=(t,e,n)=>{const r=IO.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},gH=t=>iH.test(t)&&!sH.test(t),TO=()=>!1,vH=t=>aH.test(t),yH=t=>cH.test(t),bH=()=>{const t=an("colors"),e=an("spacing"),n=an("blur"),r=an("brightness"),o=an("borderColor"),i=an("borderRadius"),s=an("borderSpacing"),a=an("borderWidth"),c=an("contrast"),u=an("grayscale"),d=an("hueRotate"),f=an("invert"),p=an("gap"),g=an("gradientColorStops"),v=an("gradientColorStopPositions"),b=an("inset"),y=an("margin"),C=an("opacity"),S=an("padding"),w=an("saturate"),E=an("scale"),I=an("sepia"),T=an("skew"),A=an("space"),_=an("translate"),U=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],G=()=>["auto",mt,e],K=()=>[mt,e],ie=()=>["",ts,Ds],P=()=>["auto",Tu,mt],$=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],Z=()=>["solid","dashed","dotted","double","none"],x=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],L=()=>["start","end","center","between","around","evenly","stretch"],ne=()=>["","0",mt],se=()=>["auto","avoid","all","avoid-page","page","left","right","column"],fe=()=>[Tu,mt];return{cacheSize:500,separator:":",theme:{colors:[dh],spacing:[ts,Ds],blur:["none","",js,mt],brightness:fe(),borderColor:[t],borderRadius:["none","","full",js,mt],borderSpacing:K(),borderWidth:ie(),contrast:fe(),grayscale:ne(),hueRotate:fe(),invert:ne(),gap:K(),gradientColorStops:[t],gradientColorStopPositions:[lH,Ds],inset:G(),margin:G(),opacity:fe(),padding:K(),saturate:fe(),scale:fe(),sepia:ne(),skew:fe(),space:K(),translate:K()},classGroups:{aspect:[{aspect:["auto","square","video",mt]}],container:["container"],columns:[{columns:[js]}],"break-after":[{"break-after":se()}],"break-before":[{"break-before":se()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...$(),mt]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:U()}],"overscroll-x":[{"overscroll-x":U()}],"overscroll-y":[{"overscroll-y":U()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[b]}],"inset-x":[{"inset-x":[b]}],"inset-y":[{"inset-y":[b]}],start:[{start:[b]}],end:[{end:[b]}],top:[{top:[b]}],right:[{right:[b]}],bottom:[{bottom:[b]}],left:[{left:[b]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",uh,mt]}],basis:[{basis:G()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",mt]}],grow:[{grow:ne()}],shrink:[{shrink:ne()}],order:[{order:["first","last","none",uh,mt]}],"grid-cols":[{"grid-cols":[dh]}],"col-start-end":[{col:["auto",{span:["full",uh,mt]},mt]}],"col-start":[{"col-start":P()}],"col-end":[{"col-end":P()}],"grid-rows":[{"grid-rows":[dh]}],"row-start-end":[{row:["auto",{span:[uh,mt]},mt]}],"row-start":[{"row-start":P()}],"row-end":[{"row-end":P()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",mt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",mt]}],gap:[{gap:[p]}],"gap-x":[{"gap-x":[p]}],"gap-y":[{"gap-y":[p]}],"justify-content":[{justify:["normal",...L()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...L(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...L(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[S]}],px:[{px:[S]}],py:[{py:[S]}],ps:[{ps:[S]}],pe:[{pe:[S]}],pt:[{pt:[S]}],pr:[{pr:[S]}],pb:[{pb:[S]}],pl:[{pl:[S]}],m:[{m:[y]}],mx:[{mx:[y]}],my:[{my:[y]}],ms:[{ms:[y]}],me:[{me:[y]}],mt:[{mt:[y]}],mr:[{mr:[y]}],mb:[{mb:[y]}],ml:[{ml:[y]}],"space-x":[{"space-x":[A]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[A]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",mt,e]}],"min-w":[{"min-w":[mt,e,"min","max","fit"]}],"max-w":[{"max-w":[mt,e,"none","full","min","max","fit","prose",{screen:[js]},js]}],h:[{h:[mt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[mt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[mt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[mt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",js,Ds]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",tC]}],"font-family":[{font:[dh]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",mt]}],"line-clamp":[{"line-clamp":["none",Tu,tC]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",ts,mt]}],"list-image":[{"list-image":["none",mt]}],"list-style-type":[{list:["none","disc","decimal",mt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[C]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[C]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Z(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",ts,Ds]}],"underline-offset":[{"underline-offset":["auto",ts,mt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:K()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",mt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",mt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[C]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...$(),hH]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",dH]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},pH]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[v]}],"gradient-via-pos":[{via:[v]}],"gradient-to-pos":[{to:[v]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[C]}],"border-style":[{border:[...Z(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[C]}],"divide-style":[{divide:Z()}],"border-color":[{border:[o]}],"border-color-x":[{"border-x":[o]}],"border-color-y":[{"border-y":[o]}],"border-color-s":[{"border-s":[o]}],"border-color-e":[{"border-e":[o]}],"border-color-t":[{"border-t":[o]}],"border-color-r":[{"border-r":[o]}],"border-color-b":[{"border-b":[o]}],"border-color-l":[{"border-l":[o]}],"divide-color":[{divide:[o]}],"outline-style":[{outline:["",...Z()]}],"outline-offset":[{"outline-offset":[ts,mt]}],"outline-w":[{outline:[ts,Ds]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:ie()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[C]}],"ring-offset-w":[{"ring-offset":[ts,Ds]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",js,mH]}],"shadow-color":[{shadow:[dh]}],opacity:[{opacity:[C]}],"mix-blend":[{"mix-blend":[...x(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":x()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",js,mt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[f]}],saturate:[{saturate:[w]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[C]}],"backdrop-saturate":[{"backdrop-saturate":[w]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[s]}],"border-spacing-x":[{"border-spacing-x":[s]}],"border-spacing-y":[{"border-spacing-y":[s]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",mt]}],duration:[{duration:fe()}],ease:[{ease:["linear","in","out","in-out",mt]}],delay:[{delay:fe()}],animate:[{animate:["none","spin","ping","pulse","bounce",mt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[uh,mt]}],"translate-x":[{"translate-x":[_]}],"translate-y":[{"translate-y":[_]}],"skew-x":[{"skew-x":[T]}],"skew-y":[{"skew-y":[T]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",mt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",mt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":K()}],"scroll-mx":[{"scroll-mx":K()}],"scroll-my":[{"scroll-my":K()}],"scroll-ms":[{"scroll-ms":K()}],"scroll-me":[{"scroll-me":K()}],"scroll-mt":[{"scroll-mt":K()}],"scroll-mr":[{"scroll-mr":K()}],"scroll-mb":[{"scroll-mb":K()}],"scroll-ml":[{"scroll-ml":K()}],"scroll-p":[{"scroll-p":K()}],"scroll-px":[{"scroll-px":K()}],"scroll-py":[{"scroll-py":K()}],"scroll-ps":[{"scroll-ps":K()}],"scroll-pe":[{"scroll-pe":K()}],"scroll-pt":[{"scroll-pt":K()}],"scroll-pr":[{"scroll-pr":K()}],"scroll-pb":[{"scroll-pb":K()}],"scroll-pl":[{"scroll-pl":K()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",mt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[ts,Ds,tC]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},CH=tH(bH);function at(...t){return CH(W(t))}const rp="overflow-hidden",As="backdrop-blur-2xl backdrop-saturate-200",lI="bg-white/70 dark:bg-slate-800/70",Qi=W(rp,As,lI),SH=W(rp,As),EH=W(As,lI),wH="bg-acrylic-default-fallback-light/[98] dark:bg-acrylic-default-fallback-dark/[98]",IH="dark:bg-white/70  bg-slate-800/70",TH=W(rp,As,IH);W(As,lI);const _O="bg-accent-100/60 dark:bg-slate-800/50",_H=W(As,_O),ra=W(rp,As,_O),AH="bg-acrylic-thin-fallback-light/95 dark:bg-acrylic-thin-fallback-dark/[92]",AO="dark:bg-accent-900/60 bg-slate-800/50";W(As,AO);const kH=W(rp,As,AO),bf="relative flex items-center",Ho="text-foreground-800 fill-foreground-800 active:text-foreground-600 active:fill-foreground-600 dark:active:text-foreground-650 dark:active:fill-foreground-650",$k="text-slate-200 fill-slate-200 active:text-slate-300 active:fill-slate-300 dark:text-stone-800 dark:fill-stone-800 dark:active:text-stone-600 dark:active:fill-stone-600",xH="text-foreground-250 fill-foreground-250 active:text-foreground-350 active:fill-foreground-350 dark:text-foreground-750 dark:fill-foreground-750 dark:active:text-foreground-650 dark:active:fill-foreground-650",RH="text-accent-550 fill-accent-550 active:text-accent-450/80 active:fill-accent-450/80 dark:text-accent-850 dark:fill-accent-850 dark:active:text-accent-700 dark:active:fill-accent-700",Gp="shadow-button-light dark:shadow-button-dark",Gk="dark:shadow-button-light shadow-button-dark",NH="shadow-button-strong-light dark:shadow-button-dark",PH="text-cocoa-550 safe-hover:text-caramel-450 dark:text-slate-300 dark:active:text-slate-200",OH="bg-white/70 safe-hover:bg-caramel-200 active:bg-caramel-200/20 dark:bg-slate-450/30 dark:safe-hover:bg-midnight-800 dark:active:bg-midnight-800/20",MH="border-[0.5px] border-transparent safe-hover:border-caramel-400 dark:safe-hover:border-midnight-350",LH="text-caramel-600 fill-caramel-600 active:text-caramel-400 active:fill-caramel-400 dark:text-slate-200 dark:fill-text-slate-200 dark:active:text-slate-100 dark:active:fill-slate-100",DH="bg-caramel-200 safe-hover:bg-caramel-300 active:bg-caramel-300 dark:bg-slate-650 dark:safe-hover:bg-slate-400 dark:active:bg-slate-400",nC="bg-transparent safe-hover:bg-white/50 active:bg-white/35 dark:safe-hover:bg-black/30 dark:active:bg-black/20",Ac={default:`${Ho} ${Gp} bg-white/70 safe-hover:bg-white active:bg-white/60 dark:bg-slate-450/30 dark:safe-hover:bg-slate-450/40 dark:active:bg-slate-450/20`,strong:`${xH} ${NH} bg-stone-800 safe-hover:bg-black active:bg-stone-750 dark:bg-slate-600 dark:safe-hover:bg-slate-550 dark:active:bg-slate-600/80`,accent:`${RH} bg-accent-250 safe-hover:bg-accent-300 active:bg-accent-200 dark:bg-accent-550 dark:safe-hover:bg-accent-450 dark:active:bg-accent-600/80`,"overlay-bright":`${Ho} bg-white/40 safe-hover:bg-white/70 active:bg-white/30 dark:bg-white/8 dark:safe-hover:bg-white/10 dark:active:bg-white/5`,"overlay-bright-inverted":`${Ho} bg-white/40 safe-hover:bg-white/70 active:bg-white/30 dark:bg-black/35 dark:safe-hover:bg-black/60 dark:active:bg-black/25`,"overlay-dimmed":`${Ho} bg-black/8 safe-hover:bg-black/10 active:bg-black/5 dark:bg-black/35 dark:safe-hover:bg-black/60 dark:active:bg-black/25`,"overlay-dimmed-inverted":`${Ho} bg-black/8 safe-hover:bg-black/10 active:bg-black/5 dark:bg-white/8 dark:safe-hover:bg-white/10 dark:active:bg-white/5`,"subtle-bright":`${Ho} bg-transparent safe-hover:bg-white/50 active:bg-white/35 dark:safe-hover:bg-white/8 dark:active:bg-white/5`,"subtle-bright-inverted":`${Ho} ${nC}`,"subtle-dimmed":`${Ho} bg-transparent safe-hover:bg-black/5 active:bg-black/3 dark:safe-hover:bg-black/30 dark:active:bg-black/20`,"subtle-dimmed-inverted":`${Ho} bg-transparent safe-hover:bg-black/5 active:bg-black/3 dark:safe-hover:bg-white/8 dark:active:bg-white/5`,acrylic:`${Ho} ${Gp} ${nC}`,"acrylic-inverted":`${$k} ${Gk} bg-transparent dark:safe-hover:bg-white/50 dark:active:bg-white/35 safe-hover:bg-black/30 active:bg-black/20`,"acrylic-thin":`${Ho} ${Gp} ${nC}`,"acrylic-thin-inverted":`${$k} ${Gk} bg-transparent dark:safe-hover:bg-white/50 dark:active:bg-white/35 safe-hover:bg-black/30 active:bg-black/20`,chip:`${PH} ${OH} ${Gp} ${MH}`,alert:"bg-system-red-600 safe-hover:bg-system-red-650 active:bg-system-red-550","composer-selected":`${LH} ${DH}`},kO={acrylic:`${Qi}`,"acrylic-inverted":`${TH}`,"acrylic-thin":`${ra}`,"acrylic-thin-inverted":`${kH}`};function jH(t){return t in kO}const UH={start:"justify-start",center:"justify-center",end:"justify-end"},uI={"28-xxs":"text-xs","32-xs":"text-xs","36-sm":"text-xs","40-base":"text-sm","48-lg":"text-base","56-xl":"text-base","64-xxl":"text-base"},qs={"28-xxs":"gap-x-1.5","32-xs":"gap-x-1.5","36-sm":"gap-x-1.5","40-base":"gap-x-2","48-lg":"gap-x-3","56-xl":"gap-x-3","64-xxl":"gap-x-3"},dI={"28-xxs":`min-h-7 min-w-8 px-3 py-1 ${qs["28-xxs"]}`,"32-xs":`min-h-8 min-w-8 px-2.5 py-1 ${qs["32-xs"]}`,"36-sm":`min-h-9 min-w-9 px-2.5 py-1 ${qs["36-sm"]}`,"40-base":`min-h-10 min-w-10 px-3 py-2 ${qs["40-base"]}`,"48-lg":`min-h-12 min-w-12 px-3 py-2.5 ${qs["48-lg"]}`,"56-xl":`min-h-14 min-w-14 px-4 py-3.5 ${qs["56-xl"]}`,"64-xxl":`min-h-16 min-w-16 p-4 ${qs["64-xxl"]}`},FH={"28-xxs":"size-7","32-xs":"size-8","36-sm":"size-9","40-base":"size-10","48-lg":"size-12","56-xl":"size-14","64-xxl":"size-16"},T0={"28-xxs":"rounded-lg before:rounded-lg","32-xs":"rounded-lg before:rounded-lg","36-sm":"rounded-xl before:rounded-xl","40-base":"rounded-xl before:rounded-xl","48-lg":"rounded-3xl before:rounded-3xl","56-xl":"rounded-4xl before:rounded-4xl","64-xxl":"rounded-4xl before:rounded-4xl"},BH={none:"",regular:"border border-solid border-stone-350 dark:border-slate-600",strong:"border border-solid border-2 border-stroke-750"},Kk="rounded-full before:rounded-full",HH="opacity-40 pointer-events-none",Xv="before:absolute before:inset-0 before:pointer-events-none before:border before:border-transparent before:contrast-more:border-2 outline-2 outline-offset-1 focus-visible:z-[1] focus-visible:outline focus-visible:outline-stroke-900",Ue=m.forwardRef((t,e)=>{const{children:n,onClick:r,onFocus:o,onBlur:i,onKeyDown:s,onKeyUp:a,onMouseEnter:c,onMouseLeave:u,href:d,className:f,title:p,variant:g="rect",alignment:v="center",color:b="default",outline:y="none",size:C="40-base",disabled:S,id:w,role:E,testId:I,spatialNavigationAutofocus:T=!1,"aria-controls":A,"aria-expanded":_,"aria-haspopup":U,"aria-pressed":k,"aria-label":G,"aria-selected":K,onPointerDown:ie}=t,P=g==="circle"||g==="square",$=g==="circle"||g==="pill",Z=at(bf,Ac[b],uI[C],UH[v],P?FH[C]:dI[C],$?Kk:T0[C],Xv,S&&HH,BH[y],f);let x=n;if(jH(b)){const se=at(kO[b],$?Kk:T0[C]);x=h.jsxs(h.Fragment,{children:[h.jsx("div",{className:at("absolute inset-0",se)}),h.jsx("div",{className:`relative ${bf} ${qs[C]}`,children:n})]})}const{refCallback:L,focusable:ne}=Ed({autoRestoreFocus:!0,forceFocus:!0},e);return d!==void 0?h.jsx(aa,{id:w,onPointerDown:ie,"aria-controls":A,"aria-expanded":_,"aria-haspopup":U,href:d,ref:ne.ref,onClick:r,title:p,className:Z,"data-testid":I,"aria-label":G,"aria-selected":K,children:x}):h.jsx("button",{onPointerDown:ie,ref:L,id:w,"aria-controls":A,"aria-expanded":_,"aria-haspopup":U,"aria-pressed":k,"aria-selected":K,type:"button",className:Z,title:p,role:E,disabled:S,onClick:r,onFocus:o,onBlur:i,onKeyDown:s,onKeyUp:a,onMouseEnter:c,onMouseLeave:u,"data-testid":I,"data-spatial-navigation-autofocus":T,"aria-label":G,"data-spatial-focus-key":ne.focusKey,children:x})});Ue.displayName="Button";function zH({reason:t,onReload:e}){const{t:n}=He();return h.jsxs(h.Fragment,{children:[h.jsx("h1",{className:"pb-3 text-lg",children:n("authentication.accountChanged")}),h.jsx("p",{className:"pb-7",children:n(t==="login"?"authentication.signedInOtherTab":"authentication.signedOutOtherTab")}),h.jsx(Ue,{onClick:e,title:n("authentication.reloadToContinue"),variant:"pill",size:"48-lg",className:"w-full",children:n("authentication.reloadToContinue")})]})}const hI=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t},m.createElement("path",{fill:"currentColor",d:"M15.144 5.885c.62-.777 1.042-1.82.931-2.885-.909.045-2.018.6-2.66 1.377-.576.665-1.087 1.752-.954 2.772 1.02.089 2.04-.51 2.683-1.264ZM16.064 7.349c-1.482-.089-2.742.84-3.45.84-.707 0-1.79-.796-2.963-.774-1.525.022-2.94.884-3.714 2.256-1.592 2.744-.42 6.814 1.128 9.049.752 1.105 1.658 2.323 2.852 2.279 1.128-.044 1.57-.73 2.94-.73 1.371 0 1.77.73 2.963.708 1.238-.022 2.013-1.106 2.764-2.213.863-1.26 1.216-2.477 1.238-2.544-.022-.022-2.388-.93-2.41-3.65-.022-2.28 1.858-3.363 1.946-3.43-1.061-1.57-2.72-1.747-3.294-1.791Z"})),Nke=Object.freeze(Object.defineProperty({__proto__:null,default:hI},Symbol.toStringTag,{value:"Module"})),fI=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 25 24",...t},m.createElement("g",{clipPath:"url(#a)"},m.createElement("path",{fill:"#4285F4",d:"M20.5 12.2a8 8 0 0 0-.2-1.8h-8.1v3.3H17c-.1.8-.7 2-1.8 3l2.5 2 .2.1a9 9 0 0 0 2.6-6.6Z"}),m.createElement("path",{fill:"#34A853",d:"M12.2 21c2.3 0 4.3-.8 5.7-2.2l-2.7-2.2a5.2 5.2 0 0 1-8-2.8l-2.7 2.1v.1c1.4 3 4.3 5 7.7 5Z"}),m.createElement("path",{fill:"#FBBC05",d:"M7.2 13.8a5.7 5.7 0 0 1 0-3.6L4.5 7.8a9.2 9.2 0 0 0 0 8.1l2.7-2.2Z"}),m.createElement("path",{fill:"#EB4335",d:"M12.2 6.5c1.6 0 2.7.7 3.3 1.3L18 5.4A8.2 8.2 0 0 0 12.2 3C8.8 3 5.9 5 4.4 8l2.8 2.2a5.3 5.3 0 0 1 5-3.7Z"})),m.createElement("defs",null,m.createElement("clipPath",{id:"a"},m.createElement("path",{fill:"#fff",d:"M3.5 3h17v18h-17z"})))),Pke=Object.freeze(Object.defineProperty({__proto__:null,default:fI},Symbol.toStringTag,{value:"Module"})),Zv=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 25 24",...t},m.createElement("path",{fill:"#F25022",d:"M12.05 3H3.5v8.55h8.55V3Z"}),m.createElement("path",{fill:"#7FBA00",d:"M21.5 3h-8.55v8.55h8.55V3Z"}),m.createElement("path",{fill:"#00A4EF",d:"M12.05 12.45H3.5V21h8.55v-8.55Z"}),m.createElement("path",{fill:"#FFB900",d:"M21.5 12.45h-8.55V21h8.55v-8.55Z"})),Oke=Object.freeze(Object.defineProperty({__proto__:null,default:Zv},Symbol.toStringTag,{value:"Module"})),xO="140e65af-45d1-4427-bf08-3e7295db6836/ChatAI.ReadWrite",RO={auth:{clientId:"14638111-3389-403d-b206-a6a71d9f8f16",authority:"https://login.microsoftonline.com/common",navigateToLoginRequestUrl:!1},system:{allowNativeBroker:!1},cache:{cacheLocation:"localStorage"}},pI={scopes:[xO],extraQueryParameters:{lw:"1",coa:"1",nopa:"2",fl:"easi2_nowld",cobrandid:"8c0b039e-5a73-4399-9b56-7e237be2cd06"},prompt:"select_account",redirectUri:typeof window<"u"?window.location.origin:void 0},VH={scopes:[xO],prompt:"none",authority:"https://login.microsoftonline.com/consumers",redirectUri:typeof window<"u"?window.location.origin:void 0},Wk={scopes:["User.Read"]},$H={scopes:["OneDrive.ReadWrite"],authority:"https://login.microsoftonline.com/consumers"},mI={graphMeApiSuffix:"/me",graphMeImageApiSuffix:"/me/photo/$value",graphMeLicenseDetails:"/me/licenseDetails"},NO={appName:"copilot_studio",enableMATS:!0,appVersion:"0.0.0"},GH="IalDS3vRtEI5X0zvsmGG7zJP9UrHTcei",KH="auth.copilot.microsoft.com",PO="https://copilot.microsoft.com",WH={clientId:GH,domain:KH,cacheLocation:"localstorage",useRefreshTokens:!0,useRefreshTokensFallback:!0},OO="openid profile email offline_access ChatAI.ReadWrite",MO=typeof window<"u"?window.location.origin:void 0,Cf={authorizationParams:{audience:PO,scope:OO,redirect_uri:MO}},qH={authorizationParams:{audience:PO,scope:OO,redirect_uri:MO,prompt:"select_account"}},_0="cp-pro";function YH(t){switch(t){case"login":return pI;case"graph":return Wk;case"oneDrive":return $H;default:return Wk}}function nl(){return!!ye.instance().config().enableAuth0}var ey=cF();const oa=()=>{},dn=oa(),rC=Object,je=t=>t===dn,Ir=t=>typeof t=="function",io=(t,e)=>({...t,...e}),QH=t=>Ir(t.then),Kp=new WeakMap;let JH=0;const Sf=t=>{const e=typeof t,n=t&&t.constructor,r=n==Date;let o,i;if(rC(t)===t&&!r&&n!=RegExp){if(o=Kp.get(t),o)return o;if(o=++JH+"~",Kp.set(t,o),n==Array){for(o="@",i=0;i<t.length;i++)o+=Sf(t[i])+",";Kp.set(t,o)}if(n==rC){o="#";const s=rC.keys(t).sort();for(;!je(i=s.pop());)je(t[i])||(o+=i+":"+Sf(t[i])+",");Kp.set(t,o)}}else o=r?t.toJSON():e=="symbol"?t.toString():e=="string"?JSON.stringify(t):""+t;return o},Eo=new WeakMap,oC={},Wp={},gI="undefined",ty=typeof window!=gI,A0=typeof document!=gI,XH=()=>ty&&typeof window.requestAnimationFrame!=gI,Ii=(t,e)=>{const n=Eo.get(t);return[()=>!je(e)&&t.get(e)||oC,r=>{if(!je(e)){const o=t.get(e);e in Wp||(Wp[e]=o),n[5](e,io(o,r),o||oC)}},n[6],()=>!je(e)&&e in Wp?Wp[e]:!je(e)&&t.get(e)||oC]};let k0=!0;const ZH=()=>k0,[x0,R0]=ty&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[oa,oa],ez=()=>{const t=A0&&document.visibilityState;return je(t)||t!=="hidden"},tz=t=>(A0&&document.addEventListener("visibilitychange",t),x0("focus",t),()=>{A0&&document.removeEventListener("visibilitychange",t),R0("focus",t)}),nz=t=>{const e=()=>{k0=!0,t()},n=()=>{k0=!1};return x0("online",e),x0("offline",n),()=>{R0("online",e),R0("offline",n)}},rz={isOnline:ZH,isVisible:ez},oz={initFocus:tz,initReconnect:nz},kc=!el.useId,ys=!ty||"Deno"in window,vI=t=>XH()?window.requestAnimationFrame(t):setTimeout(t,1),Ao=ys?m.useEffect:m.useLayoutEffect,iC=typeof navigator<"u"&&navigator.connection,qk=!ys&&iC&&(["slow-2g","2g"].includes(iC.effectiveType)||iC.saveData),bs=t=>{if(Ir(t))try{t=t()}catch{t=""}const e=t;return t=typeof t=="string"?t:(Array.isArray(t)?t.length:t)?Sf(t):"",[t,e]};let iz=0;const xc=()=>++iz,LO=0,DO=1,jO=2,sz=3;var Tr={__proto__:null,ERROR_REVALIDATE_EVENT:sz,FOCUS_EVENT:LO,MUTATE_EVENT:jO,RECONNECT_EVENT:DO};async function ny(...t){const[e,n,r,o]=t,i=io({populateCache:!0,throwOnError:!0},typeof o=="boolean"?{revalidate:o}:o||{});let s=i.populateCache;const a=i.rollbackOnError;let c=i.optimisticData;const u=p=>typeof a=="function"?a(p):a!==!1,d=i.throwOnError;if(Ir(n)){const p=n,g=[],v=e.keys();for(const b of v)!/^\$(inf|sub)\$/.test(b)&&p(e.get(b)._k)&&g.push(b);return Promise.all(g.map(f))}return f(n);async function f(p){const[g]=bs(p);if(!g)return;const[v,b]=Ii(e,g),[y,C,S,w]=Eo.get(e),E=()=>{const ie=y[g];return(Ir(i.revalidate)?i.revalidate(v().data,p):i.revalidate!==!1)&&(delete S[g],delete w[g],ie&&ie[0])?ie[0](jO).then(()=>v().data):v().data};if(t.length<3)return E();let I=r,T;const A=xc();C[g]=[A,0];const _=!je(c),U=v(),k=U.data,G=U._c,K=je(G)?k:G;if(_&&(c=Ir(c)?c(K,k):c,b({data:c,_c:K})),Ir(I))try{I=I(K)}catch(ie){T=ie}if(I&&QH(I))if(I=await I.catch(ie=>{T=ie}),A!==C[g][0]){if(T)throw T;return I}else T&&_&&u(T)&&(s=!0,b({data:K,_c:dn}));if(s&&!T)if(Ir(s)){const ie=s(I,K);b({data:ie,error:dn,_c:dn})}else b({data:I,error:dn,_c:dn});if(C[g][1]=xc(),Promise.resolve(E()).then(()=>{b({_c:dn})}),T){if(d)throw T;return}return I}}const Yk=(t,e)=>{for(const n in t)t[n][0]&&t[n][0](e)},az=(t,e)=>{if(!Eo.has(t)){const n=io(oz,e),r={},o=ny.bind(dn,t);let i=oa;const s={},a=(d,f)=>{const p=s[d]||[];return s[d]=p,p.push(f),()=>p.splice(p.indexOf(f),1)},c=(d,f,p)=>{t.set(d,f);const g=s[d];if(g)for(const v of g)v(f,p)},u=()=>{if(!Eo.has(t)&&(Eo.set(t,[r,{},{},{},o,c,a]),!ys)){const d=n.initFocus(setTimeout.bind(dn,Yk.bind(dn,r,LO))),f=n.initReconnect(setTimeout.bind(dn,Yk.bind(dn,r,DO)));i=()=>{d&&d(),f&&f(),Eo.delete(t)}}};return u(),[t,o,u,i]}return[t,Eo.get(t)[4]]},cz=(t,e,n,r,o)=>{const i=n.errorRetryCount,s=o.retryCount,a=~~((Math.random()+.5)*(1<<(s<8?s:8)))*n.errorRetryInterval;!je(i)&&s>i||setTimeout(r,a,o)},lz=(t,e)=>Sf(t)==Sf(e),[yI,uz]=az(new Map),dz=io({onLoadingSlow:oa,onSuccess:oa,onError:oa,onErrorRetry:cz,onDiscarded:oa,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:qk?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:qk?5e3:3e3,compare:lz,isPaused:()=>!1,cache:yI,mutate:uz,fallback:{}},rz),hz=(t,e)=>{const n=io(t,e);if(e){const{use:r,fallback:o}=t,{use:i,fallback:s}=e;r&&i&&(n.use=r.concat(i)),o&&s&&(n.fallback=io(o,s))}return n},fz=m.createContext({}),UO="$inf$",FO=ty&&window.__SWR_DEVTOOLS_USE__,pz=FO?window.__SWR_DEVTOOLS_USE__:[],mz=()=>{FO&&(window.__SWR_DEVTOOLS_REACT__=el)},BO=t=>Ir(t[1])?[t[0],t[1],t[2]||{}]:[t[0],null,(t[1]===null?t[2]:t[1])||{}],bI=()=>io(dz,m.useContext(fz)),gz=t=>(e,n,r)=>t(e,n&&((...i)=>{const[s]=bs(e),[,,,a]=Eo.get(yI);if(s.startsWith(UO))return n(...i);const c=a[s];return je(c)?n(...i):(delete a[s],c)}),r),vz=pz.concat(gz),CI=t=>function(...n){const r=bI(),[o,i,s]=BO(n),a=hz(r,s);let c=t;const{use:u}=a,d=(u||[]).concat(vz);for(let f=d.length;f--;)c=d[f](c);return c(o,i||a.fetcher||null,a)},SI=(t,e,n)=>{const r=e[t]||(e[t]=[]);return r.push(n),()=>{const o=r.indexOf(n);o>=0&&(r[o]=r[r.length-1],r.pop())}},HO=(t,e)=>(...n)=>{const[r,o,i]=BO(n),s=(i.use||[]).concat(e);return t(r,o,{...i,use:s})};mz();const Qk=el.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),sC={dedupe:!0},yz=(t,e,n)=>{const{cache:r,compare:o,suspense:i,fallbackData:s,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:f,keepPreviousData:p}=n,[g,v,b,y]=Eo.get(r),[C,S]=bs(t),w=m.useRef(!1),E=m.useRef(!1),I=m.useRef(C),T=m.useRef(e),A=m.useRef(n),_=()=>A.current,U=()=>_().isVisible()&&_().isOnline(),[k,G,K,ie]=Ii(r,C),P=m.useRef({}).current,$=je(s)?n.fallback[C]:s,Z=(Q,oe)=>{for(const we in P){const N=we;if(N==="data"){if(!o(Q[N],oe[N])&&(!je(Q[N])||!o(Se,oe[N])))return!1}else if(oe[N]!==Q[N])return!1}return!0},x=m.useMemo(()=>{const Q=!C||!e?!1:je(a)?_().isPaused()||i?!1:je(c)?!0:c:a,oe=Y=>{const Ie=io(Y);return delete Ie._k,Q?{isValidating:!0,isLoading:!0,...Ie}:Ie},we=k(),N=ie(),te=oe(we),Ce=we===N?te:oe(N);let D=te;return[()=>{const Y=oe(k());return Z(Y,D)?(D.data=Y.data,D.isLoading=Y.isLoading,D.isValidating=Y.isValidating,D.error=Y.error,D):(D=Y,Y)},()=>Ce]},[r,C]),L=ey.useSyncExternalStore(m.useCallback(Q=>K(C,(oe,we)=>{Z(we,oe)||Q()}),[r,C]),x[0],x[1]),ne=!w.current,se=g[C]&&g[C].length>0,fe=L.data,X=je(fe)?$:fe,ge=L.error,Oe=m.useRef(X),Se=p?je(fe)?Oe.current:fe:X,Fe=se&&!je(ge)?!1:ne&&!je(a)?a:_().isPaused()?!1:i?je(X)?!1:c:je(X)||c,Re=!!(C&&e&&ne&&Fe),Ve=je(L.isValidating)?Re:L.isValidating,he=je(L.isLoading)?Re:L.isLoading,B=m.useCallback(async Q=>{const oe=T.current;if(!C||!oe||E.current||_().isPaused())return!1;let we,N,te=!0;const Ce=Q||{},D=!b[C]||!Ce.dedupe,Y=()=>kc?!E.current&&C===I.current&&w.current:C===I.current,Ie={isValidating:!1,isLoading:!1},Je=()=>{G(Ie)},it=()=>{const Be=b[C];Be&&Be[1]===N&&delete b[C]},st={isValidating:!0};je(k().data)&&(st.isLoading=!0);try{if(D&&(G(st),n.loadingTimeout&&je(k().data)&&setTimeout(()=>{te&&Y()&&_().onLoadingSlow(C,n)},n.loadingTimeout),b[C]=[oe(S),xc()]),[we,N]=b[C],we=await we,D&&setTimeout(it,n.dedupingInterval),!b[C]||b[C][1]!==N)return D&&Y()&&_().onDiscarded(C),!1;Ie.error=dn;const Be=v[C];if(!je(Be)&&(N<=Be[0]||N<=Be[1]||Be[1]===0))return Je(),D&&Y()&&_().onDiscarded(C),!1;const $e=k().data;Ie.data=o($e,we)?$e:we,D&&Y()&&_().onSuccess(we,C,n)}catch(Be){it();const $e=_(),{shouldRetryOnError:wt}=$e;$e.isPaused()||(Ie.error=Be,D&&Y()&&($e.onError(Be,C,$e),(wt===!0||Ir(wt)&&wt(Be))&&(!_().revalidateOnFocus||!_().revalidateOnReconnect||U())&&$e.onErrorRetry(Be,C,$e,nn=>{const _t=g[C];_t&&_t[0]&&_t[0](Tr.ERROR_REVALIDATE_EVENT,nn)},{retryCount:(Ce.retryCount||0)+1,dedupe:!0})))}return te=!1,Je(),!0},[C,r]),Pe=m.useCallback((...Q)=>ny(r,I.current,...Q),[]);if(Ao(()=>{T.current=e,A.current=n,je(fe)||(Oe.current=fe)}),Ao(()=>{if(!C)return;const Q=B.bind(dn,sC);let oe=0;const N=SI(C,g,(te,Ce={})=>{if(te==Tr.FOCUS_EVENT){const D=Date.now();_().revalidateOnFocus&&D>oe&&U()&&(oe=D+_().focusThrottleInterval,Q())}else if(te==Tr.RECONNECT_EVENT)_().revalidateOnReconnect&&U()&&Q();else{if(te==Tr.MUTATE_EVENT)return B();if(te==Tr.ERROR_REVALIDATE_EVENT)return B(Ce)}});return E.current=!1,I.current=C,w.current=!0,G({_k:S}),Fe&&(je(X)||ys?Q():vI(Q)),()=>{E.current=!0,N()}},[C]),Ao(()=>{let Q;function oe(){const N=Ir(u)?u(k().data):u;N&&Q!==-1&&(Q=setTimeout(we,N))}function we(){!k().error&&(d||_().isVisible())&&(f||_().isOnline())?B(sC).then(oe):oe()}return oe(),()=>{Q&&(clearTimeout(Q),Q=-1)}},[u,d,f,C]),m.useDebugValue(Se),i&&je(X)&&C){if(!kc&&ys)throw new Error("Fallback data is required when using suspense in SSR.");T.current=e,A.current=n,E.current=!1;const Q=y[C];if(!je(Q)){const oe=Pe(Q);Qk(oe)}if(je(ge)){const oe=B(sC);je(Se)||(oe.status="fulfilled",oe.value=!0),Qk(oe)}else throw ge}return{mutate:Pe,get data(){return P.data=!0,Se},get error(){return P.error=!0,ge},get isValidating(){return P.isValidating=!0,Ve},get isLoading(){return P.isLoading=!0,he}}},bz=CI(yz),Jk=kc?t=>{t()}:el.startTransition,Cz=t=>{const[,e]=m.useState({}),n=m.useRef(!1),r=m.useRef(t),o=m.useRef({data:!1,error:!1,isValidating:!1}),i=m.useCallback(s=>{let a=!1;const c=r.current;for(const u in s){const d=u;c[d]!==s[d]&&(c[d]=s[d],o.current[d]&&(a=!0))}a&&!n.current&&e({})},[]);return Ao(()=>(n.current=!1,()=>{n.current=!0})),[r,o.current,i]},Sz=()=>(t,e,n={})=>{const{mutate:r}=bI(),o=m.useRef(t),i=m.useRef(e),s=m.useRef(n),a=m.useRef(0),[c,u,d]=Cz({data:dn,error:dn,isMutating:!1}),f=c.current,p=m.useCallback(async(v,b)=>{const[y,C]=bs(o.current);if(!i.current)throw new Error("Can’t trigger the mutation: missing fetcher.");if(!y)throw new Error("Can’t trigger the mutation: missing key.");const S=io(io({populateCache:!1,throwOnError:!0},s.current),b),w=xc();a.current=w,d({isMutating:!0});try{const E=await r(y,i.current(C,{arg:v}),io(S,{throwOnError:!0}));return a.current<=w&&(Jk(()=>d({data:E,isMutating:!1,error:void 0})),S.onSuccess==null||S.onSuccess.call(S,E,y,S)),E}catch(E){if(a.current<=w&&(Jk(()=>d({error:E,isMutating:!1})),S.onError==null||S.onError.call(S,E,y,S),S.throwOnError))throw E}},[]),g=m.useCallback(()=>{a.current=xc(),d({data:dn,error:dn,isMutating:!1})},[]);return Ao(()=>{o.current=t,i.current=e,s.current=n}),{trigger:p,reset:g,get data(){return u.data=!0,f.data},get error(){return u.error=!0,f.error},get isMutating(){return u.isMutating=!0,f.isMutating}}},EI=HO(bz,Sz);var zO=Symbol.for("immer-nothing"),Xk=Symbol.for("immer-draftable"),Ft=Symbol.for("immer-state");function wo(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var qu=Object.getPrototypeOf;function Yu(t){return!!t&&!!t[Ft]}function Cs(t){var e;return t?VO(t)||Array.isArray(t)||!!t[Xk]||!!((e=t.constructor)!=null&&e[Xk])||oy(t)||iy(t):!1}var Ez=Object.prototype.constructor.toString();function VO(t){if(!t||typeof t!="object")return!1;const e=qu(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Ez}function Ef(t,e){ry(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function ry(t){const e=t[Ft];return e?e.type_:Array.isArray(t)?1:oy(t)?2:iy(t)?3:0}function N0(t,e){return ry(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function $O(t,e,n){const r=ry(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function wz(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function oy(t){return t instanceof Map}function iy(t){return t instanceof Set}function Zn(t){return t.copy_||t.base_}function P0(t,e){if(oy(t))return new Map(t);if(iy(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=VO(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Ft];let o=Reflect.ownKeys(r);for(let i=0;i<o.length;i++){const s=o[i],a=r[s];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[s]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[s]})}return Object.create(qu(t),r)}else{const r=qu(t);if(r!==null&&n)return{...t};const o=Object.create(r);return Object.assign(o,t)}}function wI(t,e=!1){return sy(t)||Yu(t)||!Cs(t)||(ry(t)>1&&(t.set=t.add=t.clear=t.delete=Iz),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>wI(r,!0))),t}function Iz(){wo(2)}function sy(t){return Object.isFrozen(t)}var O0={};function Rc(t){const e=O0[t];return e||wo(0,t),e}function Tz(t,e){O0[t]||(O0[t]=e)}var wf;function fg(){return wf}function _z(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Zk(t,e){e&&(Rc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function M0(t){L0(t),t.drafts_.forEach(Az),t.drafts_=null}function L0(t){t===wf&&(wf=t.parent_)}function e1(t){return wf=_z(wf,t)}function Az(t){const e=t[Ft];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function t1(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Ft].modified_&&(M0(e),wo(4)),Cs(t)&&(t=pg(e,t),e.parent_||mg(e,t)),e.patches_&&Rc("Patches").generateReplacementPatches_(n[Ft].base_,t,e.patches_,e.inversePatches_)):t=pg(e,n,[]),M0(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==zO?t:void 0}function pg(t,e,n){if(sy(e))return e;const r=e[Ft];if(!r)return Ef(e,(o,i)=>n1(t,r,e,o,i,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return mg(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const o=r.copy_;let i=o,s=!1;r.type_===3&&(i=new Set(o),o.clear(),s=!0),Ef(i,(a,c)=>n1(t,r,o,a,c,n,s)),mg(t,o,!1),n&&t.patches_&&Rc("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function n1(t,e,n,r,o,i,s){if(Yu(o)){const a=i&&e&&e.type_!==3&&!N0(e.assigned_,r)?i.concat(r):void 0,c=pg(t,o,a);if($O(n,r,c),Yu(c))t.canAutoFreeze_=!1;else return}else s&&n.add(o);if(Cs(o)&&!sy(o)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;pg(t,o),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&mg(t,o)}}function mg(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&wI(e,n)}function kz(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:fg(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let o=r,i=II;n&&(o=[r],i=If);const{revoke:s,proxy:a}=Proxy.revocable(o,i);return r.draft_=a,r.revoke_=s,a}var II={get(t,e){if(e===Ft)return t;const n=Zn(t);if(!N0(n,e))return xz(t,n,e);const r=n[e];return t.finalized_||!Cs(r)?r:r===aC(t.base_,e)?(cC(t),t.copy_[e]=Tf(r,t)):r},has(t,e){return e in Zn(t)},ownKeys(t){return Reflect.ownKeys(Zn(t))},set(t,e,n){const r=GO(Zn(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const o=aC(Zn(t),e),i=o==null?void 0:o[Ft];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(wz(n,o)&&(n!==void 0||N0(t.base_,e)))return!0;cC(t),cs(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return aC(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,cC(t),cs(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Zn(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){wo(11)},getPrototypeOf(t){return qu(t.base_)},setPrototypeOf(){wo(12)}},If={};Ef(II,(t,e)=>{If[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});If.deleteProperty=function(t,e){return If.set.call(this,t,e,void 0)};If.set=function(t,e,n){return II.set.call(this,t[0],e,n,t[0])};function aC(t,e){const n=t[Ft];return(n?Zn(n):t)[e]}function xz(t,e,n){var o;const r=GO(e,n);return r?"value"in r?r.value:(o=r.get)==null?void 0:o.call(t.draft_):void 0}function GO(t,e){if(!(e in t))return;let n=qu(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=qu(n)}}function cs(t){t.modified_||(t.modified_=!0,t.parent_&&cs(t.parent_))}function cC(t){t.copy_||(t.copy_=P0(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Rz=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const s=this;return function(c=i,...u){return s.produce(c,d=>n.call(this,d,...u))}}typeof n!="function"&&wo(6),r!==void 0&&typeof r!="function"&&wo(7);let o;if(Cs(e)){const i=e1(this),s=Tf(e,void 0);let a=!0;try{o=n(s),a=!1}finally{a?M0(i):L0(i)}return Zk(i,r),t1(o,i)}else if(!e||typeof e!="object"){if(o=n(e),o===void 0&&(o=e),o===zO&&(o=void 0),this.autoFreeze_&&wI(o,!0),r){const i=[],s=[];Rc("Patches").generateReplacementPatches_(e,o,i,s),r(i,s)}return o}else wo(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(s,...a)=>this.produceWithPatches(s,c=>e(c,...a));let r,o;return[this.produce(e,n,(s,a)=>{r=s,o=a}),r,o]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Cs(t)||wo(8),Yu(t)&&(t=Nz(t));const e=e1(this),n=Tf(t,void 0);return n[Ft].isManual_=!0,L0(e),n}finishDraft(t,e){const n=t&&t[Ft];(!n||!n.isManual_)&&wo(9);const{scope_:r}=n;return Zk(r,e),t1(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const o=e[n];if(o.path.length===0&&o.op==="replace"){t=o.value;break}}n>-1&&(e=e.slice(n+1));const r=Rc("Patches").applyPatches_;return Yu(t)?r(t,e):this.produce(t,o=>r(o,e))}};function Tf(t,e){const n=oy(t)?Rc("MapSet").proxyMap_(t,e):iy(t)?Rc("MapSet").proxySet_(t,e):kz(t,e);return(e?e.scope_:fg()).drafts_.push(n),n}function Nz(t){return Yu(t)||wo(10,t),KO(t)}function KO(t){if(!Cs(t)||sy(t))return t;const e=t[Ft];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=P0(t,e.scope_.immer_.useStrictShallowCopy_)}else n=P0(t,!0);return Ef(n,(r,o)=>{$O(n,r,KO(o))}),e&&(e.finalized_=!1),n}function Pz(){class t extends Map{constructor(c,u){super(),this[Ft]={type_:2,parent_:u,scope_:u?u.scope_:fg(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:c,draft_:this,isManual_:!1,revoked_:!1}}get size(){return Zn(this[Ft]).size}has(c){return Zn(this[Ft]).has(c)}set(c,u){const d=this[Ft];return s(d),(!Zn(d).has(c)||Zn(d).get(c)!==u)&&(n(d),cs(d),d.assigned_.set(c,!0),d.copy_.set(c,u),d.assigned_.set(c,!0)),this}delete(c){if(!this.has(c))return!1;const u=this[Ft];return s(u),n(u),cs(u),u.base_.has(c)?u.assigned_.set(c,!1):u.assigned_.delete(c),u.copy_.delete(c),!0}clear(){const c=this[Ft];s(c),Zn(c).size&&(n(c),cs(c),c.assigned_=new Map,Ef(c.base_,u=>{c.assigned_.set(u,!1)}),c.copy_.clear())}forEach(c,u){const d=this[Ft];Zn(d).forEach((f,p,g)=>{c.call(u,this.get(p),p,this)})}get(c){const u=this[Ft];s(u);const d=Zn(u).get(c);if(u.finalized_||!Cs(d)||d!==u.base_.get(c))return d;const f=Tf(d,u);return n(u),u.copy_.set(c,f),f}keys(){return Zn(this[Ft]).keys()}values(){const c=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const u=c.next();return u.done?u:{done:!1,value:this.get(u.value)}}}}entries(){const c=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const u=c.next();if(u.done)return u;const d=this.get(u.value);return{done:!1,value:[u.value,d]}}}}[Symbol.iterator](){return this.entries()}}function e(a,c){return new t(a,c)}function n(a){a.copy_||(a.assigned_=new Map,a.copy_=new Map(a.base_))}class r extends Set{constructor(c,u){super(),this[Ft]={type_:3,parent_:u,scope_:u?u.scope_:fg(),modified_:!1,finalized_:!1,copy_:void 0,base_:c,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return Zn(this[Ft]).size}has(c){const u=this[Ft];return s(u),u.copy_?!!(u.copy_.has(c)||u.drafts_.has(c)&&u.copy_.has(u.drafts_.get(c))):u.base_.has(c)}add(c){const u=this[Ft];return s(u),this.has(c)||(i(u),cs(u),u.copy_.add(c)),this}delete(c){if(!this.has(c))return!1;const u=this[Ft];return s(u),i(u),cs(u),u.copy_.delete(c)||(u.drafts_.has(c)?u.copy_.delete(u.drafts_.get(c)):!1)}clear(){const c=this[Ft];s(c),Zn(c).size&&(i(c),cs(c),c.copy_.clear())}values(){const c=this[Ft];return s(c),i(c),c.copy_.values()}entries(){const c=this[Ft];return s(c),i(c),c.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(c,u){const d=this.values();let f=d.next();for(;!f.done;)c.call(u,f.value,f.value,this),f=d.next()}}function o(a,c){return new r(a,c)}function i(a){a.copy_||(a.copy_=new Set,a.base_.forEach(c=>{if(Cs(c)){const u=Tf(c,a);a.drafts_.set(c,u),a.copy_.add(u)}else a.copy_.add(c)}))}function s(a){a.revoked_&&wo(3,JSON.stringify(Zn(a)))}Tz("MapSet",{proxyMap_:e,proxySet_:o})}var ao=new Rz,xo=ao.produce;ao.produceWithPatches.bind(ao);ao.setAutoFreeze.bind(ao);ao.setUseStrictShallowCopy.bind(ao);ao.applyPatches.bind(ao);ao.createDraft.bind(ao);ao.finishDraft.bind(ao);function ay(t){const e=M(t,(n,r,o)=>r(e,xo(n(e),typeof o=="function"?o:()=>o)));return e}function op(t,e){const n=_e(t);return m.useCallback(r=>n(xo(r)),[n])}const ip={Namibia:"NA","South Africa":"ZA",Cameroon:"CM",Japan:"JP",Ghana:"GH",Ethiopia:"ET","United States":"US","United Arab Emirates":"AE",Bahrain:"BH",Djibouti:"DJ",Algeria:"DZ",Egypt:"EG","Western Sahara":"EH",Eritrea:"ER",Israel:"IL",Iraq:"IQ",Jordan:"JO",Comoros:"KM",Kuwait:"KW",Lebanon:"LB",Libya:"LY",Morocco:"MA",Mauritania:"MR",Oman:"OM","Palestinian Territories":"PS",Qatar:"QA","Saudi Arabia":"SA",Sudan:"SD",Somalia:"SO","South Sudan":"SS",Syria:"SY",Chad:"TD",Tunisia:"TN",Yemen:"YE",Chile:"CL",India:"IN",Tanzania:"TZ",Spain:"ES",Azerbaijan:"AZ",Russia:"RU",Belarus:"BY",Zambia:"ZM",Bulgaria:"BG",Mali:"ML",Bangladesh:"BD","China mainland":"CN",France:"FR","Bosnia & Herzegovina":"BA",Andorra:"AD",Italy:"IT",Philippines:"PH",Uganda:"UG",Iran:"IR",Czechia:"CZ","United Kingdom":"GB",Denmark:"DK",Greenland:"GL",Kenya:"KE",Austria:"AT",Belgium:"BE",Switzerland:"CH",Germany:"DE",Liechtenstein:"LI",Luxembourg:"LU",Niger:"NE",Maldives:"MV",Senegal:"SN",Bhutan:"BT",Togo:"TG",Cyprus:"CY",Greece:"GR","Antigua & Barbuda":"AG",Anguilla:"AI",Albania:"AL",Argentina:"AR","American Samoa":"AS",Australia:"AU",Barbados:"BB",Burundi:"BI",Bermuda:"BM",Brunei:"BN",Brazil:"BR",Bahamas:"BS",Botswana:"BW",Belize:"BZ",Canada:"CA","Cocos (Keeling) Islands":"CC","Cook Islands":"CK",Colombia:"CO","Cape Verde":"CV","Christmas Island":"CX","Diego Garcia":"DG",Dominica:"DM",Estonia:"EE",Finland:"FI",Fiji:"FJ","Falkland Islands":"FK",Micronesia:"FM",Grenada:"GD",Guernsey:"GG",Gibraltar:"GI",Gambia:"GM",Guam:"GU",Guyana:"GY","Hong Kong":"HK",Hungary:"HU",Indonesia:"ID",Ireland:"IE","Isle of Man":"IM","Chagos Archipelago":"IO",Jersey:"JE",Jamaica:"JM",Kiribati:"KI","St. Kitts & Nevis":"KN","South Korea":"KR","Cayman Islands":"KY","St. Lucia":"LC",Liberia:"LR",Lesotho:"LS",Lithuania:"LT",Latvia:"LV",Madagascar:"MG","Marshall Islands":"MH","Myanmar (Burma)":"MM",Macao:"MO","Northern Mariana Islands":"MP",Montserrat:"MS",Malta:"MT",Mauritius:"MU",Malawi:"MW",Mexico:"MX",Malaysia:"MY","Norfolk Island":"NF",Nigeria:"NG",Netherlands:"NL",Norway:"NO",Nauru:"NR",Niue:"NU","New Zealand":"NZ","Papua New Guinea":"PG",Pakistan:"PK",Poland:"PL","Pitcairn Islands":"PN","Puerto Rico":"PR",Portugal:"PT",Palau:"PW",Rwanda:"RW","Solomon Islands":"SB",Seychelles:"SC",Sweden:"SE",Singapore:"SG","St. Helena":"SH",Slovenia:"SI",Slovakia:"SK","Sierra Leone":"SL","Sint Maarten":"SX",Eswatini:"SZ","Turks & Caicos Islands":"TC",Thailand:"TH",Tokelau:"TK",Tonga:"TO",Türkiye:"TR","Trinidad & Tobago":"TT",Tuvalu:"TV",Taiwan:"TW",Ukraine:"UA","U.S. Outlying Islands":"UM","St. Vincent & Grenadines":"VC","British Virgin Islands":"VG","U.S. Virgin Islands":"VI",Vanuatu:"VU",Samoa:"WS",Zimbabwe:"ZW",Bolivia:"BO","Caribbean Netherlands":"BQ","Costa Rica":"CR",Cuba:"CU",Curaçao:"CW","Dominican Republic":"DO","Ceuta & Melilla":"EA",Ecuador:"EC","Equatorial Guinea":"GQ",Guatemala:"GT",Honduras:"HN",Haiti:"HT","Canary Islands":"IC",Nicaragua:"NI",Panama:"PA",Peru:"PE",Paraguay:"PY","El Salvador":"SV",Uruguay:"UY",Venezuela:"VE",Afghanistan:"AF","Burkina Faso":"BF",Guinea:"GN","Guinea-Bissau":"GW","Faroe Islands":"FO",Benin:"BJ","St. Barthélemy":"BL","Congo - Kinshasa":"CD","Central African Republic":"CF","Congo - Brazzaville":"CG","Côte d'Ivoire":"CI",Gabon:"GA","French Guiana":"GF",Guadeloupe:"GP",Monaco:"MC","St. Martin":"MF",Martinique:"MQ","New Caledonia":"NC","French Polynesia":"PF","St. Pierre & Miquelon":"PM",Réunion:"RE","Wallis & Futuna":"WF",Mayotte:"YT",Croatia:"HR",Armenia:"AM",Iceland:"IS","San Marino":"SM","Vatican City":"VA",Georgia:"GE",Kazakhstan:"KZ",Cambodia:"KH","North Korea":"KP",Kyrgyzstan:"KG",Angola:"AO",Laos:"LA",Mozambique:"MZ","North Macedonia":"MK",Mongolia:"MN","Svalbard & Jan Mayen":"SJ",Nepal:"NP",Aruba:"AW",Suriname:"SR","São Tomé & Príncipe":"ST","Timor-Leste":"TL",Moldova:"MD",Romania:"RO","Sri Lanka":"LK",Kosovo:"XK",Montenegro:"ME",Serbia:"RS","Åland Islands":"AX",Tajikistan:"TJ",Turkmenistan:"TM",Uzbekistan:"UZ",Vietnam:"VN"},WO=["blowing-dust","blowing-sand","blowing-snow","clear","clear-occasional-rain-or-thunderstorms","clear-then-cloudy","clear-then-occasional-rain","clear-then-occasional-snow","clear-then-rain","clear-then-rain-or-snow","clear-then-rain-or-thunderstorms","clear-then-snow","clear-then-snow-or-rain","clear-then-thunderstorms","clear-with-isolated-snow","clear-with-isolated-thunderstorms","clear-with-occasional-clouds","clear-with-occasional-rain","clear-with-occasional-rain-or-snow","clear-with-occasional-snow","clear-with-occasional-snow-or-rain","cloudy","cloudy-and-occasionally-clear","cloudy-occasional-rain-or-thunderstorms","cloudy-then-clear","cloudy-then-occasional-rain","cloudy-then-occasional-snow","cloudy-then-occasionally-clear","cloudy-then-rain","cloudy-then-rain-or-snow","cloudy-then-rain-or-thunderstorms","cloudy-then-snow","cloudy-then-snow-or-rain","cloudy-with-isolated-rain","cloudy-with-occasional-rain","cloudy-with-occasional-rain-or-snow","cloudy-with-occasional-snow","cloudy-with-occasional-snow-or-rain","cloudy-with-thundersnow-at-times","drifting-sand","drifting-snow","drizzle","duststorm","fair","fog","freezing-drizzle","freezing-fog","freezing-rain","hail","haze","heavy-drizzle","heavy-rain","heavy-snow","heavy-thunderstorms","ice-pellets","light-drizzle","light-fog","light-freezing-drizzle","light-freezing-rain","light-hail","light-rain","light-rain-and-snow","light-rain-and-snow-shower","light-rain-shower","light-snow","light-snow-shower","mostly-clear","mostly-cloudy","mostly-sunny","partly-cloudy","partly-sunny","patchy-fog","rain","rain-and-occasionally-clear","rain-and-occasionally-cloudy","rain-and-snow","rain-and-snow-shower","rain-or-snow","rain-or-snow-then-clear","rain-or-snow-then-cloudy","rain-showers","rain-then-clear","rain-then-cloudy","rain-then-occasional-snow","rain-turning-to-snow","rain-with-occasional-snow","severe-duststorm","sleet","smoke","snow","snow-and-occasionally-clear","snow-and-occasionally-cloudy","snow-or-rain","snow-or-rain-then-clear","snow-or-rain-then-cloudy","snow-showers","snow-then-clear","snow-then-cloudy","snow-then-rain","squalls","sunny","thundersnow","thunderstorms","unknown","windy-rainstorm","windy-with-heavy-snow"],Oz=["adult","teen"],Mz=["twenty-four-hours","one-day","five-days","one-week","one-month","one-year","five-years","max"],Lz=["pro","m365-basic","m365-personal-classic","m365-family-classic-admin","m365-family-classic-guest","m365-personal","m365-family-admin","m365-family-guest","m365-premium-admin","m365-premium-guest"],Dz=["direct","apple","google","retail"],jz=["guest","free","m365-personal","pro","m365-premium"],Uz=["python"],Fz=5,Bz=10240,Mke=100,Hz=15e3,vi=8,Zt={mediaViewer:"z-10",composer:"z-10",composerBottomSlot:"z-20",composerCoachmark:"z-30",chatScrollToBottomButton:"z-10",babylonCharacter:"z-10",citations:"z-20",settings:"z-30",audioBase:"z-10",audioDisplayContent:"z-40",modalBackground:"z-30",modal:"z-40",sidebar:"z-40",toastNotification:"z-50",dropdownMenuOverModal:"z-50",pages:{warning:"z-10",chat:"z-20"},shopping:{navigation:"z-10"},headerIcon:"z-30",default:"z-0"},Ro={default:.15,slow:.5,composerButton:.2,settings:.1,audio:{available:.5,unavailable:2,deepLinkLanding:.5},suggestions:.2,dailyBriefing:{background:.5,sourcePopoverScale:.2,sourcePopoverOpacity:.15}},Lke=.25,Dke=2,jke=0,zz=1.5,qO=2e3,Vz=.25,ct={opacity:0},Lt={opacity:1},$z=.2,Gz=.025,Uke={initial:ct,animate:{...Lt,transition:{delayChildren:$z,staggerChildren:Gz}}},Fke={initial:ct,animate:Lt},TI={willChange:"auto"},gg="9188040d-6c67-4c5b-b112-36a304b66dad",lC="copilot.cloud.microsoft",Bke=W("mt-px text-end uppercase text-foreground-450 text-2xs dark:text-foreground-600"),Hke="flex items-center justify-between text-start",Kz=["Austria","Belgium","Brazil","Bulgaria","Canada","Croatia","Cyprus","Czechia","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Iceland","Ireland","Italy","Latvia","Liechtenstein","Lithuania","Luxembourg","Malta","Netherlands","Norway","China mainland","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden","Switzerland","Türkiye","United Kingdom"],cy=Kz.map(t=>ip[t]),Wz=["Austria","Belgium","Bulgaria","Croatia","Cyprus","Czechia","Denmark","Estonia","Finland","France","Germany","Greece","Hungary","Ireland","Italy","Latvia","Lithuania","Luxembourg","Malta","Netherlands","Poland","Portugal","Romania","Slovakia","Slovenia","Spain","Sweden"],qz=Wz.map(t=>ip[t]),Yz=["Belarus","China mainland","Lebanon","Macao","Russia","Venezuela","North Korea","Cuba","Syria","Iran"],YO=Yz.map(t=>ip[t]),Qz="https://account.live.com/ep",Jz="Think Deeper",zke=1500,vg=24*60*60*1e3,Xz=5,_I=451,QO="Not allowed child account",AI="LEGALLY_UNAVAILABLE_STATUS",D0=3,uC=[80,100,110,125,150],ly=100,Zz=1e3,JO=!1,kI=!1,XO="/chats/private";async function eV(t){return new Promise(e=>{let n=!1;t.catch(r=>{r instanceof Error?(n=!0,e(`Type: ${r.name}, Message: ${r.message}, Stack: ${r.stack}`)):(n=!0,e(`Type: ${typeof r}, Value: ${JSON.stringify(r)}`))}),setTimeout(()=>{n||e("Promise.catch wasn't called. The Promise is not rejected.")},1e3)})}class tV{constructor(){J(this,"latestClientExperimentationAssignmentRequestId",null);J(this,"latestApiExperimentationAssignmentRequestId",null)}getTraceIdAnalytics(){return{TraceId_LastClientAssignment:this.latestClientExperimentationAssignmentRequestId,TraceId_Latest:this.latestApiExperimentationAssignmentRequestId}}trackClientExperimentationAssignment(e){const n=this.getTraceIdFromResponseHeaders(e);n&&(this.latestClientExperimentationAssignmentRequestId=n)}trackLatestApiAssignment(e){const n=this.getTraceIdFromResponseHeaders(e.headers);n&&(this.latestApiExperimentationAssignmentRequestId=n)}trackLatestChatConnectedAssignment(e){const{requestId:n}=e;this.latestApiExperimentationAssignmentRequestId=n}getTraceIdFromResponseHeaders(e){return(e.get("x-ceto-ref")??"").split("|")[0]??null}}const uy=new tV;function xI(){return"8b738f1"}function nV(){return`mscmc@${xI().substring(0,7)}`}function ir(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function Vi(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function RI(t,e){const n=ir(t);return isNaN(e)?Vi(t,NaN):(e&&n.setDate(n.getDate()+e),n)}function ZO(t,e){const n=ir(t);if(isNaN(e))return Vi(t,NaN);if(!e)return n;const r=n.getDate(),o=Vi(t,n.getTime());o.setMonth(n.getMonth()+e+1,0);const i=o.getDate();return r>=i?o:(n.setFullYear(o.getFullYear(),o.getMonth(),r),n)}const eM=6048e5,rV=864e5,Vke=6e4,oV=36e5,$ke=43200,Gke=1440,Kke=60;let iV={};function dy(){return iV}function Qu(t,e){var a,c,u,d;const n=dy(),r=(e==null?void 0:e.weekStartsOn)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.weekStartsOn)??n.weekStartsOn??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,o=ir(t),i=o.getDay(),s=(i<r?7:0)+i-r;return o.setDate(o.getDate()-s),o.setHours(0,0,0,0),o}function yg(t){return Qu(t,{weekStartsOn:1})}function tM(t){const e=ir(t),n=e.getFullYear(),r=Vi(t,0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);const o=yg(r),i=Vi(t,0);i.setFullYear(n,0,4),i.setHours(0,0,0,0);const s=yg(i);return e.getTime()>=o.getTime()?n+1:e.getTime()>=s.getTime()?n:n-1}function bg(t){const e=ir(t);return e.setHours(0,0,0,0),e}function r1(t){const e=ir(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Fm(t,e){const n=bg(t),r=bg(e),o=+n-r1(n),i=+r-r1(r);return Math.round((o-i)/rV)}function sV(t){const e=tM(t),n=Vi(t,0);return n.setFullYear(e,0,4),n.setHours(0,0,0,0),yg(n)}function aV(t,e){return ZO(t,e*12)}function NI(t,e){const n=bg(t),r=bg(e);return+n==+r}function cV(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function nM(t){if(!cV(t)&&typeof t!="number")return!1;const e=ir(t);return!isNaN(Number(e))}function lV(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function uV(t,e){return+ir(t)-+ir(e)}function dV(t,e,n){const r=uV(t,e)/oV;return lV(n==null?void 0:n.roundingMethod)(r)}function hV(t){const e=ir(t),n=Vi(t,0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}const fV={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},pV=(t,e,n)=>{let r;const o=fV[t];return typeof o=="string"?r=o:e===1?r=o.one:r=o.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function dC(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const mV={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},gV={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},vV={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},yV={date:dC({formats:mV,defaultWidth:"full"}),time:dC({formats:gV,defaultWidth:"full"}),dateTime:dC({formats:vV,defaultWidth:"full"})},bV={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},CV=(t,e,n,r)=>bV[t];function hh(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let o;if(r==="formatting"&&t.formattingValues){const s=t.defaultFormattingWidth||t.defaultWidth,a=n!=null&&n.width?String(n.width):s;o=t.formattingValues[a]||t.formattingValues[s]}else{const s=t.defaultWidth,a=n!=null&&n.width?String(n.width):t.defaultWidth;o=t.values[a]||t.values[s]}const i=t.argumentCallback?t.argumentCallback(e):e;return o[i]}}const SV={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},EV={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},wV={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},IV={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},TV={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},_V={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},AV=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},kV={ordinalNumber:AV,era:hh({values:SV,defaultWidth:"wide"}),quarter:hh({values:EV,defaultWidth:"wide",argumentCallback:t=>t-1}),month:hh({values:wV,defaultWidth:"wide"}),day:hh({values:IV,defaultWidth:"wide"}),dayPeriod:hh({values:TV,defaultWidth:"wide",formattingValues:_V,defaultFormattingWidth:"wide"})};function fh(t){return(e,n={})=>{const r=n.width,o=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(o);if(!i)return null;const s=i[0],a=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(a)?RV(a,f=>f.test(s)):xV(a,f=>f.test(s));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(s.length);return{value:u,rest:d}}}function xV(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function RV(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function NV(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const o=r[0],i=e.match(t.parsePattern);if(!i)return null;let s=t.valueCallback?t.valueCallback(i[0]):i[0];s=n.valueCallback?n.valueCallback(s):s;const a=e.slice(o.length);return{value:s,rest:a}}}const PV=/^(\d+)(th|st|nd|rd)?/i,OV=/\d+/i,MV={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},LV={any:[/^b/i,/^(a|c)/i]},DV={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},jV={any:[/1/i,/2/i,/3/i,/4/i]},UV={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},FV={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},BV={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},HV={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},zV={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},VV={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},$V={ordinalNumber:NV({matchPattern:PV,parsePattern:OV,valueCallback:t=>parseInt(t,10)}),era:fh({matchPatterns:MV,defaultMatchWidth:"wide",parsePatterns:LV,defaultParseWidth:"any"}),quarter:fh({matchPatterns:DV,defaultMatchWidth:"wide",parsePatterns:jV,defaultParseWidth:"any",valueCallback:t=>t+1}),month:fh({matchPatterns:UV,defaultMatchWidth:"wide",parsePatterns:FV,defaultParseWidth:"any"}),day:fh({matchPatterns:BV,defaultMatchWidth:"wide",parsePatterns:HV,defaultParseWidth:"any"}),dayPeriod:fh({matchPatterns:zV,defaultMatchWidth:"any",parsePatterns:VV,defaultParseWidth:"any"})},GV={code:"en-US",formatDistance:pV,formatLong:yV,formatRelative:CV,localize:kV,match:$V,options:{weekStartsOn:0,firstWeekContainsDate:1}};function KV(t){const e=ir(t);return Fm(e,hV(e))+1}function WV(t){const e=ir(t),n=+yg(e)-+sV(e);return Math.round(n/eM)+1}function rM(t,e){var d,f,p,g;const n=ir(t),r=n.getFullYear(),o=dy(),i=(e==null?void 0:e.firstWeekContainsDate)??((f=(d=e==null?void 0:e.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??o.firstWeekContainsDate??((g=(p=o.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,s=Vi(t,0);s.setFullYear(r+1,0,i),s.setHours(0,0,0,0);const a=Qu(s,e),c=Vi(t,0);c.setFullYear(r,0,i),c.setHours(0,0,0,0);const u=Qu(c,e);return n.getTime()>=a.getTime()?r+1:n.getTime()>=u.getTime()?r:r-1}function qV(t,e){var a,c,u,d;const n=dy(),r=(e==null?void 0:e.firstWeekContainsDate)??((c=(a=e==null?void 0:e.locale)==null?void 0:a.options)==null?void 0:c.firstWeekContainsDate)??n.firstWeekContainsDate??((d=(u=n.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,o=rM(t,e),i=Vi(t,0);return i.setFullYear(o,0,r),i.setHours(0,0,0,0),Qu(i,e)}function YV(t,e){const n=ir(t),r=+Qu(n,e)-+qV(n,e);return Math.round(r/eM)+1}function Vt(t,e){const n=t<0?"-":"",r=Math.abs(t).toString().padStart(e,"0");return n+r}const Us={y(t,e){const n=t.getFullYear(),r=n>0?n:1-n;return Vt(e==="yy"?r%100:r,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):Vt(n+1,2)},d(t,e){return Vt(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return Vt(t.getHours()%12||12,e.length)},H(t,e){return Vt(t.getHours(),e.length)},m(t,e){return Vt(t.getMinutes(),e.length)},s(t,e){return Vt(t.getSeconds(),e.length)},S(t,e){const n=e.length,r=t.getMilliseconds(),o=Math.trunc(r*Math.pow(10,n-3));return Vt(o,e.length)}},Pl={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},o1={G:function(t,e,n){const r=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const r=t.getFullYear(),o=r>0?r:1-r;return n.ordinalNumber(o,{unit:"year"})}return Us.y(t,e)},Y:function(t,e,n,r){const o=rM(t,r),i=o>0?o:1-o;if(e==="YY"){const s=i%100;return Vt(s,2)}return e==="Yo"?n.ordinalNumber(i,{unit:"year"}):Vt(i,e.length)},R:function(t,e){const n=tM(t);return Vt(n,e.length)},u:function(t,e){const n=t.getFullYear();return Vt(n,e.length)},Q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(r);case"QQ":return Vt(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function(t,e,n){const r=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(r);case"qq":return Vt(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function(t,e,n){const r=t.getMonth();switch(e){case"M":case"MM":return Us.M(t,e);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function(t,e,n){const r=t.getMonth();switch(e){case"L":return String(r+1);case"LL":return Vt(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function(t,e,n,r){const o=YV(t,r);return e==="wo"?n.ordinalNumber(o,{unit:"week"}):Vt(o,e.length)},I:function(t,e,n){const r=WV(t);return e==="Io"?n.ordinalNumber(r,{unit:"week"}):Vt(r,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):Us.d(t,e)},D:function(t,e,n){const r=KV(t);return e==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):Vt(r,e.length)},E:function(t,e,n){const r=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function(t,e,n,r){const o=t.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(e){case"e":return String(i);case"ee":return Vt(i,2);case"eo":return n.ordinalNumber(i,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(t,e,n,r){const o=t.getDay(),i=(o-r.weekStartsOn+8)%7||7;switch(e){case"c":return String(i);case"cc":return Vt(i,e.length);case"co":return n.ordinalNumber(i,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(t,e,n){const r=t.getDay(),o=r===0?7:r;switch(e){case"i":return String(o);case"ii":return Vt(o,e.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function(t,e,n){const o=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(t,e,n){const r=t.getHours();let o;switch(r===12?o=Pl.noon:r===0?o=Pl.midnight:o=r/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(t,e,n){const r=t.getHours();let o;switch(r>=17?o=Pl.evening:r>=12?o=Pl.afternoon:r>=4?o=Pl.morning:o=Pl.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let r=t.getHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return Us.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):Us.H(t,e)},K:function(t,e,n){const r=t.getHours()%12;return e==="Ko"?n.ordinalNumber(r,{unit:"hour"}):Vt(r,e.length)},k:function(t,e,n){let r=t.getHours();return r===0&&(r=24),e==="ko"?n.ordinalNumber(r,{unit:"hour"}):Vt(r,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):Us.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):Us.s(t,e)},S:function(t,e){return Us.S(t,e)},X:function(t,e,n){const r=t.getTimezoneOffset();if(r===0)return"Z";switch(e){case"X":return s1(r);case"XXXX":case"XX":return Wa(r);case"XXXXX":case"XXX":default:return Wa(r,":")}},x:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"x":return s1(r);case"xxxx":case"xx":return Wa(r);case"xxxxx":case"xxx":default:return Wa(r,":")}},O:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+i1(r,":");case"OOOO":default:return"GMT"+Wa(r,":")}},z:function(t,e,n){const r=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+i1(r,":");case"zzzz":default:return"GMT"+Wa(r,":")}},t:function(t,e,n){const r=Math.trunc(t.getTime()/1e3);return Vt(r,e.length)},T:function(t,e,n){const r=t.getTime();return Vt(r,e.length)}};function i1(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=Math.trunc(r/60),i=r%60;return i===0?n+String(o):n+String(o)+e+Vt(i,2)}function s1(t,e){return t%60===0?(t>0?"-":"+")+Vt(Math.abs(t)/60,2):Wa(t,e)}function Wa(t,e=""){const n=t>0?"-":"+",r=Math.abs(t),o=Vt(Math.trunc(r/60),2),i=Vt(r%60,2);return n+o+e+i}const a1=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},oM=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},QV=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],r=n[1],o=n[2];if(!o)return a1(t,e);let i;switch(r){case"P":i=e.dateTime({width:"short"});break;case"PP":i=e.dateTime({width:"medium"});break;case"PPP":i=e.dateTime({width:"long"});break;case"PPPP":default:i=e.dateTime({width:"full"});break}return i.replace("{{date}}",a1(r,e)).replace("{{time}}",oM(o,e))},JV={p:oM,P:QV},XV=/^D+$/,ZV=/^Y+$/,e$=["D","DD","YY","YYYY"];function t$(t){return XV.test(t)}function n$(t){return ZV.test(t)}function r$(t,e,n){const r=o$(t,e,n);if(console.warn(r),e$.includes(t))throw new RangeError(r)}function o$(t,e,n){const r=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${r} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const i$=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,s$=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,a$=/^'([^]*?)'?$/,c$=/''/g,l$=/[a-zA-Z]/;function _u(t,e,n){var d,f,p,g,v,b,y,C;const r=dy(),o=(n==null?void 0:n.locale)??r.locale??GV,i=(n==null?void 0:n.firstWeekContainsDate)??((f=(d=n==null?void 0:n.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??r.firstWeekContainsDate??((g=(p=r.locale)==null?void 0:p.options)==null?void 0:g.firstWeekContainsDate)??1,s=(n==null?void 0:n.weekStartsOn)??((b=(v=n==null?void 0:n.locale)==null?void 0:v.options)==null?void 0:b.weekStartsOn)??r.weekStartsOn??((C=(y=r.locale)==null?void 0:y.options)==null?void 0:C.weekStartsOn)??0,a=ir(t);if(!nM(a))throw new RangeError("Invalid time value");let c=e.match(s$).map(S=>{const w=S[0];if(w==="p"||w==="P"){const E=JV[w];return E(S,o.formatLong)}return S}).join("").match(i$).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const w=S[0];if(w==="'")return{isToken:!1,value:u$(S)};if(o1[w])return{isToken:!0,value:S};if(w.match(l$))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:S}});o.localize.preprocessor&&(c=o.localize.preprocessor(a,c));const u={firstWeekContainsDate:i,weekStartsOn:s,locale:o};return c.map(S=>{if(!S.isToken)return S.value;const w=S.value;(!(n!=null&&n.useAdditionalWeekYearTokens)&&n$(w)||!(n!=null&&n.useAdditionalDayOfYearTokens)&&t$(w))&&r$(w,e,String(t));const E=o1[w[0]];return E(a,w,o.localize,u)}).join("")}function u$(t){const e=t.match(a$);return e?e[1].replace(c$,"'"):t}function j0(t,e){const n=ir(t),r=ir(e);return n.getTime()>r.getTime()}function Cg(t,e){return RI(t,-e)}function d$(t,e){return aV(t,-13)}function h$(t){return document.cookie.split(";").find(e=>e.trim().startsWith(`${t}=`))}function _f(t){const e=h$(t),n=e==null?void 0:e.split("=")[1];if(n)return decodeURIComponent(n)}function c1(t,e,n={}){const{expireDays:r,path:o="/",domain:i,secure:s=!0,host:a}=n;let c=t;s&&!i&&o==="/"&&a&&(c=`__Host-${t}`);let u=`${c}=${encodeURIComponent(e)}; path=${o}`;if(r){const d=RI(new Date,r);u+=`; expires=${d.toUTCString()}`}i&&(u+=`; domain=${i}`),s&&(u+="; secure"),document.cookie=u}const Ql={name:"CMCCP",expirationDays:365},hy={name:"BCP"},f$="3PAdsOptOut";function iM(){return _f(Ql.name)??_f(hy.name)}function l1(t,e){const{analytics:n,advertising:r,socialMedia:o}=t,i=new URLSearchParams;i.set("AD",r?"1":"0"),i.set("AL",n?"1":"0"),i.set("SM",o?"1":"0");const s=RI(new Date,e);return i.set("expires",s.getTime().toString()),i.toString()}function p$(t){c1(Ql.name,l1(t,Ql.expirationDays),{expireDays:Ql.expirationDays}),c1(hy.name,l1(t,Ql.expirationDays),{expireDays:Ql.expirationDays})}function sp(){const t=_f(hy.name);if(!t)return{advertising:!1,analytics:!1,socialMedia:!1};const e=new URLSearchParams(t),n=e.get("AD")==="1",r=e.get("AL")==="1",o=e.get("SM")==="1";return{advertising:n,analytics:r,socialMedia:o}}function sM(){const t=_f(f$)!=="1";return navigator.globalPrivacyControl?!1:t}const oc=class oc{constructor(){J(this,"listeners",new Map)}static getInstance(){return oc.instance||(oc.instance=new oc),oc.instance}on(e,n){var r;this.listeners.has(e)||this.listeners.set(e,[]),(r=this.listeners.get(e))==null||r.push(n)}emit(e,n){const r=this.listeners.get(e);if(r)for(const o of r)o(n)}off(e,n){const r=this.listeners.get(e);r&&this.listeners.set(e,r.filter(o=>o!==n))}};J(oc,"instance",null);let U0=oc;const Pt=U0.getInstance();function m$(t){let e="unknown";try{const n=/(?:CopilotNative|BingNative|MicrosoftLauncher)\/([0-9]+(?:\.[0-9]+)*(?:-[a-zA-Z0-9]+)?)/,r=t==null?void 0:t.match(n);if(r!=null&&r[1]){const[,o]=r;e=o}return e}catch{return e}}function pa(t,e){sessionStorage.setItem(t,e)}function ni(t){return sessionStorage.getItem(t)}function g$(t){return ni(t)==="true"}function aM(t){sessionStorage.removeItem(t)}function vn(t){return new URLSearchParams(window.location.search).get(t)}function no(t){const e=new URL(window.location.href);e.searchParams.delete(t),window.history.replaceState(null,"",e)}function v$(){const t=vn("ocid")??vn("OCID"),e=vn("msclkid"),n=vn("gclid"),r={};return t&&(r.OCID=t),e&&(r.msclkid=e),n&&(r.gclid=n),r}function cM(){no("ocid"),no("OCID"),no("msclkid"),no("gclid")}function y$(){const t=vn("form");if(t)return no("form"),t;const e=vn("FORM");return e&&no("FORM"),e}function b$(){return vn("alias")}function C$(){const t=vn("chat-mode");return t&&no("chat-mode"),t}function S$(){const t=vn("q");return t&&no("q"),t}function E$(){const t=vn("prompt");return t&&no("prompt"),t}function w$(){const t=vn("sandbox");return t&&no("sandbox"),t==="1"}function I$(){if(typeof window>"u")return!1;const t=vn("disable-all-features");return t!==null&&t!=="0"&&t!=="false"}function Wke(){return vn("payflow-correlationId")}const T$=["VoiceLimit","Settings","ChatReasoningLimit","RedirectFromAuth0Account","ResearchReportLimit","PodcastLimit"];function _$(t){return T$.some(e=>e===t)}function qke(){const t=vn("entry-point")??"";return _$(t)?t:"Unknown"}function Yke(){const t=vn("campaign");return t?(pa("campaignId",t),t):null}function Qke(){const t=vn("referral-code");return t?(pa("referralCode",t),t):null}function A$(){return vn("charid")}function Jke(){const t=vn("pff");return t&&no("pff"),t}function Xke(){const t=vn("pfah");return t&&no("pfah"),t}function Zke(){const t=vn("pfcid");return t&&no("pfcid"),t}function k$(){return vn("intent")}function e1e(){return[]}function ap(t){const e=typeof navigator<"u"?navigator.userAgent:null;return e?t.test(e):!1}function lM(){return ap(/BingSapphire/gi)}function x$(){return ap(/NewsSapphire/gi)}function uM(){return!!(navigator.userAgent.match(/Mac/)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Macintosh/i.test(navigator.userAgent)&&"ontouchend"in document)}function dM(){return uM()||ap(/iPad|iPhone|Android|iPod/gi)}function R$(){return ap(/Android/gi)}function N$(){return uM()||ap(/iPhone|iPad|iPod/gi)}const u1="mobileCrossSellingLastClosed",hC="mobilePromoCountClose",Sg="hasBeenAuthenticated",Eg="colorTheme",PI="newConversationsStarted",Af="timeOfNewConversationThreshold",d1="hasCorrectedPersonalizationSettings",F0="banAppealSubmitted",P$="hideDeleteConversationModal",O$="hasBeenPromptedForLocation",M$="hasSeenCharacter",h1="voiceAppearanceId",L$="disableAppearanceOnHomeScreen",D$="hasSeenAppearance",j$="hasSeenAppearanceOnVoiceCall",U$="hasDismissedAppearanceModal",B0="crossPromoFirstVisit",OI="crossPromoDiscoverStripLastClosed",wg="crossPromoDiscoverStripCountClose",t1e="crossPromoStripGetAppIsClicked",f1="reviewActiveDays",H0="reviewPromptResponse",hM="userSidebarOpen",n1e="referralEligibilityStatus",r1e="referralHasSeenEntryNewBadge",o1e="coachmark.pagesEditThisResponse",F$="coachmark.smartMode",z0="isEagerMSALEnabled",fM="isMsalSilentSsoEnabled",pM="user.UserFirstName",V0="loginStartTime",$0="reauthLoginFlag",i1e="subscription.m365SubscriberFRE",p1="userConversationVoiceSpeed",G0="authModuleRefactor",B$="copilotBeta",K0="isCMCMSALPwBEnabled";function sr(t,e){typeof window<"u"&&localStorage.setItem(t,e)}function mn(t){return typeof window<"u"?localStorage.getItem(t):null}function so(t){typeof window<"u"&&localStorage.removeItem(t)}function lo(t,e){const n=mn(t);if(!n)return null;try{const r=JSON.parse(n);return e.parse(r)}catch{return null}}function Oi(t,e,n){try{e.parse(n),sr(t,JSON.stringify(n))}catch{}}function cp(t){const{key:e,schema:n,initialValue:r}=t;return lF(e,r,{getItem:()=>lo(e,n)??r,setItem:(i,s)=>{s===void 0?so(e):Oi(e,n,s)},removeItem:()=>so(e)},{getOnInit:!0})}const MI=M(!1),H$=l.boolean().optional(),fy=cp({key:B$,schema:H$,initialValue:void 0});function Ye(t){return rt().get(t)}function z$(){return Ye(MI)&&!!Ye(fy)}const V$={"thumbs-up":"thumbsUp","thumbs-down":"thumbsDown",report:"reportMessage"},m1="homepage";class $${constructor(e={}){J(this,"analytics",null);J(this,"features");J(this,"picassoId",null);J(this,"anid",null);J(this,"formCode",null);J(this,"landingPage",m1);J(this,"trafficAlias",null);J(this,"settings",null);J(this,"isAADUser",null);J(this,"isNewUser",null);J(this,"isCopilotMode",null);J(this,"accountType",null);J(this,"referrer",null);J(this,"deviceInfo",null);J(this,"isInitializing",!1);J(this,"pendingEvents",[]);J(this,"initRetryCount",0);J(this,"maxRetries");J(this,"maxPendingEvents");J(this,"delay");J(this,"onInitializeError");this.maxRetries=e.maxRetries??3,this.maxPendingEvents=e.maxPendingEvents??1e3,this.delay=e.delay??0,this.onInitializeError=e.onInitializeError}ensureInitialized(){!this.isInitialized&&!this.isInitializing&&(this.isInitializing=!0,this.initialize())}get isInitialized(){return this.analytics!==null&&this.analytics.isInitialized()}get currentEnv(){return"prod"}get initializationFailed(){return this.initRetryCount>=this.maxRetries}setFeatures(e){this.features=e.join(",")}setAnid(e){this.anid=e}setIsNewUser(e){this.isNewUser===null&&(this.isNewUser=e)}setIsAad(e){this.isAADUser=e}setCopilotMode(e){this.isCopilotMode=e}setSettings(e){this.settings={...this.settings,...e}}getPicassoId(){return this.picassoId}setPicassoId(e){this.picassoId=e}setFormCode(e){this.formCode=e}getFormCode(){return this.formCode}setDeviceInfo(e){this.deviceInfo=e}setLandingPage(e){this.landingPage===m1&&(this.landingPage=e)}getLandingPage(){return this.landingPage}isValidLowercaseUserAccountType(e){return["msa","aad","apple","google"].includes(e)}setUserAccountType(e){if(!e){this.accountType=null;return}const n=e.toLowerCase();this.isValidLowercaseUserAccountType(n)?this.accountType=n:this.accountType=null}processFormCode(){const e=y$();this.formCode=e}processAlias(){const e=b$();e&&(this.trafficAlias=e)}processReferrer(){this.referrer===null&&typeof document<"u"&&(this.referrer=document.referrer)}initialize(){this.isInitialized||(this.processFormCode(),this.processAlias(),this.processReferrer(),this.dynamicInitialization().catch(()=>{}))}async dynamicInitialization(){var n,r;this.delay>0&&await new Promise(o=>{setTimeout(o,this.delay)});const e=await z(()=>import("./Index-Ci9aYCEP.js"),__vite__mapDeps([0,1,2])).catch(o=>o instanceof Error?o:new Error(`Failed to load @microsoft/1ds-analytics-js: ${o}`));if(e instanceof Error)(n=this.onInitializeError)==null||n.call(this,e),this.initRetryCount+=1,this.initRetryCount>=this.maxRetries&&((r=this.onInitializeError)==null||r.call(this,new Error("ApplicationInsights initialization: Max retries reached")),this.pendingEvents.length=0);else{const{ApplicationInsights:o}=e;this.analytics=new o;const i={instrumentationKey:"be6e4c19699f4fdf9f8c0ec9f9b398ef-25d58bb9-9926-4df7-8e36-bc7afb4b2c34-7563",channelConfiguration:{eventsLimitInMem:5e3},propertyConfiguration:{populateBrowserInfo:!0},disableCookiesUsage:!0};this.analytics.initialize(i,[]),this.flushPendingEvents()}this.isInitializing=!1}flushPendingEvents(){for(let e=0,n=this.pendingEvents.length;e<n;e+=1){const r=this.pendingEvents[e];r&&this.trackEventInternal(r)}this.pendingEvents.length=0}getPlatformSurface(e){if(e==="pageseditor"){if(R$())return"android";if(N$())return"ios"}return e}getAppFlavor(){return z$()?{eventInfo_appFlavor:"beta"}:null}getFixEventProperties(){const e=this.getPlatformSurface("cmc");return{appName:`CopilotN-${this.currentEnv}-web-${e}`,appVersion:xI(),surface:e,surfaceVersion:m$(navigator.userAgent),accountType:this.accountType,userMuid:_f("MUID"),userAnid:this.anid,userPicassoId:this.picassoId,userFlightIds:this.features,trafficAlias:this.trafficAlias,eventInfo_entryPoint:this.formCode,eventInfo_surfaceVisible:document.visibilityState==="visible",eventInfo_isCopilotMode:this.isCopilotMode,isAADUser:this.isAADUser,isNewUser:this.isNewUser,pathname:window.location.pathname,referrer:this.referrer,"UserInfo.Id":this.picassoId,...uy.getTraceIdAnalytics(),...this.settings,...this.deviceInfo,...this.getAppFlavor()}}trackEvent(e){if(!this.initializationFailed){if(this.pendingEvents.length>=this.maxPendingEvents){console.warn(`Analytics pending events queue is full (${this.maxPendingEvents}). Dropping event: ${JSON.stringify(e)}`);return}if(this.ensureInitialized(),this.isInitializing||!this.isInitialized){this.pendingEvents.push(e);return}this.trackEventInternal(e)}}trackEventInternal(e){const n=this.getFixEventProperties(),r=sp(),o=sM();if(!this.analytics){console.error("Failed to initialize AnalyticsService.");return}const i={name:e.name,data:{...n,...e.data},ext:{web:{consentDetails:JSON.stringify({Required:!0,Analytics:r.analytics,SocialMedia:r.socialMedia,Advertising:r.advertising,GPC_DataSharingOptIn:o})}}};(e.data.eventName==="copilotCompose"||e.data.eventName==="copilotAudioInput")&&Pt.emit("composer:send-query",{isNewUser:this.isNewUser,event:e.data}),this.analytics.track(i)}}const V=new $$({maxRetries:3,maxPendingEvents:1e3,delay:200,onInitializeError:t=>{console.error("AnalyticsService initialization error:",t)}});function mM(t,e){V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ErrorBoundary",eventInfo_errorName:t.name,eventInfo_errorMessage:t.message,eventInfo_errorStack:t.stack??"",eventInfo_componentStack:e.componentStack??""}}),z(async()=>{const{captureReactException:n}=await import("./vendor-DQYrLAfZ.js").then(r=>r.ah);return{captureReactException:n}},__vite__mapDeps([1,2])).then(({captureReactException:n})=>n(t,e))}function kf(t,e,n=!1){V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"APIResponseParseError",eventInfo_apiUrl:e,eventInfo_errors:JSON.stringify(t.format()),eventInfo_safe:n}})}async function g1(t){const e=await eV(t.promise);V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"UnhandledRejection",eventInfo_reason:`${t.reason}`,eventInfo_customData:e}})}function G$(t,e,n){try{new URL(sa(t)).hostname}catch(r){V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"invalidCitationURL",eventInfo_url:t,eventInfo_errorMessage:r instanceof Error?r.message:"",eventInfo_conversationId:e,eventInfo_messageId:n}})}}function gM(t){V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"PlaybackApiError",eventInfo_errorMessage:t instanceof Error?t.message:"",eventInfo_details:"An error occurred during media playback tracking api call."}})}function K$(t,e,n=void 0){V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"InvalidJsonResponse",eventInfo_apiUrl:n,eventInfo_errorMessage:t.message,eventInfo_errorCode:e.statusText,eventInfo_details:JSON.stringify(Object.fromEntries(e.headers.entries()))}})}const vM=25,yM=25,W$=1e3,q$=6e3,Y$=2500,Q$=5,J$=250,X$=25,s1e=3,Z$=["mica","aqua","erin"];function bM(t){switch(t){case"mica":case"aqua":case"erin":return t;default:return null}}function eG(t,e){switch(t){case"mica":return e("characterAnimation.characterNameMica");case"aqua":return e("characterAnimation.characterNameAqua");case"erin":return e("characterAnimation.characterNameErin");default:return""}}function tG(t,e){return(n,r)=>{V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CharacterError",eventInfo_details:`animatingMessageId: ${t}, characterId: ${e}, name: ${n.name}, info: ${r.componentStack}`,eventInfo_errorMessage:n.message}}),mM(n,r)}}Pz();const rl=M(!1),py=M(void 0),wn=M("chat"),yn=M(new Map),ft=M(void 0),Ig=M(null),CM=M(null),Lo=M(t=>{const e=t(ft);if(e)return t(yn).get(e)}),nG=Zw(Lo,t=>(t==null?void 0:t.streamingState)==="streaming",(t,e)=>t===e),a1e=t=>Zw(yn,e=>{var n;return((n=e.get(t))==null?void 0:n.streamingState)==="streaming"},(e,n)=>e===n),Au=M(!1),ri=M(new Map),c1e=M([]);M([]);const l1e=t=>M(e=>e(ri).get(t)),li=M(t=>{var e;return((e=t(Lo))==null?void 0:e.history)??[]}),LI=M(t=>{const e=t(yn);for(const n of e.values())if(!n.title&&!n.history.length&&n.isNew)return n.id}),DI=M(new Map),jh=M(void 0),my=M([]),SM=M(!1),jI=M(t=>{var e;return bM((e=t(Lo))==null?void 0:e.characterId)}),vc=M("idle"),EM=M(!1),ks=M(null),rG=M("idle"),qh=M("checking-availability"),oG=M(null),wM=M([]),Nc=M(null),UI=M(null),FI=M([]),IM=M(null),iG=M(t=>t(Nc)===0),BI=M(null),TM=M(null),sG=M(null),Yh=M(!1),_M=M(!1),AM=M(Bz),xf=M(void 0),aG=M(!0),kM=M(null),cG=M(t=>!!t(kM));M(null);const Id=M(!1);M(null);const gy=M(void 0),lG=M(void 0),uG=M(t=>{const e=t(Lo);return e==null?void 0:e.suggestedFollowup}),u1e=M(void 0),xM=M(null),d1e=M(!1),dG=M(!1),HI=M(void 0),h1e=M(!1),f1e=M(void 0),RM=M(null),hG=M(null),zI=M(!1),ol=M(void 0),p1e=ay({}),vy=M(void 0),Ar=M("chat-only"),m1e=M(null),g1e=M(null),v1e=M(null),fG=M(null),NM=M({}),VI=M(!1),ds=M(null),PM=M({data:void 0,isLoading:!1}),pG=M(t=>t(PM).data),OM=M(t=>t(PM).isLoading),Qh=M(!1),MM=M(null);M(t=>{const e=t(MM);return(e==null?void 0:e.lcp)??null});const mG=["m365-personal","m365-family-admin"],LM=["m365-family-guest","m365-premium-guest","m365-premium-admin"],gG=["m365-personal","m365-family-admin"],v1=["pro","m365-premium-admin","m365-family-admin","m365-personal","m365-personal-classic","m365-premium-guest","m365-family-guest","m365-family-classic-admin","m365-family-classic-guest","m365-basic"];function vG(t,e=!1){return t.length===0?e?"buypremium":"buym365":t.some(n=>n.tier==="pro")?"buypremium":t.some(n=>LM.includes(n.tier))?null:t.some(n=>gG.includes(n.tier))||e?"upgradepremium":"upgradem365"}function y1e(t){return t.length>0&&!t.some(e=>e.tier==="pro")}function b1e(t){return t.some(e=>mG.includes(e.tier))&&!t.some(e=>LM.includes(e.tier))}function yG(t){return t.slice().sort((e,n)=>v1.indexOf(e.tier)-v1.indexOf(n.tier))}function C1e(t){const e=t.find(n=>n.tier==="pro");return(e==null?void 0:e.isAutoRenew)??!1}const $I="ellie",DM=[$I],y1=l.union([l.enum(DM),l.undefined()]),bG=l.object({model:l.literal("vasa"),eyesOpenRatio:l.array(l.number()).min(1),eyesPose:l.array(l.number()).min(6),jawPose:l.array(l.number()).length(3),neckPose:l.array(l.number()).length(3),rotation:l.array(l.number()).length(3),translation:l.array(l.number()).length(3),viseme:l.array(l.number()).min(10)}),CG=l.object({model:l.literal("spda2e"),poseDiffusion:l.array(l.number())}),Do=l.object({partId:l.string()}),GI=l.object({event:l.literal("invokeAction"),actionId:l.string()}),SG=l.enum(Uz),EG=l.object({type:l.literal("code"),language:SG,content:l.string()}),wG=l.object({type:l.literal("file"),url:l.string().url(),name:l.string(),contentType:l.string()}),IG=l.discriminatedUnion("type",[EG,wG]),jM=l.union([l.literal("running"),l.literal("completed"),l.literal("failed")]),TG=l.object({title:l.string(),status:jM}),Tg=l.object({status:jM,title:l.string(),steps:l.array(TG),artifacts:l.array(IG)}),_G=Do.extend({type:l.literal("activity"),activity:Tg,activities:l.array(Tg).nonempty().optional()}),Fr=l.object({amount:l.number(),currency:l.string().nullable(),currencySymbol:l.string().nullable()}),AG=l.enum(["current-search-term","recent-searches","age","gender","website-visits","interests","custom-audience","similar-audience","profile-targeting"]);l.enum(["multimedia","product","tourActivity","propertyPromotion","text","miniShowroom","mainShowroom","showroom","organic"]);const kG=l.enum(["top","bottom","left","right"]),xG=l.object({adDomain:l.string(),advertiser:l.object({name:l.string(),country:l.string()}),isVerified:l.boolean(),selectionReasons:l.array(AG)}),il=l.object({url:l.string(),urlPingSuffix:l.string()}),$i=l.object({url:l.string(),width:l.number().nullish(),height:l.number().nullish(),link:il.nullish(),impressionToken:l.string().nullish()}),RG=l.object({downPayment:l.string(),description:l.string()}),NG=l.object({rating:l.number(),link:il,impressionToken:l.string()}),lp=l.object({businessName:l.string(),image:$i,impressionToken:l.string().nullish()}),UM=l.object({text:l.string(),url:l.string(),urlPingSuffix:l.string()}),PG=l.object({title:l.string(),text:l.string(),url:l.string(),layout:l.enum(["inline","overlay"])}),sl=l.object({impressionToken:l.string(),selectionCriteria:xG}),yy=l.object({rowIndex:l.number().int(),columnIndex:l.number().int(),textPosition:kG,imagesPerRow:l.number().int()}),FM=sl.extend({type:l.literal("multimedia"),description:l.string(),title:l.string(),displayUrl:l.string(),link:il,image:$i.nullish(),images:l.array($i).nullish(),logo:lp.nullish(),action:UM.nullish(),layout:yy.nullish()});sl.extend({type:l.literal("organic"),description:l.string(),title:l.string(),link:l.string(),image:$i,layout:yy});const by=l.object({category:l.string(),value:l.string()}),KI=sl.extend({type:l.literal("product"),offer:l.object({seller:l.string(),link:il,price:Fr,lowPrice:Fr.nullish(),item:l.object({name:l.string(),image:$i})}),tags:l.array(by).nullish(),shipping:l.object({isFree:l.boolean(),description:l.string()}).nullish(),productRating:NG.nullish(),installment:RG.nullish(),pricePerUnit:l.string().nullish(),energyRating:l.string().nullish(),layout:yy.nullish()}),BM=sl.extend({type:l.literal("tourActivity"),title:l.string(),domain:l.string(),startingPrice:Fr,image:$i,link:il,tags:l.array(by).nullish()}),HM=sl.extend({type:l.literal("propertyPromotion"),title:l.string(),domain:l.string(),price:Fr,image:$i,link:il,tags:l.array(by).nullish()}),OG=sl.extend({type:l.literal("text"),title:l.string(),description:l.string(),displayUrl:l.string(),link:il,image:$i.nullish(),logo:lp.nullish(),disclaimer:PG.nullish()}),MG=sl.extend({type:l.literal("miniShowroom"),title:l.string(),description:l.string(),displayUrl:l.string(),image:$i,logo:lp.nullish()}),LG=l.object({ad:l.union([KI,FM]),adId:l.string().nullish()}),DG=l.object({isLoading:l.boolean().nullish()}),zM=DG.extend({type:l.literal("mainShowroom"),id:l.string(),brandId:l.string(),title:l.string().nullish(),description:l.string().nullish(),backgroundColor:l.number().int().nullish(),images:l.array($i).nullish(),logo:lp.nullish(),slotAds:l.array(LG).nullish(),action:UM.nullish(),layout:yy.nullish()}),jG=l.union([FM,KI,BM,HM,OG,MG,zM]);l.union([KI,BM,HM]);const VM=l.object({pageLoadPingUrl:l.string(),visibilityPingUrlBase:l.string(),clickPingUrlBase:l.string()}),fC=l.object({tagsSupported:l.boolean()});l.object({supportedTypes:l.array(l.enum(["multimedia","product","tourActivity","propertyPromotion","text","showroom","miniShowroom","mainShowroom"])),product:fC.nullish(),propertyPromotion:fC.nullish(),tourActivity:fC.nullish(),optOutOfPersonalization:l.boolean().nullish()});l.object({showroom:l.object({brandId:l.string(),brandName:l.string().nullish(),adId:l.string().nullish()})});const UG=l.object({brandBackground:l.number().int().nullish(),brandLogo:lp,conversationId:l.string(),theme:l.enum(["light","dark"]).nullish(),viewMode:l.enum(["cardView","extendedView"]),rguid:l.string().nullish(),rlink:l.string().nullish(),messageId:l.string(),triggerAt:l.number(),mainShowroomAdId:l.string().nullish()});UG.extend({brandId:l.string(),adId:l.string().nullish()});l.object({brandId:l.string(),brandName:l.string().nullish(),messageId:l.string(),conversationId:l.string(),visible:l.boolean()});const FG=l.object({requestId:l.string(),ads:l.array(zM),instrumentation:VM}),BG=l.object({selectedTag:by.nullish(),collapsed:l.boolean().nullish(),showroomData:l.array(l.object({requestUrl:l.string(),response:FG})).nullish()}),HG=BG.extend({type:l.literal("ads"),requestId:l.string(),summary:l.string(),ads:l.array(jG).nullish(),instrumentation:VM}),zG=l.object({type:l.literal("computerUseFeedback")}),al=l.union([l.literal("startTask"),l.literal("pauseTask"),l.literal("resumeTask"),l.literal("cancelTask"),l.literal("takeTaskControl"),l.literal("releaseTaskControl")]),VG=l.union([l.literal("bringAgentTabsToForeground"),l.literal("failedTask"),l.literal("completedTask"),l.literal("moveAgentTabsToBackground"),l.literal("showConsentDialog")]);l.union([al,VG]);const $G=l.union([l.literal("allSessionInfo"),l.literal("activeSessionInfo"),l.literal("failedTask"),l.literal("completedTask")]);l.union([al,$G]);const GG=l.union([l.literal("allSessionInfo"),l.literal("activeSessionInfo"),l.literal("failedTask"),l.literal("completedTask")]);l.union([al,GG]);const $M=l.union([l.literal("askUserInput"),l.literal("safetyRiskDetected"),l.literal("userTakeControl"),l.literal("giveBackControl"),l.literal("resumeFromInput"),l.literal("resumeFromRisk"),l.literal("pauseByClick"),l.literal("resumeByClick"),l.literal("taskCompleted")]),KG=l.object({reason:$M,title:l.string().optional(),text:l.string().optional()}),Td=l.object({taskId:l.string()}),WG=Td.extend({type:l.literal("startTask")}),qG=Td.extend({type:l.literal("pauseTask")}),YG=Td.extend({type:l.literal("resumeTask")}),QG=Td.extend({type:l.literal("cancelTask")}),JG=Td.extend({type:l.literal("takeTaskControl")}),XG=Td.extend({type:l.literal("releaseTaskControl")}),GM=l.object({title:l.string(),instruction:l.object({text:l.string(),websites:l.array(l.object({url:l.string().url(),iconUrl:l.string().url().optional()}))})}),S1e=GM.extend({id:l.string()});GM.extend({isActive:l.boolean()});const ZG=l.enum(["choose","replay"]),eK=l.object({name:l.string(),url:l.string().nullish(),description:l.string().nullish(),phoneNumber:l.string().nullish(),smsNumber:l.string().nullish(),chatUrl:l.string().nullish(),whatsAppUrl:l.string().nullish()}),tK=l.object({type:l.literal("safetyHelpline"),countryEmergencyNumber:l.string().nullable(),helplines:l.array(eK)}),nK=l.object({type:l.literal("file"),url:l.string().url(),name:l.string(),contentType:l.string()}),rK=l.object({name:l.string(),disclaimerUrl:l.string(),url:l.string()}),KM=l.object({price:l.number().nullish(),changeInPercentage:l.number().nullish(),changeInAmount:l.number().nullish()}),WM=l.object({id:l.string(),symbol:l.string(),displayName:l.string(),price:l.number(),previousClosePrice:l.number(),changeInPercentage:l.number(),changeInAmount:l.number(),updatedAt:l.string(),iconUrl:l.string(),provider:rK,isFollowed:l.boolean().nullish()}),oK=l.object({priceOpen:l.number().nullish(),priceHigh:l.number().nullish(),priceLow:l.number().nullish(),price52wHigh:l.number().nullish(),price52wLow:l.number().nullish()}),up=WM.extend({intradayPricing:oK,isMarketLastSale:l.boolean(),exchangeTimeZoneId:l.string().nullish(),isMarketRegularHours:l.boolean().optional(),lastUpdatedAt:l.string(),tradingDayEndAt:l.string(),accumulatedVolume:l.number().nullish()}),iK=up.extend({securityType:l.literal("stock"),marketCap:l.number().nullish(),marketCapCurrency:l.string().nullish(),averageVolume:l.number().nullish(),peRatio:l.number().nullish(),postMarket:KM.nullish()}),sK=up.extend({securityType:l.literal("etf"),netAssets:l.number().nullish(),expenseRatio:l.number().nullish(),yieldPercent:l.number().nullish(),postMarket:KM.nullish()}),aK=up.extend({securityType:l.literal("index")}),cK=WM.extend({securityType:l.literal("fund"),price52wHigh:l.number().nullish(),price52wLow:l.number().nullish(),netAssets:l.number().nullish(),expenseRatio:l.number().nullish(),yieldPercent:l.number().nullish(),oneYearReturn:l.number().nullish()}),qM=l.object({amount:l.number().nullish(),currency:l.string().nullish(),currencySymbol:l.string().nullish()}),b1=l.object({value:qM,fullName:l.string().nullish()}),lK=l.object({oneMonth:l.number().nullish(),sixMonths:l.number().nullish(),oneYear:l.number().nullish()}),uK=up.extend({securityType:l.literal("currencyExchange"),fromCurrency:b1,toCurrency:b1,percentageReturns:lK}),dK=up.extend({securityType:l.literal("cryptocurrency"),marketDominancePercentage:l.number().nullish(),circulatingSupply:l.number().nullish(),maxSupply:l.number().nullish(),oneYearReturn:l.number().nullish(),marketCap:qM,marketCapCurrency:l.string().nullish()}),hK=l.enum(Mz),fK=l.object({price:l.number(),volume:l.number(),at:l.string()}),C1=l.array(fK),pK=l.object({afterHoursSeries:C1,series:C1,chartType:hK}),mK=l.discriminatedUnion("securityType",[iK,sK,aK,cK,uK,dK]),gK=l.object({currency:l.string(),instrument:mK,chart:pK.optional()}),vK=gK.extend({type:l.literal("financeChart")}),yK=l.discriminatedUnion("type",[vK]),bK=l.object({id:l.string()}),CK=l.array(bK),E1e=l.object({entities:CK}),SK=l.object({type:l.literal("generativeUI"),markup:l.string(),data:l.record(l.string(),l.any())}),YM=l.object({image:l.object({url:l.string(),thumbnailUrl:l.string(),altText:l.string(),width:l.number(),height:l.number()}),source:l.object({title:l.string(),url:l.string(),iconUrl:l.string().nullable()})}),EK=l.object({type:l.literal("image"),images:l.array(YM)}),wK=l.object({type:l.literal("inlineImage"),title:l.string(),description:l.string()}).merge(YM),IK=l.object({type:l.literal("inlineVideo"),title:l.string(),description:l.string(),video:l.object({url:l.string(),thumbnailUrl:l.string(),title:l.string(),isShort:l.boolean()}),source:l.object({url:l.string(),iconUrl:l.string().optional()})}),TK=l.object({name:l.string(),logoUrl:l.string().nullable(),postUrl:l.string()}),_K=l.object({title:l.string(),companyName:l.string(),companyLogoUrl:l.string().nullable(),postedAt:l.string(),location:l.string(),providers:l.array(TK),description:l.string(),salary:l.string().nullable(),type:l.string().nullable(),locationType:l.string().nullable(),tags:l.array(l.string()).nullable()}),AK=l.object({type:l.literal("job"),jobs:l.array(_K)}),kK=l.object({type:l.literal("localEntity"),entities:l.array(l.object({name:l.string(),phoneNumber:l.string().nullish(),url:l.string().nullish(),reviews:l.array(l.object({count:l.number(),rating:l.number(),providerName:l.string(),providerIconUrl:l.string().nullish(),url:l.string()})),location:l.object({address:l.string().nullish(),latitude:l.number(),longitude:l.number()}),photos:l.array(l.object({url:l.string(),altText:l.string().nullish(),providerName:l.string().nullish(),providerUrl:l.string()})),category:l.string().nullish(),price:l.string().nullish()}))}),xK=l.object({providerName:l.string(),url:l.string().nullish(),thumbnailUrl:l.string(),providerOptions:l.array(l.string()).nullish(),source:l.object({url:l.string(),name:l.string()}).nullish()}),RK=l.object({sourceName:l.string(),maxRating:l.number(),rating:l.number(),url:l.string()}),NK=l.object({url:l.string(),source:l.object({url:l.string(),name:l.string()}).nullish()}),S1=l.object({url:l.string().nullish(),name:l.string().nullish()}),PK={thumbnail:l.object({url:l.string(),source:S1.nullish()}),source:S1.nullish()},OK=l.object({type:l.literal("mediaSpotlight"),title:l.string(),label:l.string().nullish(),description:l.string(),thumbnail:NK,facts:l.record(l.string(),l.string()).nullish(),criticRatings:l.array(RK).nullish(),watchLinks:l.array(xK).nullish(),featuredVideo:l.object(PK).nullish()}),MK=l.object({id:l.string(),type:l.literal("oneDrive"),name:l.string(),lastModifiedAt:l.string(),url:l.string(),webDavUrl:l.string().optional(),contentType:l.string(),size:l.number()}),LK=l.object({type:l.literal("m365"),items:l.array(MK)}),DK=l.object({name:l.string(),url:l.string(),width:l.number().optional(),height:l.number().optional(),thumbnailUrl:l.string().optional()}),jK=l.object({images:l.array(DK)}),UK=jK.extend({type:l.literal("phoneImages")}),FK=l.object({qrCodeUrl:l.string(),linkDeviceUrl:l.string()}),BK=FK.extend({type:l.literal("phoneLinking")}),HK=l.union([l.literal("executing"),l.literal("completed"),l.literal("failed")]),WI=l.object({deviceName:l.string().optional(),state:HK.optional(),disabled:l.boolean().optional(),completedAt:l.string().optional()}),zK=l.enum(["sunday","monday","tuesday","wednesday","thursday","friday","saturday"]),VK=WI.extend({triggerAt:l.string(),repeatDays:l.array(zK).optional().nullable()}),$K=VK.extend({type:l.literal("phoneAlarm")}),GK=WI.extend({seconds:l.number()}),KK=GK.extend({type:l.literal("phoneTimer")}),WK=WI.extend({actionId:l.string(),text:l.string(),phoneNumber:l.string().nullable().optional(),contactName:l.string().nullable().optional(),deviceName:l.string().optional()}),qK=WK.extend({type:l.literal("phoneSendMessage")}),YK=GI.extend({actionName:l.literal("phone_send_message"),parameters:l.object({text:l.string(),phoneNumber:l.string().nullable().optional(),contactName:l.string().nullable().optional()})}),QK=l.discriminatedUnion("type",[BK,UK,$K,KK,qK]),JK=l.object({type:l.literal("quiz"),title:l.string(),quiz:l.array(l.object({type:l.literal("singleSelect"),question:l.string(),options:l.array(l.string()),answer:l.number(),topics:l.array(l.string()).nullable(),explanation:l.string()}))}),XK=l.object({value:l.number(),count:l.number().nullish(),maxRating:l.number().nullish()}),ZK=l.object({hours:l.number(),minutes:l.number()}),QM=l.object({name:l.string(),quantity:l.number().nullish(),unit:l.string().nullish()}),eW=l.object({title:l.string(),url:l.string().url(),source:l.string(),imageUrl:l.string().url().nullish(),rating:XK.nullish(),serving:l.number().nullish(),calories:l.number().nullish(),cookingTime:ZK.nullish(),instructions:l.array(l.string()).nullish(),ingredients:l.array(QM).nullish()}),tW=l.object({type:l.literal("recipe"),recipes:l.array(eW)});l.object({title:l.string(),url:l.string().url(),ingredients:l.array(QM),instructions:l.array(l.string()).nullish(),imageUrl:l.string().url().nullish(),messageId:l.string().nullish()});const JM=l.object({url:l.string().url(),name:l.string(),imageUrl:l.string().url().optional(),images:l.array(l.string().url()).optional(),price:Fr,seller:l.string()}),XM=l.object({value:l.number(),count:l.number()}).nullish(),nW=JM.extend({type:l.literal("shopping"),id:l.string(),rating:XM}),rW=JM.extend({isNotificationEnabled:l.boolean().nullish(),offerId:l.string(),currentPrice:Fr.nullish(),percentageDrop:l.number(),durationInWeeks:l.number()}),ZM=l.object({title:l.string().nullish(),url:l.string().url()}),oW=l.enum(["textual","visual"]),iW=l.object({displayName:l.string(),value:l.string(),isActive:l.boolean(),isSelected:l.boolean(),thumbnailImage:ZM.nullish()}),sW=l.object({id:l.string(),displayName:l.string(),filterValues:l.array(iW),filterType:oW}),aW=l.object({id:l.string().nullish(),groupId:l.string().nullish(),brandGroupId:l.string().nullish()}),cW=l.object({displayName:l.string(),values:l.array(l.string())}),eL=l.object({offerUrl:l.string(),domain:l.string()}),lW=l.object({summary:l.string(),attributions:l.array(eL)}),uW=l.object({pros:l.array(l.string()).nullish(),cons:l.array(l.string()).nullish(),attributions:l.array(eL)}),dW=l.discriminatedUnion("type",[l.object({type:l.literal("buyWithMerchant"),checkoutUrl:l.string().nullish(),merchant:l.string().nullish()}),l.object({type:l.literal("buyWithCopilot"),merchantProvider:l.string().nullish(),storeId:l.string().nullish()})]),qI=l.object({product:aW,offerId:l.string(),url:l.string().url(),name:l.string(),description:l.string(),images:l.array(ZM),filters:l.array(sW).nullish(),specifications:l.array(cW).nullish(),review:lW.nullish(),prosAndCons:uW.nullish(),price:Fr,discountPrice:Fr.nullish(),seller:l.string(),sellerLogoUrl:l.string().url().nullish(),brandName:l.string().nullish(),rating:XM.nullish(),checkoutOption:dW.nullish(),curation:l.string().nullish(),canTrackPrice:l.boolean()}),hW=l.object({type:l.literal("shoppingProducts"),products:l.array(qI)}),tL=l.union([l.literal("lowest-price"),l.literal("free-shipping")]),fW=l.object({offerName:l.string(),offerId:l.string(),url:l.string().url(),price:Fr,discountPrice:Fr.nullish(),seller:l.string(),sellerLogoUrl:l.string().url().nullish(),tags:l.array(tL).nullish(),canTrackPrice:l.boolean()}),w1e=l.object({error:l.string(),message:l.string()}),pW=l.object({minPrice:Fr,maxPrice:Fr,averagePrice:Fr,timePeriodInDays:l.number()}),nL=l.object({date:l.coerce.date(),price:Fr}),mW=l.object({daily:nL.array()}),gW=l.object({label:l.string(),prompt:l.string()}),vW=l.object({scenario:l.literal("priceHistory"),priceHistory:l.object({dailyPrices:nL.array(),type:l.union([l.literal("increase"),l.literal("decrease")]),percentage:l.number()})}),yW=l.discriminatedUnion("scenario",[vW]),I1e=qI.extend({otherBuyingOptions:l.array(fW).nullish(),priceInsight:pW.nullish(),tags:l.array(tL).nullish(),priceHistory:mW.nullish(),conversationStarters:l.array(gW).nullish(),nudge:yW.nullish()}),T1e=l.object({products:rW.array()}),bW=l.object({category:l.string(),curationGroupId:l.string(),position:l.union([l.literal("top"),l.literal("middle"),l.literal("bottom")]).nullish()}),Bm=qI.extend({curationInfo:bW.nullish()});l.object({product:Bm,messageId:l.string(),allProducts:l.array(Bm).nullish(),accessories:l.array(Bm).nullish()});const CW=l.object({type:l.literal("shoppingCurated"),title:l.string().optional(),products:l.array(Bm),groupType:l.string().nullish()}),SW=l.discriminatedUnion("type",[nW,hW,CW]),_1e=l.object({emailNotificationEnabled:l.boolean()}),EW=l.object({name:l.string(),url:l.string().url(),offerId:l.string()}),wW=l.object({url:l.string().url(),source:l.string()}),IW=l.object({reason:l.string(),references:l.array(wW)}),TW=l.enum(["buy-now","buy-later"]),A1e=l.object({whenToBuy:TW,seller:EW,supportingReasons:l.array(IW)});l.object({isPDP:l.boolean(),name:l.string().nullish(),image:l.string().url().nullish(),base64_image:l.string().nullish(),price_currency:l.string().nullish(),price_value:l.coerce.number().nullish(),"aggregateRating/ratingValue":l.union([l.string(),l.nan()]).nullish(),"aggregateRating/reviewCount":l.union([l.string(),l.nan()]).nullish()});l.object({name:l.string().optional(),rating:l.object({value:l.number(),count:l.number()}).optional(),images:l.array(l.object({url:l.string()})).optional(),price:l.object({amount:l.number(),currency:l.string().nullable(),currencySymbol:l.string().nullable()}).optional()});const _W=l.enum(["home","away"]),oi=l.enum(["win","loss","tie","no-game"]),rL=l.enum(["pre-game","in-progress","final","postponed","delayed","abandoned","cancelled"]),AW=l.enum(["test","odi","t20"]),kW=l.enum(["test","limited-overs","super-over"]),xW=l.enum([...rL.options,"drinks","dinner","tea","lunch","innings-break","super-over","toss","stumps","strategic-timeout","forfeited"]),RW=l.enum([...rL.options,"bye","retired","forfeited","unscheduled","suspended"]),NW=l.enum(["men-singles","men-doubles","women-singles","women-doubles","mixed-doubles"]),PW=l.enum(["round-of256","round-of128","round-of64","round-of32","round-of16","quarter-final","semi-final","final"]),oL=l.object({name:l.string(),city:l.string().nullish()}),OW=l.object({name:l.string(),thumbnailUrl:l.string().nullish(),seasonPhase:l.string().nullish(),seasonStartsAt:l.string().nullish(),seasonEndsAt:l.string().nullish(),leagueId:l.string()}),MW=l.object({type:l.literal("league"),league:OW}),_g=l.object({name:l.string(),thumbnailUrl:l.string().nullish()}),LW=l.object({type:l.literal("team"),team:_g}),DW=l.object({type:l.literal("matchup"),matchup:l.object({teamA:_g,teamB:_g})}),dp=l.discriminatedUnion("type",[MW,LW,DW]),jW=l.object({name:l.string(),alias:l.string().nullish(),thumbnailUrl:l.string().nullish()}),Nr=jW.extend({primaryColorHex:l.string().nullish(),venueType:_W.nullish(),previousGameOutcomes:l.array(oi).nullish(),seed:l.number().nullish(),gameOutcome:oi.nullish(),score:l.string().nullish()}),YI=Nr.extend({winProbability:l.number().nullish()}),QI=l.object({wins:l.number(),losses:l.number(),overtimeLosses:l.number().nullish()}),UW=l.object({playerName:l.string(),clock:l.object({minutes:l.number(),seconds:l.number()})}),FW=l.object({ballPossessionPercentage:l.number().nullish(),goals:l.array(UW).nullish()}),iL=Nr.extend({gameStats:FW,score:l.string()}),BW=iL.extend({gameOutcome:oi}),HW=l.object({wins:l.number(),participantName:l.string()}),zW=l.enum(["final","not-started","in-progress"]),VW=l.enum(["national-championship","first-four","first-round","second-round","conference-semifinal","conference-final","sweet16","elite-eight","final-four","final"]),$W=l.object({state:zW,winsInfo:l.array(HW).nullish(),gameNumber:l.number().nullish(),conference:l.string().nullish()}),sL=$W.extend({phase:VW}),JI=l.object({name:l.string(),score:l.string()}),GW=l.object({current:l.number(),total:l.number(),aggregatedScores:l.array(JI).nullish()}),XI=l.object({startsAt:l.string(),status:l.string(),leagueName:l.string(),legInfo:GW.nullish(),leagueId:l.string().nullish(),gameId:l.string().nullish(),startTimeToBeAnnounced:l.boolean().nullish()}),_d=l.object({minutes:l.number(),seconds:l.number()}),KW=l.enum(["quarter","half","extra","penalties","shoot-out","overtime","inning","period"]),WW=l.enum(["top","bottom"]),Ia=l.object({type:KW,period:l.number(),division:WW.nullish()}),Cy=l.object({playingPeriod:Ia,score:l.string()}),qW=YI.extend({record:QI.nullish(),gameOutcome:oi.nullish(),score:l.string().nullish(),playingPeriodScores:l.array(Cy).nullish(),gameStats:l.null().nullish()}),cl=XI.extend({week:l.number().nullish()}),ll=XI.extend({name:l.string().nullish(),seasonPhase:l.string().nullish(),bracket:sL.nullish(),week:l.number().nullish(),clock:_d.nullish(),currentPlayingPeriod:Ia.nullish()}),YW=cl.extend({status:l.literal("pre-game"),participants:l.array(YI)}),ZI=l.object({clock:_d,description:l.string(),team:_g,participantScores:l.array(JI).nullish()}),QW=ZI.extend({type:l.enum(["score-change","yellow-card","red-card"])}),eT=ZI.extend({type:l.enum(["three-point-made","two-point-made","touchdown","field-goal","extra-point","safety","two-point-conversion","blocked-punt-safety","blocked-field-goal-safety","fumble-safety"])}),Ad=l.object({url:l.string(),thumbnailUrl:l.string(),title:l.string(),durationInSeconds:l.number().nullish()}),JW=ll.extend({status:l.literal("pre-game"),participants:l.array(qW),timeline:l.object({events:l.array(eT)}).nullish(),videos:l.array(Ad).nullish()}),XW=cl.extend({status:l.literal("in-progress"),participants:l.array(iL),clock:_d,currentPlayingPeriod:Ia,timeline:l.object({events:l.array(QW)}).nullish()}),ZW=cl.extend({status:l.literal("final"),participants:l.array(BW),videos:l.array(Ad).nullish()}),eq=cl.extend({status:l.literal("postponed"),participants:l.array(Nr)}),tq=cl.extend({status:l.literal("delayed"),participants:l.array(Nr)}),nq=cl.extend({status:l.literal("abandoned"),participants:l.array(Nr)}),rq=cl.extend({status:l.literal("cancelled"),participants:l.array(Nr)}),W0=l.discriminatedUnion("status",[YW,XW,ZW,nq,rq,tq,eq]),aL=Nr.extend({playingPeriodScores:l.array(Cy).nullish(),score:l.string(),record:QI.nullish(),gameOutcome:oi.nullish(),winProbability:l.number().nullish(),gameStats:l.null().nullish()}),oq=aL.extend({gameOutcome:oi}),iq=ll.extend({status:l.literal("in-progress"),participants:l.array(aL),clock:_d,currentPlayingPeriod:Ia,timeline:l.object({events:l.array(eT)}).nullish(),videos:l.array(Ad).nullish()}),sq=ll.extend({status:l.literal("final"),participants:l.array(oq),videos:l.array(Ad).nullish(),clock:_d.nullish(),currentPlayingPeriod:Ia.nullish(),timeline:l.object({events:l.array(eT)}).nullish()}),aq=ll.extend({status:l.literal("postponed"),participants:l.array(Nr)}),cq=ll.extend({status:l.literal("delayed"),participants:l.array(Nr)}),lq=ll.extend({status:l.literal("abandoned"),participants:l.array(Nr)}),uq=ll.extend({status:l.literal("cancelled"),participants:l.array(Nr)}),q0=l.discriminatedUnion("status",[JW,iq,sq,lq,uq,cq,aq]),dq=l.object({type:l.literal("sportsSchedule"),sport:l.enum(["basketball","ice-hockey","football"]),games:l.array(q0),header:dp.nullish(),heroGame:q0.nullish()}),hq=l.object({type:l.literal("sportsSchedule"),sport:l.literal("soccer"),games:l.array(W0),header:dp.nullish(),heroGame:W0.nullish()}),fq=l.object({type:l.literal("sportsGame"),sport:l.enum(["basketball","ice-hockey","football"]),game:q0}),pq=l.object({type:l.literal("sportsGame"),sport:l.literal("soccer"),game:W0}),ul=XI.extend({name:l.string().nullish(),seasonPhase:l.string(),week:l.number().nullish(),videos:l.array(Ad).nullish(),bracket:sL.nullish(),clock:_d.nullish(),currentPlayingPeriod:Ia.nullish()}),cL=l.object({hits:l.number(),errors:l.number(),runs:l.number()}),tT=ZI.extend({type:l.enum(["conversion","bat"]),playingPeriod:Ia,participantScores:l.array(JI)}),lL=YI.extend({record:QI.nullish(),gameOutcome:oi.nullish(),score:l.string().nullish(),playingPeriodScores:l.array(Cy).nullish(),gameStats:cL.nullish()}),uL=lL.extend({playingPeriodScores:l.array(Cy).nullish(),score:l.string(),gameStats:cL.nullish()}),mq=uL.extend({gameOutcome:oi}),gq=ul.extend({status:l.literal("pre-game"),participants:l.array(lL),timeline:l.object({events:l.array(tT)}).nullish()}),vq=ul.extend({status:l.literal("in-progress"),participants:l.array(uL),currentPlayingPeriod:Ia,timeline:l.object({events:l.array(tT)}).nullish()}),yq=ul.extend({status:l.literal("final"),participants:l.array(mq),videos:l.array(Ad).nullish(),timeline:l.object({events:l.array(tT)}).nullish()}),bq=ul.extend({status:l.literal("postponed"),participants:l.array(Nr)}),Cq=ul.extend({status:l.literal("delayed"),participants:l.array(Nr)}),Sq=ul.extend({status:l.literal("abandoned"),participants:l.array(Nr)}),Eq=ul.extend({status:l.literal("cancelled"),participants:l.array(Nr)}),Y0=l.discriminatedUnion("status",[gq,vq,yq,bq,Cq,Sq,Eq]),wq=l.object({type:l.literal("sportsSchedule"),sport:l.literal("baseball"),games:l.array(Y0),header:dp.nullish(),heroGame:Y0.nullish()}),Iq=l.object({type:l.literal("sportsGame"),sport:l.literal("baseball"),game:Y0}),Tq=l.object({ballsFaced:l.number(),runsScored:l.number(),isBatting:l.boolean()}),_q=l.object({oversBowled:l.string(),wicketsTaken:l.number(),runsConceded:l.number(),isBowling:l.boolean()}),Aq=Tq.extend({type:l.literal("batting")}),kq=_q.extend({type:l.literal("bowling")}),dL=l.discriminatedUnion("type",[Aq,kq]),xq=l.object({name:l.string(),stats:dL}),Rq=l.object({playerName:l.string(),teamName:l.string(),gameStats:l.array(dL).nullish()}),Nq=l.object({current:l.number(),required:l.number().nullish()}),Pq=l.object({name:l.string(),currentMatch:l.number(),totalMatches:l.number(),roundName:l.string().nullish(),equation:l.string().nullish()}),hL=l.object({type:kW,runs:l.number(),wickets:l.number(),oversPlayed:l.string(),isFollowedOn:l.boolean(),isDeclared:l.boolean(),duckworthLewisEquation:l.object({target:l.number(),revisedOvers:l.string()}).nullish()}),nT=l.object({name:l.string(),alias:l.string().nullish(),thumbnailUrl:l.string().nullish()}),Oq=nT.extend({previousGameOutcomes:l.array(oi).nullish()}),Mq=nT.extend({inningScores:l.array(hL).nullish(),playersStats:l.array(xq).nullish(),yetToBat:l.boolean()}),Lq=nT.extend({gameOutcome:oi,didNotBat:l.boolean(),inningScores:l.array(hL).nullish()}),Dq=l.object({startsAt:l.string(),startTimeToBeAnnounced:l.boolean(),tossInfo:l.string().nullish(),participants:l.array(Oq),type:l.literal("pre")}),jq=l.object({gameSummary:l.string(),runRate:Nq.nullish(),participants:l.array(Mq),type:l.literal("live")}),Uq=l.object({startsAt:l.string(),gameSummary:l.string(),playerOfTheMatch:Rq.nullish(),participants:l.array(Lq),type:l.literal("final")}),Fq=l.discriminatedUnion("type",[Dq,jq,Uq]),Q0=l.object({gameId:l.string(),leagueId:l.string(),venue:oL.nullish(),format:AW,status:xW,seriesInfo:Pq,phase:Fq}),Bq=l.object({type:l.literal("sportsGame"),sport:l.literal("cricket"),game:Q0}),Hq=l.object({type:l.literal("sportsSchedule"),sport:l.literal("cricket"),games:l.array(Q0),header:dp.nullish(),heroGame:Q0.nullable()}),zq=l.object({name:l.string(),countryFlagThumbnailUrl:l.string().nullish(),seed:l.number().nullish()}),Vq=l.object({points:l.number(),isServing:l.boolean(),tieBreakerPoints:l.number().nullish(),currentGamePoints:l.string().nullish(),setWon:l.boolean().nullish()}),fL=l.object({players:l.array(zq)}),$q=fL,pL=fL.extend({setPoints:l.array(Vq)}),Gq=pL.extend({gameOutcome:oi}),Kq=l.object({type:l.literal("pre"),participants:l.array($q)}),Wq=l.object({type:l.literal("live"),participants:l.array(pL)}),qq=l.object({type:l.literal("final"),participants:l.array(Gq)}),Yq=l.discriminatedUnion("type",[Kq,Wq,qq]),E1=l.object({gameId:l.string(),leagueId:l.string(),status:RW,startsAt:l.string().nullish(),startTimeToBeAnnounced:l.boolean(),venue:oL.nullish(),matchType:NW,round:PW.nullish(),phase:Yq}),Qq=l.object({type:l.literal("sportsSchedule"),sport:l.literal("tennis"),games:l.array(E1),header:dp.nullish(),heroGame:E1.nullish()}),Jq=l.union([dq,hq,wq,Hq,Qq]),Xq=l.discriminatedUnion("sport",[pq,fq,Iq,Bq]),Zq=l.union([Jq,Xq]),eY=l.object({title:l.string(),description:l.string(),startTime:l.number(),endTime:l.number()}),tY=l.object({video:l.object({url:l.string(),thumbnailUrl:l.string(),duration:l.number(),title:l.string(),isShort:l.boolean()}),source:l.object({url:l.string(),iconUrl:l.string().optional()}),bestMomentIndex:l.number().optional(),moments:l.array(eY).optional()}),nY=l.object({type:l.literal("video"),videos:l.array(tY)}),rY=l.enum(["c","f"]),oY=l.enum(["mm","cm","in"]),iY=l.enum(["hPa","inHg","mb","mmHg"]),sY=l.enum(["bft","kph","mph","ms"]),aY=l.enum(["m","km","mi"]),cY=l.object({temperature:rY,height:oY,pressure:iY.optional(),speed:sY.optional(),distance:aY.optional()}),rT=l.enum(WO),lY=l.enum(["rain","snow"]),oT=l.object({type:lY,amount:l.number(),chance:l.number()}),uY=l.object({current:l.number(),high:l.number().optional(),low:l.number().optional()}),dY=l.object({at:l.string(),state:rT,summary:l.string(),description:l.string().optional(),temperature:uY,precipitation:oT.optional()}),mL=l.object({high:l.number(),low:l.number()}),hY=l.object({date:l.string(),state:rT,temperature:mL,precipitation:oT.optional()}),fY=l.object({at:l.string(),state:rT,temperature:mL,precipitation:oT.optional()}),pY=l.object({daily:l.array(hY),hourly:l.array(fY).optional()}),mY=l.object({type:l.literal("weather"),location:l.string(),units:cY,spotlight:dY.optional(),forecast:pY}),Rf=l.enum(WO),gY=l.object({type:l.literal("weatherTemperatureHourly"),location:l.string(),unit:l.union([l.literal("f"),l.literal("c")]),spotlight:l.object({date:l.string(),state:Rf,summary:l.string(),temperature:l.number().optional(),high:l.number(),low:l.number()}),forecast:l.array(l.object({at:l.string(),state:Rf,temperature:l.number(),precipitationChance:l.number()}))}),vY=l.object({type:l.literal("weatherTemperatureDaily"),location:l.string(),unit:l.union([l.literal("f"),l.literal("c")]),forecast:l.array(l.object({date:l.string(),state:Rf,high:l.number(),low:l.number(),precipitationChance:l.number()}))}),gL=l.union([l.literal("rain"),l.literal("snow")]),vL=l.union([l.literal("in"),l.literal("mm")]),yY=l.object({type:l.literal("weatherPrecipitationHourly"),location:l.string(),unit:vL,precipitationType:gL,spotlight:l.object({date:l.string(),summary:l.string(),amount:l.number(),chance:l.number()}),forecast:l.array(l.object({at:l.string(),state:Rf,amount:l.number(),chance:l.number()}))}),bY=l.object({type:l.literal("weatherPrecipitationDaily"),location:l.string(),unit:vL,precipitationType:gL,forecast:l.array(l.object({date:l.string(),state:Rf,amount:l.number(),chance:l.number()}))}),CY=l.union([mY,gY,vY,yY,bY]),yL=l.union([HG,yK,SK,EK,wK,AK,kK,LK,OK,QK,JK,nK,tK,SW,IK,Zq,nY,CY,tW,zG]),Fs=l.object({light:l.string(),dark:l.string()}),SY=l.object({foreground1:Fs,foreground2:Fs,accent:Fs,shape:Fs,shapeInverse:Fs,background1:Fs,background2:Fs,background3:Fs}),w1=l.object({name:l.enum(["ginto-copilot-nord-bold","ginto-copilot-nord-medium-italic","ginto-copilot-480","kari-regular"]),url:l.string().url()}),EY=l.object({name:l.string(),url:l.string().url()}),Ju=l.object({url:l.string().url()}),Xu=l.object({urlLight:l.string().url(),urlDark:l.string().url()}),J0=l.object({url:l.string().url()}),kd=l.object({type:l.string(),title:l.string()}),wY=kd.extend({type:l.literal("coverPage"),content:l.string(),template:l.enum(["image-background","fuzzy-image"]),image0:Ju,sticker0:Xu.nullish(),sticker1:Xu.nullish()}),IY=kd.extend({type:l.literal("heroImage"),content:l.string(),template:l.enum(["noisy-circle","macaron","wavy-shape"]),image0:Ju}),TY=kd.extend({type:l.literal("stickerSheet"),content:l.string(),template:l.enum(["sticker1","sticker2"]),sticker0:Xu,sticker1:Xu,accent0:J0,accent1:J0}),_Y=kd.extend({type:l.literal("simpleText"),content:l.string(),template:l.string().nullish()}),AY=kd.extend({type:l.literal("photoJournal"),content:l.string().nullish(),template:l.enum(["shapes-only","shapes-accents"]),variation:l.enum(["shape-group1","shape-group2"]),label0:l.string(),label1:l.string(),image0:Ju,image1:Ju,sticker0:Xu.nullish(),accent0:J0.nullish()}),kY=kd.extend({type:l.literal("endPage"),content:l.string(),template:l.enum(["wide-cards","tall-cards"]),variation:l.enum(["shape-group1","shape-group2"]),questions:l.array(l.string()),image0:Ju,image1:Ju.nullish(),sticker0:Xu}),xY=l.object({type:l.literal("shareDefault"),template:l.string().nullish()}),RY=l.discriminatedUnion("type",[wY,IY,TY,_Y,AY,kY,xY]),NY=l.object({id:l.string(),modifiedAt:l.string(),theme:SY,font:w1,fontHandwriting:w1.nullish(),masks:l.array(EY),sections:l.array(RY)}),PY=l.object({type:l.literal("chatAboutNarrative"),narrativeId:l.string(),messageIndex:l.number()}),OY=l.object({type:l.literal("provideImageFeedback"),messageId:l.string(),feedbackTypes:l.array(l.string())}),MY=l.object({type:l.literal("createPage"),messageId:l.string()}),LY=l.object({type:l.literal("appendToPage"),messageId:l.string(),pageId:l.string()}),DY=l.object({id:l.string(),conversationId:l.string()}),k1e=l.object({title:l.string().nullish(),content:l.string().nullish(),conversationId:l.string()}),jY=Do.extend({type:l.literal("page"),page:l.object({id:l.string(),conversationId:l.string(),title:l.string().nullish()})}),UY=l.object({id:l.string(),title:l.string().nullish(),updatedAt:l.string(),conversationId:l.string().optional(),type:l.enum(["page","sharedPage"]).optional()}),FY=l.object({results:l.array(UY),next:l.string().nullish()}),x1e=l.object({title:l.string().nullish(),content:l.string().nullish(),page:l.object({id:l.string()}).nullable()}),R1e=l.object({id:l.string(),url:l.string()}),BY=l.enum(["page-count-exceeded","page-content-length-exceeded"]),HY=l.object({errorCode:BY}),zY=l.object({prompt:l.string()}),iT=l.literal("executeTask"),VY=l.object({type:iT,taskId:l.string(),context:zY.optional()}),$Y=l.string(),GY=l.object({currentConversationId:l.string().nullable(),isNewUser:l.boolean(),banExpiresAt:l.string().nullable(),remainingTurns:l.number().nullable(),features:l.array($Y),allowBeta:l.boolean().nullish()}),KY=l.object({id:l.string(),name:l.string(),previewUrl:l.string(),voicemails:l.array(l.string())}),WY=l.object({id:l.string(),backgroundImageUrl:l.string()}),qY=l.object({id:l.string(),name:l.string(),location:WY.nullish()}),Qo=l.object({type:l.string(),label:l.string()}),YY=l.array(Qo),QY=l.object({positive:l.array(Qo),negative:l.array(Qo)}),fi=l.union([YY,QY]),Da=l.object({type:l.string(),label:l.string(),subOptions:l.array(Qo).nullish()}),bL=l.object({local:fi,ads:fi,video:fi,image:fi,sports:fi,job:fi,shopping:fi,finance:fi,quiz:fi,weather:fi}),JY=l.object({positive:l.array(Qo).nullish(),negative:l.array(Qo)});bL.keyof();const CL=l.object({newsArticle:l.array(Da),newsVideo:l.array(Da),newsGem:l.array(Da),chat:l.array(Da),dailyBriefing:l.array(Da),podcast:l.array(Da),default:l.array(Da)});CL.keyof();const XY=l.object({computerUse:l.array(Qo)}),ZY=l.object({text:l.array(Qo),image:l.array(Qo),call:l.array(Qo),appearance:l.array(Qo),card:bL,showroom:JY.nullish(),discover:CL.nullish(),task:XY.nullish()}),eQ=l.object({minTextLength:l.number().min(0),textDeltaPercent:l.number().min(0).max(100),debounceInMilliseconds:l.number().min(0)}),tQ=l.object({signInPrompts:l.array(l.number()),voices:l.array(KY),maxTextMessageLength:l.number(),feedbackOptions:ZY,characters:l.array(qY).nullish(),pageLimit:l.number(),maxPageContentLength:l.number(),maxPageTitleLength:l.number(),messagePreview:eQ});l.object({hasVisionAccess:l.boolean(),allowedDomains:l.array(l.string()).nullable(),allowedDomainSuffixes:l.array(l.string()).nullable(),blockedDomains:l.array(l.string()).nullable(),blockedDomainSuffixes:l.array(l.string()).nullable()});const nQ=l.object({startTime:l.number(),endTime:l.number(),text:l.string()}),I1=l.object({url:l.string(),duration:l.number(),transcript:l.array(nQ).nullish()}),rQ=l.object({title:l.string(),image:l.string(),url:l.string(),createdAt:l.string()}),oQ=l.object({publisherName:l.string(),publisherIcon:l.string(),articles:l.array(rQ)}),T1=l.object({url:l.string(),foregroundColor:l.string(),backgroundColor:l.string()}),_1=l.object({name:l.string(),foregroundColor:l.string(),backgroundColor:l.string(),altText:l.string().nullish(),url:l.string()}),iQ=l.object({landscape:_1,portrait:_1}),sQ=l.object({id:l.string(),title:l.string(),image:l.object({landscape:T1,portrait:T1}),audio:l.record(l.string(),I1),transitionMusic:I1.nullable(),sources:l.array(oQ)}),SL=l.object({topics:l.array(l.object({id:l.string(),label:l.string(),imageUrl:l.string(),isFollowed:l.boolean()}))}),aQ=l.object({position:l.number(),chapterId:l.string()}),EL=l.object({isAvailable:l.boolean(),podcastId:l.string(),chapters:l.array(sQ),topics:SL.optional(),playback:aQ}),cQ=l.object({positionInSeconds:l.number(),chapterId:l.string()}),lQ=l.object({id:l.string(),title:l.string(),topic:l.string().nullable().optional(),image:iQ,audio:l.object({name:l.string(),duration:l.number()})}),Ag=l.object({isAvailable:l.boolean(),podcastId:l.string(),chapters:l.array(lQ),playback:cQ}),uQ=l.enum(jz),dQ=l.enum(Lz),hQ=l.enum(Dz),fQ=l.object({channel:hQ,tier:dQ,isAutoRenew:l.boolean()}),wL=l.object({id:l.string(),firstName:l.string().nullable(),anid:l.string().nullable(),isPro:l.boolean(),isDeprecated:l.boolean().nullish(),inEeaPlusRegion:l.boolean(),regionCode:l.enum(Object.values(ip)),isHistoryMigrationPending:l.boolean(),isEligibleForFreeTrial:l.boolean().optional(),phoneLink:l.object({deviceName:l.string().nullable()}).nullable(),ageGroup:l.enum(Oz).nullable(),allowedToggles:l.object({textTraining:l.boolean(),voiceTraining:l.boolean(),personalization:l.boolean()}),remainingCalls:l.object({reasoning:l.number(),podcastGeneration:l.number(),research:l.number()}).nullish(),accountTier:uQ.nullish(),subscriptions:l.array(fQ).nullish()}),pQ=l.object({preferredVoice:l.string().nullable(),preferredCharacter:l.string().nullable().optional(),optOutOfTraining:l.boolean(),optInToVoiceTraining:l.boolean(),optOutOfPersonalization:l.boolean(),optOutOfPhoneConnection:l.boolean(),optInToGenerativeUI:l.boolean().optional(),allowBiometricDataUse:l.boolean().optional(),allowOneDriveAccess:l.boolean().optional(),features:l.object({suggestedFollowups:l.boolean().optional()}).nullish()}),IL=l.object({errorCode:l.union([l.literal("attachment-too-large"),l.literal("unsupported-content-type"),l.literal("empty-attachment"),l.literal("content-blocked"),l.literal("rate-limit-exceeded"),l.literal("not-signed-in")])}),mQ=l.union([l.object({url:l.string()}),IL]),TL=l.union([l.object({id:l.string()}),IL]),gQ=l.object({id:l.string(),title:l.string().optional(),updatedAt:l.string(),characterId:l.string().nullable().optional(),continuedAt:l.string().nullable()}),vQ=l.object({results:l.array(gQ),next:l.string().nullable()}),yQ=l.object({id:l.string()}),_L=l.union([l.literal("thumbs-down"),l.literal("thumbs-up"),l.null()]),Sy=l.union([l.literal("running"),l.literal("completed"),l.literal("failed"),l.literal("cancelled"),l.literal("pending"),l.literal("paused")]),bQ=l.union([l.literal("research"),l.literal("computerUse"),l.literal("podcast")]),CQ=l.object({type:l.literal("chainOfThought"),text:l.string()}),SQ=l.object({type:l.literal("query"),text:l.string()}),EQ=l.object({type:l.literal("citation"),title:l.string(),url:l.string()}),wQ=l.discriminatedUnion("type",[CQ,SQ,EQ]),AL=l.object({title:l.string(),url:l.string(),position:l.number(),iconUrl:l.string().nullish(),publisher:l.string().nullish()}),IQ=l.object({id:l.string(),title:l.string().nullish(),contents:l.array(wQ).nullish(),inlineCitations:l.array(AL).nullish(),partialOutput:l.array(l.string()).nullish(),finalResponse:l.string().nullish(),type:l.literal("research"),status:Sy,prompt:l.string().optional()}),kL=l.object({url:l.string(),createdAt:l.string()}),TQ=l.object({type:l.literal("computerUse"),title:l.string().nullish(),conversationId:l.string().nullish(),id:l.string(),status:Sy,lastScreenshot:kL.nullish(),updatedAt:l.string().nullish()}),xL=l.object({id:l.string(),title:l.string().nullish(),thumbnail:l.object({name:l.string().nullish()}).nullish()}),_Q=l.object({type:l.literal("podcast"),id:l.string(),podcast:xL.nullish(),status:Sy,updatedAt:l.string().nullish()}),RL=l.discriminatedUnion("type",[IQ,TQ,_Q]),sT=l.object({id:l.string(),title:l.string().optional(),conversationId:l.string().optional(),updatedAt:l.string(),status:Sy,type:bQ}),AQ=sT.extend({type:l.literal("research")}),kQ=sT.extend({type:l.literal("computerUse"),screenshot:l.string().nullish(),lastScreenshot:kL.nullish(),chainOfThought:l.array(l.string()).nullish(),computerAction:l.string().nullish(),statusChange:KG.optional(),lastUserCommand:al.optional(),reaction:_L.optional(),activeTabFaviconUrl:l.string().nullish(),activeTabTitle:l.string().nullish(),isReplaying:l.boolean().nullish(),viewMode:ZG.nullish()}),xQ=sT.extend({type:l.literal("podcast"),podcast:xL.nullish()}),RQ=l.discriminatedUnion("type",[AQ,kQ,xQ]),N1e=l.object({results:l.array(RQ),next:l.string().nullable()}),hp=l.union([l.literal("report"),..._L.options]),NQ=l.union([l.literal("generating"),l.literal("generated"),l.literal("failed"),l.literal("non-complete")]),NL=l.object({id:l.string(),createdAt:l.string()}),PQ=l.object({index:l.string(),title:l.string(),url:l.string(),iconUrl:l.string().nullable(),publisher:l.string().nullable()}),OQ=Do.extend({type:l.literal("image"),url:l.string().optional(),prompt:l.string().optional().nullable(),isPartiallyLoading:l.boolean().optional(),reaction:hp.optional(),partialGenerationStep:l.number().optional(),status:NQ.optional(),progressionText:l.string().nullable().optional()}),MQ=Do.extend({type:l.literal("citation"),...AL.shape}),LQ=Do.extend({type:l.literal("text"),text:l.string(),citations:l.array(PQ).optional(),reaction:hp.optional()}),DQ=Do.extend({type:l.literal("task"),task:RL.nullish(),reaction:hp.optional()}),jQ=Do.extend({type:l.literal("card"),card:yL,reaction:hp.optional()}),UQ=Do.extend({type:l.literal("deleted"),partType:l.enum(["page","task"])}),FQ=Do.extend({type:l.literal("error"),text:l.string()}),BQ=l.object({text:l.string(),lastSubActionScreenshotUrl:l.string().nullish()}),HQ=Do.extend({type:l.literal("chainOfThought"),text:l.string(),screenshotUrl:l.string().nullish(),reaction:hp.optional(),partId:l.string()}),zQ=Do.extend({type:l.literal("chainOfThoughtGroup"),items:l.array(BQ).optional(),subAction:l.string().optional(),activities:l.array(Tg).optional(),isComplete:l.boolean()}),VQ=Do.extend({type:l.literal("memorySignal"),text:l.string(),signalType:l.union([l.literal("remember"),l.literal("forget")]).nullish()}),$Q=l.object({position:l.union([l.literal("left"),l.literal("right")]),isDefault:l.boolean()}),GQ=l.discriminatedUnion("type",[LQ,OQ,jY,MQ,FQ,jQ,DQ,UQ,HQ,zQ,_G,VQ]),KQ=l.object({type:l.literal("text"),text:l.string()}),WQ=l.object({type:l.literal("browserTabs"),tabs:l.array(l.object({title:l.string().optional(),url:l.string().optional(),id:l.number().optional(),favIconUrl:l.string().optional(),windowId:l.number()}))}),qQ=l.object({type:l.literal("image"),url:l.string()}),YQ=l.object({type:l.literal("document"),partId:l.string(),fileName:l.string(),contentType:l.string()});l.object({type:l.literal("document"),attachmentId:l.string()});l.union([al,iT]);l.union([l.literal("provideImageFeedback"),l.literal("createPage"),l.literal("appendToPage"),l.literal("promptCharacterSpeech"),al,l.literal("chatAboutNarrative"),iT]);const QQ=l.object({type:l.literal("promptCharacterSpeech")}),JQ=l.discriminatedUnion("type",[OY,MY,LY,WG,qG,YG,QG,JG,XG,QQ,PY,VY]),XQ=l.object({type:l.literal("command"),command:JQ}),ZQ=l.object({type:l.literal("dailyBriefing"),chapterId:l.string()}),eJ=l.object({type:l.literal("greeting"),greetingMessage:l.string()}),tJ=l.object({type:l.literal("news"),articleId:l.string()}),nJ=l.object({type:l.literal("newsGem"),gemId:l.string(),snapshotKey:l.string()}),rJ=l.discriminatedUnion("type",[ZQ,eJ,tJ,nJ]);l.object({type:l.literal("reference"),reference:rJ});const oJ=l.discriminatedUnion("type",[KQ,qQ,YQ,XQ,WQ]),iJ=l.union([l.literal("chat"),l.literal("smart"),l.literal("reasoning"),l.literal("research"),l.literal("computerUse")]),sJ=NL.extend({author:l.literal("ai"),content:l.array(GQ),mode:iJ.optional(),sideBySideConfig:$Q.optional()}),aJ=NL.extend({author:l.literal("human"),content:l.array(oJ)}),PL=l.discriminatedUnion("author",[sJ,aJ]),OL=l.object({results:l.array(PL),next:l.string().nullable()}),cJ=l.object({messages:l.array(PL),conversationTitle:l.string()}),P1e=l.object({url:l.string()}),lJ=l.object({conversation:l.object({id:l.string(),title:l.string()})});l.object({qc:l.object({q:l.string(),gt:l.string(),sc:l.string()}),s:l.array(l.object({st:l.string(),t:l.string()}))});const aT=l.union([l.literal("active"),l.literal("banned"),l.literal("ineligible")]),cT=l.union([l.literal("active"),l.literal("not-started"),l.literal("expired"),l.literal("paused")]),uJ=l.union([l.literal("not-started"),l.literal("completed"),l.literal("ineligible")]),dJ=l.object({id:l.string(),type:l.string(),points:l.number()}),hJ=l.object({redeemableCount:l.number(),redeemedCount:l.number(),skus:l.array(dJ)}),O1e=l.object({userStatus:aT,status:cT,startAt:l.string(),endAt:l.string(),referralCode:l.string().nullish(),referralTaskStatus:uJ.nullish(),rewards:hJ.nullish()}),M1e=l.object({userStatus:aT.nullish(),programStatus:cT}),L1e=l.object({userStatus:aT.nullish(),programStatus:cT,lastRequestTime:l.string(),userId:l.string()}),pC=l.enum(["prefillComposer","sendMessage","deepLink"]),lT=l.discriminatedUnion("type",[l.object({type:l.literal(pC.enum.prefillComposer),prompt:l.string()}),l.object({type:l.literal(pC.enum.sendMessage),prompt:l.string()}),l.object({type:l.literal(pC.enum.deepLink),uri:l.string()})]),fJ=l.object({id:l.string(),text:l.string(),action:lT}),pJ=l.object({id:l.string(),text:l.string(),thumbnail:l.object({url:l.string(),altText:l.string()}),action:lT}),mJ=l.object({id:l.string(),text:l.string(),action:lT}),gJ=l.discriminatedUnion("type",[l.object({type:l.literal("text"),id:l.literal("conversation-starter"),title:l.string().nullish(),items:l.array(fJ)}),l.object({type:l.literal("textAndImage"),id:l.union([l.literal("feature-discovery"),l.literal("kickstarter"),l.literal("image-generation")]),title:l.string().nullish(),items:l.array(pJ)}),l.object({type:l.literal("textAndGreeting"),id:l.string(),title:l.string().nullish(),greeting:l.string().nullish(),items:l.array(mJ)})]),vJ=l.object({widgets:l.array(gJ)}),yJ=l.object({dPPRank:l.string()}),bJ=l.object({query:l.string(),source:l.string(),metadata:yJ});l.object({suggestedQueries:l.array(bJ),url:l.string()});const CJ=l.object({type:l.literal("topicList"),id:l.string(),topics:l.array(l.object({text:l.string()})).nullable(),selectedIndex:l.number().nullable()}),SJ=CJ.nullable(),EJ=l.union([l.string(),l.number(),l.boolean(),l.null()]),Nf=l.lazy(()=>l.union([EJ,l.array(Nf),l.record(Nf)])),wJ=l.object({op:l.literal("add"),path:l.string(),value:Nf}),IJ=l.object({op:l.literal("remove"),path:l.string()}),TJ=l.object({op:l.literal("replace"),path:l.string(),value:Nf}),_J=l.object({op:l.literal("move"),from:l.string(),path:l.string()}),AJ=l.object({op:l.literal("copy"),from:l.string(),path:l.string()}),kJ=l.object({op:l.literal("test"),path:l.string(),value:Nf}),xJ=l.discriminatedUnion("op",[wJ,IJ,TJ,_J,AJ,kJ]),A1=l.array(xJ),RJ=l.union([l.literal("event-not-recognized"),l.literal("over-turn-limit"),l.literal("unknown-error"),l.literal("message-too-large"),l.literal("invalid-event"),l.literal("empty-message"),l.literal("empty-text"),l.literal("text-too-long"),l.literal("multiple-text-parts"),l.literal("multiple-image-parts"),l.literal("too-many-messages"),l.literal("over-reasoning-quota"),l.literal("over-task-quota"),l.literal("page-content-length-exceeded"),l.literal("page-count-exceeded"),l.literal("character-out-of-capacity"),l.string()]),NJ=l.union([l.literal("blocked"),l.literal("not-signed-in"),l.literal("failed"),l.string()]),ML=l.union([l.literal("quiz"),l.literal("generative-ui")]),LL=l.union([l.literal("throttled"),l.literal("throttled-non-pro"),l.literal("time-expired"),l.literal("time-expired-non-pro"),l.literal("not-in-flight"),l.literal("error"),l.literal("signed-out"),l.literal("region-not-available"),l.literal("time-expired-month"),l.literal("time-expired-month-non-pro")]),PJ=l.object({voice:l.string().optional(),speed:l.number().min(50).max(200).optional()}).partial(),k1=l.number().min(0).max(200).default(100),x1=l.union([l.literal("standard"),l.literal("character")]),R1=l.discriminatedUnion("event",[GI,l.object({event:l.literal("pong"),id:l.string()}),l.object({event:l.literal("connected"),id:l.string(),requestId:l.string()}),l.object({event:l.literal("received"),conversationId:l.string(),messageId:l.string(),createdAt:l.string()}),l.object({event:l.literal("emojiReaction"),messageId:l.string(),emoji:l.string()}),l.object({event:l.literal("startMessage"),conversationId:l.string(),messageId:l.string(),createdAt:l.string()}),l.object({event:l.literal("appendText"),messageId:l.string(),text:l.string(),partId:l.string()}),l.object({event:l.literal("replaceText"),messageId:l.string(),text:l.string(),partId:l.string()}),l.object({event:l.literal("titleUpdate"),conversationId:l.string(),title:l.string()}),l.object({event:l.literal("generatingImage"),messageId:l.string(),prompt:l.string(),partId:l.string(),progressionText:l.string().nullable().optional()}),l.object({id:l.string(),event:l.literal("generatingImages"),messageId:l.string(),partIds:l.array(l.string()),prompt:l.string()}),l.object({event:l.literal("imageGenerated"),messageId:l.string(),url:l.string(),partId:l.string()}),l.object({event:l.literal("partialImageGenerated"),messageId:l.string(),url:l.string(),partId:l.string(),content:l.string()}),l.object({event:l.literal("page"),messageId:l.string(),partId:l.string(),page:l.object({id:l.string(),conversationId:l.string(),title:l.string().nullish()})}),l.object({event:l.literal("challenge")}),l.object({event:l.literal("imageGenerationFailed"),messageId:l.string(),errorCode:NJ,partId:l.string()}),l.object({id:l.string(),event:l.literal("generatingCard"),messageId:l.string(),partId:l.string(),type:ML}),l.object({id:l.string(),event:l.literal("cardGenerationFailed"),messageId:l.string(),partId:l.string()}),l.object({event:l.literal("transcriptEvent")}),l.object({event:l.literal("audioStart"),conversationId:l.string()}),l.object({event:l.literal("audio"),audio:l.string()}),l.object({event:l.literal("audioStartFailed"),reason:LL}),l.object({event:l.literal("audioTimeRemaining"),seconds:l.number()}),l.object({event:l.literal("callTerminated"),reason:l.string().optional()}),l.object({event:l.literal("audioEnd")}),l.object({event:l.literal("audioConfig"),options:PJ}),l.object({event:l.literal("interruptAudio")}),l.object({event:l.literal("speechEndDetected")}),l.object({event:l.literal("citation"),messageId:l.string(),url:l.string(),title:l.string(),partId:l.string(),iconUrl:l.string().nullable(),publisher:l.string().nullable()}),l.object({event:l.literal("chainOfThought"),messageId:l.string(),partId:l.string(),text:l.string()}),l.object({event:l.literal("turnLimitReached"),id:l.string()}),l.object({event:l.literal("done"),messageId:l.string()}),l.object({event:l.literal("error"),errorCode:RJ}),l.object({event:l.literal("card"),messageId:l.string(),partId:l.string(),card:yL}),l.object({event:l.literal("callUI"),id:l.string(),callUI:SJ}),l.object({event:l.literal("banned"),expiresAt:l.string()}),l.object({id:l.string(),event:l.literal("suggestedFollowups"),messageId:l.string(),suggestions:l.array(l.string())}),l.object({event:l.literal("taskStart"),id:l.string(),messageId:l.string(),partId:l.string(),task:RL}),l.object({event:l.literal("taskUpdate"),id:l.string().nullish(),taskId:l.string(),update:A1}),l.object({event:l.literal("startSuggestion"),id:l.string(),pageId:l.string(),suggestionId:l.string(),editTargets:l.array(l.object({startIndex:l.number(),endIndex:l.number()}))}),l.object({event:l.literal("appendSuggestion"),id:l.string(),pageId:l.string(),suggestionId:l.string(),text:l.string()}),l.object({event:l.literal("characterAnimation"),id:l.string(),offsetInMilliseconds:l.number().nullable().optional(),frame:l.discriminatedUnion("model",[bG,CG]).nullable().optional()}),l.object({event:l.literal("setCallType"),callType:x1}),l.object({event:l.literal("callTypeChanged"),callType:x1}),l.object({event:l.literal("activityStart"),activity:Tg,id:l.string(),messageId:l.string(),partId:l.string()}),l.object({event:l.literal("activityUpdate"),id:l.string(),messageId:l.string(),partId:l.string(),update:A1}),l.object({event:l.literal("memorySignal"),messageId:l.string(),partId:l.string(),text:l.string(),signalType:l.union([l.literal("remember"),l.literal("forget")]).nullish()}),l.object({event:l.literal("sideBySideComparison"),id:l.string(),conversationId:l.string(),sideBySideComparisonId:l.string(),defaultMessageId:l.string(),options:l.array(l.object({messageId:l.string(),position:l.union([l.literal("left"),l.literal("right")])}))}),l.object({event:l.literal("characterEmotion"),emotion:l.string(),bodyReaction:l.string()})]),DL={kNotPresent:0};function D1e(t){return typeof t=="object"&&t!==null&&"eventName"in t&&"requestId"in t&&(!("isOutgoing"in t)||!t.isOutgoing)&&"args"in t}const gr=M(void 0),Ey=M(t=>t(gr)!==void 0),jL=cp({key:pM,schema:l.string().optional(),initialValue:void 0}),UL=M(t=>{const e=t(gr),n=t(jL);return e===void 0?n:e.firstName??e.givenName}),FL=M(t=>{var e;return(e=t(gr))==null?void 0:e.id}),fp=M(void 0),j1e=M(t=>t(my).find(e=>e.id===t(fp))),U1e=M(t=>{var r,o;const e=t(my),n=t(fp)??((r=e[0])==null?void 0:r.id);return(o=e.find(i=>i.id===n))==null?void 0:o.voicemails}),BL=cp({key:p1,schema:k1,initialValue:lo(p1,k1)??ly}),Zu=cp({key:h1,schema:y1,initialValue:lo(h1,y1)??void 0}),OJ=cp({key:L$,schema:l.boolean().optional(),initialValue:void 0}),HL=M(null),pp=M(null),zL=M(t=>t(FI).find(e=>e.id===t(pp))),F1e=M(!1),B1e=M(DL.kNotPresent),H1e=M(DL.kNotPresent),VL=M(void 0),uT=M(!1),dT=M(void 0),MJ=M(!1),$L=M(void 0),LJ=M(!1),hT=M(null),fT=M(null),DJ=M(!0),z1e=M(!1),V1e=M(!1),xd=M(t=>{const e=t(gr),n=t(tl("cmc-m365-sku")),r=!!(e!=null&&e.isPro),o=(e==null?void 0:e.subscriptions)??[];return n&&o.some(i=>i.tier==="pro")||r}),jJ=M(t=>{var e;return(e=t(gr))==null?void 0:e.isStudent});M(t=>{var e;return(e=t(gr))==null?void 0:e.inEeaPlusRegion});const Vr=M(void 0),UJ=M(!1);M(t=>{const e=t(Vr);return e&&qz.includes(e)});const GL=M(void 0),wy=M(t=>{var e;return((e=t(gr))==null?void 0:e.isEligibleForFreeTrial)??!1}),KL=M(void 0),Iy=M(t=>{var e;return((e=t(gr))==null?void 0:e.ageGroup)==="teen"}),FJ=M(t=>{var e;return(e=t(gr))==null?void 0:e.allowedToggles.personalization}),BJ=M(t=>{var e;return(e=t(gr))==null?void 0:e.allowedToggles.textTraining}),HJ=M(t=>{var e;return(e=t(gr))==null?void 0:e.allowedToggles.voiceTraining}),WL=M(!1),qL=M(null),YL=M(t=>{var e;return((e=t(gr))==null?void 0:e.subscriptions)??[]}),zJ=M(t=>{const e=t(YL);return yG(e)[0]}),X0=M(0),QL=M(void 0),Ty=M(!1),pT=M(t=>{const e=t(pG),n=t(OM),r=t(QL),o=t(Ty);if(!(n||o))return e||r}),Rd=M(t=>{const e=t(pT),n=t(X0);if(!e||e.length===0)return;const r=Math.max(0,Math.min(n,e.length-1));return e[r]}),mT=M(t=>{const e=t(Rd),n=t(Ty),r=t(pT);return n||!r?null:(e==null?void 0:e.type)==="textAndGreeting"?e.greeting??null:null}),JL=M(!1),VJ=M(t=>{const e=t(Rd);return e==null?void 0:e.title}),$J=M(t=>{const e=t(Rd);return e==null?void 0:e.id}),GJ=M(t=>{const e=t(Rd),n=e==null?void 0:e.id;return n==="feature-discovery"||n==="image-generation"||n==="kickstarter"}),KJ=M(null,(t,e)=>{const n=t(pT),r=t(X0);if(!n||n.length<=1)return;const o=(r+1)%n.length;e(X0,o)}),WJ=M(void 0),qJ=M(void 0),gT=M(!1);M(void 0);const $1e=ay(new Map);M(void 0);const G1e=M(null),K1e=ay(void 0);function mp(){const t=O(li),e=O(Lo);return t.length===0&&!!(e!=null&&e.isNew)}function _y(){const t=O(gT),e=O(qJ),r=mp()&&!!e,o=r&&!!(e!=null&&e.nudge);return{isContextualShoppingCardExpanded:t,showShoppingCardInNewChat:r,shoppingProductMetadata:e,isCopilotOpenedViaNudge:o}}function YJ(t){if(!t.length)return;const e=ni("greetingIndex"),n=t.length,r=e?(parseInt(e,10)+1)%n:0;return pa("greetingIndex",r.toString()),t[r]}const vT=M(!1),QJ=M(!1),XL=rt(),JJ=["chat.launchMessage.authenticatedV3Type1","chat.launchMessage.authenticatedV3Type2","chat.launchMessage.authenticatedV3Type3"],XJ=["chat.launchMessage.unauthenticatedV3Type1","chat.launchMessage.unauthenticatedV3Type2","chat.launchMessage.unauthenticatedV3Type3"],ZJ=["chat.launchMessage.authenticatedV4Type1","chat.launchMessage.authenticatedV4Type2","chat.launchMessage.authenticatedV4Type3","chat.launchMessage.authenticatedV4Type4","chat.launchMessage.authenticatedV4Type5","chat.launchMessage.authenticatedV4Type6","chat.launchMessage.authenticatedV4Type7","chat.launchMessage.authenticatedV4Type8","chat.launchMessage.authenticatedV4Type9","chat.launchMessage.authenticatedV4Type10"],eX=["chat.launchMessage.unauthenticatedV4Type1","chat.launchMessage.unauthenticatedV4Type2","chat.launchMessage.unauthenticatedV4Type3","chat.launchMessage.unauthenticatedV4Type4","chat.launchMessage.unauthenticatedV4Type5","chat.launchMessage.unauthenticatedV4Type6","chat.launchMessage.unauthenticatedV4Type7","chat.launchMessage.unauthenticatedV4Type8","chat.launchMessage.unauthenticatedV4Type9","chat.launchMessage.unauthenticatedV4Type10"];function tX(){XL.set(vT,!0)}function nX(){XL.set(vT,!1)}function ZL(){const{t}=He(),e=O(vT),n=O(UL),r=O($J),o=O(mT),i=O(VJ),s=me("landing-rotating-greeting"),{showShoppingCardInNewChat:a}=_y(),u=m.useCallback(()=>a?n?["chat.launchMessage.authenticatedShoppingType1"]:["chat.launchMessage.unauthenticatedShoppingType1"]:r&&r==="image-generation"?["chat.launchMessage.unauthenticatedImageWidgets"]:r&&r==="feature-discovery"?n?["chat.launchMessage.authenticatedWidgets"]:["chat.launchMessage.unauthenticatedWidgets"]:n?s?ZJ:JJ:s?eX:XJ,[n,s,a,r])(),d=m.useMemo(()=>YJ(u),[u]),f=Number(ni("greetingIndex"))||0,p=m.useCallback(()=>i||(r==="feature-discovery"?t("chat.launchMessage.subheadingFeatureDiscoveryWidget"):r==="image-generation"?t("chat.launchMessage.subheadingImageGenWidget"):null),[i,r,t]);return{launchGreetingShown:e,greetingKey:d,widgetGreeting:o,widgetSubheading:p(),greetingIndex:f}}async function Ay({from:t,to:e,params:n,search:r,state:o}){var s;e.startsWith("/chats/")||rt().set(Ig,null);let i=e;e==="/"&&((s=ye.instance().config().landingPage)!=null&&s.enableLandingRoute)&&(i="/discover"),await _l.navigate({to:i,params:n,state:a=>({...a,from:t,...o}),search:r})}function ui(){return Ay}async function eD(t){const{conversationId:e=Ye(ft),talk:n=!1,location:r}=t;e&&await Ay({to:`/chats/$conversationId${n?"/talk":""}`,params:{conversationId:e},from:r.pathname,search:r.search?Object.fromEntries(new URLSearchParams(r.search)):{}})}async function rX(t={}){await eD({conversationId:t.conversationId,talk:t.talk,location:_l.state.location})}function tD(){const t=qv(),{location:e}=t.state;return m.useCallback(async(n={})=>eD({conversationId:n.conversationId,talk:n.talk,location:{pathname:e.pathname,search:e.search}}),[e.search,e.pathname])}function An(t,e){rt().set(t,e)}function nD(t){const{tasks:e,conversationId:n,taskType:r}=t;for(const o of e.values())if(o.conversationId===n){if(r&&o.type!==r)continue;return o.id}return""}function rD(t,e){return nD({tasks:t,conversationId:e,taskType:"computerUse"})!==""}function oX(t,e){if(!e)return t;const[n,r,o]=t.slice(-3);if(!(ma(o)&&ma(r)&&(n==null?void 0:n.author)==="human"))return t;const s={left:o.sideBySideConfig.position==="left"?o:r,right:o.sideBySideConfig.position==="right"?o:r,createdAt:o.createdAt,id:e};return[n,s]}function iX(t){return sX(t)||ma(t)}function sX(t){return"left"in t&&"right"in t}function ma(t){return!t||t.author!=="ai"?!1:!!t.sideBySideConfig}const oD=["completed","failed","cancelled"];function aX(t){return t.content.find(e=>{var r;if(e.type!=="task")return!1;const n=(r=e.task)==null?void 0:r.status;return n&&!oD.includes(n)})}function cX(t){for(let e=t.length-1;e>=0;e-=1){const n=t[e];if(n&&n.type==="task")return n}}function yT(t){for(const e of t){const n=aX(e);if(n)return{message:e,part:n}}return null}const lX=Zw(li,t=>{if(!kg()||t.length===0)return!1;const e=t[t.length-1];return(e==null?void 0:e.author)==="ai"&&e.content.some(n=>n.type==="activity"&&n.activity.status==="running")}),uX=["ceo-thinkdeeper","ceo-smart-mode","ceo","webretrieval"];function kg(){return uX.some(et)}const Nd=rt();function Yn(t,e,n=!1){const r=t.at(-1),o=t.find(({id:i})=>i===e);if((n||(r==null?void 0:r.id)===(o==null?void 0:o.id)||ma(o))&&(o==null?void 0:o.author)==="ai")return o}function dX(t,e){const n=t.find(({author:r})=>r==="human");if((n==null?void 0:n.id)===e&&n.author==="human")return n}function iD(t){const e=t.at(-1);if((e==null?void 0:e.author)==="ai")return e}function ja(t,e){return t.find(n=>n.partId===e)}function hX(t){for(let e=t.length-1;e>=0;e-=1){const n=t[e];if(n&&n.type==="text")return n}}function sD(t){if(!t)return null;const e=Nd.get(yn).get(t);if(!e)return null;const{history:n}=e;return yT(n)}function Wt(t,e){Nd.set(yn,n=>xo(n,r=>{const o=r.get(t);o&&e(o.history)}))}function bT(t,e){Nd.set(ri,n=>xo(n,r=>{const o=r.get(t);o&&e(o)}))}function Si(t,e){Nd.set(yn,n=>xo(n,r=>{const o=r.get(t);o&&e(o)}))}function Jl(t,e){Nd.set(DI,n=>{const r=new Map(n);return r.set(t,e),r})}function fX(t){Nd.set(wn,t)}function qp(t,e){const n={type:"error",text:t,partId:"0"},r=Math.random().toString(),o={id:r,createdAt:new Date().toISOString(),author:"ai",content:[n],mode:"chat"};Jl(e,r),Wt(e,i=>{i.push(o)}),Si(e,i=>{i.streamingState="idle"})}function pX(t){if(kg())for(const e of t.content)e.type==="activity"&&e.activity.status==="running"&&(e.activity.status="completed")}function aD(t){Si(t,e=>{e.sideBySideComparisonId=void 0})}function cD(t,e){const n=!e;Wt(t,r=>{const[o,i]=r.slice(-2);ma(i)&&(n?!i.sideBySideConfig.isDefault:i.id!==e)?r.splice(r.length-1,1):ma(o)&&(n?!o.sideBySideConfig.isDefault:o.id!==e)&&r.splice(r.length-2,1)})}function W1e(t,e){cD(t,e),aD(t)}function lD(t){cD(t,void 0),aD(t)}function uD(t){var a,c;const{id:e,shouldNavigateToChat:n=!0,shouldClearParentConversation:r=!0}=t;r&&Ye(ft)!==Ye(Ig)&&An(Ig,null),An(ft,e),An(Id,!1),An(yn,u=>xo(u,d=>{const f=d.get(e);if(f!=null&&f.history.length&&(f.isNew=!1),f!=null&&f.history.some(p=>p.content.some(g=>g.type==="card"&&g.card.type==="ads"))){for(const p of f.history)if(p.author==="ai"&&p.content.some(g=>g.type==="card"&&g.card.type==="ads")){const g=p.content.filter(v=>v.type!=="card"||v.card.type!=="ads");p.content=g}}}));const o=Ye(LI);o&&o!==e&&An(yn,u=>xo(u,d=>{d.delete(o)})),((c=(a=sD(e))==null?void 0:a.part.task)==null?void 0:c.type)==="research"?An(wn,"research"):An(wn,"chat");const s=Ye(ri);rD(s,e)?An(Ar,"side-by-side"):An(Ar,"chat-only"),n&&rX({conversationId:e})}function mX(){return t=>uD(t)}const ht=t=>typeof t=="string",ph=()=>{let t,e;const n=new Promise((r,o)=>{t=r,e=o});return n.resolve=t,n.reject=e,n},N1=t=>t==null?"":""+t,gX=(t,e,n)=>{t.forEach(r=>{e[r]&&(n[r]=e[r])})},vX=/###/g,P1=t=>t&&t.indexOf("###")>-1?t.replace(vX,"."):t,O1=t=>!t||ht(t),Jh=(t,e,n)=>{const r=ht(e)?e.split("."):e;let o=0;for(;o<r.length-1;){if(O1(t))return{};const i=P1(r[o]);!t[i]&&n&&(t[i]=new n),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++o}return O1(t)?{}:{obj:t,k:P1(r[o])}},M1=(t,e,n)=>{const{obj:r,k:o}=Jh(t,e,Object);if(r!==void 0||e.length===1){r[o]=n;return}let i=e[e.length-1],s=e.slice(0,e.length-1),a=Jh(t,s,Object);for(;a.obj===void 0&&s.length;)i=`${s[s.length-1]}.${i}`,s=s.slice(0,s.length-1),a=Jh(t,s,Object),a&&a.obj&&typeof a.obj[`${a.k}.${i}`]<"u"&&(a.obj=void 0);a.obj[`${a.k}.${i}`]=n},yX=(t,e,n,r)=>{const{obj:o,k:i}=Jh(t,e,Object);o[i]=o[i]||[],o[i].push(n)},xg=(t,e)=>{const{obj:n,k:r}=Jh(t,e);if(n)return n[r]},bX=(t,e,n)=>{const r=xg(t,n);return r!==void 0?r:xg(e,n)},dD=(t,e,n)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in t?ht(t[r])||t[r]instanceof String||ht(e[r])||e[r]instanceof String?n&&(t[r]=e[r]):dD(t[r],e[r],n):t[r]=e[r]);return t},Ol=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var CX={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const SX=t=>ht(t)?t.replace(/[&<>"'\/]/g,e=>CX[e]):t;class EX{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const n=this.regExpMap.get(e);if(n!==void 0)return n;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const wX=[" ",",","?","!",";"],IX=new EX(20),TX=(t,e,n)=>{e=e||"",n=n||"";const r=wX.filter(s=>e.indexOf(s)<0&&n.indexOf(s)<0);if(r.length===0)return!0;const o=IX.getRegExp(`(${r.map(s=>s==="?"?"\\?":s).join("|")})`);let i=!o.test(t);if(!i){const s=t.indexOf(n);s>0&&!o.test(t.substring(0,s))&&(i=!0)}return i},Z0=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[e])return t[e];const r=e.split(n);let o=t;for(let i=0;i<r.length;){if(!o||typeof o!="object")return;let s,a="";for(let c=i;c<r.length;++c)if(c!==i&&(a+=n),a+=r[c],s=o[a],s!==void 0){if(["string","number","boolean"].indexOf(typeof s)>-1&&c<r.length-1)continue;i+=c-i+1;break}o=s}return o},Rg=t=>t&&t.replace("_","-"),_X={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,e){console&&console[t]&&console[t].apply(console,e)}};let AX=class eE{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=n.prefix||"i18next:",this.logger=e||_X,this.options=n,this.debug=n.debug}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"log","",!0)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","",!0)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"error","")}deprecate(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.forward(n,"warn","WARNING DEPRECATED: ",!0)}forward(e,n,r,o){return o&&!this.debug?null:(ht(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[n](e))}create(e){return new eE(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new eE(this.logger,e)}};var Mi=new AX;class ky{constructor(){this.observers={}}on(e,n){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const o=this.observers[r].get(n)||0;this.observers[r].set(n,o+1)}),this}off(e,n){if(this.observers[e]){if(!n){delete this.observers[e];return}this.observers[e].delete(n)}}emit(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(s=>{let[a,c]=s;for(let u=0;u<c;u++)a(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(s=>{let[a,c]=s;for(let u=0;u<c;u++)a.apply(a,[e,...r])})}}class L1 extends ky{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const n=this.options.ns.indexOf(e);n>-1&&this.options.ns.splice(n,1)}getResource(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=o.keySeparator!==void 0?o.keySeparator:this.options.keySeparator,s=o.ignoreJSONStructure!==void 0?o.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,n],r&&(Array.isArray(r)?a.push(...r):ht(r)&&i?a.push(...r.split(i)):a.push(r)));const c=xg(this.data,a);return!c&&!n&&!r&&e.indexOf(".")>-1&&(e=a[0],n=a[1],r=a.slice(2).join(".")),c||!s||!ht(r)?c:Z0(this.data&&this.data[e]&&this.data[e][n],r,i)}addResource(e,n,r,o){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const s=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let a=[e,n];r&&(a=a.concat(s?r.split(s):r)),e.indexOf(".")>-1&&(a=e.split("."),o=n,n=a[1]),this.addNamespaces(n),M1(this.data,a,o),i.silent||this.emit("added",e,n,r,o)}addResources(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(ht(r[i])||Array.isArray(r[i]))&&this.addResource(e,n,i,r[i],{silent:!0});o.silent||this.emit("added",e,n,r)}addResourceBundle(e,n,r,o,i){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},a=[e,n];e.indexOf(".")>-1&&(a=e.split("."),o=r,r=n,n=a[1]),this.addNamespaces(n);let c=xg(this.data,a)||{};s.skipCopy||(r=JSON.parse(JSON.stringify(r))),o?dD(c,r,i):c={...c,...r},M1(this.data,a,c),s.silent||this.emit("added",e,n,r)}removeResourceBundle(e,n){this.hasResourceBundle(e,n)&&delete this.data[e][n],this.removeNamespaces(n),this.emit("removed",e,n)}hasResourceBundle(e,n){return this.getResource(e,n)!==void 0}getResourceBundle(e,n){return n||(n=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,n)}:this.getResource(e,n)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const n=this.getDataByLanguage(e);return!!(n&&Object.keys(n)||[]).find(o=>n[o]&&Object.keys(n[o]).length>0)}toJSON(){return this.data}}var hD={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,e,n,r,o){return t.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,n,r,o))}),e}};const D1={};class Ng extends ky{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),gX(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=n,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=Mi.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,n);return r&&r.res!==void 0}extractFromKey(e,n){let r=n.nsSeparator!==void 0?n.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const o=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator;let i=n.ns||this.options.defaultNS||[];const s=r&&e.indexOf(r)>-1,a=!this.options.userDefinedKeySeparator&&!n.keySeparator&&!this.options.userDefinedNsSeparator&&!n.nsSeparator&&!TX(e,r,o);if(s&&!a){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:i};const u=e.split(r);(r!==o||r===o&&this.options.ns.indexOf(u[0])>-1)&&(i=u.shift()),e=u.join(o)}return ht(i)&&(i=[i]),{key:e,namespaces:i}}translate(e,n,r){if(typeof n!="object"&&this.options.overloadTranslationOptionHandler&&(n=this.options.overloadTranslationOptionHandler(arguments)),typeof n=="object"&&(n={...n}),n||(n={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const o=n.returnDetails!==void 0?n.returnDetails:this.options.returnDetails,i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,{key:s,namespaces:a}=this.extractFromKey(e[e.length-1],n),c=a[a.length-1],u=n.lng||this.language,d=n.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(u&&u.toLowerCase()==="cimode"){if(d){const E=n.nsSeparator||this.options.nsSeparator;return o?{res:`${c}${E}${s}`,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:`${c}${E}${s}`}return o?{res:s,usedKey:s,exactUsedKey:s,usedLng:u,usedNS:c,usedParams:this.getUsedParamsDetails(n)}:s}const f=this.resolve(e,n);let p=f&&f.res;const g=f&&f.usedKey||s,v=f&&f.exactUsedKey||s,b=Object.prototype.toString.apply(p),y=["[object Number]","[object Function]","[object RegExp]"],C=n.joinArrays!==void 0?n.joinArrays:this.options.joinArrays,S=!this.i18nFormat||this.i18nFormat.handleAsObject,w=!ht(p)&&typeof p!="boolean"&&typeof p!="number";if(S&&p&&w&&y.indexOf(b)<0&&!(ht(C)&&Array.isArray(p))){if(!n.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const E=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,p,{...n,ns:a}):`key '${s} (${this.language})' returned an object instead of string.`;return o?(f.res=E,f.usedParams=this.getUsedParamsDetails(n),f):E}if(i){const E=Array.isArray(p),I=E?[]:{},T=E?v:g;for(const A in p)if(Object.prototype.hasOwnProperty.call(p,A)){const _=`${T}${i}${A}`;I[A]=this.translate(_,{...n,joinArrays:!1,ns:a}),I[A]===_&&(I[A]=p[A])}p=I}}else if(S&&ht(C)&&Array.isArray(p))p=p.join(C),p&&(p=this.extendTranslation(p,e,n,r));else{let E=!1,I=!1;const T=n.count!==void 0&&!ht(n.count),A=Ng.hasDefaultValue(n),_=T?this.pluralResolver.getSuffix(u,n.count,n):"",U=n.ordinal&&T?this.pluralResolver.getSuffix(u,n.count,{ordinal:!1}):"",k=T&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),G=k&&n[`defaultValue${this.options.pluralSeparator}zero`]||n[`defaultValue${_}`]||n[`defaultValue${U}`]||n.defaultValue;!this.isValidLookup(p)&&A&&(E=!0,p=G),this.isValidLookup(p)||(I=!0,p=s);const ie=(n.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&I?void 0:p,P=A&&G!==p&&this.options.updateMissing;if(I||E||P){if(this.logger.log(P?"updateKey":"missingKey",u,c,s,P?G:p),i){const L=this.resolve(s,{...n,keySeparator:!1});L&&L.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let $=[];const Z=this.languageUtils.getFallbackCodes(this.options.fallbackLng,n.lng||this.language);if(this.options.saveMissingTo==="fallback"&&Z&&Z[0])for(let L=0;L<Z.length;L++)$.push(Z[L]);else this.options.saveMissingTo==="all"?$=this.languageUtils.toResolveHierarchy(n.lng||this.language):$.push(n.lng||this.language);const x=(L,ne,se)=>{const fe=A&&se!==p?se:ie;this.options.missingKeyHandler?this.options.missingKeyHandler(L,c,ne,fe,P,n):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(L,c,ne,fe,P,n),this.emit("missingKey",L,c,ne,p)};this.options.saveMissing&&(this.options.saveMissingPlurals&&T?$.forEach(L=>{const ne=this.pluralResolver.getSuffixes(L,n);k&&n[`defaultValue${this.options.pluralSeparator}zero`]&&ne.indexOf(`${this.options.pluralSeparator}zero`)<0&&ne.push(`${this.options.pluralSeparator}zero`),ne.forEach(se=>{x([L],s+se,n[`defaultValue${se}`]||G)})}):x($,s,G))}p=this.extendTranslation(p,e,n,f,r),I&&p===s&&this.options.appendNamespaceToMissingKey&&(p=`${c}:${s}`),(I||E)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?p=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${s}`:s,E?p:void 0):p=this.options.parseMissingKeyHandler(p))}return o?(f.res=p,f.usedParams=this.getUsedParamsDetails(n),f):p}extendTranslation(e,n,r,o,i){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||o.usedLng,o.usedNS,o.usedKey,{resolved:o});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const u=ht(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let d;if(u){const p=e.match(this.interpolator.nestingRegexp);d=p&&p.length}let f=r.replace&&!ht(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(f={...this.options.interpolation.defaultVariables,...f}),e=this.interpolator.interpolate(e,f,r.lng||this.language||o.usedLng,r),u){const p=e.match(this.interpolator.nestingRegexp),g=p&&p.length;d<g&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&o&&o.res&&(r.lng=this.language||o.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var p=arguments.length,g=new Array(p),v=0;v<p;v++)g[v]=arguments[v];return i&&i[0]===g[0]&&!r.context?(s.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${n[0]}`),null):s.translate(...g,n)},r)),r.interpolation&&this.interpolator.reset()}const a=r.postProcess||this.options.postProcess,c=ht(a)?[a]:a;return e!=null&&c&&c.length&&r.applyPostProcessor!==!1&&(e=hD.handle(c,e,n,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...o,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,o,i,s,a;return ht(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const u=this.extractFromKey(c,n),d=u.key;o=d;let f=u.namespaces;this.options.fallbackNS&&(f=f.concat(this.options.fallbackNS));const p=n.count!==void 0&&!ht(n.count),g=p&&!n.ordinal&&n.count===0&&this.pluralResolver.shouldUseIntlApi(),v=n.context!==void 0&&(ht(n.context)||typeof n.context=="number")&&n.context!=="",b=n.lngs?n.lngs:this.languageUtils.toResolveHierarchy(n.lng||this.language,n.fallbackLng);f.forEach(y=>{this.isValidLookup(r)||(a=y,!D1[`${b[0]}-${y}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(a)&&(D1[`${b[0]}-${y}`]=!0,this.logger.warn(`key "${o}" for languages "${b.join(", ")}" won't get resolved as namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),b.forEach(C=>{if(this.isValidLookup(r))return;s=C;const S=[d];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(S,d,C,y,n);else{let E;p&&(E=this.pluralResolver.getSuffix(C,n.count,n));const I=`${this.options.pluralSeparator}zero`,T=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(p&&(S.push(d+E),n.ordinal&&E.indexOf(T)===0&&S.push(d+E.replace(T,this.options.pluralSeparator)),g&&S.push(d+I)),v){const A=`${d}${this.options.contextSeparator}${n.context}`;S.push(A),p&&(S.push(A+E),n.ordinal&&E.indexOf(T)===0&&S.push(A+E.replace(T,this.options.pluralSeparator)),g&&S.push(A+I))}}let w;for(;w=S.pop();)this.isValidLookup(r)||(i=w,r=this.getResource(C,y,w,n))}))})}),{res:r,usedKey:o,exactUsedKey:i,usedLng:s,usedNS:a}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,n,r,o):this.resourceStore.getResource(e,n,r,o)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ht(e.replace);let o=r?e.replace:e;if(r&&typeof e.count<"u"&&(o.count=e.count),this.options.interpolation.defaultVariables&&(o={...this.options.interpolation.defaultVariables,...o}),!r){o={...o};for(const i of n)delete o[i]}return o}static hasDefaultValue(e){const n="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&n===r.substring(0,n.length)&&e[r]!==void 0)return!0;return!1}}const mC=t=>t.charAt(0).toUpperCase()+t.slice(1);class j1{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=Mi.create("languageUtils")}getScriptPartFromCode(e){if(e=Rg(e),!e||e.indexOf("-")<0)return null;const n=e.split("-");return n.length===2||(n.pop(),n[n.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(n.join("-"))}getLanguagePartFromCode(e){if(e=Rg(e),!e||e.indexOf("-")<0)return e;const n=e.split("-");return this.formatLanguageCode(n[0])}formatLanguageCode(e){if(ht(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let o=Intl.getCanonicalLocales(e)[0];if(o&&this.options.lowerCaseLng&&(o=o.toLowerCase()),o)return o}catch{}const n=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(o=>o.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=mC(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),n.indexOf(r[1].toLowerCase())>-1&&(r[1]=mC(r[1].toLowerCase())),n.indexOf(r[2].toLowerCase())>-1&&(r[2]=mC(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let n;return e.forEach(r=>{if(n)return;const o=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(o))&&(n=o)}),!n&&this.options.supportedLngs&&e.forEach(r=>{if(n)return;const o=this.getLanguagePartFromCode(r);if(this.isSupportedCode(o))return n=o;n=this.options.supportedLngs.find(i=>{if(i===o)return i;if(!(i.indexOf("-")<0&&o.indexOf("-")<0)&&(i.indexOf("-")>0&&o.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===o||i.indexOf(o)===0&&o.length>1))return i})}),n||(n=this.getFallbackCodes(this.options.fallbackLng)[0]),n}getFallbackCodes(e,n){if(!e)return[];if(typeof e=="function"&&(e=e(n)),ht(e)&&(e=[e]),Array.isArray(e))return e;if(!n)return e.default||[];let r=e[n];return r||(r=e[this.getScriptPartFromCode(n)]),r||(r=e[this.formatLanguageCode(n)]),r||(r=e[this.getLanguagePartFromCode(n)]),r||(r=e.default),r||[]}toResolveHierarchy(e,n){const r=this.getFallbackCodes(n||this.options.fallbackLng||[],e),o=[],i=s=>{s&&(this.isSupportedCode(s)?o.push(s):this.logger.warn(`rejecting language code not found in supportedLngs: ${s}`))};return ht(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):ht(e)&&i(this.formatLanguageCode(e)),r.forEach(s=>{o.indexOf(s)<0&&i(this.formatLanguageCode(s))}),o}}let kX=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],xX={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const RX=["v1","v2","v3"],NX=["v4"],U1={zero:0,one:1,two:2,few:3,many:4,other:5},PX=()=>{const t={};return kX.forEach(e=>{e.lngs.forEach(n=>{t[n]={numbers:e.nr,plurals:xX[e.fc]}})}),t};class OX{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=n,this.logger=Mi.create("pluralResolver"),(!this.options.compatibilityJSON||NX.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=PX(),this.pluralRulesCache={}}addRule(e,n){this.rules[e]=n}clearCache(){this.pluralRulesCache={}}getRule(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi())try{const r=Rg(e==="dev"?"en":e),o=n.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:o});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];const s=new Intl.PluralRules(r,{type:o});return this.pluralRulesCache[i]=s,s}catch{return}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(o=>`${n}${o}`)}getSuffixes(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((o,i)=>U1[o]-U1[i]).map(o=>`${this.options.prepend}${n.ordinal?`ordinal${this.options.prepend}`:""}${o}`):r.numbers.map(o=>this.getSuffix(e,o,n)):[]}getSuffix(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=this.getRule(e,r);return o?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${o.select(n)}`:this.getSuffixRetroCompatible(o,n):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,n){const r=e.noAbs?e.plurals(n):e.plurals(Math.abs(n));let o=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(o===2?o="plural":o===1&&(o=""));const i=()=>this.options.prepend&&o.toString()?this.options.prepend+o.toString():o.toString();return this.options.compatibilityJSON==="v1"?o===1?"":typeof o=="number"?`_plural_${o.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!RX.includes(this.options.compatibilityJSON)}}const F1=function(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=bX(t,e,n);return!i&&o&&ht(n)&&(i=Z0(t,n,r),i===void 0&&(i=Z0(e,n,r))),i},gC=t=>t.replace(/\$/g,"$$$$");class MX{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Mi.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(n=>n),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:n,escapeValue:r,useRawValueToEscape:o,prefix:i,prefixEscaped:s,suffix:a,suffixEscaped:c,formatSeparator:u,unescapeSuffix:d,unescapePrefix:f,nestingPrefix:p,nestingPrefixEscaped:g,nestingSuffix:v,nestingSuffixEscaped:b,nestingOptionsSeparator:y,maxReplaces:C,alwaysFormat:S}=e.interpolation;this.escape=n!==void 0?n:SX,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=o!==void 0?o:!1,this.prefix=i?Ol(i):s||"{{",this.suffix=a?Ol(a):c||"}}",this.formatSeparator=u||",",this.unescapePrefix=d?"":f||"-",this.unescapeSuffix=this.unescapePrefix?"":d||"",this.nestingPrefix=p?Ol(p):g||Ol("$t("),this.nestingSuffix=v?Ol(v):b||Ol(")"),this.nestingOptionsSeparator=y||",",this.maxReplaces=C||1e3,this.alwaysFormat=S!==void 0?S:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(n,r)=>n&&n.source===r?(n.lastIndex=0,n):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,n,r,o){let i,s,a;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},u=g=>{if(g.indexOf(this.formatSeparator)<0){const C=F1(n,c,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(C,void 0,r,{...o,...n,interpolationkey:g}):C}const v=g.split(this.formatSeparator),b=v.shift().trim(),y=v.join(this.formatSeparator).trim();return this.format(F1(n,c,b,this.options.keySeparator,this.options.ignoreJSONStructure),y,r,{...o,...n,interpolationkey:b})};this.resetRegExp();const d=o&&o.missingInterpolationHandler||this.options.missingInterpolationHandler,f=o&&o.interpolation&&o.interpolation.skipOnVariables!==void 0?o.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>gC(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?gC(this.escape(g)):gC(g)}].forEach(g=>{for(a=0;i=g.regex.exec(e);){const v=i[1].trim();if(s=u(v),s===void 0)if(typeof d=="function"){const y=d(e,i,o);s=ht(y)?y:""}else if(o&&Object.prototype.hasOwnProperty.call(o,v))s="";else if(f){s=i[0];continue}else this.logger.warn(`missed to pass in variable ${v} for interpolating ${e}`),s="";else!ht(s)&&!this.useRawValueToEscape&&(s=N1(s));const b=g.safeValue(s);if(e=e.replace(i[0],b),f?(g.regex.lastIndex+=s.length,g.regex.lastIndex-=i[0].length):g.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o,i,s;const a=(c,u)=>{const d=this.nestingOptionsSeparator;if(c.indexOf(d)<0)return c;const f=c.split(new RegExp(`${d}[ ]*{`));let p=`{${f[1]}`;c=f[0],p=this.interpolate(p,s);const g=p.match(/'/g),v=p.match(/"/g);(g&&g.length%2===0&&!v||v.length%2!==0)&&(p=p.replace(/'/g,'"'));try{s=JSON.parse(p),u&&(s={...u,...s})}catch(b){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,b),`${c}${d}${p}`}return s.defaultValue&&s.defaultValue.indexOf(this.prefix)>-1&&delete s.defaultValue,c};for(;o=this.nestingRegexp.exec(e);){let c=[];s={...r},s=s.replace&&!ht(s.replace)?s.replace:s,s.applyPostProcessor=!1,delete s.defaultValue;let u=!1;if(o[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(o[1])){const d=o[1].split(this.formatSeparator).map(f=>f.trim());o[1]=d.shift(),c=d,u=!0}if(i=n(a.call(this,o[1].trim(),s),s),i&&o[0]===e&&!ht(i))return i;ht(i)||(i=N1(i)),i||(this.logger.warn(`missed to resolve ${o[1]} for nesting ${e}`),i=""),u&&(i=c.reduce((d,f)=>this.format(d,f,r.lng,{...r,interpolationkey:o[1].trim()}),i.trim())),e=e.replace(o[0],i),this.regexp.lastIndex=0}return e}}const LX=t=>{let e=t.toLowerCase().trim();const n={};if(t.indexOf("(")>-1){const r=t.split("(");e=r[0].toLowerCase().trim();const o=r[1].substring(0,r[1].length-1);e==="currency"&&o.indexOf(":")<0?n.currency||(n.currency=o.trim()):e==="relativetime"&&o.indexOf(":")<0?n.range||(n.range=o.trim()):o.split(";").forEach(s=>{if(s){const[a,...c]=s.split(":"),u=c.join(":").trim().replace(/^'+|'+$/g,""),d=a.trim();n[d]||(n[d]=u),u==="false"&&(n[d]=!1),u==="true"&&(n[d]=!0),isNaN(u)||(n[d]=parseInt(u,10))}})}return{formatName:e,formatOptions:n}},Ml=t=>{const e={};return(n,r,o)=>{let i=o;o&&o.interpolationkey&&o.formatParams&&o.formatParams[o.interpolationkey]&&o[o.interpolationkey]&&(i={...i,[o.interpolationkey]:void 0});const s=r+JSON.stringify(i);let a=e[s];return a||(a=t(Rg(r),o),e[s]=a),a(n)}};class DX{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=Mi.create("formatter"),this.options=e,this.formats={number:Ml((n,r)=>o=>new Intl.NumberFormat(n,{...r}).format(o)),currency:Ml((n,r)=>o=>new Intl.NumberFormat(n,{...r,style:"currency"}).format(o)),datetime:Ml((n,r)=>o=>new Intl.DateTimeFormat(n,{...r}).format(o)),relativetime:Ml((n,r)=>o=>new Intl.RelativeTimeFormat(n,{...r}).format(o,r.range||"day")),list:Ml((n,r)=>o=>new Intl.ListFormat(n,{...r}).format(o))},this.init(e)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=n.interpolation.formatSeparator||","}add(e,n){this.formats[e.toLowerCase().trim()]=n}addCached(e,n){this.formats[e.toLowerCase().trim()]=Ml(n)}format(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=n.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(a=>a.indexOf(")")>-1)){const a=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,a)].join(this.formatSeparator)}return i.reduce((a,c)=>{const{formatName:u,formatOptions:d}=LX(c);if(this.formats[u]){let f=a;try{const p=o&&o.formatParams&&o.formatParams[o.interpolationkey]||{},g=p.locale||p.lng||o.locale||o.lng||r;f=this.formats[u](a,g,{...d,...o,...p})}catch(p){this.logger.warn(p)}return f}else this.logger.warn(`there was no format function for ${u}`);return a},e)}}const jX=(t,e)=>{t.pending[e]!==void 0&&(delete t.pending[e],t.pendingCount--)};class UX extends ky{constructor(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=n,this.services=r,this.languageUtils=r.languageUtils,this.options=o,this.logger=Mi.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=o.maxParallelReads||10,this.readingCalls=0,this.maxRetries=o.maxRetries>=0?o.maxRetries:5,this.retryTimeout=o.retryTimeout>=1?o.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,o.backend,o)}queueLoad(e,n,r,o){const i={},s={},a={},c={};return e.forEach(u=>{let d=!0;n.forEach(f=>{const p=`${u}|${f}`;!r.reload&&this.store.hasResourceBundle(u,f)?this.state[p]=2:this.state[p]<0||(this.state[p]===1?s[p]===void 0&&(s[p]=!0):(this.state[p]=1,d=!1,s[p]===void 0&&(s[p]=!0),i[p]===void 0&&(i[p]=!0),c[f]===void 0&&(c[f]=!0)))}),d||(a[u]=!0)}),(Object.keys(i).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:o}),{toLoad:Object.keys(i),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(c)}}loaded(e,n,r){const o=e.split("|"),i=o[0],s=o[1];n&&this.emit("failedLoading",i,s,n),!n&&r&&this.store.addResourceBundle(i,s,r,void 0,void 0,{skipCopy:!0}),this.state[e]=n?-1:2,n&&r&&(this.state[e]=0);const a={};this.queue.forEach(c=>{yX(c.loaded,[i],s),jX(c,e),n&&c.errors.push(n),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(u=>{a[u]||(a[u]={});const d=c.loaded[u];d.length&&d.forEach(f=>{a[u][f]===void 0&&(a[u][f]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(c=>!c.done)}read(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:n,fcName:r,tried:o,wait:i,callback:s});return}this.readingCalls++;const a=(u,d)=>{if(this.readingCalls--,this.waitingReads.length>0){const f=this.waitingReads.shift();this.read(f.lng,f.ns,f.fcName,f.tried,f.wait,f.callback)}if(u&&d&&o<this.maxRetries){setTimeout(()=>{this.read.call(this,e,n,r,o+1,i*2,s)},i);return}s(u,d)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const u=c(e,n);u&&typeof u.then=="function"?u.then(d=>a(null,d)).catch(a):a(null,u)}catch(u){a(u)}return}return c(e,n,a)}prepareLoading(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),o&&o();ht(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ht(n)&&(n=[n]);const i=this.queueLoad(e,n,r,o);if(!i.toLoad.length)return i.pending.length||o(),null;i.toLoad.forEach(s=>{this.loadOne(s)})}load(e,n,r){this.prepareLoading(e,n,{},r)}reload(e,n,r){this.prepareLoading(e,n,{reload:!0},r)}loadOne(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),o=r[0],i=r[1];this.read(o,i,"read",void 0,void 0,(s,a)=>{s&&this.logger.warn(`${n}loading namespace ${i} for language ${o} failed`,s),!s&&a&&this.logger.log(`${n}loaded namespace ${i} for language ${o}`,a),this.loaded(e,s,a)})}saveMissing(e,n,r,o,i){let s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(n)){this.logger.warn(`did not save key "${r}" as the namespace "${n}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const c={...s,isUpdate:i},u=this.backend.create.bind(this.backend);if(u.length<6)try{let d;u.length===5?d=u(e,n,r,o,c):d=u(e,n,r,o),d&&typeof d.then=="function"?d.then(f=>a(null,f)).catch(a):a(null,d)}catch(d){a(d)}else u(e,n,r,o,a,c)}!e||!e[0]||this.store.addResource(e[0],n,r,o)}}}const B1=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let e={};if(typeof t[1]=="object"&&(e=t[1]),ht(t[1])&&(e.defaultValue=t[1]),ht(t[2])&&(e.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const n=t[3]||t[2];Object.keys(n).forEach(r=>{e[r]=n[r]})}return e},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),H1=t=>(ht(t.ns)&&(t.ns=[t.ns]),ht(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),ht(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),Yp=()=>{},FX=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(n=>{typeof t[n]=="function"&&(t[n]=t[n].bind(t))})};class Pf extends ky{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;if(super(),this.options=H1(e),this.services={},this.logger=Mi,this.modules={external:[]},FX(this),n&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,n),this;setTimeout(()=>{this.init(e,n)},0)}}init(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof n=="function"&&(r=n,n={}),!n.defaultNS&&n.defaultNS!==!1&&n.ns&&(ht(n.ns)?n.defaultNS=n.ns:n.ns.indexOf("translation")<0&&(n.defaultNS=n.ns[0]));const o=B1();this.options={...o,...this.options,...H1(n)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...o.interpolation,...this.options.interpolation}),n.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=n.keySeparator),n.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=n.nsSeparator);const i=d=>d?typeof d=="function"?new d:d:null;if(!this.options.isClone){this.modules.logger?Mi.init(i(this.modules.logger),this.options):Mi.init(null,this.options);let d;this.modules.formatter?d=this.modules.formatter:typeof Intl<"u"&&(d=DX);const f=new j1(this.options);this.store=new L1(this.options.resources,this.options);const p=this.services;p.logger=Mi,p.resourceStore=this.store,p.languageUtils=f,p.pluralResolver=new OX(f,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===o.interpolation.format)&&(p.formatter=i(d),p.formatter.init(p,this.options),this.options.interpolation.format=p.formatter.format.bind(p.formatter)),p.interpolator=new MX(this.options),p.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},p.backendConnector=new UX(i(this.modules.backend),p.resourceStore,p,this.options),p.backendConnector.on("*",function(g){for(var v=arguments.length,b=new Array(v>1?v-1:0),y=1;y<v;y++)b[y-1]=arguments[y];e.emit(g,...b)}),this.modules.languageDetector&&(p.languageDetector=i(this.modules.languageDetector),p.languageDetector.init&&p.languageDetector.init(p,this.options.detection,this.options)),this.modules.i18nFormat&&(p.i18nFormat=i(this.modules.i18nFormat),p.i18nFormat.init&&p.i18nFormat.init(this)),this.translator=new Ng(this.services,this.options),this.translator.on("*",function(g){for(var v=arguments.length,b=new Array(v>1?v-1:0),y=1;y<v;y++)b[y-1]=arguments[y];e.emit(g,...b)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Yp),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const d=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);d.length>0&&d[0]!=="dev"&&(this.options.lng=d[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return e.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return e.store[d](...arguments),e}});const c=ph(),u=()=>{const d=(f,p)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(p),r(f,p)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return d(null,this.t.bind(this));this.changeLanguage(this.options.lng,d)};return this.options.resources||!this.options.initImmediate?u():setTimeout(u,0),c}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yp;const o=ht(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(o&&o.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const i=[],s=a=>{if(!a||a==="cimode")return;this.services.languageUtils.toResolveHierarchy(a).forEach(u=>{u!=="cimode"&&i.indexOf(u)<0&&i.push(u)})};o?s(o):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>s(c)),this.options.preload&&this.options.preload.forEach(a=>s(a)),this.services.backendConnector.load(i,this.options.ns,a=>{!a&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(a)})}else r(null)}reloadResources(e,n,r){const o=ph();return typeof e=="function"&&(r=e,e=void 0),typeof n=="function"&&(r=n,n=void 0),e||(e=this.languages),n||(n=this.options.ns),r||(r=Yp),this.services.backendConnector.reload(e,n,i=>{o.resolve(),r(i)}),o}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&hD.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let n=0;n<this.languages.length;n++){const r=this.languages[n];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,n){var r=this;this.isLanguageChangingTo=e;const o=ph();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},s=(c,u)=>{u?(i(u),this.translator.changeLanguage(u),this.isLanguageChangingTo=void 0,this.emit("languageChanged",u),this.logger.log("languageChanged",u)):this.isLanguageChangingTo=void 0,o.resolve(function(){return r.t(...arguments)}),n&&n(c,function(){return r.t(...arguments)})},a=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const u=ht(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);u&&(this.language||i(u),this.translator.language||this.translator.changeLanguage(u),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(u)),this.loadResources(u,d=>{s(d,u)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?a(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e),o}getFixedT(e,n,r){var o=this;const i=function(s,a){let c;if(typeof a!="object"){for(var u=arguments.length,d=new Array(u>2?u-2:0),f=2;f<u;f++)d[f-2]=arguments[f];c=o.options.overloadTranslationOptionHandler([s,a].concat(d))}else c={...a};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const p=o.options.keySeparator||".";let g;return c.keyPrefix&&Array.isArray(s)?g=s.map(v=>`${c.keyPrefix}${p}${v}`):g=c.keyPrefix?`${c.keyPrefix}${p}${s}`:s,o.t(g,c)};return ht(e)?i.lng=e:i.lngs=e,i.ns=n,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=n.lng||this.resolvedLanguage||this.languages[0],o=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const s=(a,c)=>{const u=this.services.backendConnector.state[`${a}|${c}`];return u===-1||u===0||u===2};if(n.precheck){const a=n.precheck(this,s);if(a!==void 0)return a}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||s(r,e)&&(!o||s(i,e)))}loadNamespaces(e,n){const r=ph();return this.options.ns?(ht(e)&&(e=[e]),e.forEach(o=>{this.options.ns.indexOf(o)<0&&this.options.ns.push(o)}),this.loadResources(o=>{r.resolve(),n&&n(o)}),r):(n&&n(),Promise.resolve())}loadLanguages(e,n){const r=ph();ht(e)&&(e=[e]);const o=this.options.preload||[],i=e.filter(s=>o.indexOf(s)<0&&this.services.languageUtils.isSupportedCode(s));return i.length?(this.options.preload=o.concat(i),this.loadResources(s=>{r.resolve(),n&&n(s)}),r):(n&&n(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const n=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new j1(B1());return n.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return new Pf(e,n)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Yp;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const o={...this.options,...e,isClone:!0},i=new Pf(o);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(a=>{i[a]=this[a]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new L1(this.store.data,o),i.services.resourceStore=i.store),i.translator=new Ng(i.services,o),i.translator.on("*",function(a){for(var c=arguments.length,u=new Array(c>1?c-1:0),d=1;d<c;d++)u[d-1]=arguments[d];i.emit(a,...u)}),i.init(o,n),i.translator.options=o,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Ot=Pf.createInstance();Ot.createInstance=Pf.createInstance;Ot.createInstance;Ot.dir;Ot.init;Ot.loadResources;Ot.reloadResources;Ot.use;Ot.changeLanguage;Ot.getFixedT;const ee=Ot.t,q1e=Ot.exists;Ot.setDefaultNamespace;Ot.hasLoadedNamespace;Ot.loadNamespaces;Ot.loadLanguages;const ec={UNDEFINED:"0",CHILD:"1",ADULT:"3",NOT_ADULT:"4",CHILD_NO_PARENTAL_CONSENT_REQUIRED:"5"},BX=l.object({name:l.string(),email:l.string(),ageGroup:l.enum([ec.UNDEFINED,ec.CHILD,ec.ADULT,ec.NOT_ADULT,ec.CHILD_NO_PARENTAL_CONSENT_REQUIRED]),sub:l.string()}),Go={LOGIN_START:"auth0:loginStart",LOGIN_SUCCESS:"auth0:loginSuccess",LOGIN_FAILURE:"auth0:loginFailure",LOGOUT_SUCCESS:"auth0:logoutSuccess",LOGOUT_FAILURE:"auth0:logoutFailure",ACQUIRE_TOKEN_FAILURE:"auth0:acquireTokenFailure",REAUTH_START:"auth0:reauthStart",REAUTH_SUCCESS:"auth0:reauthSuccess",INITIALIZE_START:"auth0:initializeStart",INITIALIZE_END:"auth0:initializeEnd"},fD={ACQUIRE_TOKEN_OVERALL_SUCCESS:"msal:acquireTokenOverallSuccess",ACQUIRE_TOKEN_OVERALL_FAILURE:"msal:acquireTokenOverallFailure"};function Ti(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function"){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n}var tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function CT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function ST(t,e){return t(e={exports:{}},e.exports),e.exports}var qa=ST(function(t,e){Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function r(){var o=this;this.locked=new Map,this.addToLocked=function(i,s){var a=o.locked.get(i);a===void 0?s===void 0?o.locked.set(i,[]):o.locked.set(i,[s]):s!==void 0&&(a.unshift(s),o.locked.set(i,a))},this.isLocked=function(i){return o.locked.has(i)},this.lock=function(i){return new Promise(function(s,a){o.isLocked(i)?o.addToLocked(i,s):(o.addToLocked(i),s())})},this.unlock=function(i){var s=o.locked.get(i);if(s!==void 0&&s.length!==0){var a=s.pop();o.locked.set(i,s),a!==void 0&&setTimeout(a,0)}else o.locked.delete(i)}}return r.getInstance=function(){return r.instance===void 0&&(r.instance=new r),r.instance},r}();e.default=function(){return n.getInstance()}});CT(qa);var HX=CT(ST(function(t,e){var n=tc&&tc.__awaiter||function(d,f,p,g){return new(p||(p=Promise))(function(v,b){function y(w){try{S(g.next(w))}catch(E){b(E)}}function C(w){try{S(g.throw(w))}catch(E){b(E)}}function S(w){w.done?v(w.value):new p(function(E){E(w.value)}).then(y,C)}S((g=g.apply(d,f||[])).next())})},r=tc&&tc.__generator||function(d,f){var p,g,v,b,y={label:0,sent:function(){if(1&v[0])throw v[1];return v[1]},trys:[],ops:[]};return b={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(b[Symbol.iterator]=function(){return this}),b;function C(S){return function(w){return function(E){if(p)throw new TypeError("Generator is already executing.");for(;y;)try{if(p=1,g&&(v=2&E[0]?g.return:E[0]?g.throw||((v=g.return)&&v.call(g),0):g.next)&&!(v=v.call(g,E[1])).done)return v;switch(g=0,v&&(E=[2&E[0],v.value]),E[0]){case 0:case 1:v=E;break;case 4:return y.label++,{value:E[1],done:!1};case 5:y.label++,g=E[1],E=[0];continue;case 7:E=y.ops.pop(),y.trys.pop();continue;default:if(v=y.trys,!((v=v.length>0&&v[v.length-1])||E[0]!==6&&E[0]!==2)){y=0;continue}if(E[0]===3&&(!v||E[1]>v[0]&&E[1]<v[3])){y.label=E[1];break}if(E[0]===6&&y.label<v[1]){y.label=v[1],v=E;break}if(v&&y.label<v[2]){y.label=v[2],y.ops.push(E);break}v[2]&&y.ops.pop(),y.trys.pop();continue}E=f.call(d,y)}catch(I){E=[6,I],g=0}finally{p=v=0}if(5&E[0])throw E[1];return{value:E[0]?E[1]:void 0,done:!0}}([S,w])}}},o=tc;Object.defineProperty(e,"__esModule",{value:!0});var i="browser-tabs-lock-key",s={key:function(d){return n(o,void 0,void 0,function(){return r(this,function(f){throw new Error("Unsupported")})})},getItem:function(d){return n(o,void 0,void 0,function(){return r(this,function(f){throw new Error("Unsupported")})})},clear:function(){return n(o,void 0,void 0,function(){return r(this,function(d){return[2,window.localStorage.clear()]})})},removeItem:function(d){return n(o,void 0,void 0,function(){return r(this,function(f){throw new Error("Unsupported")})})},setItem:function(d,f){return n(o,void 0,void 0,function(){return r(this,function(p){throw new Error("Unsupported")})})},keySync:function(d){return window.localStorage.key(d)},getItemSync:function(d){return window.localStorage.getItem(d)},clearSync:function(){return window.localStorage.clear()},removeItemSync:function(d){return window.localStorage.removeItem(d)},setItemSync:function(d,f){return window.localStorage.setItem(d,f)}};function a(d){return new Promise(function(f){return setTimeout(f,d)})}function c(d){for(var f="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",p="",g=0;g<d;g++)p+=f[Math.floor(Math.random()*f.length)];return p}var u=function(){function d(f){this.acquiredIatSet=new Set,this.storageHandler=void 0,this.id=Date.now().toString()+c(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),this.storageHandler=f,d.waiters===void 0&&(d.waiters=[])}return d.prototype.acquireLock=function(f,p){return p===void 0&&(p=5e3),n(this,void 0,void 0,function(){var g,v,b,y,C,S,w;return r(this,function(E){switch(E.label){case 0:g=Date.now()+c(4),v=Date.now()+p,b=i+"-"+f,y=this.storageHandler===void 0?s:this.storageHandler,E.label=1;case 1:return Date.now()<v?[4,a(30)]:[3,8];case 2:return E.sent(),y.getItemSync(b)!==null?[3,5]:(C=this.id+"-"+f+"-"+g,[4,a(Math.floor(25*Math.random()))]);case 3:return E.sent(),y.setItemSync(b,JSON.stringify({id:this.id,iat:g,timeoutKey:C,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,a(30)];case 4:return E.sent(),(S=y.getItemSync(b))!==null&&(w=JSON.parse(S)).id===this.id&&w.iat===g?(this.acquiredIatSet.add(g),this.refreshLockWhileAcquired(b,g),[2,!0]):[3,7];case 5:return d.lockCorrector(this.storageHandler===void 0?s:this.storageHandler),[4,this.waitForSomethingToChange(v)];case 6:E.sent(),E.label=7;case 7:return g=Date.now()+c(4),[3,1];case 8:return[2,!1]}})})},d.prototype.refreshLockWhileAcquired=function(f,p){return n(this,void 0,void 0,function(){var g=this;return r(this,function(v){return setTimeout(function(){return n(g,void 0,void 0,function(){var b,y,C;return r(this,function(S){switch(S.label){case 0:return[4,qa.default().lock(p)];case 1:return S.sent(),this.acquiredIatSet.has(p)?(b=this.storageHandler===void 0?s:this.storageHandler,(y=b.getItemSync(f))===null?(qa.default().unlock(p),[2]):((C=JSON.parse(y)).timeRefreshed=Date.now(),b.setItemSync(f,JSON.stringify(C)),qa.default().unlock(p),this.refreshLockWhileAcquired(f,p),[2])):(qa.default().unlock(p),[2])}})})},1e3),[2]})})},d.prototype.waitForSomethingToChange=function(f){return n(this,void 0,void 0,function(){return r(this,function(p){switch(p.label){case 0:return[4,new Promise(function(g){var v=!1,b=Date.now(),y=!1;function C(){if(y||(window.removeEventListener("storage",C),d.removeFromWaiting(C),clearTimeout(S),y=!0),!v){v=!0;var w=50-(Date.now()-b);w>0?setTimeout(g,w):g(null)}}window.addEventListener("storage",C),d.addToWaiting(C);var S=setTimeout(C,Math.max(0,f-Date.now()))})];case 1:return p.sent(),[2]}})})},d.addToWaiting=function(f){this.removeFromWaiting(f),d.waiters!==void 0&&d.waiters.push(f)},d.removeFromWaiting=function(f){d.waiters!==void 0&&(d.waiters=d.waiters.filter(function(p){return p!==f}))},d.notifyWaiters=function(){d.waiters!==void 0&&d.waiters.slice().forEach(function(f){return f()})},d.prototype.releaseLock=function(f){return n(this,void 0,void 0,function(){return r(this,function(p){switch(p.label){case 0:return[4,this.releaseLock__private__(f)];case 1:return[2,p.sent()]}})})},d.prototype.releaseLock__private__=function(f){return n(this,void 0,void 0,function(){var p,g,v,b;return r(this,function(y){switch(y.label){case 0:return p=this.storageHandler===void 0?s:this.storageHandler,g=i+"-"+f,(v=p.getItemSync(g))===null?[2]:(b=JSON.parse(v)).id!==this.id?[3,2]:[4,qa.default().lock(b.iat)];case 1:y.sent(),this.acquiredIatSet.delete(b.iat),p.removeItemSync(g),qa.default().unlock(b.iat),d.notifyWaiters(),y.label=2;case 2:return[2]}})})},d.lockCorrector=function(f){for(var p=Date.now()-5e3,g=f,v=[],b=0;;){var y=g.keySync(b);if(y===null)break;v.push(y),b++}for(var C=!1,S=0;S<v.length;S++){var w=v[S];if(w.includes(i)){var E=g.getItemSync(w);if(E!==null){var I=JSON.parse(E);(I.timeRefreshed===void 0&&I.timeAcquired<p||I.timeRefreshed!==void 0&&I.timeRefreshed<p)&&(g.removeItemSync(w),C=!0)}}}C&&d.notifyWaiters()},d.waiters=void 0,d}();e.default=u}));const zX={timeoutInSeconds:60},pD={name:"auth0-spa-js",version:"2.1.3"},mD=()=>Date.now();class rr extends Error{constructor(e,n){super(n),this.error=e,this.error_description=n,Object.setPrototypeOf(this,rr.prototype)}static fromPayload({error:e,error_description:n}){return new rr(e,n)}}let VX=class gD extends rr{constructor(e,n,r,o=null){super(e,n),this.state=r,this.appState=o,Object.setPrototypeOf(this,gD.prototype)}},tE=class vD extends rr{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,vD.prototype)}},$X=class yD extends tE{constructor(e){super(),this.popup=e,Object.setPrototypeOf(this,yD.prototype)}},GX=class bD extends rr{constructor(e){super("cancelled","Popup closed"),this.popup=e,Object.setPrototypeOf(this,bD.prototype)}},KX=class CD extends rr{constructor(e,n,r){super(e,n),this.mfa_token=r,Object.setPrototypeOf(this,CD.prototype)}},SD=class ED extends rr{constructor(e,n){super("missing_refresh_token",`Missing Refresh Token (audience: '${z1(e,["default"])}', scope: '${z1(n)}')`),this.audience=e,this.scope=n,Object.setPrototypeOf(this,ED.prototype)}};function z1(t,e=[]){return t&&!e.includes(t)?t:""}const Hm=()=>window.crypto,vC=()=>{const t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.";let e="";return Array.from(Hm().getRandomValues(new Uint8Array(43))).forEach(n=>e+=t[n%t.length]),e},V1=t=>btoa(t),nE=t=>{var{clientId:e}=t,n=Ti(t,["clientId"]);return new URLSearchParams((r=>Object.keys(r).filter(o=>r[o]!==void 0).reduce((o,i)=>Object.assign(Object.assign({},o),{[i]:r[i]}),{}))(Object.assign({client_id:e},n))).toString()},$1=t=>(e=>decodeURIComponent(atob(e).split("").map(n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join("")))(t.replace(/_/g,"/").replace(/-/g,"+")),WX=async(t,e)=>{const n=await fetch(t,e);return{ok:n.ok,json:await n.json()}},qX=async(t,e,n)=>{const r=new AbortController;let o;return e.signal=r.signal,Promise.race([WX(t,e),new Promise((i,s)=>{o=setTimeout(()=>{r.abort(),s(new Error("Timeout when executing 'fetch'"))},n)})]).finally(()=>{clearTimeout(o)})},YX=async(t,e,n,r,o,i,s)=>{return a={auth:{audience:e,scope:n},timeout:o,fetchUrl:t,fetchOptions:r,useFormData:s},c=i,new Promise(function(u,d){const f=new MessageChannel;f.port1.onmessage=function(p){p.data.error?d(new Error(p.data.error)):u(p.data),f.port1.close()},c.postMessage(a,[f.port2])});var a,c},QX=async(t,e,n,r,o,i,s=1e4)=>o?YX(t,e,n,r,s,o,i):qX(t,r,s);async function JX(t,e){var{baseUrl:n,timeout:r,audience:o,scope:i,auth0Client:s,useFormData:a}=t,c=Ti(t,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);const u=a?nE(c):JSON.stringify(c);return await async function(d,f,p,g,v,b,y){let C,S=null;for(let _=0;_<3;_++)try{C=await QX(d,p,g,v,b,y,f),S=null;break}catch(U){S=U}if(S)throw S;const w=C.json,{error:E,error_description:I}=w,T=Ti(w,["error","error_description"]),{ok:A}=C;if(!A){const _=I||`HTTP error. Unable to fetch ${d}`;throw E==="mfa_required"?new KX(E,_,T.mfa_token):E==="missing_refresh_token"?new SD(p,g):new rr(E||"request_error",_)}return T}(`${n}/oauth/token`,r,o||"default",i,{method:"POST",body:u,headers:{"Content-Type":a?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(s||pD))}},e,a)}const Qp=(...t)=>{return(e=t.filter(Boolean).join(" ").trim().split(/\s+/),Array.from(new Set(e))).join(" ");var e};let ac=class rE{constructor(e,n="@@auth0spajs@@",r){this.prefix=n,this.suffix=r,this.clientId=e.clientId,this.scope=e.scope,this.audience=e.audience}toKey(){return[this.prefix,this.clientId,this.audience,this.scope,this.suffix].filter(Boolean).join("::")}static fromKey(e){const[n,r,o,i]=e.split("::");return new rE({clientId:r,scope:i,audience:o},n)}static fromCacheEntry(e){const{scope:n,audience:r,client_id:o}=e;return new rE({scope:n,audience:r,clientId:o})}},XX=class{set(e,n){localStorage.setItem(e,JSON.stringify(n))}get(e){const n=window.localStorage.getItem(e);if(n)try{return JSON.parse(n)}catch{return}}remove(e){localStorage.removeItem(e)}allKeys(){return Object.keys(window.localStorage).filter(e=>e.startsWith("@@auth0spajs@@"))}},wD=class{constructor(){this.enclosedCache=function(){let e={};return{set(n,r){e[n]=r},get(n){const r=e[n];if(r)return r},remove(n){delete e[n]},allKeys:()=>Object.keys(e)}}()}},ZX=class{constructor(e,n,r){this.cache=e,this.keyManifest=n,this.nowProvider=r||mD}async setIdToken(e,n,r){var o;const i=this.getIdTokenCacheKey(e);await this.cache.set(i,{id_token:n,decodedToken:r}),await((o=this.keyManifest)===null||o===void 0?void 0:o.add(i))}async getIdToken(e){const n=await this.cache.get(this.getIdTokenCacheKey(e.clientId));if(!n&&e.scope&&e.audience){const r=await this.get(e);return!r||!r.id_token||!r.decodedToken?void 0:{id_token:r.id_token,decodedToken:r.decodedToken}}if(n)return{id_token:n.id_token,decodedToken:n.decodedToken}}async get(e,n=0){var r;let o=await this.cache.get(e.toKey());if(!o){const a=await this.getCacheKeys();if(!a)return;const c=this.matchExistingCacheKey(e,a);c&&(o=await this.cache.get(c))}if(!o)return;const i=await this.nowProvider(),s=Math.floor(i/1e3);return o.expiresAt-n<s?o.body.refresh_token?(o.body={refresh_token:o.body.refresh_token},await this.cache.set(e.toKey(),o),o.body):(await this.cache.remove(e.toKey()),void await((r=this.keyManifest)===null||r===void 0?void 0:r.remove(e.toKey()))):o.body}async set(e){var n;const r=new ac({clientId:e.client_id,scope:e.scope,audience:e.audience}),o=await this.wrapCacheEntry(e);await this.cache.set(r.toKey(),o),await((n=this.keyManifest)===null||n===void 0?void 0:n.add(r.toKey()))}async clear(e){var n;const r=await this.getCacheKeys();r&&(await r.filter(o=>!e||o.includes(e)).reduce(async(o,i)=>{await o,await this.cache.remove(i)},Promise.resolve()),await((n=this.keyManifest)===null||n===void 0?void 0:n.clear()))}async wrapCacheEntry(e){const n=await this.nowProvider();return{body:e,expiresAt:Math.floor(n/1e3)+e.expires_in}}async getCacheKeys(){var e;return this.keyManifest?(e=await this.keyManifest.get())===null||e===void 0?void 0:e.keys:this.cache.allKeys?this.cache.allKeys():void 0}getIdTokenCacheKey(e){return new ac({clientId:e},"@@auth0spajs@@","@@user@@").toKey()}matchExistingCacheKey(e,n){return n.filter(r=>{var o;const i=ac.fromKey(r),s=new Set(i.scope&&i.scope.split(" ")),a=((o=e.scope)===null||o===void 0?void 0:o.split(" "))||[],c=i.scope&&a.reduce((u,d)=>u&&s.has(d),!0);return i.prefix==="@@auth0spajs@@"&&i.clientId===e.clientId&&i.audience===e.audience&&c})[0]}},eZ=class{constructor(e,n,r){this.storage=e,this.clientId=n,this.cookieDomain=r,this.storageKey=`a0.spajs.txs.${this.clientId}`}create(e){this.storage.save(this.storageKey,e,{daysUntilExpire:1,cookieDomain:this.cookieDomain})}get(){return this.storage.get(this.storageKey)}remove(){this.storage.remove(this.storageKey,{cookieDomain:this.cookieDomain})}};const mh=t=>typeof t=="number",tZ=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],nZ=t=>{if(!t.id_token)throw new Error("ID token is required but missing");const e=(i=>{const s=i.split("."),[a,c,u]=s;if(s.length!==3||!a||!c||!u)throw new Error("ID token could not be decoded");const d=JSON.parse($1(c)),f={__raw:i},p={};return Object.keys(d).forEach(g=>{f[g]=d[g],tZ.includes(g)||(p[g]=d[g])}),{encoded:{header:a,payload:c,signature:u},header:JSON.parse($1(a)),claims:f,user:p}})(t.id_token);if(!e.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(e.claims.iss!==t.iss)throw new Error(`Issuer (iss) claim mismatch in the ID token; expected "${t.iss}", found "${e.claims.iss}"`);if(!e.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if(e.header.alg!=="RS256")throw new Error(`Signature algorithm of "${e.header.alg}" is not supported. Expected the ID token to be signed with "RS256".`);if(!e.claims.aud||typeof e.claims.aud!="string"&&!Array.isArray(e.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(e.claims.aud)){if(!e.claims.aud.includes(t.aud))throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${t.aud}" but was not one of "${e.claims.aud.join(", ")}"`);if(e.claims.aud.length>1){if(!e.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(e.claims.azp!==t.aud)throw new Error(`Authorized Party (azp) claim mismatch in the ID token; expected "${t.aud}", found "${e.claims.azp}"`)}}else if(e.claims.aud!==t.aud)throw new Error(`Audience (aud) claim mismatch in the ID token; expected "${t.aud}" but found "${e.claims.aud}"`);if(t.nonce){if(!e.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(e.claims.nonce!==t.nonce)throw new Error(`Nonce (nonce) claim mismatch in the ID token; expected "${t.nonce}", found "${e.claims.nonce}"`)}if(t.max_age&&!mh(e.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(e.claims.exp==null||!mh(e.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!mh(e.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");const n=t.leeway||60,r=new Date(t.now||Date.now()),o=new Date(0);if(o.setUTCSeconds(e.claims.exp+n),r>o)throw new Error(`Expiration Time (exp) claim error in the ID token; current time (${r}) is after expiration time (${o})`);if(e.claims.nbf!=null&&mh(e.claims.nbf)){const i=new Date(0);if(i.setUTCSeconds(e.claims.nbf-n),r<i)throw new Error(`Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Current time (${r}) is before ${i}`)}if(e.claims.auth_time!=null&&mh(e.claims.auth_time)){const i=new Date(0);if(i.setUTCSeconds(parseInt(e.claims.auth_time)+t.max_age+n),r>i)throw new Error(`Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Current time (${r}) is after last auth at ${i}`)}if(t.organization){const i=t.organization.trim();if(i.startsWith("org_")){const s=i;if(!e.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(s!==e.claims.org_id)throw new Error(`Organization ID (org_id) claim mismatch in the ID token; expected "${s}", found "${e.claims.org_id}"`)}else{const s=i.toLowerCase();if(!e.claims.org_name)throw new Error("Organization Name (org_name) claim must be a string present in the ID token");if(s!==e.claims.org_name)throw new Error(`Organization Name (org_name) claim mismatch in the ID token; expected "${s}", found "${e.claims.org_name}"`)}}return e};var cc=ST(function(t,e){var n=tc&&tc.__assign||function(){return n=Object.assign||function(c){for(var u,d=1,f=arguments.length;d<f;d++)for(var p in u=arguments[d])Object.prototype.hasOwnProperty.call(u,p)&&(c[p]=u[p]);return c},n.apply(this,arguments)};function r(c,u){if(!u)return"";var d="; "+c;return u===!0?d:d+"="+u}function o(c,u,d){return encodeURIComponent(c).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(u).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(f){if(typeof f.expires=="number"){var p=new Date;p.setMilliseconds(p.getMilliseconds()+864e5*f.expires),f.expires=p}return r("Expires",f.expires?f.expires.toUTCString():"")+r("Domain",f.domain)+r("Path",f.path)+r("Secure",f.secure)+r("SameSite",f.sameSite)}(d)}function i(c){for(var u={},d=c?c.split("; "):[],f=/(%[\dA-F]{2})+/gi,p=0;p<d.length;p++){var g=d[p].split("="),v=g.slice(1).join("=");v.charAt(0)==='"'&&(v=v.slice(1,-1));try{u[g[0].replace(f,decodeURIComponent)]=v.replace(f,decodeURIComponent)}catch{}}return u}function s(){return i(document.cookie)}function a(c,u,d){document.cookie=o(c,u,n({path:"/"},d))}e.__esModule=!0,e.encode=o,e.parse=i,e.getAll=s,e.get=function(c){return s()[c]},e.set=a,e.remove=function(c,u){a(c,"",n(n({},u),{expires:-1}))}});CT(cc),cc.encode,cc.parse,cc.getAll;var rZ=cc.get,ID=cc.set,TD=cc.remove;const Xl={get(t){const e=rZ(t);if(e!==void 0)return JSON.parse(e)},save(t,e,n){let r={};window.location.protocol==="https:"&&(r={secure:!0,sameSite:"none"}),n!=null&&n.daysUntilExpire&&(r.expires=n.daysUntilExpire),n!=null&&n.cookieDomain&&(r.domain=n.cookieDomain),ID(t,JSON.stringify(e),r)},remove(t,e){let n={};e!=null&&e.cookieDomain&&(n.domain=e.cookieDomain),TD(t,n)}},oZ={get(t){return Xl.get(t)||Xl.get(`_legacy_${t}`)},save(t,e,n){let r={};window.location.protocol==="https:"&&(r={secure:!0}),n!=null&&n.daysUntilExpire&&(r.expires=n.daysUntilExpire),n!=null&&n.cookieDomain&&(r.domain=n.cookieDomain),ID(`_legacy_${t}`,JSON.stringify(e),r),Xl.save(t,e,n)},remove(t,e){let n={};e!=null&&e.cookieDomain&&(n.domain=e.cookieDomain),TD(t,n),Xl.remove(t,e),Xl.remove(`_legacy_${t}`,e)}},iZ={get(t){if(typeof sessionStorage>"u")return;const e=sessionStorage.getItem(t);return e!=null?JSON.parse(e):void 0},save(t,e){sessionStorage.setItem(t,JSON.stringify(e))},remove(t){sessionStorage.removeItem(t)}};function sZ(t,e,n){var r=e===void 0?null:e,o=function(c,u){var d=atob(c);if(u){for(var f=new Uint8Array(d.length),p=0,g=d.length;p<g;++p)f[p]=d.charCodeAt(p);return String.fromCharCode.apply(null,new Uint16Array(f.buffer))}return d}(t,n!==void 0&&n),i=o.indexOf(`
`,10)+1,s=o.substring(i)+(r?"//# sourceMappingURL="+r:""),a=new Blob([s],{type:"application/javascript"});return URL.createObjectURL(a)}var G1,K1,W1,yC,aZ=(G1="Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Y2xhc3MgZSBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKHQscil7c3VwZXIociksdGhpcy5lcnJvcj10LHRoaXMuZXJyb3JfZGVzY3JpcHRpb249cixPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxlLnByb3RvdHlwZSl9c3RhdGljIGZyb21QYXlsb2FkKHtlcnJvcjp0LGVycm9yX2Rlc2NyaXB0aW9uOnJ9KXtyZXR1cm4gbmV3IGUodCxyKX19Y2xhc3MgdCBleHRlbmRzIGV7Y29uc3RydWN0b3IoZSxzKXtzdXBlcigibWlzc2luZ19yZWZyZXNoX3Rva2VuIixgTWlzc2luZyBSZWZyZXNoIFRva2VuIChhdWRpZW5jZTogJyR7cihlLFsiZGVmYXVsdCJdKX0nLCBzY29wZTogJyR7cihzKX0nKWApLHRoaXMuYXVkaWVuY2U9ZSx0aGlzLnNjb3BlPXMsT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsdC5wcm90b3R5cGUpfX1mdW5jdGlvbiByKGUsdD1bXSl7cmV0dXJuIGUmJiF0LmluY2x1ZGVzKGUpP2U6IiJ9ImZ1bmN0aW9uIj09dHlwZW9mIFN1cHByZXNzZWRFcnJvciYmU3VwcHJlc3NlZEVycm9yO2NvbnN0IHM9ZT0+e3ZhcntjbGllbnRJZDp0fT1lLHI9ZnVuY3Rpb24oZSx0KXt2YXIgcj17fTtmb3IodmFyIHMgaW4gZSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxzKSYmdC5pbmRleE9mKHMpPDAmJihyW3NdPWVbc10pO2lmKG51bGwhPWUmJiJmdW5jdGlvbiI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgbz0wO2ZvcihzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7bzxzLmxlbmd0aDtvKyspdC5pbmRleE9mKHNbb10pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLHNbb10pJiYocltzW29dXT1lW3Nbb11dKX1yZXR1cm4gcn0oZSxbImNsaWVudElkIl0pO3JldHVybiBuZXcgVVJMU2VhcmNoUGFyYW1zKChlPT5PYmplY3Qua2V5cyhlKS5maWx0ZXIoKHQ9PnZvaWQgMCE9PWVbdF0pKS5yZWR1Y2UoKCh0LHIpPT5PYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sdCkse1tyXTplW3JdfSkpLHt9KSkoT2JqZWN0LmFzc2lnbih7Y2xpZW50X2lkOnR9LHIpKSkudG9TdHJpbmcoKX07bGV0IG89e307Y29uc3Qgbj0oZSx0KT0+YCR7ZX18JHt0fWA7YWRkRXZlbnRMaXN0ZW5lcigibWVzc2FnZSIsKGFzeW5jKHtkYXRhOnt0aW1lb3V0OmUsYXV0aDpyLGZldGNoVXJsOmksZmV0Y2hPcHRpb25zOmMsdXNlRm9ybURhdGE6YX0scG9ydHM6W3BdfSk9PntsZXQgZjtjb25zdHthdWRpZW5jZTp1LHNjb3BlOmx9PXJ8fHt9O3RyeXtjb25zdCByPWE/KGU9Pntjb25zdCB0PW5ldyBVUkxTZWFyY2hQYXJhbXMoZSkscj17fTtyZXR1cm4gdC5mb3JFYWNoKCgoZSx0KT0+e3JbdF09ZX0pKSxyfSkoYy5ib2R5KTpKU09OLnBhcnNlKGMuYm9keSk7aWYoIXIucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09ci5ncmFudF90eXBlKXtjb25zdCBlPSgoZSx0KT0+b1tuKGUsdCldKSh1LGwpO2lmKCFlKXRocm93IG5ldyB0KHUsbCk7Yy5ib2R5PWE/cyhPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKTpKU09OLnN0cmluZ2lmeShPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30scikse3JlZnJlc2hfdG9rZW46ZX0pKX1sZXQgaCxnOyJmdW5jdGlvbiI9PXR5cGVvZiBBYm9ydENvbnRyb2xsZXImJihoPW5ldyBBYm9ydENvbnRyb2xsZXIsYy5zaWduYWw9aC5zaWduYWwpO3RyeXtnPWF3YWl0IFByb21pc2UucmFjZShbKGQ9ZSxuZXcgUHJvbWlzZSgoZT0+c2V0VGltZW91dChlLGQpKSkpLGZldGNoKGksT2JqZWN0LmFzc2lnbih7fSxjKSldKX1jYXRjaChlKXtyZXR1cm4gdm9pZCBwLnBvc3RNZXNzYWdlKHtlcnJvcjplLm1lc3NhZ2V9KX1pZighZylyZXR1cm4gaCYmaC5hYm9ydCgpLHZvaWQgcC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KTtmPWF3YWl0IGcuanNvbigpLGYucmVmcmVzaF90b2tlbj8oKChlLHQscik9PntvW24odCxyKV09ZX0pKGYucmVmcmVzaF90b2tlbix1LGwpLGRlbGV0ZSBmLnJlZnJlc2hfdG9rZW4pOigoZSx0KT0+e2RlbGV0ZSBvW24oZSx0KV19KSh1LGwpLHAucG9zdE1lc3NhZ2Uoe29rOmcub2ssanNvbjpmfSl9Y2F0Y2goZSl7cC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3I6ZS5lcnJvcixlcnJvcl9kZXNjcmlwdGlvbjplLm1lc3NhZ2V9fSl9dmFyIGR9KSl9KCk7Cgo=",K1=null,W1=!1,function(t){return yC=yC||sZ(G1,K1,W1),new Worker(yC,t)});const bC={};let cZ=class{constructor(e,n){this.cache=e,this.clientId=n,this.manifestKey=this.createManifestKeyFrom(this.clientId)}async add(e){var n;const r=new Set(((n=await this.cache.get(this.manifestKey))===null||n===void 0?void 0:n.keys)||[]);r.add(e),await this.cache.set(this.manifestKey,{keys:[...r]})}async remove(e){const n=await this.cache.get(this.manifestKey);if(n){const r=new Set(n.keys);return r.delete(e),r.size>0?await this.cache.set(this.manifestKey,{keys:[...r]}):await this.cache.remove(this.manifestKey)}}get(){return this.cache.get(this.manifestKey)}clear(){return this.cache.remove(this.manifestKey)}createManifestKeyFrom(e){return`@@auth0spajs@@::${e}`}};const lZ={memory:()=>new wD().enclosedCache,localstorage:()=>new XX},q1=t=>lZ[t],Y1=t=>{const{openUrl:e,onRedirect:n}=t,r=Ti(t,["openUrl","onRedirect"]);return Object.assign(Object.assign({},r),{openUrl:e===!1||e?e:n})},CC=new HX;let uZ=class{constructor(e){let n,r;if(this.userCache=new wD().enclosedCache,this.defaultOptions={authorizationParams:{scope:"openid profile email"},useRefreshTokensFallback:!1,useFormData:!0},this._releaseLockOnPageHide=async()=>{await CC.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)},this.options=Object.assign(Object.assign(Object.assign({},this.defaultOptions),e),{authorizationParams:Object.assign(Object.assign({},this.defaultOptions.authorizationParams),e.authorizationParams)}),typeof window<"u"&&(()=>{if(!Hm())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(Hm().subtle===void 0)throw new Error(`
      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/main/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.
    `)})(),e.cache&&e.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),e.cache)r=e.cache;else{if(n=e.cacheLocation||"memory",!q1(n))throw new Error(`Invalid cache location "${n}"`);r=q1(n)()}this.httpTimeoutMs=e.httpTimeoutInSeconds?1e3*e.httpTimeoutInSeconds:1e4,this.cookieStorage=e.legacySameSiteCookie===!1?Xl:oZ,this.orgHintCookieName=`auth0.${this.options.clientId}.organization_hint`,this.isAuthenticatedCookieName=(s=>`auth0.${s}.is.authenticated`)(this.options.clientId),this.sessionCheckExpiryDays=e.sessionCheckExpiryDays||1;const o=e.useCookiesForTransactions?this.cookieStorage:iZ;var i;this.scope=Qp("openid",this.options.authorizationParams.scope,this.options.useRefreshTokens?"offline_access":""),this.transactionManager=new eZ(o,this.options.clientId,this.options.cookieDomain),this.nowProvider=this.options.nowProvider||mD,this.cacheManager=new ZX(r,r.allKeys?void 0:new cZ(r,this.options.clientId),this.nowProvider),this.domainUrl=(i=this.options.domain,/^https?:\/\//.test(i)?i:`https://${i}`),this.tokenIssuer=((s,a)=>s?s.startsWith("https://")?s:`https://${s}/`:`${a}/`)(this.options.issuer,this.domainUrl),typeof window<"u"&&window.Worker&&this.options.useRefreshTokens&&n==="memory"&&(this.options.workerUrl?this.worker=new Worker(this.options.workerUrl):this.worker=new aZ)}_url(e){const n=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||pD)));return`${this.domainUrl}${e}&auth0Client=${n}`}_authorizeUrl(e){return this._url(`/authorize?${nE(e)}`)}async _verifyIdToken(e,n,r){const o=await this.nowProvider();return nZ({iss:this.tokenIssuer,aud:this.options.clientId,id_token:e,nonce:n,organization:r,leeway:this.options.leeway,max_age:(i=this.options.authorizationParams.max_age,typeof i!="string"?i:parseInt(i,10)||void 0),now:o});var i}_processOrgHint(e){e?this.cookieStorage.save(this.orgHintCookieName,e,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}):this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain})}async _prepareAuthorizeUrl(e,n,r){const o=V1(vC()),i=V1(vC()),s=vC(),a=(d=>{const f=new Uint8Array(d);return(p=>{const g={"+":"-","/":"_","=":""};return p.replace(/[+/=]/g,v=>g[v])})(window.btoa(String.fromCharCode(...Array.from(f))))})(await(async d=>await Hm().subtle.digest({name:"SHA-256"},new TextEncoder().encode(d)))(s)),c=((d,f,p,g,v,b,y,C)=>Object.assign(Object.assign(Object.assign({client_id:d.clientId},d.authorizationParams),p),{scope:Qp(f,p.scope),response_type:"code",response_mode:C||"query",state:g,nonce:v,redirect_uri:y||d.authorizationParams.redirect_uri,code_challenge:b,code_challenge_method:"S256"}))(this.options,this.scope,e,o,i,a,e.redirect_uri||this.options.authorizationParams.redirect_uri||r,n==null?void 0:n.response_mode),u=this._authorizeUrl(c);return{nonce:i,code_verifier:s,scope:c.scope,audience:c.audience||"default",redirect_uri:c.redirect_uri,state:o,url:u}}async loginWithPopup(e,n){var r;if(e=e||{},!(n=n||{}).popup&&(n.popup=(a=>{const c=window.screenX+(window.innerWidth-400)/2,u=window.screenY+(window.innerHeight-600)/2;return window.open(a,"auth0:authorize:popup",`left=${c},top=${u},width=400,height=600,resizable,scrollbars=yes,status=1`)})(""),!n.popup))throw new Error("Unable to open a popup for loginWithPopup - window.open returned `null`");const o=await this._prepareAuthorizeUrl(e.authorizationParams||{},{response_mode:"web_message"},window.location.origin);n.popup.location.href=o.url;const i=await(a=>new Promise((c,u)=>{let d;const f=setInterval(()=>{a.popup&&a.popup.closed&&(clearInterval(f),clearTimeout(p),window.removeEventListener("message",d,!1),u(new GX(a.popup)))},1e3),p=setTimeout(()=>{clearInterval(f),u(new $X(a.popup)),window.removeEventListener("message",d,!1)},1e3*(a.timeoutInSeconds||60));d=function(g){if(g.data&&g.data.type==="authorization_response"){if(clearTimeout(p),clearInterval(f),window.removeEventListener("message",d,!1),a.popup.close(),g.data.response.error)return u(rr.fromPayload(g.data.response));c(g.data.response)}},window.addEventListener("message",d)}))(Object.assign(Object.assign({},n),{timeoutInSeconds:n.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}));if(o.state!==i.state)throw new rr("state_mismatch","Invalid state");const s=((r=e.authorizationParams)===null||r===void 0?void 0:r.organization)||this.options.authorizationParams.organization;await this._requestToken({audience:o.audience,scope:o.scope,code_verifier:o.code_verifier,grant_type:"authorization_code",code:i.code,redirect_uri:o.redirect_uri},{nonceIn:o.nonce,organization:s})}async getUser(){var e;const n=await this._getIdTokenFromCache();return(e=n==null?void 0:n.decodedToken)===null||e===void 0?void 0:e.user}async getIdTokenClaims(){var e;const n=await this._getIdTokenFromCache();return(e=n==null?void 0:n.decodedToken)===null||e===void 0?void 0:e.claims}async loginWithRedirect(e={}){var n;const r=Y1(e),{openUrl:o,fragment:i,appState:s}=r,a=Ti(r,["openUrl","fragment","appState"]),c=((n=a.authorizationParams)===null||n===void 0?void 0:n.organization)||this.options.authorizationParams.organization,u=await this._prepareAuthorizeUrl(a.authorizationParams||{}),{url:d}=u,f=Ti(u,["url"]);this.transactionManager.create(Object.assign(Object.assign(Object.assign({},f),{appState:s}),c&&{organization:c}));const p=i?`${d}#${i}`:d;o?await o(p):window.location.assign(p)}async handleRedirectCallback(e=window.location.href){const n=e.split("?").slice(1);if(n.length===0)throw new Error("There are no query params available for parsing.");const{state:r,code:o,error:i,error_description:s}=(f=>{f.indexOf("#")>-1&&(f=f.substring(0,f.indexOf("#")));const p=new URLSearchParams(f);return{state:p.get("state"),code:p.get("code")||void 0,error:p.get("error")||void 0,error_description:p.get("error_description")||void 0}})(n.join("")),a=this.transactionManager.get();if(!a)throw new rr("missing_transaction","Invalid state");if(this.transactionManager.remove(),i)throw new VX(i,s||i,r,a.appState);if(!a.code_verifier||a.state&&a.state!==r)throw new rr("state_mismatch","Invalid state");const c=a.organization,u=a.nonce,d=a.redirect_uri;return await this._requestToken(Object.assign({audience:a.audience,scope:a.scope,code_verifier:a.code_verifier,grant_type:"authorization_code",code:o},d?{redirect_uri:d}:{}),{nonceIn:u,organization:c}),{appState:a.appState}}async checkSession(e){if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return;this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove("auth0.is.authenticated")}try{await this.getTokenSilently(e)}catch{}}async getTokenSilently(e={}){var n;const r=Object.assign(Object.assign({cacheMode:"on"},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:Qp(this.scope,(n=e.authorizationParams)===null||n===void 0?void 0:n.scope)})}),o=await((i,s)=>{let a=bC[s];return a||(a=i().finally(()=>{delete bC[s],a=null}),bC[s]=a),a})(()=>this._getTokenSilently(r),`${this.options.clientId}::${r.authorizationParams.audience}::${r.authorizationParams.scope}`);return e.detailedResponse?o:o==null?void 0:o.access_token}async _getTokenSilently(e){const{cacheMode:n}=e,r=Ti(e,["cacheMode"]);if(n!=="off"){const o=await this._getEntryFromCache({scope:r.authorizationParams.scope,audience:r.authorizationParams.audience||"default",clientId:this.options.clientId});if(o)return o}if(n!=="cache-only"){if(!await(async(o,i=3)=>{for(let s=0;s<i;s++)if(await o())return!0;return!1})(()=>CC.acquireLock("auth0.lock.getTokenSilently",5e3),10))throw new tE;try{if(window.addEventListener("pagehide",this._releaseLockOnPageHide),n!=="off"){const u=await this._getEntryFromCache({scope:r.authorizationParams.scope,audience:r.authorizationParams.audience||"default",clientId:this.options.clientId});if(u)return u}const o=this.options.useRefreshTokens?await this._getTokenUsingRefreshToken(r):await this._getTokenFromIFrame(r),{id_token:i,access_token:s,oauthTokenScope:a,expires_in:c}=o;return Object.assign(Object.assign({id_token:i,access_token:s},a?{scope:a}:null),{expires_in:c})}finally{await CC.releaseLock("auth0.lock.getTokenSilently"),window.removeEventListener("pagehide",this._releaseLockOnPageHide)}}}async getTokenWithPopup(e={},n={}){var r;const o=Object.assign(Object.assign({},e),{authorizationParams:Object.assign(Object.assign(Object.assign({},this.options.authorizationParams),e.authorizationParams),{scope:Qp(this.scope,(r=e.authorizationParams)===null||r===void 0?void 0:r.scope)})});return n=Object.assign(Object.assign({},zX),n),await this.loginWithPopup(o,n),(await this.cacheManager.get(new ac({scope:o.authorizationParams.scope,audience:o.authorizationParams.audience||"default",clientId:this.options.clientId}))).access_token}async isAuthenticated(){return!!await this.getUser()}_buildLogoutUrl(e){e.clientId!==null?e.clientId=e.clientId||this.options.clientId:delete e.clientId;const n=e.logoutParams||{},{federated:r}=n,o=Ti(n,["federated"]),i=r?"&federated":"";return this._url(`/v2/logout?${nE(Object.assign({clientId:e.clientId},o))}`)+i}async logout(e={}){const n=Y1(e),{openUrl:r}=n,o=Ti(n,["openUrl"]);e.clientId===null?await this.cacheManager.clear():await this.cacheManager.clear(e.clientId||this.options.clientId),this.cookieStorage.remove(this.orgHintCookieName,{cookieDomain:this.options.cookieDomain}),this.cookieStorage.remove(this.isAuthenticatedCookieName,{cookieDomain:this.options.cookieDomain}),this.userCache.remove("@@user@@");const i=this._buildLogoutUrl(o);r?await r(i):r!==!1&&window.location.assign(i)}async _getTokenFromIFrame(e){const n=Object.assign(Object.assign({},e.authorizationParams),{prompt:"none"}),r=this.cookieStorage.get(this.orgHintCookieName);r&&!n.organization&&(n.organization=r);const{url:o,state:i,nonce:s,code_verifier:a,redirect_uri:c,scope:u,audience:d}=await this._prepareAuthorizeUrl(n,{response_mode:"web_message"},window.location.origin);try{if(window.crossOriginIsolated)throw new rr("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");const f=e.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,p=await((v,b,y=60)=>new Promise((C,S)=>{const w=window.document.createElement("iframe");w.setAttribute("width","0"),w.setAttribute("height","0"),w.style.display="none";const E=()=>{window.document.body.contains(w)&&(window.document.body.removeChild(w),window.removeEventListener("message",I,!1))};let I;const T=setTimeout(()=>{S(new tE),E()},1e3*y);I=function(A){if(A.origin!=b||!A.data||A.data.type!=="authorization_response")return;const _=A.source;_&&_.close(),A.data.response.error?S(rr.fromPayload(A.data.response)):C(A.data.response),clearTimeout(T),window.removeEventListener("message",I,!1),setTimeout(E,2e3)},window.addEventListener("message",I,!1),window.document.body.appendChild(w),w.setAttribute("src",v)}))(o,this.domainUrl,f);if(i!==p.state)throw new rr("state_mismatch","Invalid state");const g=await this._requestToken(Object.assign(Object.assign({},e.authorizationParams),{code_verifier:a,code:p.code,grant_type:"authorization_code",redirect_uri:c,timeout:e.authorizationParams.timeout||this.httpTimeoutMs}),{nonceIn:s,organization:n.organization});return Object.assign(Object.assign({},g),{scope:u,oauthTokenScope:g.scope,audience:d})}catch(f){throw f.error==="login_required"&&this.logout({openUrl:!1}),f}}async _getTokenUsingRefreshToken(e){const n=await this.cacheManager.get(new ac({scope:e.authorizationParams.scope,audience:e.authorizationParams.audience||"default",clientId:this.options.clientId}));if(!(n&&n.refresh_token||this.worker)){if(this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw new SD(e.authorizationParams.audience||"default",e.authorizationParams.scope)}const r=e.authorizationParams.redirect_uri||this.options.authorizationParams.redirect_uri||window.location.origin,o=typeof e.timeoutInSeconds=="number"?1e3*e.timeoutInSeconds:null;try{const i=await this._requestToken(Object.assign(Object.assign(Object.assign({},e.authorizationParams),{grant_type:"refresh_token",refresh_token:n&&n.refresh_token,redirect_uri:r}),o&&{timeout:o}));return Object.assign(Object.assign({},i),{scope:e.authorizationParams.scope,oauthTokenScope:i.scope,audience:e.authorizationParams.audience||"default"})}catch(i){if((i.message.indexOf("Missing Refresh Token")>-1||i.message&&i.message.indexOf("invalid refresh token")>-1)&&this.options.useRefreshTokensFallback)return await this._getTokenFromIFrame(e);throw i}}async _saveEntryInCache(e){const{id_token:n,decodedToken:r}=e,o=Ti(e,["id_token","decodedToken"]);this.userCache.set("@@user@@",{id_token:n,decodedToken:r}),await this.cacheManager.setIdToken(this.options.clientId,e.id_token,e.decodedToken),await this.cacheManager.set(o)}async _getIdTokenFromCache(){const e=this.options.authorizationParams.audience||"default",n=await this.cacheManager.getIdToken(new ac({clientId:this.options.clientId,audience:e,scope:this.scope})),r=this.userCache.get("@@user@@");return n&&n.id_token===(r==null?void 0:r.id_token)?r:(this.userCache.set("@@user@@",n),n)}async _getEntryFromCache({scope:e,audience:n,clientId:r}){const o=await this.cacheManager.get(new ac({scope:e,audience:n,clientId:r}),60);if(o&&o.access_token){const{access_token:i,oauthTokenScope:s,expires_in:a}=o,c=await this._getIdTokenFromCache();return c&&Object.assign(Object.assign({id_token:c.id_token,access_token:i},s?{scope:s}:null),{expires_in:a})}}async _requestToken(e,n){const{nonceIn:r,organization:o}=n||{},i=await JX(Object.assign({baseUrl:this.domainUrl,client_id:this.options.clientId,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData,timeout:this.httpTimeoutMs},e),this.worker),s=await this._verifyIdToken(i.id_token,r,o);return await this._saveEntryInCache(Object.assign(Object.assign(Object.assign(Object.assign({},i),{decodedToken:s,scope:e.scope,audience:e.audience||"default"}),i.scope?{oauthTokenScope:i.scope}:null),{client_id:this.options.clientId})),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays,cookieDomain:this.options.cookieDomain}),this._processOrgHint(o||s.claims.org_id),Object.assign(Object.assign({},i),{decodedToken:s})}};async function dZ(t){const e=new uZ(t);return await e.checkSession(),e}const _D=M(!1),In=M(null),dl=M(t=>{const e=t(In);return e?e.accountType==="AAD":!1}),txe=M(t=>{const e=t(In);return e?e.accountType==="MSA":!1}),AD=M(t=>t(In)!==null),qo=M(null),hZ=M(!0);function kD(t,e,n){return n!==void 0?n:e&&!t}function Pr(){const t=O(GL),e=O(dl),n=!!O(In);return kD(e,n,t)}function Pg(){const t=rt(),e=t.get(GL),n=t.get(dl),r=!!t.get(In);return kD(n,r,e)}async function fZ(t){var r;const e=(r=t.body)==null?void 0:r.getReader();if(!e)return 0;let n=0;try{const o=performance.now();for(;performance.now()-o<2e3;){const{value:i,done:s}=await e.read();if(s)break;n+=i.byteLength}return n}catch{return 0}}function xD(t,e="all"){const n=m.useRef(t),r=m.useMemo(()=>{const o=n.current.map(tl);return M(i=>e==="all"?o.every(s=>i(s)):o.some(s=>i(s)))},[e]);return O(r)}function ET(t,e="all"){return e==="all"?t.every(n=>et(n)):t.some(n=>et(n))}const RD=["character-animation-spda2e","character-animation-vasa","tv-lumi"];function wT(){return xD(RD,"any")}function pZ(){const t=O(Zu);return wT()&&!!t}function oE(){const t=rt().get(Zu);return ET(RD,"any")&&!!t}function Jp(t){return DM.includes(t)}const mZ="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/meshopt_decoder-3Kt66jYv.js",Fn=class Fn{static async loadLibraries(){const[e,,n]=await Promise.all([z(()=>import("./index-D_k0knri.js").then(r=>r.c),__vite__mapDeps([3,4,5,6,7,8,9,10,11,12,13,14,15,1,2,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169])),z(()=>import("./index-CA1cktYq.js").then(r=>r.b),__vite__mapDeps([170,171,4,5,23,7,8,13,172,173,24,25,1,2,94,174,175,144,33,34,95,31,176,146,177,154,178,179,180,181,153,98,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,10,11,12,203,204,205,206,36,37,207,208,209,210,211])),z(()=>import("./math.scalar.functions-C0i4R8fp.js").then(r=>r.f),[])]);e.MeshoptCompression.Configuration={decoder:{url:mZ}},Fn.Core=e,Fn.Math=n,Fn.isInitialized=!0}static async loadViewerLibraries(){const e=await z(()=>import("./index-CaFtCeSc.js").then(n=>n.i),__vite__mapDeps([212,14,4,5,9,172,213]));Fn.Viewer=e}static async loadDebugLibraries(){await Fn.loadLibraries(),await z(()=>import("./babylon.inspector.bundle-CuybGsoS.js").then(e=>e.b),__vite__mapDeps([214,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,171,172,173,170,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,215,213,216,217]))}static isLoaded(){return Fn.isInitialized}static getCore(){return Fn.throwIfNotInitialized("Core"),Fn.Core}static getMath(){return Fn.throwIfNotInitialized("Core"),Fn.Math}static getViewer(){return Fn.throwIfNotInitialized("Viewer"),Fn.Viewer}static throwIfNotInitialized(e){if(!Fn.isInitialized)throw new Error(`Libraries ${e} are not loaded yet. Call loadLibraries first.`)}};J(Fn,"Core"),J(Fn,"Math"),J(Fn,"Viewer"),J(Fn,"isInitialized",!1);let ed=Fn;function nxe(t){const e=t.split(/[\\/]/),n=e.pop();return{basePath:`${e.join("/")}/`,fileName:n??""}}function rxe(t,e){V.trackEvent({name:"interaction",data:{eventName:"characterAnimation",eventInfo_characterAnimationState:t,eventInfo_characterId:e}})}function oxe(t,e){const{Texture:n}=ed.getCore();return new Promise((r,o)=>{const i=new n(t,e,!1,!1,1,()=>{r(i)},o)})}function ixe(t){const{Vector3:e}=ed.getCore();return new e(t[0],t[1]??0,t[2]??0)}function sxe(t){return Math.max(...t)-Math.min(...t)}function axe(t){return t*Math.PI/180}function cxe(t){const{Clamp:e}=ed.getMath();return e(t,0,1)}function gZ(t,e,n){return Math.abs(t-e)>n?e:t}function lxe(t,e,n=.01,r=.2){const{MoveTowards:o}=ed.getMath();return o(t,gZ(t,e,n),r)}let Q1;function gh(...t){Q1===void 0&&(Q1=et("babylon-debug"))}class vZ{constructor(){J(this,"resourceObserver");J(this,"entries",[]);J(this,"keyword",null);this.resourceObserver=new PerformanceObserver(e=>{this.handleResources(e)})}trackStart(e){this.keyword=e,this.resourceObserver.observe({type:"resource",buffered:!1})}trackEnd(){const{entries:e}=this,n=e[e.length-1];return this.resourceObserver.disconnect(),this.entries=[],this.keyword=null,n?{name:n.name,duration:Math.round(n.duration)}:null}handleResources(e){if(this.keyword)for(const n of e.getEntries())n.name.includes(this.keyword)&&this.entries.push(n)}}class yZ{constructor(e=!0){J(this,"interactTime",0);J(this,"voiceChatToggledTime",0);J(this,"speechEndDetectedTime",0);J(this,"startMessageTime",0);J(this,"mountedTime",0);J(this,"libsLoadedTime",0);J(this,"sceneInitializedTime",0);J(this,"interactSource","");J(this,"currentConversationId","");J(this,"currentMessageId","");J(this,"visualizerEnabled",!1);J(this,"loadedEnd",!1);J(this,"voiceChatToggledOn",!1);J(this,"resourceMonitor",new vZ);J(this,"isVoiceCall");J(this,"resetLoading",()=>{gh("%c[] -> resetAppearanceEvent"),this.interactTime=0,this.visualizerEnabled=!1,this.loadedEnd=!1});J(this,"isAvailable",()=>this.isVoiceCall?oE()&&this.voiceChatToggledOn&&this.interactTime>0:oE()&&this.mountedTime>0);J(this,"trackLoadingEvent",e=>{if(!this.isAvailable())return;const{eventName:n,duration:r,characterId:o,networkDuration:i}=e;if(o&&!Jp(o))return;const a=["voiceChatToggled","appearanceVisible","appearanceLoadingComplete"].includes(n),c=!mn(D$);V.trackEvent({name:"system",data:{eventName:n,eventInfo_duration:Math.round(r),eventInfo_conversationId:this.currentConversationId,eventInfo_firstTime:c,eventInfo_characterId:o,eventInfo_trigger:a?this.interactSource:void 0,eventInfo_networkDuration:i,eventInfo_customData:JSON.stringify({isVoiceCall:this.isVoiceCall})}}),gh(`%c[] -> ${n} : `,"color: #691dc6",Math.round(r),c?"firstTime":"",o?`characterId: ${o}`:"",`isVoiceCall: ${this.isVoiceCall===!0}`)});J(this,"onUserInteract",e=>{this.resetLoading(),this.interactTime=performance.now(),this.interactSource=e,gh("%c[] -> onUserInteract","color: #222222")});J(this,"onVoiceChatToggled",(e,n)=>{if(e==="end")this.voiceChatToggledOn=!1,this.speechEndDetectedTime=0,this.resourceMonitor.trackEnd();else{this.voiceChatToggledOn=!0,this.voiceChatToggledTime=performance.now(),this.currentConversationId=n??"";const r=this.voiceChatToggledTime-this.interactTime;this.trackLoadingEvent({eventName:"voiceChatToggled",duration:r})}});J(this,"onMounted",()=>{this.mountedTime=performance.now();let e;this.isVoiceCall?e=this.mountedTime-this.voiceChatToggledTime:(this.interactTime=this.mountedTime,e=0),this.trackLoadingEvent({eventName:"appearanceMounted",duration:e})});J(this,"onUnmounted",()=>{this.resourceMonitor.trackEnd()});J(this,"onBabylonLibrariesLoaded",e=>{if(!Jp(e))return;this.libsLoadedTime=performance.now();const n=this.libsLoadedTime-this.mountedTime;this.trackLoadingEvent({eventName:"appearanceBabylonLoaded",duration:n,characterId:e})});J(this,"onSceneInitializationStart",e=>{Jp(e)&&this.resourceMonitor.trackStart(".glb")});J(this,"onSceneInitialized",e=>{if(!Jp(e))return;this.sceneInitializedTime=performance.now();const n=this.sceneInitializedTime-this.libsLoadedTime,r=this.resourceMonitor.trackEnd();gh("%c[] -> monitorResult : ","color: #5bb173",r),this.trackLoadingEvent({eventName:"appearanceSceneInitialized",duration:n,characterId:e,networkDuration:r?r.duration:void 0}),this.trackLoadingEvent({eventName:"appearanceLoadingComplete",duration:this.sceneInitializedTime-this.interactTime,characterId:e}),this.loadedEnd=!0,this.checkEnd()});J(this,"onVisualizerEnabled",()=>{if(this.visualizerEnabled)return;this.visualizerEnabled=!0;const e=Math.round(performance.now()-this.interactTime);this.trackLoadingEvent({eventName:"appearanceVisible",duration:e}),this.checkEnd()});J(this,"checkEnd",()=>{this.visualizerEnabled&&this.loadedEnd&&this.resetLoading()});J(this,"onStartMessage",(e,n)=>{this.currentMessageId=e,this.startMessageTime=n});J(this,"onSpeechEndDetected",e=>{this.speechEndDetectedTime=e});J(this,"onAnimationStart",()=>{const e=Math.round(performance.now()-(this.speechEndDetectedTime||this.startMessageTime));V.trackEvent({name:"system",data:{eventName:"copilotAnimationStart",eventInfo_conversationId:this.currentConversationId,eventInfo_messageId:this.currentMessageId,eventInfo_duration:e}}),gh("%c[] -> onAnimationStart : ","color: #691dc6",Math.round(e))});this.isVoiceCall=e}}const SC=new Map,bZ=(t=!0)=>(SC.has(t)||SC.set(t,new yZ(t)),SC.get(t)),Og=bZ(!0),CZ=1e3;function ND(t){(t.source==="audioCallButton"||t.source==="characterTalkToggleButton")&&Og.onUserInteract(t.source)}function En(t){V.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:t.source,eventInfo_clickScenario:t.scenario,eventInfo_clickDestination:t.destination,eventInfo_conversationId:t.conversationId,eventInfo_podcastId:t.podcastId,eventInfo_messageId:t.messageId,eventInfo_mode:t.chatMode,eventInfo_messageType:t.messageType,eventInfo_cardType:t.cardType,eventInfo_merchantPlatform:t.merchantPlatform,eventInfo_additionalData:t.additionalData?JSON.stringify(t.additionalData):void 0}}),ND(t)}function dt(t){V.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_pageName:t.pageName,eventInfo_sectionName:t.sectionName,eventInfo_clickSource:t.source,eventInfo_clickScenario:t.scenario,eventInfo_clickDestination:t.destination,eventInfo_conversationId:t.conversationId,eventInfo_customData:t.customData}}),ND(t)}function Pd(t){V.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionScenario:t.scenario,eventInfo_impressionPage:t.page,eventInfo_impressionElement:t.element,eventInfo_status:t.status,eventInfo_customData:t.customData}})}function Pc(t){V.trackEvent({name:"health",data:{eventName:"copilotFeatureSuccess",eventInfo_feature:t.feature,eventInfo_scenario:t.scenario,eventInfo_duration:t.duration,eventInfo_customData:t.customData}})}function ii(t){V.trackEvent({name:"health",data:{eventName:"copilotError",eventInfo_feature:t.feature,eventInfo_scenario:t.scenario,eventInfo_errorType:t.errorType,eventInfo_errorMessage:t.errorMessage,eventInfo_exception:t.exception,eventInfo_customData:t.customData}})}function SZ(t){V.trackEvent({name:"interaction",data:{eventName:"copilotSettingChange",eventInfo_settingName:t.settingName,eventInfo_settingOldValue:t.oldValue,eventInfo_settingNewValue:t.newValue}})}function uxe(t,e=CZ){let n;function r(){n=window.setTimeout(()=>{t()},e)}function o(){window.clearTimeout(n)}return{onHoverStart:r,onHoverEnd:o}}function PD(t,e,n,r){setTimeout(async()=>{try{const{status:o}=r,i=await fZ(r),s=r.headers.get("x-ceto-ref")??"";V.trackEvent({name:"apiresponse",data:{eventName:"copilotApiResponse",eventInfo_path:t,eventInfo_method:e,eventInfo_status:o,eventInfo_duration:n,eventInfo_responseContentLength:i,eventInfo_cetoRef:s}})}catch{}},0)}function J1(){performance.mark("userSession-end",{startTime:performance.now()});const{duration:t}=performance.measure("userSession-duration","startupTime-begin","userSession-end");V.trackEvent({name:"system",data:{eventName:"copilotExitEvent",eventInfo_duration:t}})}function EZ(t){V.trackEvent({name:"interaction",data:{eventName:"copilotScroll",eventInfo_ScrollSource:t.scrollSource,eventInfo_ScrollStartX:t.scrollStartX,eventInfo_ScrollStartY:t.scrollStartY,eventInfo_ScrollEndX:t.scrollEndX,eventInfo_ScrollEndY:t.scrollEndY,eventInfo_ScrollDuration:t.scrollDuration,eventInfo_userInitiated:t.userInitiated,eventInfo_customData:t.customData}})}const iE="authInitStartTime";function OD(t,e){if(Pg()){const r=rt().get(In),o=r==null?void 0:r.accountType;ii({feature:"api",scenario:e,errorType:"missingToken",errorMessage:`User is authenticated but no token was available for ${e==="getWssAPIUrl"?"WebSocket connection":"API request"}`,customData:JSON.stringify({path:t,accountType:o})})}}function MD(t,e){const r=rt().get(In),o=r==null?void 0:r.accountType,i=r==null?void 0:r.provider,s=r==null?void 0:r.tenantId;o||ii({feature:"api",scenario:e,errorType:"emptyAccountTypeWithToken",errorMessage:`Can get the token but with no user account type ${e==="getWssAPIUrl"?"WebSocket connection":"API request"}`,customData:JSON.stringify({path:t,provider:i,tenantId:s})})}function IT(t){const{providerType:e,apiName:n,extraInfo:r}=t,o=Date.now().toString();pa(iE,o),V.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:n,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_providerType:e,...r})}})}function TT(t){const{providerType:e,apiName:n,extraInfo:r}=t,o=Date.now(),i=ni(iE);if(i){const s=parseFloat(i),a=o-s;sessionStorage.removeItem(iE),V.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:n,eventInfo_success:!0,eventInfo_duration:a,eventInfo_customData:JSON.stringify({eventInfo_providerType:e,...r})}})}}function LD(t){const{authWorkflowAccountType:e,interactionType:n,correlationId:r,prompt:o,redirectUri:i,apiName:s,extraInfo:a}=t,c=Date.now().toString();sr(V0,c),V.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:s,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e??"unknown",eventInfo_interactionType:n??"",eventInfo_correlationId:r??"",eventInfo_prompt:o??"",eventInfo_redirectUri:i??"",...a})}})}function sE(t){const{authWorkflowAccountType:e,isMSA:n,authority:r,correlationId:o,interactionType:i,apiName:s,extraInfo:a}=t,c=Date.now(),u=mn(V0);let d;if(u){const f=parseFloat(u);d=c-f,so(V0)}V.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_apiName:s,eventInfo_success:!0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e??"unknown",eventInfo_interactionType:i,eventInfo_correlationId:o,eventInfo_authority:r,eventInfo_isMSA:n??!1,...a}),eventInfo_duration:d??0}})}function DD(t){const{providerType:e,apiName:n,extraInfo:r}=t;V.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_customData:JSON.stringify({eventInfo_providerType:e,...r})}})}function ca(t){const{authWorkflowAccountType:e,apiName:n,duration:r,extraInfo:o}=t;V.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_duration:r??0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e,...o})}})}function td(t){const{authWorkflowAccountType:e,apiName:n,errorMessage:r,errorType:o,errorExtraInfo:i,errorCode:s,extraInfo:a}=t;V.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!1,eventInfo_apiName:n,eventInfo_errorType:o,eventInfo_errorMessage:r,eventInfo_errorCode:s,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e??"unknown",...a,...i})}})}function EC(t){const{authWorkflowAccountType:e,apiName:n}=t;sr($0,"1"),V.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e})}})}function jD(t){const{authWorkflowAccountType:e,apiName:n,duration:r}=t,o=mn($0);o==="1"&&so($0),o==="1"&&V.trackEvent({name:"health",data:{eventName:"copilotWebAuthSDKAPICall",eventInfo_success:!0,eventInfo_apiName:n,eventInfo_duration:r??0,eventInfo_customData:JSON.stringify({eventInfo_authWorkflowAccountType:e})}})}function UD(t,e){return{eventInfo_requestType:e,eventInfo_retryAttemptCount:t.attemptCount,eventInfo_retryStartTime:t.startTime,eventInfo_retryEndDelay:t.endTime,eventInfo_retryDelayTimings:t.delayTimings.join(","),eventInfo_allErrors:JSON.stringify(t.errors)}}function wZ(t,e){ca({authWorkflowAccountType:"microsoft",apiName:fD.ACQUIRE_TOKEN_OVERALL_SUCCESS,extraInfo:UD(t,e)})}function IZ(t,e){const n=UD(t,e),r=t.errors[t.errors.length-1];td({authWorkflowAccountType:"microsoft",apiName:fD.ACQUIRE_TOKEN_OVERALL_FAILURE,errorType:(r==null?void 0:r.errorType)??"unknown",errorMessage:(r==null?void 0:r.errorMessage)??"unknown error",extraInfo:n})}var Zf,na,ju,us;class hl{constructor(e,n){sn(this,Zf);sn(this,na,null);sn(this,ju);sn(this,us,null);Ut(this,Zf,e),Ut(this,ju,n)}async get(e){return(pe(this,us)===null||pe(this,ju)&&(!pe(this,na)||pe(this,na)<Date.now()-pe(this,ju)))&&(Ut(this,us,pe(this,Zf).call(this,e)),Ut(this,na,Date.now())),pe(this,us)}set(e){Ut(this,us,e),Ut(this,na,Date.now())}reset(){Ut(this,us,null),Ut(this,na,null)}get isInstantiated(){return pe(this,us)!==null}}Zf=new WeakMap,na=new WeakMap,ju=new WeakMap,us=new WeakMap;const Co=new hl(TZ);async function TZ(){IT({apiName:Go.INITIALIZE_START,providerType:"auth0"});const t=await dZ(WH);TT({apiName:Go.INITIALIZE_END,providerType:"auth0"});const e=new Map([["on",null],["off",null],["cache-only",null]]);async function n(i,s){const a=performance.now();try{const c=await t.getTokenSilently(i),u=performance.now();return Pc({feature:"auth0SdkUsage",scenario:"getAuth0AccessToken",duration:u-a,customData:JSON.stringify({cacheMode:i.cacheMode??"on"})}),c}catch(c){c instanceof rr?(o({options:i,startTime:a,authWorkflowAccountType:s,errorType:c.error,errorMessage:c.error_description,exception:c.stack}),c.error==="login_required"&&An(qo,{reason:"token-expired",provider:"auth0"})):c instanceof Error?o({options:i,startTime:a,authWorkflowAccountType:s,errorType:c.name,errorMessage:c.message,exception:c.stack}):o({options:i,startTime:a,authWorkflowAccountType:s,errorType:"unknown",errorMessage:`${c}`});return}}async function r(i){const s=await t.getUser();if(!s)return;const a=s.sub&&s.sub.startsWith("google")?"google":"apple",c=i.cacheMode??"on",u=e.get(c);if(!u){const d=n(i,a);e.set(c,d);const f=await d;return e.set(c,null),f}return u}function o(i){const{startTime:s,options:a,authWorkflowAccountType:c,errorType:u,errorMessage:d,exception:f}=i;td({authWorkflowAccountType:c,apiName:Go.ACQUIRE_TOKEN_FAILURE,errorType:u,errorMessage:d,errorExtraInfo:{eventInfo_providerType:"auth0",eventInfo_exception:f??"",cacheMode:a.cacheMode??"on",duration:performance.now()-s}})}return{auth0:t,getAuth0AccessToken:r}}function _T(t){const e=t.split(".")[1];if(e===void 0)return;const n=e.replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(n).split("").map(o=>`%${`00${o.charCodeAt(0).toString(16)}`.slice(-2)}`).join(""));try{const o=JSON.parse(r);return BX.parse(o)}catch{return}}async function _Z(t,e){const{getAuth0AccessToken:n}=await Co.get(),{authorizationParams:r}=Cf,o={...r,dob:t,ctry:e},i=await n({authorizationParams:o,cacheMode:"off"});if(!i)return;const s=_T(i);if(s)return s}async function AZ(){const{getAuth0AccessToken:t}=await Co.get(),e=await t(Cf);if(!e)return;const n=_T(e);if(n){if(n.sub.startsWith("google"))return"Google";if(n.sub.startsWith("apple"))return"Apple"}}function kZ(t){switch(t){case"apple":return"Apple";case"google":return"Google";default:return}}function xZ(){const t={initialDelayMs:100,maxDelayMs:500,backoffFactor:2};return et("token-retry-max-1")?{...t,maxRetries:1}:et("token-retry-max-2")?{...t,maxRetries:2}:{...t,maxRetries:0}}const Xh=new BroadcastChannel("cp.broadcast");class RZ{constructor(){J(this,"hasTrackedRedirectError",!1);J(this,"CODE_RE",/[?&]code=[^&]+/);J(this,"STATE_RE",/[?&]state=[^&]+/);J(this,"ERROR_RE",/[?&]error=[^&]+/)}async handleRedirect(){try{const{auth0:e}=await Co.get();if(!this.hasAuthParams())return null;const n=performance.now();await e.handleRedirectCallback();const r=performance.now();Pc({feature:"auth0SdkUsage",scenario:"handleRedirect",duration:r-n});const o=await e.getUser();if(!o)return null;const i=o.sub?this.getTokenType(o.sub):void 0;return sE({apiName:Go.LOGIN_SUCCESS,authWorkflowAccountType:i}),jD({apiName:Go.REAUTH_SUCCESS,authWorkflowAccountType:i}),Xh.postMessage({eventName:"auth0.accountAdded"}),{id:o.sub,tenantId:crypto.randomUUID(),provider:"auth0",accountType:this.getAccountType(o.sub)}}catch(e){this.trackRedirectErrorOncePerSession(e)}return null}async handleRedirectWithoutAccount(){try{const{auth0:e}=await Co.get();if(this.hasAuthParams()){const n=performance.now();await e.handleRedirectCallback();const r=performance.now();Pc({feature:"auth0SdkUsage",scenario:"handleRedirect",duration:r-n});const o=await e.getUser();if(!o)return;const i=o.sub?this.getTokenType(o.sub):void 0;sE({apiName:Go.LOGIN_SUCCESS,authWorkflowAccountType:i}),Xh.postMessage({eventName:"auth0.accountAdded"})}}catch(e){this.trackRedirectErrorOncePerSession(e)}}async getCurrentActiveUserAccount(){const{auth0:e}=await Co.get(),n=await e.getUser();if(!n)return null;const{sub:r}=n;return r?{id:r,tenantId:crypto.randomUUID(),provider:"auth0",accountType:this.getAccountType(r)}:null}async maybeInitializeAccountWithToken(){const{auth0:e,getAuth0AccessToken:n}=await Co.get(),r=await n(Cf);if(!r)return null;const o=await e.getUser();if(!o)return null;const i=o.sub;return{userAccount:{id:i,tenantId:crypto.randomUUID(),provider:"auth0",accountType:this.getAccountType(i)},authToken:{accessToken:r,tokenType:this.getTokenType(i)}}}async logIn(e){const{connection:n}=e;if(!n)throw new Error("connection in LoginOpts are required");const{auth0:r}=await Co.get();return LD({apiName:Go.LOGIN_START,authWorkflowAccountType:e.connection??void 0}),r.loginWithRedirect({authorizationParams:{...qH.authorizationParams,connection:this.getConnectionFromTokenType(n)}})}async logOut(){const{auth0:e}=await Co.get(),n=await e.getUser(),r=n&&n.sub?this.getTokenType(n.sub):void 0;try{await e.logout({logoutParams:{returnTo:window.location.origin}}),Xh.postMessage({eventName:"auth0.accountRemoved"}),DD({apiName:Go.LOGOUT_SUCCESS,providerType:"auth0"})}catch(o){td({authWorkflowAccountType:r,apiName:Go.LOGOUT_FAILURE,errorMessage:`${o}`,errorExtraInfo:{eventInfo_providerType:"auth0"}}),console.error("Auth0 logout failed:",o)}}async getAuthToken(){try{const{auth0:e,getAuth0AccessToken:n}=await Co.get(),r=await n(Cf);if(!r)return;const o=await e.getUser();if(o){const i=o.sub,s=this.getTokenType(i);return{accessToken:r,tokenType:s}}}catch{return}}async getUserInfo(){const{auth0:e}=await Co.get(),n=await e.getUser();if(n)return{mail:n.email??"",givenName:n.given_name??"",surname:n.surname??"",imgSrc:n.picture,isStudent:!1}}async getUserInfoFromToken(e){const n=_T(e);if(!n)return;const{email:r,name:o}=n;return{mail:r,givenName:o.split(" ")[0]??"",surname:"",imgSrc:"",isStudent:!1}}supportsTokenType(e){return e==="apple"||e==="google"}getTokenType(e){return e.startsWith("google")?"google":"apple"}getAccountType(e){return e.startsWith("google")?"Google":"Apple"}getConnectionFromTokenType(e){return e==="apple"?"apple":"google-oauth2"}hasAuthParams(e=window.location.search){return(this.CODE_RE.test(e)||this.ERROR_RE.test(e))&&this.STATE_RE.test(e)}trackRedirectErrorOncePerSession(e){this.hasTrackedRedirectError||(V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"auth0HandleRedirectPromise",eventInfo_details:"Error handling redirect promise",eventInfo_errorMessage:`${e}`}}),td({apiName:Go.LOGIN_FAILURE,errorExtraInfo:{eventInfo_providerType:"auth0"},errorMessage:`${e}`})),this.hasTrackedRedirectError=!0}}function Oc(){return lo(G0,l.boolean().nullable())===!0}var aE=function(t,e){return aE=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},aE(t,e)};function dxe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");aE(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var X1=function(){return X1=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},X1.apply(this,arguments)};function hxe(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n}function Qt(t,e,n,r){function o(i){return i instanceof n?i:new n(function(s){s(i)})}return new(n||(n=Promise))(function(i,s){function a(d){try{u(r.next(d))}catch(f){s(f)}}function c(d){try{u(r.throw(d))}catch(f){s(f)}}function u(d){d.done?i(d.value):o(d.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}function fxe(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,o,i,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(u){return function(d){return c([u,d])}}function c(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(n=0)),n;)try{if(r=1,o&&(i=u[0]&2?o.return:u[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,u[1])).done)return i;switch(o=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,o=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=e.call(t,n)}catch(d){u=[6,d],o=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function pxe(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mxe(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,i=[],s;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)i.push(o.value)}catch(a){s={error:a}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return i}function gxe(t,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,i;r<o;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Xr;(function(t){t.GET="GET",t.PATCH="PATCH",t.POST="POST",t.PUT="PUT",t.DELETE="DELETE"})(Xr||(Xr={}));const NZ="v1.0",PZ="https://graph.microsoft.com/",OZ=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"]);class Mc extends Error{static setGraphClientError(e){let n;return e instanceof Error?n=e:(n=new Mc,n.customError=e),n}constructor(e){super(e),Object.setPrototypeOf(this,Mc.prototype)}}const MZ=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"],LZ=t=>{const e=i=>i.replace(/\/+$/,""),n=i=>i.replace(/^\/+/,""),r=(i,s)=>[e(i),n(s)].join("/");return Array.prototype.slice.call(t).reduce(r)},wC=t=>{const e=t&&t.constructor&&t.constructor.name;if(e==="Buffer"||e==="Blob"||e==="File"||e==="FormData"||typeof t=="string")return t;if(e==="ArrayBuffer")t=Buffer.from(t);else if(e==="Int8Array"||e==="Int16Array"||e==="Int32Array"||e==="Uint8Array"||e==="Uint16Array"||e==="Uint32Array"||e==="Uint8ClampedArray"||e==="Float32Array"||e==="Float64Array"||e==="DataView")t=Buffer.from(t.buffer);else try{t=JSON.stringify(t)}catch{throw new Error("Unable to stringify the content")}return t},FD=t=>HD(t),BD=(t,e)=>(e.forEach(n=>DZ(n)),HD(t,e)),HD=(t,e=OZ)=>{if(t=t.toLowerCase(),t.indexOf("https://")!==-1){t=t.replace("https://","");const n=t.indexOf(":"),r=t.indexOf("/");let o="";if(r!==-1)return n!==-1&&n<r?(o=t.substring(0,n),e.has(o)):(o=t.substring(0,r),e.has(o))}return!1},DZ=t=>{if(t.indexOf("/")!==-1)throw new Mc("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")};class Lc{constructor(e=[]){this.middlewareOptions=new Map;for(const n of e){const r=n.constructor;this.middlewareOptions.set(r,n)}}getMiddlewareOptions(e){return this.middlewareOptions.get(e)}setMiddlewareOptions(e,n){this.middlewareOptions.set(e,n)}}const jZ=()=>{let t="";for(let e=0;e<32;e++)(e===8||e===12||e===16||e===20)&&(t+="-"),t+=Math.floor(Math.random()*16).toString(16);return t},zD=(t,e,n)=>{let r=null;if(typeof Request<"u"&&t instanceof Request)r=t.headers.get(n);else if(typeof e<"u"&&e.headers!==void 0)if(typeof Headers<"u"&&e.headers instanceof Headers)r=e.headers.get(n);else if(e.headers instanceof Array){const o=e.headers;for(let i=0,s=o.length;i<s;i++)if(o[i][0]===n){r=o[i][1];break}}else e.headers[n]!==void 0&&(r=e.headers[n]);return r},VD=(t,e,n,r)=>{if(typeof Request<"u"&&t instanceof Request)t.headers.set(n,r);else if(typeof e<"u")if(e.headers===void 0)e.headers=new Headers({[n]:r});else if(typeof Headers<"u"&&e.headers instanceof Headers)e.headers.set(n,r);else if(e.headers instanceof Array){let o=0;const i=e.headers.length;for(;o<i;o++){const s=e.headers[o];if(s[0]===n){s[1]=r;break}}o===i&&e.headers.push([n,r])}else Object.assign(e.headers,{[n]:r})},$D=(t,e,n,r)=>{typeof Request<"u"&&t instanceof Request?t.headers.append(n,r):typeof e<"u"&&(e.headers===void 0?e.headers=new Headers({[n]:r}):typeof Headers<"u"&&e.headers instanceof Headers?e.headers.append(n,r):e.headers instanceof Array?e.headers.push([n,r]):e.headers===void 0?e.headers={[n]:r}:e.headers[n]===void 0?e.headers[n]=r:e.headers[n]+=`, ${r}`)},UZ=(t,e)=>Qt(void 0,void 0,void 0,function*(){const n=e.headers.get("Content-Type")?yield e.blob():yield Promise.resolve(void 0),{method:r,headers:o,referrer:i,referrerPolicy:s,mode:a,credentials:c,cache:u,redirect:d,integrity:f,keepalive:p,signal:g}=e;return new Request(t,{method:r,headers:o,body:n,referrer:i,referrerPolicy:s,mode:a,credentials:c,cache:u,redirect:d,integrity:f,keepalive:p,signal:g})});class FZ{constructor(e,n){this.authenticationProvider=e,this.authenticationProviderOptions=n}}var nd;(function(t){t[t.NONE=0]="NONE",t[t.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",t[t.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",t[t.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"})(nd||(nd={}));class la{constructor(){this.featureUsage=nd.NONE}static updateFeatureUsageFlag(e,n){let r;e.middlewareControl instanceof Lc?r=e.middlewareControl.getMiddlewareOptions(la):e.middlewareControl=new Lc,typeof r>"u"&&(r=new la,e.middlewareControl.setMiddlewareOptions(la,r)),r.setFeatureUsage(n)}setFeatureUsage(e){this.featureUsage=this.featureUsage|e}getFeatureUsage(){return this.featureUsage.toString(16)}}class Of{constructor(e){this.authenticationProvider=e}execute(e){return Qt(this,void 0,void 0,function*(){const n=typeof e.request=="string"?e.request:e.request.url;if(FD(n)||e.customHosts&&BD(n,e.customHosts)){let r;e.middlewareControl instanceof Lc&&(r=e.middlewareControl.getMiddlewareOptions(FZ));let o,i;r&&(o=r.authenticationProvider,i=r.authenticationProviderOptions),o||(o=this.authenticationProvider);const a=`Bearer ${yield o.getAccessToken(i)}`;$D(e.request,e.options,Of.AUTHORIZATION_HEADER,a),la.updateFeatureUsageFlag(e,nd.AUTHENTICATION_HANDLER_ENABLED)}else e.options.headers&&delete e.options.headers[Of.AUTHORIZATION_HEADER];return yield this.nextMiddleware.execute(e)})}setNext(e){this.nextMiddleware=e}}Of.AUTHORIZATION_HEADER="Authorization";class BZ{execute(e){return Qt(this,void 0,void 0,function*(){e.response=yield fetch(e.request,e.options)})}}class gn{constructor(e=gn.DEFAULT_DELAY,n=gn.DEFAULT_MAX_RETRIES,r=gn.defaultShouldRetry){if(e>gn.MAX_DELAY&&n>gn.MAX_MAX_RETRIES){const o=new Error(`Delay and MaxRetries should not be more than ${gn.MAX_DELAY} and ${gn.MAX_MAX_RETRIES}`);throw o.name="MaxLimitExceeded",o}else if(e>gn.MAX_DELAY){const o=new Error(`Delay should not be more than ${gn.MAX_DELAY}`);throw o.name="MaxLimitExceeded",o}else if(n>gn.MAX_MAX_RETRIES){const o=new Error(`MaxRetries should not be more than ${gn.MAX_MAX_RETRIES}`);throw o.name="MaxLimitExceeded",o}else if(e<0&&n<0){const o=new Error("Delay and MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}else if(e<0){const o=new Error("Delay should not be negative");throw o.name="MinExpectationNotMet",o}else if(n<0){const o=new Error("MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}this.delay=Math.min(e,gn.MAX_DELAY),this.maxRetries=Math.min(n,gn.MAX_MAX_RETRIES),this.shouldRetry=r}getMaxDelay(){return gn.MAX_DELAY}}gn.DEFAULT_DELAY=3;gn.DEFAULT_MAX_RETRIES=3;gn.MAX_DELAY=180;gn.MAX_MAX_RETRIES=10;gn.defaultShouldRetry=()=>!0;class ua{constructor(e=new gn){this.options=e}isRetry(e){return ua.RETRY_STATUS_CODES.indexOf(e.status)!==-1}isBuffered(e,n){const r=typeof e=="string"?n.method:e.method;return!((r===Xr.PUT||r===Xr.PATCH||r===Xr.POST)&&zD(e,n,"Content-Type")==="application/octet-stream")}getDelay(e,n,r){const o=()=>Number(Math.random().toFixed(3)),i=e.headers!==void 0?e.headers.get(ua.RETRY_AFTER_HEADER):null;let s;return i!==null?Number.isNaN(Number(i))?s=Math.round((new Date(i).getTime()-Date.now())/1e3):s=Number(i):s=n>=2?this.getExponentialBackOffTime(n)+r+o():r+o(),Math.min(s,this.options.getMaxDelay()+o())}getExponentialBackOffTime(e){return Math.round(1/2*(Math.pow(2,e)-1))}sleep(e){return Qt(this,void 0,void 0,function*(){const n=e*1e3;return new Promise(r=>setTimeout(r,n))})}getOptions(e){let n;return e.middlewareControl instanceof Lc&&(n=e.middlewareControl.getMiddlewareOptions(this.options.constructor)),typeof n>"u"&&(n=Object.assign(new gn,this.options)),n}executeWithRetry(e,n,r){return Qt(this,void 0,void 0,function*(){if(yield this.nextMiddleware.execute(e),n<r.maxRetries&&this.isRetry(e.response)&&this.isBuffered(e.request,e.options)&&r.shouldRetry(r.delay,n,e.request,e.options,e.response)){++n,VD(e.request,e.options,ua.RETRY_ATTEMPT_HEADER,n.toString());const o=this.getDelay(e.response,n,r.delay);return yield this.sleep(o),yield this.executeWithRetry(e,n,r)}else return})}execute(e){return Qt(this,void 0,void 0,function*(){const r=this.getOptions(e);return la.updateFeatureUsageFlag(e,nd.RETRY_HANDLER_ENABLED),yield this.executeWithRetry(e,0,r)})}setNext(e){this.nextMiddleware=e}}ua.RETRY_STATUS_CODES=[429,503,504];ua.RETRY_ATTEMPT_HEADER="Retry-Attempt";ua.RETRY_AFTER_HEADER="Retry-After";class Io{constructor(e=Io.DEFAULT_MAX_REDIRECTS,n=Io.defaultShouldRedirect){if(e>Io.MAX_MAX_REDIRECTS){const r=new Error(`MaxRedirects should not be more than ${Io.MAX_MAX_REDIRECTS}`);throw r.name="MaxLimitExceeded",r}if(e<0){const r=new Error("MaxRedirects should not be negative");throw r.name="MinExpectationNotMet",r}this.maxRedirects=e,this.shouldRedirect=n}}Io.DEFAULT_MAX_REDIRECTS=5;Io.MAX_MAX_REDIRECTS=20;Io.defaultShouldRedirect=()=>!0;let Od=class Ya{constructor(e=new Io){this.options=e}isRedirect(e){return Ya.REDIRECT_STATUS_CODES.indexOf(e.status)!==-1}hasLocationHeader(e){return e.headers.has(Ya.LOCATION_HEADER)}getLocationHeader(e){return e.headers.get(Ya.LOCATION_HEADER)}isRelativeURL(e){return e.indexOf("://")===-1}shouldDropAuthorizationHeader(e,n){const r=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,o=r.exec(e);let i,s;o!==null&&(i=o[0]);const a=r.exec(n);return a!==null&&(s=a[0]),typeof i<"u"&&typeof s<"u"&&i!==s}updateRequestUrl(e,n){return Qt(this,void 0,void 0,function*(){n.request=typeof n.request=="string"?e:yield UZ(e,n.request)})}getOptions(e){let n;return e.middlewareControl instanceof Lc&&(n=e.middlewareControl.getMiddlewareOptions(Io)),typeof n>"u"&&(n=Object.assign(new Io,this.options)),n}executeWithRedirect(e,n,r){return Qt(this,void 0,void 0,function*(){yield this.nextMiddleware.execute(e);const o=e.response;if(n<r.maxRedirects&&this.isRedirect(o)&&this.hasLocationHeader(o)&&r.shouldRedirect(o)){if(++n,o.status===Ya.STATUS_CODE_SEE_OTHER)e.options.method=Xr.GET,delete e.options.body;else{const i=this.getLocationHeader(o);!this.isRelativeURL(i)&&this.shouldDropAuthorizationHeader(o.url,i)&&delete e.options.headers[Ya.AUTHORIZATION_HEADER],yield this.updateRequestUrl(i,e)}yield this.executeWithRedirect(e,n,r)}else return})}execute(e){return Qt(this,void 0,void 0,function*(){const r=this.getOptions(e);return e.options.redirect=Ya.MANUAL_REDIRECT,la.updateFeatureUsageFlag(e,nd.REDIRECT_HANDLER_ENABLED),yield this.executeWithRedirect(e,0,r)})}setNext(e){this.nextMiddleware=e}};Od.REDIRECT_STATUS_CODES=[301,302,303,307,308];Od.STATUS_CODE_SEE_OTHER=303;Od.LOCATION_HEADER="Location";Od.AUTHORIZATION_HEADER="Authorization";Od.MANUAL_REDIRECT="manual";const HZ="3.0.7";class Zr{execute(e){return Qt(this,void 0,void 0,function*(){const n=typeof e.request=="string"?e.request:e.request.url;if(FD(n)||e.customHosts&&BD(n,e.customHosts)){let r=zD(e.request,e.options,Zr.CLIENT_REQUEST_ID_HEADER);r||(r=jZ(),VD(e.request,e.options,Zr.CLIENT_REQUEST_ID_HEADER,r));let o=`${Zr.PRODUCT_NAME}/${HZ}`,i;if(e.middlewareControl instanceof Lc&&(i=e.middlewareControl.getMiddlewareOptions(la)),i){const s=i.getFeatureUsage();o+=` (${Zr.FEATURE_USAGE_STRING}=${s})`}$D(e.request,e.options,Zr.SDK_VERSION_HEADER,o)}else delete e.options.headers[Zr.CLIENT_REQUEST_ID_HEADER],delete e.options.headers[Zr.SDK_VERSION_HEADER];return yield this.nextMiddleware.execute(e)})}setNext(e){this.nextMiddleware=e}}Zr.CLIENT_REQUEST_ID_HEADER="client-request-id";Zr.SDK_VERSION_HEADER="SdkVersion";Zr.PRODUCT_NAME="graph-js";Zr.FEATURE_USAGE_STRING="featureUsage";function zZ(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Z1;(function(t){t[t.MANUAL=0]="MANUAL",t[t.RANDOM=1]="RANDOM"})(Z1||(Z1={}));var Ei;(function(t){t.ARRAYBUFFER="arraybuffer",t.BLOB="blob",t.DOCUMENT="document",t.JSON="json",t.RAW="raw",t.STREAM="stream",t.TEXT="text"})(Ei||(Ei={}));var cE;(function(t){t.TEXT_HTML="text/html",t.TEXT_XML="text/xml",t.APPLICATION_XML="application/xml",t.APPLICATION_XHTML="application/xhtml+xml"})(cE||(cE={}));var Mg;(function(t){t.TEXT_PLAIN="text/plain",t.APPLICATION_JSON="application/json"})(Mg||(Mg={}));var Lg;(function(t){t.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",t.IMAGE="^image\\/.+"})(Lg||(Lg={}));class Zh{static parseDocumentResponse(e,n){return typeof DOMParser<"u"?new Promise((r,o)=>{e.text().then(i=>{try{const a=new DOMParser().parseFromString(i,n);r(a)}catch(s){o(s)}})}):Promise.resolve(e.body)}static convertResponse(e,n){return Qt(this,void 0,void 0,function*(){if(e.status===204)return Promise.resolve();let r;const o=e.headers.get("Content-type");switch(n){case Ei.ARRAYBUFFER:r=yield e.arrayBuffer();break;case Ei.BLOB:r=yield e.blob();break;case Ei.DOCUMENT:r=yield Zh.parseDocumentResponse(e,cE.TEXT_XML);break;case Ei.JSON:r=yield e.json();break;case Ei.STREAM:r=yield Promise.resolve(e.body);break;case Ei.TEXT:r=yield e.text();break;default:if(o!==null){const i=o.split(";")[0];new RegExp(Lg.DOCUMENT).test(i)?r=yield Zh.parseDocumentResponse(e,i):new RegExp(Lg.IMAGE).test(i)?r=e.blob():i===Mg.TEXT_PLAIN?r=yield e.text():i===Mg.APPLICATION_JSON?r=yield e.json():r=Promise.resolve(e.body)}else r=Promise.resolve(e.body);break}return r})}static getResponse(e,n,r){return Qt(this,void 0,void 0,function*(){if(n===Ei.RAW)return Promise.resolve(e);{const o=yield Zh.convertResponse(e,n);if(e.ok)if(typeof r=="function")r(null,o);else return o;else throw o}})}}class VZ{constructor(e){this.provider=e}getAccessToken(){return Qt(this,void 0,void 0,function*(){return new Promise((e,n)=>{this.provider((r,o)=>Qt(this,void 0,void 0,function*(){if(o)e(o);else{if(!r){const s="Access token is undefined or empty.						Please provide a valid token.						For more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md";r=new Mc(s)}const i=yield Mc.setGraphClientError(r);n(i)}}))})})}}class ef extends Error{constructor(e=-1,n,r){super(n||r&&r.message),Object.setPrototypeOf(this,ef.prototype),this.statusCode=e,this.code=null,this.requestId=null,this.date=new Date,this.body=null,this.stack=r?r.stack:this.stack}}class Dg{static constructError(e,n,r){const o=new ef(n,"",e);return e.name!==void 0&&(o.code=e.name),o.body=e.toString(),o.date=new Date,o.headers=r==null?void 0:r.headers,o}static constructErrorFromResponse(e,n,r){const o=e.error,i=new ef(n,o.message);return i.code=o.code,o.innerError!==void 0&&(i.requestId=o.innerError["request-id"],i.date=new Date(o.innerError.date)),i.body=JSON.stringify(o),i.headers=r==null?void 0:r.headers,i}static getError(e=null,n=-1,r,o){return Qt(this,void 0,void 0,function*(){let i;if(e&&e.error?i=Dg.constructErrorFromResponse(e,n,o):e instanceof Error?i=Dg.constructError(e,n,o):(i=new ef(n),i.body=e),typeof r=="function")r(i,null);else return i})}}class $Z{constructor(e,n,r){this.parsePath=o=>{if(o.indexOf("https://")!==-1){o=o.replace("https://","");const s=o.indexOf("/");s!==-1&&(this.urlComponents.host="https://"+o.substring(0,s),o=o.substring(s+1,o.length));const a=o.indexOf("/");a!==-1&&(this.urlComponents.version=o.substring(0,a),o=o.substring(a+1,o.length))}o.charAt(0)==="/"&&(o=o.substr(1));const i=o.indexOf("?");if(i===-1)this.urlComponents.path=o;else{this.urlComponents.path=o.substr(0,i);const s=o.substring(i+1,o.length).split("&");for(const a of s)this.parseQueryParameter(a)}},this.httpClient=e,this.config=n,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(r)}addCsvQueryParameter(e,n,r){this.urlComponents.oDataQueryParams[e]=this.urlComponents.oDataQueryParams[e]?this.urlComponents.oDataQueryParams[e]+",":"";let o=[];r.length>1&&typeof n=="string"?o=Array.prototype.slice.call(r):typeof n=="string"?o.push(n):o=o.concat(n),this.urlComponents.oDataQueryParams[e]+=o.join(",")}buildFullUrl(){const e=LZ([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(e),e}createQueryString(){const e=this.urlComponents,n=[];if(Object.keys(e.oDataQueryParams).length!==0)for(const r in e.oDataQueryParams)Object.prototype.hasOwnProperty.call(e.oDataQueryParams,r)&&n.push(r+"="+e.oDataQueryParams[r]);if(Object.keys(e.otherURLQueryParams).length!==0)for(const r in e.otherURLQueryParams)Object.prototype.hasOwnProperty.call(e.otherURLQueryParams,r)&&n.push(r+"="+e.otherURLQueryParams[r]);if(e.otherURLQueryOptions.length!==0)for(const r of e.otherURLQueryOptions)n.push(r);return n.length>0?"?"+n.join("&"):""}parseQueryParameter(e){if(typeof e=="string")if(e.charAt(0)==="?"&&(e=e.substring(1)),e.indexOf("&")!==-1){const n=e.split("&");for(const r of n)this.parseQueryParamenterString(r)}else this.parseQueryParamenterString(e);else if(e.constructor===Object)for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&this.setURLComponentsQueryParamater(n,e[n]);return this}parseQueryParamenterString(e){if(this.isValidQueryKeyValuePair(e)){const n=e.indexOf("="),r=e.substring(0,n),o=e.substring(n+1);this.setURLComponentsQueryParamater(r,o)}else this.urlComponents.otherURLQueryOptions.push(e)}setURLComponentsQueryParamater(e,n){if(MZ.indexOf(e)!==-1){const r=this.urlComponents.oDataQueryParams[e],o=r&&(e==="$expand"||e==="$select"||e==="$orderby");this.urlComponents.oDataQueryParams[e]=o?r+","+n:n}else this.urlComponents.otherURLQueryParams[e]=n}isValidQueryKeyValuePair(e){const n=e.indexOf("=");return!(n===-1||e.indexOf("(")!==-1&&e.indexOf("(")<n)}updateRequestOptions(e){const n=Object.assign({},e.headers);if(this.config.fetchOptions!==void 0){const r=Object.assign({},this.config.fetchOptions);Object.assign(e,r),typeof this.config.fetchOptions.headers!==void 0&&(e.headers=Object.assign({},this.config.fetchOptions.headers))}Object.assign(e,this._options),e.headers!==void 0&&Object.assign(n,e.headers),Object.assign(n,this._headers),e.headers=n}send(e,n,r){var o;return Qt(this,void 0,void 0,function*(){let i;const s=new Lc(this._middlewareOptions);this.updateRequestOptions(n);const a=(o=this.config)===null||o===void 0?void 0:o.customHosts;try{return i=(yield this.httpClient.sendRequest({request:e,options:n,middlewareControl:s,customHosts:a})).response,yield Zh.getResponse(i,this._responseType,r)}catch(c){if(c instanceof Mc)throw c;let u;throw i&&(u=i.status),yield Dg.getError(c,u,r,i)}})}setHeaderContentType(){if(!this._headers){this.header("Content-Type","application/json");return}const e=Object.keys(this._headers);for(const n of e)if(n.toLowerCase()==="content-type")return;this.header("Content-Type","application/json")}header(e,n){return this._headers[e]=n,this}headers(e){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this._headers[n]=e[n]);return this}option(e,n){return this._options[e]=n,this}options(e){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this._options[n]=e[n]);return this}middlewareOptions(e){return this._middlewareOptions=e,this}version(e){return this.urlComponents.version=e,this}responseType(e){return this._responseType=e,this}select(e){return this.addCsvQueryParameter("$select",e,arguments),this}expand(e){return this.addCsvQueryParameter("$expand",e,arguments),this}orderby(e){return this.addCsvQueryParameter("$orderby",e,arguments),this}filter(e){return this.urlComponents.oDataQueryParams.$filter=e,this}search(e){return this.urlComponents.oDataQueryParams.$search=e,this}top(e){return this.urlComponents.oDataQueryParams.$top=e,this}skip(e){return this.urlComponents.oDataQueryParams.$skip=e,this}skipToken(e){return this.urlComponents.oDataQueryParams.$skipToken=e,this}count(e=!0){return this.urlComponents.oDataQueryParams.$count=e.toString(),this}query(e){return this.parseQueryParameter(e)}get(e){return Qt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:Xr.GET};return yield this.send(n,r,e)})}post(e,n){return Qt(this,void 0,void 0,function*(){const r=this.buildFullUrl(),o={method:Xr.POST,body:wC(e)};return(e&&e.constructor&&e.constructor.name)==="FormData"?o.headers={}:(this.setHeaderContentType(),o.headers=this._headers),yield this.send(r,o,n)})}create(e,n){return Qt(this,void 0,void 0,function*(){return yield this.post(e,n)})}put(e,n){return Qt(this,void 0,void 0,function*(){const r=this.buildFullUrl();this.setHeaderContentType();const o={method:Xr.PUT,body:wC(e)};return yield this.send(r,o,n)})}patch(e,n){return Qt(this,void 0,void 0,function*(){const r=this.buildFullUrl();this.setHeaderContentType();const o={method:Xr.PATCH,body:wC(e)};return yield this.send(r,o,n)})}update(e,n){return Qt(this,void 0,void 0,function*(){return yield this.patch(e,n)})}delete(e){return Qt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:Xr.DELETE};return yield this.send(n,r,e)})}del(e){return Qt(this,void 0,void 0,function*(){return yield this.delete(e)})}getStream(e){return Qt(this,void 0,void 0,function*(){const n=this.buildFullUrl(),r={method:Xr.GET};return this.responseType(Ei.STREAM),yield this.send(n,r,e)})}putStream(e,n){return Qt(this,void 0,void 0,function*(){const r=this.buildFullUrl(),o={method:Xr.PUT,headers:{"Content-Type":"application/octet-stream"},body:e};return yield this.send(r,o,n)})}}class GD{constructor(...e){if(!e||!e.length){const n=new Error;throw n.name="InvalidMiddlewareChain",n.message="Please provide a default middleware chain or custom middleware chain",n}this.setMiddleware(...e)}setMiddleware(...e){e.length>1?this.parseMiddleWareArray(e):this.middleware=e[0]}parseMiddleWareArray(e){e.forEach((n,r)=>{r<e.length-1&&n.setNext(e[r+1])}),this.middleware=e[0]}sendRequest(e){return Qt(this,void 0,void 0,function*(){if(typeof e.request=="string"&&e.options===void 0){const n=new Error;throw n.name="InvalidRequestOptions",n.message="Unable to execute the middleware, Please provide valid options for a request",n}return yield this.middleware.execute(e),e})}}const GZ=()=>typeof process=="object"&&typeof zZ=="function";class AT{static createWithAuthenticationProvider(e){const n=new Of(e),r=new ua(new gn),o=new Zr,i=new BZ;if(n.setNext(r),GZ()){const s=new Od(new Io);r.setNext(s),s.setNext(o)}else r.setNext(o);return o.setNext(i),AT.createWithMiddleware(n)}static createWithMiddleware(...e){return new GD(...e)}}const KZ=()=>{if(typeof Promise>"u"&&typeof fetch>"u"){const t=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw t.name="PolyFillNotAvailable",t}else if(typeof Promise>"u"){const t=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}else if(typeof fetch>"u"){const t=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw t.name="PolyFillNotAvailable",t}return!0};class jg{static init(e){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=r==="authProvider"?new VZ(e[r]):e[r]);return jg.initWithMiddleware(n)}static initWithMiddleware(e){return new jg(e)}constructor(e){this.config={baseUrl:PZ,debugLogging:!1,defaultVersion:NZ},KZ();for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.config[r]=e[r]);let n;if(e.authProvider!==void 0&&e.middleware!==void 0){const r=new Error;throw r.name="AmbiguityInInitialization",r.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",r}else if(e.authProvider!==void 0)n=AT.createWithAuthenticationProvider(e.authProvider);else if(e.middleware!==void 0)n=new GD(...[].concat(e.middleware));else{const r=new Error;throw r.name="InvalidMiddlewareChain",r.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",r}this.httpClient=n}api(e){return new $Z(this.httpClient,this.config,e)}}const WZ=["CAREERCOACH_STUDENTS","EXCHANGESTANDARD_STUDENT","M365EDU_A3_STUDENT","M365EDU_A3_STUUSEBNFT","M365EDU_A3_STUUSEBNFT_RPA1","M365EDU_A5_STUDENT","M365EDU_A5_STUUSEBNFT","M365EDU_A5_NOPSTNCONF_STUUSEBNFT","OFFICESUBSCRIPTION_STUDENT","ATP_ENTERPRISE_STUDENT","ATP_ENTERPRISE_STUDENTS_USE_BENEFIT","POWER_BI_STANDARD_STUDENT","MCOEV_STUDENT","MEE_STUDENT","STANDARDWOFFPACK_STUDENT","STANDARDWOFFPACK_IW_STUDENT","ENTERPRISEPACKPLUS_STUDENT","ENTERPRISEPREMIUM_STUDENT","WIN10_ENT_A3_STU","MCO_TEAMS_EDU_HS_STUDENT","PROJECT_PROFESSIONAL_STUDENT","PROJECT_P1_STUDENT"];function qZ(t){return jg.init({authProvider:e=>{e(null,t)}})}async function IC(t,e){const n=performance.now(),r=await e;return V.trackEvent({name:"system",data:{eventName:"externalApiResponse",eventInfo_id:t,eventInfo_duration:performance.now()-n,eventInfo_service:"microsoft-graph"}}),r}async function YZ(t){return t.api(mI.graphMeApiSuffix).get()}async function QZ(t){try{const e=await t.api(mI.graphMeImageApiSuffix).get();return URL.createObjectURL(e)}catch{return}}async function JZ(t){const e=Ye(dl);if(et("aad-student")&&e)try{const n=await t.api(mI.graphMeLicenseDetails).get();return n&&n.value.some(o=>o.skuPartNumber&&WZ.includes(o.skuPartNumber))}catch(n){return console.error("Error checking student status:",n),!1}else return!1}async function ex(t){const e=qZ(t),[n,r,o]=await Promise.all([IC("user",YZ(e)),IC("user_photo",QZ(e)),IC("is_student",JZ(e))]);return{...n,imgSrc:r,isStudent:o}}/*! @azure/msal-common v14.15.0 2024-09-20 */const ae={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Xp={CLIENT_ERROR_RANGE_START:400,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},ga=[ae.OPENID_SCOPE,ae.PROFILE_SCOPE,ae.OFFLINE_ACCESS_SCOPE],tx=[...ga,ae.EMAIL_SCOPE],Li={CONTENT_TYPE:"Content-Type",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},Qn={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},da={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Zp={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},er={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},nx={PLAIN:"plain",S256:"S256"},gp={QUERY:"query",FRAGMENT:"fragment"},XZ={...gp},KD={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},em={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},fr={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},ut={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},kT="appmetadata",ZZ="client_info",tf="1",Ug={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},Qr={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},nr={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},Ht={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},nf={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},rx={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},ox={username:"username",password:"password"},tm={httpSuccess:200,httpBadRequest:400},Ll={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},TC={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Ys={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},eee={Pop:"pop"},tee=300;/*! @azure/msal-common v14.15.0 2024-09-20 */const xy="unexpected_error",nee="post_request_failed";/*! @azure/msal-common v14.15.0 2024-09-20 */const ix={[xy]:"Unexpected error in authentication.",[nee]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class St extends Error{constructor(e,n,r){const o=n?`${e}: ${n}`:e;super(o),Object.setPrototypeOf(this,St.prototype),this.errorCode=e||ae.EMPTY_STRING,this.errorMessage=n||ae.EMPTY_STRING,this.subError=r||ae.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function WD(t,e){return new St(t,e?`${ix[t]} ${e}`:ix[t])}/*! @azure/msal-common v14.15.0 2024-09-20 */const xT="client_info_decoding_error",qD="client_info_empty_error",RT="token_parsing_error",YD="null_or_empty_token",as="endpoints_resolution_error",QD="network_error",JD="openid_config_error",XD="hash_not_deserialized",rd="invalid_state",ZD="state_mismatch",Fg="state_not_found",e5="nonce_mismatch",NT="auth_time_not_found",t5="max_age_transpired",ree="multiple_matching_tokens",oee="multiple_matching_accounts",n5="multiple_matching_appMetadata",r5="request_cannot_be_made",o5="cannot_remove_empty_scope",i5="cannot_append_scopeset",lE="empty_input_scopeset",iee="device_code_polling_cancelled",see="device_code_expired",aee="device_code_unknown_error",PT="no_account_in_silent_request",s5="invalid_cache_record",OT="invalid_cache_environment",uE="no_account_found",dE="no_crypto_object",hE="unexpected_credential_type",cee="invalid_assertion",lee="invalid_client_credential",Di="token_refresh_required",uee="user_timeout_reached",a5="token_claims_cnf_required_for_signedjwt",c5="authorization_code_missing_from_server_response",l5="binding_key_not_removed",u5="end_session_endpoint_not_supported",MT="key_id_missing",dee="no_network_connectivity",hee="user_canceled",fee="missing_tenant_id_error",gt="method_not_implemented",pee="nested_app_auth_bridge_disabled";/*! @azure/msal-common v14.15.0 2024-09-20 */const sx={[xT]:"The client info could not be parsed/decoded correctly",[qD]:"The client info was empty",[RT]:"Token cannot be parsed",[YD]:"The token is null or empty",[as]:"Endpoints cannot be resolved",[QD]:"Network request failed",[JD]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[XD]:"The hash parameters could not be deserialized",[rd]:"State was not the expected format",[ZD]:"State mismatch error",[Fg]:"State not found",[e5]:"Nonce mismatch error",[NT]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[t5]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[ree]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[oee]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[n5]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[r5]:"Token request cannot be made without authorization code or refresh token.",[o5]:"Cannot remove null or empty scope from ScopeSet",[i5]:"Cannot append ScopeSet",[lE]:"Empty input ScopeSet cannot be processed",[iee]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[see]:"Device code is expired.",[aee]:"Device code stopped polling for unknown reasons.",[PT]:"Please pass an account object, silent flow is not supported without account information",[s5]:"Cache record object was null or undefined.",[OT]:"Invalid environment when attempting to create cache entry",[uE]:"No account found in cache for given key.",[dE]:"No crypto object detected.",[hE]:"Unexpected credential type.",[cee]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[lee]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Di]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[uee]:"User defined timeout for device code polling reached",[a5]:"Cannot generate a POP jwt if the token_claims are not populated",[c5]:"Server response does not contain an authorization code to proceed",[l5]:"Could not remove the credential's binding key from storage.",[u5]:"The provided authority does not support logout",[MT]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[dee]:"No network connectivity. Check your internet connection.",[hee]:"User cancelled the flow.",[fee]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[gt]:"This method has not been implemented",[pee]:"The nested app auth bridge is disabled"};class Md extends St{constructor(e,n){super(e,n?`${sx[e]}: ${n}`:sx[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Md.prototype)}}function Te(t,e){return new Md(t,e)}/*! @azure/msal-common v14.15.0 2024-09-20 */const Bg={createNewGuid:()=>{throw Te(gt)},base64Decode:()=>{throw Te(gt)},base64Encode:()=>{throw Te(gt)},base64UrlEncode:()=>{throw Te(gt)},encodeKid:()=>{throw Te(gt)},async getPublicKeyThumbprint(){throw Te(gt)},async removeTokenBindingKey(){throw Te(gt)},async clearKeystore(){throw Te(gt)},async signJwt(){throw Te(gt)},async hashString(){throw Te(gt)}};/*! @azure/msal-common v14.15.0 2024-09-20 */var fn;(function(t){t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace"})(fn||(fn={}));class si{constructor(e,n,r){this.level=fn.Info;const o=()=>{},i=e||si.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||o,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:fn.Info,this.correlationId=i.correlationId||ae.EMPTY_STRING,this.packageName=n||ae.EMPTY_STRING,this.packageVersion=r||ae.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:fn.Info}}clone(e,n,r){return new si({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,n)}logMessage(e,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const i=`${`[${new Date().toUTCString()}] : [${n.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${fn[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,i,n.containsPii||!1)}executeCallback(e,n,r){this.localCallback&&this.localCallback(e,n,r)}error(e,n){this.logMessage(e,{logLevel:fn.Error,containsPii:!1,correlationId:n||ae.EMPTY_STRING})}errorPii(e,n){this.logMessage(e,{logLevel:fn.Error,containsPii:!0,correlationId:n||ae.EMPTY_STRING})}warning(e,n){this.logMessage(e,{logLevel:fn.Warning,containsPii:!1,correlationId:n||ae.EMPTY_STRING})}warningPii(e,n){this.logMessage(e,{logLevel:fn.Warning,containsPii:!0,correlationId:n||ae.EMPTY_STRING})}info(e,n){this.logMessage(e,{logLevel:fn.Info,containsPii:!1,correlationId:n||ae.EMPTY_STRING})}infoPii(e,n){this.logMessage(e,{logLevel:fn.Info,containsPii:!0,correlationId:n||ae.EMPTY_STRING})}verbose(e,n){this.logMessage(e,{logLevel:fn.Verbose,containsPii:!1,correlationId:n||ae.EMPTY_STRING})}verbosePii(e,n){this.logMessage(e,{logLevel:fn.Verbose,containsPii:!0,correlationId:n||ae.EMPTY_STRING})}trace(e,n){this.logMessage(e,{logLevel:fn.Trace,containsPii:!1,correlationId:n||ae.EMPTY_STRING})}tracePii(e,n){this.logMessage(e,{logLevel:fn.Trace,containsPii:!0,correlationId:n||ae.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v14.15.0 2024-09-20 */const d5="@azure/msal-common",LT="14.15.0";/*! @azure/msal-common v14.15.0 2024-09-20 */const Mf={None:"none",AzurePublic:"https://login.microsoftonline.com",AzurePpe:"https://login.windows-ppe.net"};/*! @azure/msal-common v14.15.0 2024-09-20 */function fl(t,e){const n=mee(t);try{const r=e(n);return JSON.parse(r)}catch{throw Te(RT)}}function mee(t){if(!t)throw Te(YD);const n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw Te(RT);return n[2]}function h5(t,e){if(e===0||Date.now()-3e5>t+e)throw Te(t5)}/*! @azure/msal-common v14.15.0 2024-09-20 */function Gi(){return Math.round(new Date().getTime()/1e3)}function fE(t,e){const n=Number(t)||0;return Gi()+e>n}function gee(t){return Number(t)>Gi()}/*! @azure/msal-common v14.15.0 2024-09-20 */function du(t){return[vee(t),yee(t),bee(t),Cee(t),See(t)].join(fr.CACHE_KEY_SEPARATOR).toLowerCase()}function Ry(t,e,n,r,o){return{credentialType:ut.ID_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,realm:o}}function Ny(t,e,n,r,o,i,s,a,c,u,d,f,p,g,v){var y,C;const b={homeAccountId:t,credentialType:ut.ACCESS_TOKEN,secret:n,cachedAt:Gi().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:d||Ht.BEARER};if(f&&(b.userAssertionHash=f),u&&(b.refreshOn=u.toString()),g&&(b.requestedClaims=g,b.requestedClaimsHash=v),((y=b.tokenType)==null?void 0:y.toLowerCase())!==Ht.BEARER.toLowerCase())switch(b.credentialType=ut.ACCESS_TOKEN_WITH_AUTH_SCHEME,b.tokenType){case Ht.POP:const S=fl(n,c);if(!((C=S==null?void 0:S.cnf)!=null&&C.kid))throw Te(a5);b.keyId=S.cnf.kid;break;case Ht.SSH:b.keyId=p}return b}function f5(t,e,n,r,o,i,s){const a={credentialType:ut.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function DT(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function ax(t){return t?DT(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===ut.ACCESS_TOKEN||t.credentialType===ut.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function cx(t){return t?DT(t)&&t.hasOwnProperty("realm")&&t.credentialType===ut.ID_TOKEN:!1}function lx(t){return t?DT(t)&&t.credentialType===ut.REFRESH_TOKEN:!1}function vee(t){return[t.homeAccountId,t.environment].join(fr.CACHE_KEY_SEPARATOR).toLowerCase()}function yee(t){const e=t.credentialType===ut.REFRESH_TOKEN&&t.familyId||t.clientId;return[t.credentialType,e,t.realm||""].join(fr.CACHE_KEY_SEPARATOR).toLowerCase()}function bee(t){return(t.target||"").toLowerCase()}function Cee(t){return(t.requestedClaimsHash||"").toLowerCase()}function See(t){return t.tokenType&&t.tokenType.toLowerCase()!==Ht.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}function Eee(t,e){const n=t.indexOf(nr.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&r}function wee(t,e){let n=!1;t&&(n=t.indexOf(nf.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),n&&r}function Iee({environment:t,clientId:e}){return[kT,t,e].join(fr.CACHE_KEY_SEPARATOR).toLowerCase()}function Tee(t,e){return e?t.indexOf(kT)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function _ee(t,e){return e?t.indexOf(Ug.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function ux(){return Gi()+Ug.REFRESH_TIME_SECONDS}function nm(t,e,n){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=n,t.jwks_uri=e.jwks_uri}function _C(t,e,n){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=n}function dx(t){return t.expiresAt<=Gi()}/*! @azure/msal-common v14.15.0 2024-09-20 */const p5="redirect_uri_empty",Aee="claims_request_parsing_error",m5="authority_uri_insecure",Uh="url_parse_error",g5="empty_url_error",v5="empty_input_scopes_error",y5="invalid_prompt_value",jT="invalid_claims",b5="token_request_empty",C5="logout_request_empty",S5="invalid_code_challenge_method",UT="pkce_params_missing",FT="invalid_cloud_discovery_metadata",E5="invalid_authority_metadata",w5="untrusted_authority",Py="missing_ssh_jwk",I5="missing_ssh_kid",kee="missing_nonce_authentication_header",xee="invalid_authentication_header",T5="cannot_set_OIDCOptions",_5="cannot_allow_native_broker",A5="authority_mismatch";/*! @azure/msal-common v14.15.0 2024-09-20 */const Ree={[p5]:"A redirect URI is required for all calls, and none has been set.",[Aee]:"Could not parse the given claims request object.",[m5]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Uh]:"URL could not be parsed into appropriate segments.",[g5]:"URL was empty or null.",[v5]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[y5]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[jT]:"Given claims parameter must be a stringified JSON object.",[b5]:"Token request was empty and not found in cache.",[C5]:"The logout request was null or undefined.",[S5]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[UT]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[FT]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[E5]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[w5]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Py]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[I5]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[kee]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[xee]:"Invalid authentication header provided",[T5]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[_5]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[A5]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class Oy extends St{constructor(e){super(e,Ree[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,Oy.prototype)}}function Jt(t){return new Oy(t)}/*! @azure/msal-common v14.15.0 2024-09-20 */class ei{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return Object.keys(n).length===0}catch{}return!0}static startsWith(e,n){return e.indexOf(n)===0}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){const[s,a]=i.split(/=(.+)/g,2);s&&a&&(n[o(s)]=o(a))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class kn{constructor(e){const n=e?ei.trimArrayEntries([...e]):[],r=n?ei.removeEmptyStringsFromArray(n):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){const r=(e||ae.EMPTY_STRING).split(" ");return new kn(r)}static createSearchScopes(e){const n=new kn(e);return n.containsOnlyOIDCScopes()?n.removeScope(ae.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n}validateInputScopes(e){if(!e||e.length<1)throw Jt(v5)}containsScope(e){const n=this.printScopesLowerCase().split(" "),r=new kn(n);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return tx.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw Te(i5)}}removeScope(e){if(!e)throw Te(o5);this.scopes.delete(e.trim())}removeOIDCScopes(){tx.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw Te(lE);const n=new Set;return e.scopes.forEach(r=>n.add(r.toLowerCase())),this.scopes.forEach(r=>n.add(r.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw Te(lE);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return n.size<o+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):ae.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v14.15.0 2024-09-20 */function Hg(t,e){if(!t)throw Te(qD);try{const n=e(t);return JSON.parse(n)}catch{throw Te(xT)}}function hu(t){if(!t)throw Te(xT);const e=t.split(fr.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?ae.EMPTY_STRING:e[1]}}/*! @azure/msal-common v14.15.0 2024-09-20 */function zg(t,e){return!!t&&!!e&&t===e.split(".")[1]}function BT(t,e,n,r){if(r){const{oid:o,sub:i,tid:s,name:a,tfp:c,acr:u}=r,d=s||c||u||"";return{tenantId:d,localAccountId:o||i||"",name:a,isHomeTenant:zg(d,t)}}else return{tenantId:n,localAccountId:e,isHomeTenant:zg(n,t)}}function HT(t,e,n,r){let o=t;if(e){const{isHomeTenant:i,...s}=e;o={...t,...s}}if(n){const{isHomeTenant:i,...s}=BT(t.homeAccountId,t.localAccountId,t.tenantId,n);return o={...o,...s,idTokenClaims:n,idToken:r},o}return o}/*! @azure/msal-common v14.15.0 2024-09-20 */const Ko={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v14.15.0 2024-09-20 */function k5(t){return t&&(t.tid||t.tfp||t.acr)||null}/*! @azure/msal-common v14.15.0 2024-09-20 */const hs={AAD:"AAD",OIDC:"OIDC"};/*! @azure/msal-common v14.15.0 2024-09-20 */class $n{generateAccountId(){return[this.homeAccountId,this.environment].join(fr.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return $n.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const n=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",n||e.tenantId||""].join(fr.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,n,r){var u,d,f,p,g,v;const o=new $n;n.authorityType===Ko.Adfs?o.authorityType=em.ADFS_ACCOUNT_TYPE:n.protocolMode===hs.AAD?o.authorityType=em.MSSTS_ACCOUNT_TYPE:o.authorityType=em.GENERIC_ACCOUNT_TYPE;let i;e.clientInfo&&r&&(i=Hg(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;const s=e.environment||n&&n.getPreferredCache();if(!s)throw Te(OT);o.environment=s,o.realm=(i==null?void 0:i.utid)||k5(e.idTokenClaims)||"",o.localAccountId=(i==null?void 0:i.uid)||((u=e.idTokenClaims)==null?void 0:u.oid)||((d=e.idTokenClaims)==null?void 0:d.sub)||"";const a=((f=e.idTokenClaims)==null?void 0:f.preferred_username)||((p=e.idTokenClaims)==null?void 0:p.upn),c=(g=e.idTokenClaims)!=null&&g.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||c||"",o.name=((v=e.idTokenClaims)==null?void 0:v.name)||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{const b=BT(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[b]}return o}static createFromAccountInfo(e,n,r){var i;const o=new $n;return o.authorityType=e.authorityType||em.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=n,o.msGraphHost=r,o.tenantProfiles=Array.from(((i=e.tenantProfiles)==null?void 0:i.values())||[]),o}static generateHomeAccountId(e,n,r,o,i){if(!(n===Ko.Adfs||n===Ko.Dsts)){if(e)try{const s=Hg(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return(i==null?void 0:i.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,n,r){if(!e||!n)return!1;let o=!0;if(r){const i=e.idTokenClaims||{},s=n.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===n.homeAccountId&&e.localAccountId===n.localAccountId&&e.username===n.username&&e.tenantId===n.tenantId&&e.environment===n.environment&&e.nativeAccountId===n.nativeAccountId&&o}}/*! @azure/msal-common v14.15.0 2024-09-20 */function x5(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function Vg(t){if(!t||t.indexOf("=")<0)return null;try{const e=x5(t),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.error||n.error_description||n.state)return n}catch{throw Te(XD)}return null}/*! @azure/msal-common v14.15.0 2024-09-20 */class It{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Jt(g5);e.includes("#")||(this._urlString=It.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return ei.endsWith(n,"?")?n=n.slice(0,-1):ei.endsWith(n,"?/")&&(n=n.slice(0,-2)),ei.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Jt(Uh)}if(!e.HostNameAndPort||!e.PathSegments)throw Jt(Uh);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Jt(m5)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return It.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),r=n.PathSegments;return e&&r.length!==0&&(r[0]===da.COMMON||r[0]===da.ORGANIZATIONS)&&(r[0]=e),It.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw Jt(Uh);const r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(n);if(!r)throw Jt(Uh);return r[2]}static getAbsoluteUrl(e,n){if(e[0]===ae.FORWARD_SLASH){const o=new It(n).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new It(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Vg(e)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const R5={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},hx=R5.endpointMetadata,zT=R5.instanceDiscoveryMetadata,N5=new Set;zT.metadata.forEach(t=>{t.aliases.forEach(e=>{N5.add(e)})});function Nee(t,e){var o;let n;const r=t.canonicalAuthority;if(r){const i=new It(r).getUrlComponents().HostNameAndPort;n=fx(i,(o=t.cloudDiscoveryMetadata)==null?void 0:o.metadata,Qr.CONFIG,e)||fx(i,zT.metadata,Qr.HARDCODED_VALUES,e)||t.knownAuthorities}return n||[]}function fx(t,e,n,r){if(r==null||r.trace(`getAliasesFromMetadata called with source: ${n}`),t&&e){const o=$g(e,t);if(o)return r==null||r.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),o.aliases;r==null||r.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function Pee(t){return $g(zT.metadata,t)}function $g(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v14.15.0 2024-09-20 */const P5="cache_quota_exceeded",VT="cache_error_unknown";/*! @azure/msal-common v14.15.0 2024-09-20 */const AC={[P5]:"Exceeded cache storage capacity.",[VT]:"Unexpected error occurred when using cache storage."};class yc extends Error{constructor(e,n){const r=n||(AC[e]?AC[e]:AC[VT]);super(`${e}: ${r}`),Object.setPrototypeOf(this,yc.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}/*! @azure/msal-common v14.15.0 2024-09-20 */class od{constructor(e,n,r,o){this.clientId=e,this.cryptoImpl=n,this.commonLogger=r.clone(d5,LT),this.staticAuthorityOptions=o}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const n=this.getAllAccounts(e);return n.length>1?n.sort(o=>o.idTokenClaims?-1:1)[0]:n.length===1?n[0]:null}getBaseAccountInfo(e){const n=this.getAccountsFilteredBy(e);return n.length>0?n[0].getAccountInfo():null}buildTenantProfiles(e,n){return e.flatMap(r=>this.getTenantProfilesFromAccountEntity(r,n==null?void 0:n.tenantId,n))}getTenantedAccountInfoByFilter(e,n,r,o){let i=null,s;if(o&&!this.tenantProfileMatchesFilter(r,o))return null;const a=this.getIdToken(e,n,r.tenantId);return a&&(s=fl(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(s,o))?null:(i=HT(e,r,s,a==null?void 0:a.secret),i)}getTenantProfilesFromAccountEntity(e,n,r){const o=e.getAccountInfo();let i=o.tenantProfiles||new Map;const s=this.getTokenKeys();if(n){const c=i.get(n);if(c)i=new Map([[n,c]]);else return[]}const a=[];return i.forEach(c=>{const u=this.getTenantedAccountInfoByFilter(o,s,c,r);u&&a.push(u)}),a}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||n.isHomeTenant!==void 0&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}async saveCacheRecord(e,n,r){var o,i,s,a;if(!e)throw Te(s5);try{e.account&&this.setAccount(e.account),e.idToken&&(n==null?void 0:n.idToken)!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&(n==null?void 0:n.accessToken)!==!1&&await this.saveAccessToken(e.accessToken),e.refreshToken&&(n==null?void 0:n.refreshToken)!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(c){throw(o=this.commonLogger)==null||o.error("CacheManager.saveCacheRecord: failed"),c instanceof Error?((i=this.commonLogger)==null||i.errorPii(`CacheManager.saveCacheRecord: ${c.message}`,r),c.name==="QuotaExceededError"||c.name==="NS_ERROR_DOM_QUOTA_REACHED"||c.message.includes("exceeded the quota")?((s=this.commonLogger)==null||s.error("CacheManager.saveCacheRecord: exceeded storage quota",r),new yc(P5)):new yc(c.name,c.message)):((a=this.commonLogger)==null||a.errorPii(`CacheManager.saveCacheRecord: ${c}`,r),new yc(VT))}}async saveAccessToken(e){const n={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),o=kn.fromString(e.target),i=[];r.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,n,!1))return;const a=this.getAccessTokenCredential(s);a&&this.credentialMatchesFilter(a,n)&&kn.fromString(a.target).intersectingScopeSets(o)&&i.push(this.removeAccessToken(s))}),await Promise.all(i),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){const n=this.getAccountKeys(),r=[];return n.forEach(o=>{var c;if(!this.isAccountKey(o,e.homeAccountId))return;const i=this.getAccount(o,this.commonLogger);if(!i||e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId)||e.username&&!this.matchUsername(i.username,e.username)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;const s={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},a=(c=i.tenantProfiles)==null?void 0:c.filter(u=>this.tenantProfileMatchesFilter(u,s));a&&a.length===0||r.push(i)}),r}isAccountKey(e,n,r){return!(e.split(fr.CACHE_KEY_SEPARATOR).length<3||n&&!e.toLowerCase().includes(n.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(fr.CACHE_KEY_SEPARATOR).length<6)return!1;const n=e.toLowerCase();if(n.indexOf(ut.ID_TOKEN.toLowerCase())===-1&&n.indexOf(ut.ACCESS_TOKEN.toLowerCase())===-1&&n.indexOf(ut.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&n.indexOf(ut.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(n.indexOf(ut.REFRESH_TOKEN.toLowerCase())>-1){const r=`${ut.REFRESH_TOKEN}${fr.CACHE_KEY_SEPARATOR}${this.clientId}${fr.CACHE_KEY_SEPARATOR}`,o=`${ut.REFRESH_TOKEN}${fr.CACHE_KEY_SEPARATOR}${tf}${fr.CACHE_KEY_SEPARATOR}`;if(n.indexOf(r.toLowerCase())===-1&&n.indexOf(o.toLowerCase())===-1)return!1}else if(n.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,n){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||typeof n.homeAccountId=="string"&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||(n.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==n.requestedClaimsHash||e.credentialType===ut.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===Ht.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e){const n=this.getKeys(),r={};return n.forEach(o=>{if(!this.isAppMetadata(o))return;const i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){const n=this.getAuthorityMetadataKeys();let r=null;return n.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;const i=this.getAuthorityMetadata(o);i&&i.aliases.indexOf(e)!==-1&&(r=i)}),r}async removeAllAccounts(){const e=this.getAccountKeys(),n=[];e.forEach(r=>{n.push(this.removeAccount(r))}),await Promise.all(n)}async removeAccount(e){const n=this.getAccount(e,this.commonLogger);n&&(await this.removeAccountContext(n),this.removeItem(e))}async removeAccountContext(e){const n=this.getTokenKeys(),r=e.generateAccountId(),o=[];n.idToken.forEach(i=>{i.indexOf(r)===0&&this.removeIdToken(i)}),n.accessToken.forEach(i=>{i.indexOf(r)===0&&o.push(this.removeAccessToken(i))}),n.refreshToken.forEach(i=>{i.indexOf(r)===0&&this.removeRefreshToken(i)}),await Promise.all(o)}updateOutdatedCachedAccount(e,n,r){var o;if(n&&n.isSingleTenant()){(o=this.commonLogger)==null||o.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const i=this.getAccountKeys().filter(d=>d.startsWith(n.homeAccountId)),s=[];i.forEach(d=>{const f=this.getCachedAccountEntity(d);f&&s.push(f)});const a=s.find(d=>zg(d.realm,d.homeAccountId))||s[0];a.tenantProfiles=s.map(d=>({tenantId:d.realm,localAccountId:d.localAccountId,name:d.name,isHomeTenant:zg(d.realm,d.homeAccountId)}));const c=od.toObject(new $n,{...a}),u=c.generateAccountKey();return i.forEach(d=>{d!==u&&this.removeOutdatedAccount(e)}),this.setAccount(c),r==null||r.verbose("Updated an outdated account entity in the cache"),c}return n}async removeAccessToken(e){const n=this.getAccessTokenCredential(e);if(n){if(n.credentialType.toLowerCase()===ut.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&n.tokenType===Ht.POP){const o=n.keyId;if(o)try{await this.cryptoImpl.removeTokenBindingKey(o)}catch{throw Te(l5)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(n=>{this.isAppMetadata(n)&&this.removeItem(n)}),!0}readAccountFromCache(e){const n=$n.generateAccountCacheKey(e);return this.getAccount(n,this.commonLogger)}getIdToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");const s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:ut.ID_TOKEN,clientId:this.clientId,realm:r},a=this.getIdTokensByFilter(s,n),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let u=a;if(!r){const d=new Map;a.forEach((p,g)=>{p.realm===e.tenantId&&d.set(g,p)});const f=d.size;if(f<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(f===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),d.values().next().value;u=d}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((d,f)=>{this.removeIdToken(f)}),o&&i&&o.addFields({multiMatchedID:a.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,n){const r=n&&n.idToken||this.getTokenKeys().idToken,o=new Map;return r.forEach(i=>{if(!this.idTokenKeyMatchesFilter(i,{clientId:this.clientId,...e}))return;const s=this.getIdTokenCredential(i);s&&this.credentialMatchesFilter(s,e)&&o.set(i,s)}),o}idTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,n,r,o,i,s){this.commonLogger.trace("CacheManager - getAccessToken called");const a=kn.createSearchScopes(n.scopes),c=n.authenticationScheme||Ht.BEARER,u=c.toLowerCase()!==Ht.BEARER.toLowerCase()?ut.ACCESS_TOKEN_WITH_AUTH_SCHEME:ut.ACCESS_TOKEN,d={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:u,clientId:this.clientId,realm:o||e.tenantId,target:a,tokenType:c,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},f=r&&r.accessToken||this.getTokenKeys().accessToken,p=[];f.forEach(v=>{if(this.accessTokenKeyMatchesFilter(v,d,!0)){const b=this.getAccessTokenCredential(v);b&&this.credentialMatchesFilter(b,d)&&p.push(b)}});const g=p.length;return g<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):g>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),p.forEach(v=>{this.removeAccessToken(du(v))}),i&&s&&i.addFields({multiMatchedAT:p.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),p[0])}accessTokenKeyMatchesFilter(e,n,r){const o=e.toLowerCase();if(n.clientId&&o.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&o.indexOf(n.homeAccountId.toLowerCase())===-1||n.realm&&o.indexOf(n.realm.toLowerCase())===-1||n.requestedClaimsHash&&o.indexOf(n.requestedClaimsHash.toLowerCase())===-1)return!1;if(n.target){const i=n.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const n=this.getTokenKeys(),r=[];return n.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;const i=this.getAccessTokenCredential(o);i&&this.credentialMatchesFilter(i,e)&&r.push(i)}),r}getRefreshToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const s=n?tf:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:ut.REFRESH_TOKEN,clientId:this.clientId,familyId:s},c=r&&r.refreshToken||this.getTokenKeys().refreshToken,u=[];c.forEach(f=>{if(this.refreshTokenKeyMatchesFilter(f,a)){const p=this.getRefreshTokenCredential(f);p&&this.credentialMatchesFilter(p,a)&&u.push(p)}});const d=u.length;return d<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(d>1&&o&&i&&o.addFields({multiMatchedRT:d},i),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.familyId&&r.indexOf(n.familyId.toLowerCase())===-1||!n.familyId&&n.clientId&&r.indexOf(n.clientId.toLowerCase())===-1||n.homeAccountId&&r.indexOf(n.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const n={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(n),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw Te(n5);return o[0]}isAppMetadataFOCI(e){const n=this.readAppMetadataFromCache(e);return!!(n&&n.familyId===tf)}matchHomeAccountId(e,n){return typeof e.homeAccountId=="string"&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){const r=e.oid||e.sub;return n===r}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){var r;return n.toLowerCase()===((r=e.name)==null?void 0:r.toLowerCase())}matchUsername(e,n){return!!(e&&typeof e=="string"&&(n==null?void 0:n.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,n){return!!(e.userAssertionHash&&n===e.userAssertionHash)}matchEnvironment(e,n){if(this.staticAuthorityOptions){const o=Nee(this.staticAuthorityOptions,this.commonLogger);if(o.includes(n)&&o.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(n);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!!(e.clientId&&n===e.clientId)}matchFamilyId(e,n){return!!(e.familyId&&n===e.familyId)}matchRealm(e,n){var r;return((r=e.realm)==null?void 0:r.toLowerCase())===n.toLowerCase()}matchNativeAccountId(e,n){return!!(e.nativeAccountId&&n===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!!(e.authorityType&&n.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,n){return e.credentialType!==ut.ACCESS_TOKEN&&e.credentialType!==ut.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:kn.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!!(e.tokenType&&e.tokenType===n)}matchKeyId(e,n){return!!(e.keyId&&e.keyId===n)}isAppMetadata(e){return e.indexOf(kT)!==-1}isAuthorityMetadata(e){return e.indexOf(Ug.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${Ug.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,n){for(const r in n)e[r]=n[r];return e}}class Oee extends od{setAccount(){throw Te(gt)}getAccount(){throw Te(gt)}getCachedAccountEntity(){throw Te(gt)}setIdTokenCredential(){throw Te(gt)}getIdTokenCredential(){throw Te(gt)}setAccessTokenCredential(){throw Te(gt)}getAccessTokenCredential(){throw Te(gt)}setRefreshTokenCredential(){throw Te(gt)}getRefreshTokenCredential(){throw Te(gt)}setAppMetadata(){throw Te(gt)}getAppMetadata(){throw Te(gt)}setServerTelemetry(){throw Te(gt)}getServerTelemetry(){throw Te(gt)}setAuthorityMetadata(){throw Te(gt)}getAuthorityMetadata(){throw Te(gt)}getAuthorityMetadataKeys(){throw Te(gt)}setThrottlingCache(){throw Te(gt)}getThrottlingCache(){throw Te(gt)}removeItem(){throw Te(gt)}getKeys(){throw Te(gt)}getAccountKeys(){throw Te(gt)}getTokenKeys(){throw Te(gt)}async clear(){throw Te(gt)}updateCredentialCacheKey(){throw Te(gt)}removeOutdatedAccount(){throw Te(gt)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const O5={tokenRenewalOffsetSeconds:tee,preventCorsPreflight:!1},Mee={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:fn.Info,correlationId:ae.EMPTY_STRING},Lee={claimsBasedCachingEnabled:!1},Dee={async sendGetRequestAsync(){throw Te(gt)},async sendPostRequestAsync(){throw Te(gt)}},jee={sku:ae.SKU,version:LT,cpu:ae.EMPTY_STRING,os:ae.EMPTY_STRING},Uee={clientSecret:ae.EMPTY_STRING,clientAssertion:void 0},Fee={azureCloudInstance:Mf.None,tenant:`${ae.DEFAULT_COMMON_TENANT}`},Bee={application:{appName:"",appVersion:""}};function Hee({authOptions:t,systemOptions:e,loggerOptions:n,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:u,serverTelemetryManager:d,persistencePlugin:f,serializableCache:p}){const g={...Mee,...n};return{authOptions:zee(t),systemOptions:{...O5,...e},loggerOptions:g,cacheOptions:{...Lee,...r},storageInterface:o||new Oee(t.clientId,Bg,new si(g)),networkInterface:i||Dee,cryptoInterface:s||Bg,clientCredentials:a||Uee,libraryInfo:{...jee,...c},telemetry:{...Bee,...u},serverTelemetryManager:d||null,persistencePlugin:f||null,serializableCache:p||null}}function zee(t){return{clientCapabilities:[],azureCloudOptions:Fee,skipAuthorityMetadataCache:!1,instanceAware:!1,...t}}function pE(t){return t.authOptions.authority.options.protocolMode===hs.OIDC}/*! @azure/msal-common v14.15.0 2024-09-20 */class Ki extends St{constructor(e,n,r,o,i){super(e,n,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,Ki.prototype)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class Ai{static generateThrottlingStorageKey(e){return`${nf.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,n){var i;const r=Ai.generateThrottlingStorageKey(n),o=e.getThrottlingCache(r);if(o){if(o.throttleTime<Date.now()){e.removeItem(r);return}throw new Ki(((i=o.errorCodes)==null?void 0:i.join(" "))||ae.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,n,r){if(Ai.checkResponseStatus(r)||Ai.checkResponseForRetryAfter(r)){const o={throttleTime:Ai.calculateThrottleTime(parseInt(r.headers[Li.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(Ai.generateThrottlingStorageKey(n),o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Li.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const n=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(n||nf.DEFAULT_THROTTLE_TIME_SECONDS),r+nf.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,n,r,o){const i={clientId:n,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:o,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid},s=this.generateThrottlingStorageKey(i);e.removeItem(s)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class Vee{constructor(e,n){this.networkClient=e,this.cacheManager=n}async sendPostRequest(e,n,r){Ai.preProcess(this.cacheManager,e);let o;try{o=await this.networkClient.sendPostRequestAsync(n,r)}catch(i){throw i instanceof St?i:Te(QD)}return Ai.postProcess(this.cacheManager,e,o),o}}/*! @azure/msal-common v14.15.0 2024-09-20 */const ro={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v14.15.0 2024-09-20 */const id="client_id",$ee="redirect_uri",px="response_type",Gee="response_mode",Kee="grant_type",Wee="claims",qee="scope",Yee="refresh_token",Qee="state",Jee="nonce",Xee="prompt",Zee="code",ete="code_challenge",tte="code_challenge_method",nte="code_verifier",rte="client-request-id",ote="x-client-SKU",ite="x-client-VER",ste="x-client-OS",ate="x-client-CPU",cte="x-client-current-telemetry",lte="x-client-last-telemetry",ute="x-ms-lib-capability",dte="x-app-name",hte="x-app-ver",fte="post_logout_redirect_uri",pte="id_token_hint",mte="device_code",gte="client_secret",vte="client_assertion",yte="client_assertion_type",mx="token_type",gx="req_cnf",bte="assertion",Cte="requested_token_use",vx="return_spa_code",Ste="nativebroker",Ete="logout_hint",wte="sid",Ite="login_hint",Tte="domain_hint",_te="x-client-xtra-sku";/*! @azure/msal-common v14.15.0 2024-09-20 */class Zl{static validateRedirectUri(e){if(!e)throw Jt(p5)}static validatePrompt(e){const n=[];for(const r in er)n.push(er[r]);if(n.indexOf(e)<0)throw Jt(y5)}static validateClaims(e){try{JSON.parse(e)}catch{throw Jt(jT)}}static validateCodeChallengeParams(e,n){if(!e||!n)throw Jt(UT);this.validateCodeChallengeMethod(n)}static validateCodeChallengeMethod(e){if([nx.PLAIN,nx.S256].indexOf(e)<0)throw Jt(S5)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class rf{constructor(){this.parameters=new Map}addResponseTypeCode(){this.parameters.set(px,encodeURIComponent(ae.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(px,encodeURIComponent(`${ae.TOKEN_RESPONSE_TYPE} ${ae.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(Gee,encodeURIComponent(e||XZ.QUERY))}addNativeBroker(){this.parameters.set(Ste,encodeURIComponent("1"))}addScopes(e,n=!0,r=ga){n&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const o=n?[...e||[],...r]:e||[],i=new kn(o);this.parameters.set(qee,encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(id,encodeURIComponent(e))}addRedirectUri(e){Zl.validateRedirectUri(e),this.parameters.set($ee,encodeURIComponent(e))}addPostLogoutRedirectUri(e){Zl.validateRedirectUri(e),this.parameters.set(fte,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(pte,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(Tte,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(Ite,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(Li.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(Li.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(wte,encodeURIComponent(e))}addClaims(e,n){const r=this.addClientCapabilitiesToClaims(e,n);Zl.validateClaims(r),this.parameters.set(Wee,encodeURIComponent(r))}addCorrelationId(e){this.parameters.set(rte,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(ote,e.sku),this.parameters.set(ite,e.version),e.os&&this.parameters.set(ste,e.os),e.cpu&&this.parameters.set(ate,e.cpu)}addApplicationTelemetry(e){e!=null&&e.appName&&this.parameters.set(dte,e.appName),e!=null&&e.appVersion&&this.parameters.set(hte,e.appVersion)}addPrompt(e){Zl.validatePrompt(e),this.parameters.set(`${Xee}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(Qee,encodeURIComponent(e))}addNonce(e){this.parameters.set(Jee,encodeURIComponent(e))}addCodeChallengeParams(e,n){if(Zl.validateCodeChallengeParams(e,n),e&&n)this.parameters.set(ete,encodeURIComponent(e)),this.parameters.set(tte,encodeURIComponent(n));else throw Jt(UT)}addAuthorizationCode(e){this.parameters.set(Zee,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(mte,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(Yee,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(nte,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(gte,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(vte,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(yte,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(bte,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(Cte,encodeURIComponent(e))}addGrantType(e){this.parameters.set(Kee,encodeURIComponent(e))}addClientInfo(){this.parameters.set(ZZ,"1")}addExtraQueryParameters(e){Object.entries(e).forEach(([n,r])=>{!this.parameters.has(n)&&r&&this.parameters.set(n,r)})}addClientCapabilitiesToClaims(e,n){let r;if(!e)r={};else try{r=JSON.parse(e)}catch{throw Jt(jT)}return n&&n.length>0&&(r.hasOwnProperty(Zp.ACCESS_TOKEN)||(r[Zp.ACCESS_TOKEN]={}),r[Zp.ACCESS_TOKEN][Zp.XMS_CC]={values:n}),JSON.stringify(r)}addUsername(e){this.parameters.set(ox.username,encodeURIComponent(e))}addPassword(e){this.parameters.set(ox.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(mx,Ht.POP),this.parameters.set(gx,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(mx,Ht.SSH),this.parameters.set(gx,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(cte,e.generateCurrentRequestHeaderValue()),this.parameters.set(lte,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(ute,nf.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(Ete,encodeURIComponent(e))}createQueryString(){const e=new Array;return this.parameters.forEach((n,r)=>{e.push(`${r}=${n}`)}),e.join("&")}}/*! @azure/msal-common v14.15.0 2024-09-20 */function Ate(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v14.15.0 2024-09-20 */function kte(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}/*! @azure/msal-common v14.15.0 2024-09-20 */function xte(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}/*! @azure/msal-common v14.15.0 2024-09-20 */const R={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},Rte=new Map([[R.AcquireTokenByCode,"ATByCode"],[R.AcquireTokenByRefreshToken,"ATByRT"],[R.AcquireTokenSilent,"ATS"],[R.AcquireTokenSilentAsync,"ATSAsync"],[R.AcquireTokenPopup,"ATPopup"],[R.AcquireTokenRedirect,"ATRedirect"],[R.CryptoOptsGetPublicKeyThumbprint,"CryptoGetPKThumb"],[R.CryptoOptsSignJwt,"CryptoSignJwt"],[R.SilentCacheClientAcquireToken,"SltCacheClientAT"],[R.SilentIframeClientAcquireToken,"SltIframeClientAT"],[R.SilentRefreshClientAcquireToken,"SltRClientAT"],[R.SsoSilent,"SsoSlt"],[R.StandardInteractionClientGetDiscoveredAuthority,"StdIntClientGetDiscAuth"],[R.FetchAccountIdWithNativeBroker,"FetchAccIdWithNtvBroker"],[R.NativeInteractionClientAcquireToken,"NtvIntClientAT"],[R.BaseClientCreateTokenRequestHeaders,"BaseClientCreateTReqHead"],[R.RefreshTokenClientExecutePostToTokenEndpoint,"RTClientExecPost"],[R.AuthorizationCodeClientExecutePostToTokenEndpoint,"AuthCodeClientExecPost"],[R.BrokerHandhshake,"BrokerHandshake"],[R.AcquireTokenByRefreshTokenInBroker,"ATByRTInBroker"],[R.AcquireTokenByBroker,"ATByBroker"],[R.RefreshTokenClientExecuteTokenRequest,"RTClientExecTReq"],[R.RefreshTokenClientAcquireToken,"RTClientAT"],[R.RefreshTokenClientAcquireTokenWithCachedRefreshToken,"RTClientATWithCachedRT"],[R.RefreshTokenClientAcquireTokenByRefreshToken,"RTClientATByRT"],[R.RefreshTokenClientCreateTokenRequestBody,"RTClientCreateTReqBody"],[R.AcquireTokenFromCache,"ATFromCache"],[R.SilentFlowClientAcquireCachedToken,"SltFlowClientATCached"],[R.SilentFlowClientGenerateResultFromCacheRecord,"SltFlowClientGenResFromCache"],[R.AcquireTokenBySilentIframe,"ATBySltIframe"],[R.InitializeBaseRequest,"InitBaseReq"],[R.InitializeSilentRequest,"InitSltReq"],[R.InitializeClientApplication,"InitClientApplication"],[R.SilentIframeClientTokenHelper,"SIClientTHelper"],[R.SilentHandlerInitiateAuthRequest,"SHandlerInitAuthReq"],[R.SilentHandlerMonitorIframeForHash,"SltHandlerMonitorIframeForHash"],[R.SilentHandlerLoadFrame,"SHandlerLoadFrame"],[R.SilentHandlerLoadFrameSync,"SHandlerLoadFrameSync"],[R.StandardInteractionClientCreateAuthCodeClient,"StdIntClientCreateAuthCodeClient"],[R.StandardInteractionClientGetClientConfiguration,"StdIntClientGetClientConf"],[R.StandardInteractionClientInitializeAuthorizationRequest,"StdIntClientInitAuthReq"],[R.StandardInteractionClientInitializeAuthorizationCodeRequest,"StdIntClientInitAuthCodeReq"],[R.GetAuthCodeUrl,"GetAuthCodeUrl"],[R.HandleCodeResponseFromServer,"HandleCodeResFromServer"],[R.HandleCodeResponse,"HandleCodeResp"],[R.UpdateTokenEndpointAuthority,"UpdTEndpointAuth"],[R.AuthClientAcquireToken,"AuthClientAT"],[R.AuthClientExecuteTokenRequest,"AuthClientExecTReq"],[R.AuthClientCreateTokenRequestBody,"AuthClientCreateTReqBody"],[R.AuthClientCreateQueryString,"AuthClientCreateQueryStr"],[R.PopTokenGenerateCnf,"PopTGenCnf"],[R.PopTokenGenerateKid,"PopTGenKid"],[R.HandleServerTokenResponse,"HandleServerTRes"],[R.DeserializeResponse,"DeserializeRes"],[R.AuthorityFactoryCreateDiscoveredInstance,"AuthFactCreateDiscInst"],[R.AuthorityResolveEndpointsAsync,"AuthResolveEndpointsAsync"],[R.AuthorityResolveEndpointsFromLocalSources,"AuthResolveEndpointsFromLocal"],[R.AuthorityGetCloudDiscoveryMetadataFromNetwork,"AuthGetCDMetaFromNet"],[R.AuthorityUpdateCloudDiscoveryMetadata,"AuthUpdCDMeta"],[R.AuthorityGetEndpointMetadataFromNetwork,"AuthUpdCDMetaFromNet"],[R.AuthorityUpdateEndpointMetadata,"AuthUpdEndpointMeta"],[R.AuthorityUpdateMetadataWithRegionalInformation,"AuthUpdMetaWithRegInfo"],[R.RegionDiscoveryDetectRegion,"RegDiscDetectReg"],[R.RegionDiscoveryGetRegionFromIMDS,"RegDiscGetRegFromIMDS"],[R.RegionDiscoveryGetCurrentVersion,"RegDiscGetCurrentVer"],[R.AcquireTokenByCodeAsync,"ATByCodeAsync"],[R.GetEndpointMetadataFromNetwork,"GetEndpointMetaFromNet"],[R.GetCloudDiscoveryMetadataFromNetworkMeasurement,"GetCDMetaFromNet"],[R.HandleRedirectPromiseMeasurement,"HandleRedirectPromise"],[R.HandleNativeRedirectPromiseMeasurement,"HandleNtvRedirectPromise"],[R.UpdateCloudDiscoveryMetadataMeasurement,"UpdateCDMeta"],[R.UsernamePasswordClientAcquireToken,"UserPassClientAT"],[R.NativeMessageHandlerHandshake,"NtvMsgHandlerHandshake"],[R.NativeGenerateAuthResult,"NtvGenAuthRes"],[R.RemoveHiddenIframe,"RemoveHiddenIframe"],[R.ClearTokensAndKeysWithClaims,"ClearTAndKeysWithClaims"],[R.CacheManagerGetRefreshToken,"CacheManagerGetRT"],[R.GeneratePkceCodes,"GenPkceCodes"],[R.GenerateCodeVerifier,"GenCodeVerifier"],[R.GenerateCodeChallengeFromVerifier,"GenCodeChallengeFromVerifier"],[R.Sha256Digest,"Sha256Digest"],[R.GetRandomValues,"GetRandomValues"]]),mE={InProgress:1,Completed:2},Nte=new Set(["accessTokenSize","durationMs","idTokenSize","matsSilentStatus","matsHttpStatus","refreshTokenSize","queuedTimeMs","startTimeMs","status","multiMatchedAT","multiMatchedID","multiMatchedRT"]);/*! @azure/msal-common v14.15.0 2024-09-20 */const pl=(t,e,n,r,o)=>(...i)=>{n.trace(`Executing function ${e}`);const s=r==null?void 0:r.startMeasurement(e,o);if(o){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},o)}try{const a=t(...i);return s==null||s.end({success:!0}),n.trace(`Returning result from ${e}`),a}catch(a){n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw s==null||s.end({success:!1},a),a}},Le=(t,e,n,r,o)=>(...i)=>{n.trace(`Executing function ${e}`);const s=r==null?void 0:r.startMeasurement(e,o);if(o){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},o)}return r==null||r.setPreQueueTime(e,o),t(...i).then(a=>(n.trace(`Returning result from ${e}`),s==null||s.end({success:!0}),a)).catch(a=>{n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw s==null||s.end({success:!1},a),a})};/*! @azure/msal-common v14.15.0 2024-09-20 */class My{constructor(e,n,r,o){this.networkInterface=e,this.logger=n,this.performanceClient=r,this.correlationId=o}async detectRegion(e,n){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(R.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)n.region_source=Ll.ENVIRONMENT_VARIABLE;else{const i=My.IMDS_OPTIONS;try{const s=await Le(this.getRegionFromIMDS.bind(this),R.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(ae.IMDS_VERSION,i);if(s.status===tm.httpSuccess&&(r=s.body,n.region_source=Ll.IMDS),s.status===tm.httpBadRequest){const a=await Le(this.getCurrentVersion.bind(this),R.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return n.region_source=Ll.FAILED_AUTO_DETECTION,null;const c=await Le(this.getRegionFromIMDS.bind(this),R.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);c.status===tm.httpSuccess&&(r=c.body,n.region_source=Ll.IMDS)}}catch{return n.region_source=Ll.FAILED_AUTO_DETECTION,null}}return r||(n.region_source=Ll.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,n){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(R.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${ae.IMDS_ENDPOINT}?api-version=${e}&format=text`,n,ae.IMDS_TIMEOUT)}async getCurrentVersion(e){var n;(n=this.performanceClient)==null||n.addQueueMeasurement(R.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const r=await this.networkInterface.sendGetRequestAsync(`${ae.IMDS_ENDPOINT}?format=json`,e);return r.status===tm.httpBadRequest&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}My.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v14.15.0 2024-09-20 */class hr{constructor(e,n,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new My(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(ae.CIAM_AUTH_URL))return Ko.Ciam;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case ae.ADFS:return Ko.Adfs;case ae.DSTS:return Ko.Dsts}return Ko.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new It(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw Te(as)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw Te(as)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw Te(as)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw Te(u5);return this.replacePath(this.metadata.end_session_endpoint)}else throw Te(as)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw Te(as)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw Te(as)}canReplaceTenant(e){return e.PathSegments.length===1&&!hr.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Ko.Default&&this.protocolMode===hs.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const o=new It(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let u=i[c];if(c===0&&this.canReplaceTenant(o)){const d=new It(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==d&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${d}`),u=d)}a!==u&&(n=n.replace(`/${u}/`,`/${a}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Ko.Adfs||this.protocolMode!==hs.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var o,i;(o=this.performanceClient)==null||o.addQueueMeasurement(R.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),n=await Le(this.updateCloudDiscoveryMetadata.bind(this),R.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await Le(this.updateEndpointMetadata.bind(this),R.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,n,{source:r}),(i=this.performanceClient)==null||i.addFields({cloudDiscoverySource:n,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:ux(),jwks_uri:""}),e}updateCachedMetadata(e,n,r){n!==Qr.CACHE&&(r==null?void 0:r.source)!==Qr.CACHE&&(e.expiresAt=ux(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}async updateEndpointMetadata(e){var o,i,s;(o=this.performanceClient)==null||o.addQueueMeasurement(R.AuthorityUpdateEndpointMetadata,this.correlationId);const n=this.updateEndpointMetadataFromLocalSources(e);if(n){if(n.source===Qr.HARDCODED_VALUES&&(i=this.authorityOptions.azureRegionConfiguration)!=null&&i.azureRegion&&n.metadata){const a=await Le(this.updateMetadataWithRegionalInformation.bind(this),R.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(n.metadata);nm(e,a,!1),e.canonical_authority=this.canonicalAuthority}return n.source}let r=await Le(this.getEndpointMetadataFromNetwork.bind(this),R.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return(s=this.authorityOptions.azureRegionConfiguration)!=null&&s.azureRegion&&(r=await Le(this.updateMetadataWithRegionalInformation.bind(this),R.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),nm(e,r,!0),Qr.NETWORK;throw Te(JD,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("Found endpoint metadata in authority configuration"),nm(e,n,!1),{source:Qr.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const o=this.getEndpointMetadataFromHardcodedValues();if(o)return nm(e,o,!1),{source:Qr.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=dx(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:Qr.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new It(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Jt(E5)}return null}async getEndpointMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(R.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},n=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${n}`);try{const o=await this.networkInterface.sendGetRequestAsync(n,e);return Ate(o.body)?o.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${o}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in hx?hx[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var r,o,i;(r=this.performanceClient)==null||r.addQueueMeasurement(R.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const n=(o=this.authorityOptions.azureRegionConfiguration)==null?void 0:o.azureRegion;if(n){if(n!==ae.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=TC.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=n,hr.replaceWithRegionalInformation(e,n);const s=await Le(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),R.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((i=this.authorityOptions.azureRegionConfiguration)==null?void 0:i.environmentRegion,this.regionDiscoveryMetadata);if(s)return this.regionDiscoveryMetadata.region_outcome=TC.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=s,hr.replaceWithRegionalInformation(e,s);this.regionDiscoveryMetadata.region_outcome=TC.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(R.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const n=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(n)return n;const r=await Le(this.getCloudDiscoveryMetadataFromNetwork.bind(this),R.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return _C(e,r,!0),Qr.NETWORK;throw Jt(w5)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||ae.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||ae.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||ae.NOT_APPLICABLE}`);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),_C(e,n,!1),Qr.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const o=Pee(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),_C(e,o,!1),Qr.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=dx(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),Qr.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Ko.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),hr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),n=$g(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Jt(FT)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),hr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(R.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${ae.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,n={};let r=null;try{const i=await this.networkInterface.sendGetRequestAsync(e,n);let s,a;if(kte(i.body))s=i.body,a=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(xte(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===ae.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=$g(a,this.hostnameAndPort)}catch(i){if(i instanceof St)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{const s=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=hr.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(n=>n&&It.getDomainFromUrl(n).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let r;if(n&&n.azureCloudInstance!==Mf.None){const o=n.tenant?n.tenant:ae.DEFAULT_COMMON_TENANT;r=`${n.azureCloudInstance}/${o}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return ae.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw Te(as)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return N5.has(e)}static isPublicCloudAuthority(e){return ae.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,r){const o=new It(e);o.validateAsUri();const i=o.getUrlComponents();let s=`${n}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${n}.${ae.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=It.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:s}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,n){const r={...e};return r.authorization_endpoint=hr.buildRegionalAuthorityString(r.authorization_endpoint,n),r.token_endpoint=hr.buildRegionalAuthorityString(r.token_endpoint,n),r.end_session_endpoint&&(r.end_session_endpoint=hr.buildRegionalAuthorityString(r.end_session_endpoint,n)),r}static transformCIAMAuthority(e){let n=e;const o=new It(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(ae.CIAM_AUTH_URL)){const i=o.HostNameAndPort.split(".")[0];n=`${n}${i}${ae.AAD_TENANT_DOMAIN_SUFFIX}`}return n}}hr.reservedTenantDomains=new Set(["{tenant}","{tenantid}",da.COMMON,da.CONSUMERS,da.ORGANIZATIONS]);function Pte(t){var o;const r=(o=new It(t).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:o.toLowerCase();switch(r){case da.COMMON:case da.ORGANIZATIONS:case da.CONSUMERS:return;default:return r}}function M5(t){return t.endsWith(ae.FORWARD_SLASH)?t:`${t}${ae.FORWARD_SLASH}`}function Ote(t){const e=t.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw Jt(FT)}return{canonicalAuthority:t.authority?M5(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:n}}/*! @azure/msal-common v14.15.0 2024-09-20 */async function L5(t,e,n,r,o,i,s){s==null||s.addQueueMeasurement(R.AuthorityFactoryCreateDiscoveredInstance,i);const a=hr.transformCIAMAuthority(M5(t)),c=new hr(a,e,n,r,o,i,s);try{return await Le(c.resolveEndpointsAsync.bind(c),R.AuthorityResolveEndpointsAsync,o,s,i)(),c}catch{throw Te(as)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class $T{constructor(e,n){this.config=Hee(e),this.logger=new si(this.config.loggerOptions,d5,LT),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.networkManager=new Vee(this.networkClient,this.cacheManager),this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}createTokenRequestHeaders(e){const n={};if(n[Li.CONTENT_TYPE]=ae.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case ro.HOME_ACCOUNT_ID:try{const r=hu(e.credential);n[Li.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case ro.UPN:n[Li.CCS_HEADER]=`UPN: ${e.credential}`;break}return n}async executePostToTokenEndpoint(e,n,r,o,i,s){var c,u,d,f;s&&((c=this.performanceClient)==null||c.addQueueMeasurement(s,i));const a=await this.networkManager.sendPostRequest(o,e,{body:n,headers:r});return(f=this.performanceClient)==null||f.addFields({refreshTokenSize:((u=a.body.refresh_token)==null?void 0:u.length)||0,httpVerToken:((d=a.headers)==null?void 0:d[Li.X_MS_HTTP_VERSION])||""},i),this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async updateAuthority(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(R.UpdateTokenEndpointAuthority,n);const r=`https://${e}/${this.authority.tenant}/`,o=await L5(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,n,this.performanceClient);this.authority=o}createTokenQueryParameters(e){const n=new rf;return e.tokenQueryParameters&&n.addExtraQueryParameters(e.tokenQueryParameters),n.createQueryString()}}/*! @azure/msal-common v14.15.0 2024-09-20 */const Gg="no_tokens_found",D5="native_account_unavailable",GT="refresh_token_expired",Mte="interaction_required",Lte="consent_required",Dte="login_required",Ly="bad_token";/*! @azure/msal-common v14.15.0 2024-09-20 */const yx=[Mte,Lte,Dte,Ly],jte=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Ute={[Gg]:"No refresh token found in the cache. Please sign-in.",[D5]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[GT]:"Refresh token has expired.",[Ly]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class kr extends St{constructor(e,n,r,o,i,s,a,c){super(e,n,r),Object.setPrototypeOf(this,kr.prototype),this.timestamp=o||ae.EMPTY_STRING,this.traceId=i||ae.EMPTY_STRING,this.correlationId=s||ae.EMPTY_STRING,this.claims=a||ae.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function bx(t,e,n){const r=!!t&&yx.indexOf(t)>-1,o=!!n&&jte.indexOf(n)>-1,i=!!e&&yx.some(s=>e.indexOf(s)>-1);return r||i||o}function gE(t){return new kr(t,Ute[t])}/*! @azure/msal-common v14.15.0 2024-09-20 */class ti{static setRequestState(e,n,r){const o=ti.generateLibraryState(e,r);return n?`${o}${ae.RESOURCE_DELIM}${n}`:o}static generateLibraryState(e,n){if(!e)throw Te(dE);const r={id:e.createNewGuid()};n&&(r.meta=n);const o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,n){if(!e)throw Te(dE);if(!n)throw Te(rd);try{const r=n.split(ae.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(ae.RESOURCE_DELIM):ae.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||ae.EMPTY_STRING,libraryState:a}}catch{throw Te(rd)}}}/*! @azure/msal-common v14.15.0 2024-09-20 */const Fte={SW:"sw"};class Dc{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}async generateCnf(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(R.PopTokenGenerateCnf,e.correlationId);const r=await Le(this.generateKid.bind(this),R.PopTokenGenerateCnf,n,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}}async generateKid(e){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(R.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:Fte.SW}}async signPopToken(e,n,r){return this.signPayload(e,n,r)}async signPayload(e,n,r,o){const{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:c,shrOptions:u}=r,d=s?new It(s):void 0,f=d==null?void 0:d.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:Gi(),m:i==null?void 0:i.toUpperCase(),u:f==null?void 0:f.HostNameAndPort,nonce:c||this.cryptoUtils.createNewGuid(),p:f==null?void 0:f.AbsolutePath,q:f!=null&&f.QueryString?[[],f.QueryString]:void 0,client_claims:a||void 0,...o},n,u,r.correlationId)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class Bte{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v14.15.0 2024-09-20 */function Hte(t){var r,o;const e="code=",n=(r=t.error_uri)==null?void 0:r.lastIndexOf(e);return n&&n>=0?(o=t.error_uri)==null?void 0:o.substring(n+e.length):void 0}class jc{constructor(e,n,r,o,i,s,a){this.clientId=e,this.cacheStorage=n,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,n){if(!e.state||!n)throw e.state?Te(Fg,"Cached State"):Te(Fg,"Server State");let r,o;try{r=decodeURIComponent(e.state)}catch{throw Te(rd,e.state)}try{o=decodeURIComponent(n)}catch{throw Te(rd,e.state)}if(r!==o)throw Te(ZD);if(e.error||e.error_description||e.suberror){const i=Hte(e);throw bx(e.error,e.error_description,e.suberror)?new kr(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",i):new Ki(e.error||"",e.error_description,e.suberror,i)}}validateTokenResponse(e,n){var r;if(e.error||e.error_description||e.suberror){const o=`Error(s): ${e.error_codes||ae.NOT_AVAILABLE} - Timestamp: ${e.timestamp||ae.NOT_AVAILABLE} - Description: ${e.error_description||ae.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||ae.NOT_AVAILABLE} - Trace ID: ${e.trace_id||ae.NOT_AVAILABLE}`,i=(r=e.error_codes)!=null&&r.length?e.error_codes[0]:void 0,s=new Ki(e.error,o,e.suberror,i,e.status);if(n&&e.status&&e.status>=Xp.SERVER_ERROR_RANGE_START&&e.status<=Xp.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${s}`);return}else if(n&&e.status&&e.status>=Xp.CLIENT_ERROR_RANGE_START&&e.status<=Xp.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${s}`);return}throw bx(e.error,e.error_description,e.suberror)?new kr(e.error,e.error_description,e.suberror,e.timestamp||ae.EMPTY_STRING,e.trace_id||ae.EMPTY_STRING,e.correlation_id||ae.EMPTY_STRING,e.claims||ae.EMPTY_STRING,i):s}}async handleServerTokenResponse(e,n,r,o,i,s,a,c,u){var v;(v=this.performanceClient)==null||v.addQueueMeasurement(R.HandleServerTokenResponse,e.correlation_id);let d;if(e.id_token){if(d=fl(e.id_token||ae.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&d.nonce!==i.nonce)throw Te(e5);if(o.maxAge||o.maxAge===0){const b=d.auth_time;if(!b)throw Te(NT);h5(b,o.maxAge)}}this.homeAccountIdentifier=$n.generateHomeAccountId(e.client_info||ae.EMPTY_STRING,n.authorityType,this.logger,this.cryptoObj,d);let f;i&&i.state&&(f=ti.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;const p=this.generateCacheRecord(e,n,r,o,d,s,i);let g;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),g=new Bte(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(g)),a&&!c&&p.account){const b=p.account.generateAccountKey();if(!this.cacheStorage.getAccount(b,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await jc.generateAuthenticationResult(this.cryptoObj,n,p,!1,o,d,f,void 0,u)}await this.cacheStorage.saveCacheRecord(p,o.storeInCache,o.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&g&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(g))}return jc.generateAuthenticationResult(this.cryptoObj,n,p,!1,o,d,f,e,u)}generateCacheRecord(e,n,r,o,i,s,a){const c=n.getPreferredCache();if(!c)throw Te(OT);const u=k5(i);let d,f;e.id_token&&i&&(d=Ry(this.homeAccountIdentifier,c,e.id_token,this.clientId,u||""),f=KT(this.cacheStorage,n,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i,e.client_info,c,u,a,void 0,this.logger));let p=null;if(e.access_token){const b=e.scope?kn.fromString(e.scope):new kn(o.scopes||[]),y=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,C=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,S=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,w=r+y,E=w+C,I=S&&S>0?r+S:void 0;p=Ny(this.homeAccountIdentifier,c,e.access_token,this.clientId,u||n.tenant||"",b.printScopes(),w,E,this.cryptoObj.base64Decode,I,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let g=null;if(e.refresh_token){let b;if(e.refresh_token_expires_in){const y=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;b=r+y}g=f5(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,b)}let v=null;return e.foci&&(v={clientId:this.clientId,environment:c,familyId:e.foci}),{account:f,idToken:d,accessToken:p,refreshToken:g,appMetadata:v}}static async generateAuthenticationResult(e,n,r,o,i,s,a,c,u){var w,E,I,T,A;let d=ae.EMPTY_STRING,f=[],p=null,g,v,b=ae.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===Ht.POP&&!i.popKid){const _=new Dc(e),{secret:U,keyId:k}=r.accessToken;if(!k)throw Te(MT);d=await _.signPopToken(U,k,i)}else d=r.accessToken.secret;f=kn.fromString(r.accessToken.target).asArray(),p=new Date(Number(r.accessToken.expiresOn)*1e3),g=new Date(Number(r.accessToken.extendedExpiresOn)*1e3),r.accessToken.refreshOn&&(v=new Date(Number(r.accessToken.refreshOn)*1e3))}r.appMetadata&&(b=r.appMetadata.familyId===tf?tf:"");const y=(s==null?void 0:s.oid)||(s==null?void 0:s.sub)||"",C=(s==null?void 0:s.tid)||"";c!=null&&c.spa_accountid&&r.account&&(r.account.nativeAccountId=c==null?void 0:c.spa_accountid);const S=r.account?HT(r.account.getAccountInfo(),void 0,s,(w=r.idToken)==null?void 0:w.secret):null;return{authority:n.canonicalAuthority,uniqueId:y,tenantId:C,scopes:f,account:S,idToken:((E=r==null?void 0:r.idToken)==null?void 0:E.secret)||"",idTokenClaims:s||{},accessToken:d,fromCache:o,expiresOn:p,extExpiresOn:g,refreshOn:v,correlationId:i.correlationId,requestId:u||ae.EMPTY_STRING,familyId:b,tokenType:((I=r.accessToken)==null?void 0:I.tokenType)||ae.EMPTY_STRING,state:a?a.userRequestState:ae.EMPTY_STRING,cloudGraphHostName:((T=r.account)==null?void 0:T.cloudGraphHostName)||ae.EMPTY_STRING,msGraphHost:((A=r.account)==null?void 0:A.msGraphHost)||ae.EMPTY_STRING,code:c==null?void 0:c.spa_code,fromNativeBroker:!1}}}function KT(t,e,n,r,o,i,s,a,c,u,d){d==null||d.verbose("setCachedAccount called");const p=t.getAccountKeys().find(C=>C.startsWith(n));let g=null;p&&(g=t.getAccount(p,d));const v=g||$n.createAccount({homeAccountId:n,idTokenClaims:o,clientInfo:i,environment:s,cloudGraphHostName:c==null?void 0:c.cloud_graph_host_name,msGraphHost:c==null?void 0:c.msgraph_host,nativeAccountId:u},e,r),b=v.tenantProfiles||[],y=a||v.realm;if(y&&!b.find(C=>C.tenantId===y)){const C=BT(n,v.localAccountId,y,o);b.push(C)}return v.tenantProfiles=b,v}/*! @azure/msal-common v14.15.0 2024-09-20 */async function j5(t,e,n){return typeof t=="string"?t:t({clientId:e,tokenEndpoint:n})}/*! @azure/msal-common v14.15.0 2024-09-20 */class U5 extends $T{constructor(e,n){var r;super(e,n),this.includeRedirectUri=!0,this.oidcDefaultScopes=(r=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:r.defaultScopes}async getAuthCodeUrl(e){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(R.GetAuthCodeUrl,e.correlationId);const n=await Le(this.createAuthCodeUrlQueryString.bind(this),R.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return It.appendQueryString(this.authority.authorizationEndpoint,n)}async acquireToken(e,n){var a,c;if((a=this.performanceClient)==null||a.addQueueMeasurement(R.AuthClientAcquireToken,e.correlationId),!e.code)throw Te(r5);const r=Gi(),o=await Le(this.executeTokenRequest.bind(this),R.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=(c=o.headers)==null?void 0:c[Li.X_MS_REQUEST_ID],s=new jc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(o.body),Le(s.handleServerTokenResponse.bind(s),R.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,n,void 0,void 0,void 0,i)}handleFragmentResponse(e,n){if(new jc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,n),!e.code)throw Te(c5);return e}getLogoutUri(e){if(!e)throw Jt(C5);const n=this.createLogoutUrlQueryString(e);return It.appendQueryString(this.authority.endSessionEndpoint,n)}async executeTokenRequest(e,n){var u,d;(u=this.performanceClient)==null||u.addQueueMeasurement(R.AuthClientExecuteTokenRequest,n.correlationId);const r=this.createTokenQueryParameters(n),o=It.appendQueryString(e.tokenEndpoint,r),i=await Le(this.createTokenRequestBody.bind(this),R.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,n.correlationId)(n);let s;if(n.clientInfo)try{const f=Hg(n.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${f.uid}${fr.CLIENT_INFO_SEPARATOR}${f.utid}`,type:ro.HOME_ACCOUNT_ID}}catch(f){this.logger.verbose("Could not parse client info for CCS Header: "+f)}const a=this.createTokenRequestHeaders(s||n.ccsCredential),c={clientId:((d=n.tokenBodyParameters)==null?void 0:d.clientId)||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:n.scopes,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid};return Le(this.executePostToTokenEndpoint.bind(this),R.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,n.correlationId)(o,i,a,c,n.correlationId,R.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(R.AuthClientCreateTokenRequestBody,e.correlationId);const n=new rf;if(n.addClientId(((s=e.tokenBodyParameters)==null?void 0:s[id])||this.config.authOptions.clientId),this.includeRedirectUri?n.addRedirectUri(e.redirectUri):Zl.validateRedirectUri(e.redirectUri),n.addScopes(e.scopes,!0,this.oidcDefaultScopes),n.addAuthorizationCode(e.code),n.addLibraryInfo(this.config.libraryInfo),n.addApplicationTelemetry(this.config.telemetry.application),n.addThrottling(),this.serverTelemetryManager&&!pE(this.config)&&n.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&n.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&n.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const a=this.config.clientCredentials.clientAssertion;n.addClientAssertion(await j5(a.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),n.addClientAssertionType(a.assertionType)}if(n.addGrantType(KD.AUTHORIZATION_CODE_GRANT),n.addClientInfo(),e.authenticationScheme===Ht.POP){const a=new Dc(this.cryptoUtils,this.performanceClient);let c;e.popKid?c=this.cryptoUtils.encodeKid(e.popKid):c=(await Le(a.generateCnf.bind(a),R.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,n.addPopToken(c)}else if(e.authenticationScheme===Ht.SSH)if(e.sshJwk)n.addSshJwk(e.sshJwk);else throw Jt(Py);const r=e.correlationId||this.config.cryptoInterface.createNewGuid();n.addCorrelationId(r),(!ei.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities);let o;if(e.clientInfo)try{const a=Hg(e.clientInfo,this.cryptoUtils.base64Decode);o={credential:`${a.uid}${fr.CLIENT_INFO_SEPARATOR}${a.utid}`,type:ro.HOME_ACCOUNT_ID}}catch(a){this.logger.verbose("Could not parse client info for CCS Header: "+a)}else o=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case ro.HOME_ACCOUNT_ID:try{const a=hu(o.credential);n.addCcsOid(a)}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case ro.UPN:n.addCcsUpn(o.credential);break}return e.tokenBodyParameters&&n.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[vx])&&n.addExtraQueryParameters({[vx]:"1"}),n.createQueryString()}async createAuthCodeUrlQueryString(e){var i,s;(i=this.performanceClient)==null||i.addQueueMeasurement(R.AuthClientCreateQueryString,e.correlationId);const n=new rf;n.addClientId(((s=e.extraQueryParameters)==null?void 0:s[id])||this.config.authOptions.clientId);const r=[...e.scopes||[],...e.extraScopesToConsent||[]];n.addScopes(r,!0,this.oidcDefaultScopes),n.addRedirectUri(e.redirectUri);const o=e.correlationId||this.config.cryptoInterface.createNewGuid();if(n.addCorrelationId(o),n.addResponseMode(e.responseMode),n.addResponseTypeCode(),n.addLibraryInfo(this.config.libraryInfo),pE(this.config)||n.addApplicationTelemetry(this.config.telemetry.application),n.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&n.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&n.addPrompt(e.prompt),e.domainHint&&n.addDomainHint(e.domainHint),e.prompt!==er.SELECT_ACCOUNT)if(e.sid&&e.prompt===er.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),n.addSid(e.sid);else if(e.account){const a=this.extractAccountSid(e.account);let c=this.extractLoginHint(e.account);if(c&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),c=null),c){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),n.addLoginHint(c);try{const u=hu(e.account.homeAccountId);n.addCcsOid(u)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===er.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),n.addSid(a);try{const u=hu(e.account.homeAccountId);n.addCcsOid(u)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),n.addLoginHint(e.account.username);try{const u=hu(e.account.homeAccountId);n.addCcsOid(u)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),n.addLoginHint(e.loginHint),n.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&n.addNonce(e.nonce),e.state&&n.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&n.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.addExtraQueryParams(e,n),e.nativeBroker&&(n.addNativeBroker(),e.authenticationScheme===Ht.POP)){const a=new Dc(this.cryptoUtils);let c;e.popKid?c=this.cryptoUtils.encodeKid(e.popKid):c=(await Le(a.generateCnf.bind(a),R.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,n.addPopToken(c)}return n.createQueryString()}createLogoutUrlQueryString(e){const n=new rf;return e.postLogoutRedirectUri&&n.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&n.addCorrelationId(e.correlationId),e.idTokenHint&&n.addIdTokenHint(e.idTokenHint),e.state&&n.addState(e.state),e.logoutHint&&n.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,n),n.createQueryString()}addExtraQueryParams(e,n){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&n.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){var n;return((n=e.idTokenClaims)==null?void 0:n.sid)||null}extractLoginHint(e){var n;return((n=e.idTokenClaims)==null?void 0:n.login_hint)||null}}/*! @azure/msal-common v14.15.0 2024-09-20 */const zte=300;class vE extends $T{constructor(e,n){super(e,n)}async acquireToken(e){var s,a;(s=this.performanceClient)==null||s.addQueueMeasurement(R.RefreshTokenClientAcquireToken,e.correlationId);const n=Gi(),r=await Le(this.executeTokenRequest.bind(this),R.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=(a=r.headers)==null?void 0:a[Li.X_MS_REQUEST_ID],i=new jc(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),Le(i.handleServerTokenResponse.bind(i),R.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,n,e,void 0,void 0,!0,e.forceCache,o)}async acquireTokenByRefreshToken(e){var r;if(!e)throw Jt(b5);if((r=this.performanceClient)==null||r.addQueueMeasurement(R.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw Te(PT);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await Le(this.acquireTokenWithCachedRefreshToken.bind(this),R.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(o){const i=o instanceof kr&&o.errorCode===Gg,s=o instanceof Ki&&o.errorCode===rx.INVALID_GRANT_ERROR&&o.subError===rx.CLIENT_MISMATCH_ERROR;if(i||s)return Le(this.acquireTokenWithCachedRefreshToken.bind(this),R.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw o}return Le(this.acquireTokenWithCachedRefreshToken.bind(this),R.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,n){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(R.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=pl(this.cacheManager.getRefreshToken.bind(this.cacheManager),R.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,n,void 0,this.performanceClient,e.correlationId);if(!r)throw gE(Gg);if(r.expiresOn&&fE(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||zte))throw gE(GT);const o={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||Ht.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:ro.HOME_ACCOUNT_ID}};try{return await Le(this.acquireToken.bind(this),R.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(s){if(s instanceof kr&&s.subError===Ly){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const a=du(r);this.cacheManager.removeRefreshToken(a)}throw s}}async executeTokenRequest(e,n){var c,u;(c=this.performanceClient)==null||c.addQueueMeasurement(R.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),o=It.appendQueryString(n.tokenEndpoint,r),i=await Le(this.createTokenRequestBody.bind(this),R.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a={clientId:((u=e.tokenBodyParameters)==null?void 0:u.clientId)||this.config.authOptions.clientId,authority:n.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return Le(this.executePostToTokenEndpoint.bind(this),R.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,i,s,a,e.correlationId,R.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var o,i,s;(o=this.performanceClient)==null||o.addQueueMeasurement(R.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const n=e.correlationId,r=new rf;if(r.addClientId(((i=e.tokenBodyParameters)==null?void 0:i[id])||this.config.authOptions.clientId),e.redirectUri&&r.addRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,(s=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:s.defaultScopes),r.addGrantType(KD.REFRESH_TOKEN_GRANT),r.addClientInfo(),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&!pE(this.config)&&r.addServerTelemetry(this.serverTelemetryManager),r.addCorrelationId(n),r.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const a=this.config.clientCredentials.clientAssertion;r.addClientAssertion(await j5(a.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(a.assertionType)}if(e.authenticationScheme===Ht.POP){const a=new Dc(this.cryptoUtils,this.performanceClient);let c;e.popKid?c=this.cryptoUtils.encodeKid(e.popKid):c=(await Le(a.generateCnf.bind(a),R.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,r.addPopToken(c)}else if(e.authenticationScheme===Ht.SSH)if(e.sshJwk)r.addSshJwk(e.sshJwk);else throw Jt(Py);if((!ei.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case ro.HOME_ACCOUNT_ID:try{const a=hu(e.ccsCredential.credential);r.addCcsOid(a)}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case ro.UPN:r.addCcsUpn(e.ccsCredential.credential);break}return e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),r.createQueryString()}}/*! @azure/msal-common v14.15.0 2024-09-20 */class Vte extends $T{constructor(e,n){super(e,n)}async acquireToken(e){var n;try{const[r,o]=await this.acquireCachedToken({...e,scopes:(n=e.scopes)!=null&&n.length?e.scopes:[...ga]});return o===Ys.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new vE(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),r}catch(r){if(r instanceof Md&&r.errorCode===Di)return new vE(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw r}}async acquireCachedToken(e){var c;(c=this.performanceClient)==null||c.addQueueMeasurement(R.SilentFlowClientAcquireCachedToken,e.correlationId);let n=Ys.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!ei.isEmptyObj(e.claims))throw this.setCacheOutcome(Ys.FORCE_REFRESH_OR_CLAIMS,e.correlationId),Te(Di);if(!e.account)throw Te(PT);const r=e.account.tenantId||Pte(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r,this.performanceClient,e.correlationId);if(i){if(gee(i.cachedAt)||fE(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Ys.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),Te(Di);i.refreshOn&&fE(i.refreshOn,0)&&(n=Ys.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Ys.NO_CACHED_ACCESS_TOKEN,e.correlationId),Te(Di);const s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,o,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(n,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await Le(this.generateResultFromCacheRecord.bind(this),R.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),n]}setCacheOutcome(e,n){var r,o;(r=this.serverTelemetryManager)==null||r.setCacheOutcome(e),(o=this.performanceClient)==null||o.addFields({cacheOutcome:e},n),e!==Ys.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,n){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(R.SilentFlowClientGenerateResultFromCacheRecord,n.correlationId);let r;if(e.idToken&&(r=fl(e.idToken.secret,this.config.cryptoInterface.base64Decode)),n.maxAge||n.maxAge===0){const i=r==null?void 0:r.auth_time;if(!i)throw Te(NT);h5(i,n.maxAge)}return jc.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,n,r)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const $te={sendGetRequestAsync:()=>Promise.reject(Te(gt)),sendPostRequestAsync:()=>Promise.reject(Te(gt))};/*! @azure/msal-common v14.15.0 2024-09-20 */const Cx=",",F5="|";function Gte(t){const{skus:e,libraryName:n,libraryVersion:r,extensionName:o,extensionVersion:i}=t,s=new Map([[0,[n,r]],[2,[o,i]]]);let a=[];if(e!=null&&e.length){if(a=e.split(Cx),a.length<4)return e}else a=Array.from({length:4},()=>F5);return s.forEach((c,u)=>{var d,f;c.length===2&&((d=c[0])!=null&&d.length)&&((f=c[1])!=null&&f.length)&&Kte({skuArr:a,index:u,skuName:c[0],skuVersion:c[1]})}),a.join(Cx)}function Kte(t){const{skuArr:e,index:n,skuName:r,skuVersion:o}=t;n>=e.length||(e[n]=[r,o].join(F5))}class Lf{constructor(e,n){this.cacheOutcome=Ys.NOT_APPLICABLE,this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||ae.EMPTY_STRING,this.wrapperVer=e.wrapperVer||ae.EMPTY_STRING,this.telemetryCacheKey=nr.CACHE_KEY+fr.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${nr.VALUE_SEPARATOR}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r!=null&&r.length&&n.push(`broker_error=${r}`);const o=n.join(nr.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),s=[e,i].join(nr.VALUE_SEPARATOR);return[nr.SCHEMA_VERSION,s,o].join(nr.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=Lf.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*n).join(nr.VALUE_SEPARATOR),o=e.errors.slice(0,n).join(nr.VALUE_SEPARATOR),i=e.errors.length,s=n<i?nr.OVERFLOW_TRUE:nr.OVERFLOW_FALSE,a=[i,s].join(nr.VALUE_SEPARATOR);return[nr.SCHEMA_VERSION,e.cacheHits,r,o,a].join(nr.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=nr.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof St?e.subError?n.errors.push(e.subError):e.errorCode?n.errors.push(e.errorCode):n.errors.push(e.toString()):n.errors.push(e.toString()):n.errors.push(nr.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),n=Lf.maxErrorsToSend(e),r=e.errors.length;if(n===r)this.cacheManager.removeItem(this.telemetryCacheKey);else{const o={failedRequests:e.failedRequests.slice(n*2),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o)}}static maxErrorsToSend(e){let n,r=0,o=0;const i=e.errors.length;for(n=0;n<i;n++){const s=e.failedRequests[2*n]||ae.EMPTY_STRING,a=e.failedRequests[2*n+1]||ae.EMPTY_STRING,c=e.errors[n]||ae.EMPTY_STRING;if(o+=s.toString().length+a.toString().length+c.length+3,o<nr.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||ae.EMPTY_STRING),e.push(this.regionSource||ae.EMPTY_STRING),e.push(this.regionOutcome||ae.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const n=this.getLastRequests();n.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return Gte(e)}}/*! @azure/msal-common v14.15.0 2024-09-20 */const B5="missing_kid_error",H5="missing_alg_error";/*! @azure/msal-common v14.15.0 2024-09-20 */const Wte={[B5]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[H5]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class WT extends St{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,WT.prototype)}}function Sx(t){return new WT(t,Wte[t])}/*! @azure/msal-common v14.15.0 2024-09-20 */class qT{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw Sx(B5);if(!e.alg)throw Sx(H5);const n=new qT({typ:e.typ||eee.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(n)}}/*! @azure/msal-common v14.15.0 2024-09-20 */class yE{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class z5{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:mE.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""},measurement:new yE}}startPerformanceMeasurement(){return new yE}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-common v14.15.0 2024-09-20 */function qte(t,e,n){n&&n.push({name:e.get(t.name)||t.name})}function Yte(t,e,n,r){if(!(n!=null&&n.length))return;const o=g=>g.length?g[g.length-1]:void 0,i=e.get(t.name)||t.name,s=o(n);if((s==null?void 0:s.name)!==i)return;const a=n==null?void 0:n.pop();if(!a)return;const c=r instanceof St?r.errorCode:r instanceof Error?r.name:void 0,u=r instanceof St?r.subError:void 0;c&&a.childErr!==c&&(a.err=c,u&&(a.subErr=u)),delete a.name,delete a.childErr;const d={...a,dur:t.durationMs};t.success||(d.fail=1);const f=o(n);if(!f)return{[i]:d};c&&(f.childErr=c);let p;if(!f[i])p=i;else{const g=Object.keys(f).filter(v=>v.startsWith(i)).length;p=`${i}_${g+1}`}return f[p]=d,f}function Qte(t,e,n,r=5){var o,i;if(t instanceof Error){if(t instanceof St){n.errorCode=t.errorCode,n.subErrorCode=t.subError,(t instanceof Ki||t instanceof kr)&&(n.serverErrorNo=t.errorNo);return}else if(t instanceof yc){n.errorCode=t.errorCode;return}else if((o=n.errorStack)!=null&&o.length){e.trace("PerformanceClient.addErrorStack: Stack already exist",n.correlationId);return}else if(!((i=t.stack)!=null&&i.length)){e.trace("PerformanceClient.addErrorStack: Input stack is empty",n.correlationId);return}}else{e.trace("PerformanceClient.addErrorStack: Input error is not instance of Error",n.correlationId);return}t.stack&&(n.errorStack=Jte(t.stack,r)),n.errorName=t.name}function Jte(t,e){if(e<0)return[];const n=t.split(`
`)||[];if(n.length<2)return[];const r=[];for(let o=Math.max(n.length-e-1,1);o<n.length;o++){const i=n[o];if(r.length>=e)break;r.push(Xte(i))}return r}function Xte(t){const e=t.lastIndexOf(" ")+1;if(e<1)return t;const n=t.substring(e);let r=n.lastIndexOf("/");return r=r<0?n.lastIndexOf("\\"):r,r>=0?(t.substring(0,e)+"("+n.substring(r+1)+(n.charAt(n.length-1)===")"?"":")")).trimStart():t.trimStart()}class Zte{constructor(e,n,r,o,i,s,a,c){this.authority=n,this.libraryName=o,this.libraryVersion=i,this.applicationTelemetry=s,this.clientId=e,this.logger=r,this.callbacks=new Map,this.eventsByCorrelationId=new Map,this.eventStack=new Map,this.queueMeasurements=new Map,this.preQueueTimeByCorrelationId=new Map,this.intFields=a||new Set;for(const u of Nte)this.intFields.add(u);this.abbreviations=c||new Map;for(const[u,d]of Rte)this.abbreviations.set(u,d)}startPerformanceMeasurement(e,n){return{}}getPreQueueTime(e,n){const r=this.preQueueTimeByCorrelationId.get(n);if(r){if(r.name!==e){this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue time found for ${e}, unable to add queue measurement`);return}}else{this.logger.trace(`PerformanceClient.getPreQueueTime: no pre-queue times found for correlationId: ${n}, unable to add queue measurement`);return}return r.time}calculateQueuedTime(e,n){return e<1?(this.logger.trace(`PerformanceClient: preQueueTime should be a positive integer and not ${e}`),0):n<1?(this.logger.trace(`PerformanceClient: currentTime should be a positive integer and not ${n}`),0):n<e?(this.logger.trace("PerformanceClient: currentTime is less than preQueueTime, check how time is being retrieved"),0):n-e}addQueueMeasurement(e,n,r,o){if(!n){this.logger.trace(`PerformanceClient.addQueueMeasurement: correlationId not provided for ${e}, cannot add queue measurement`);return}if(r===0)this.logger.trace(`PerformanceClient.addQueueMeasurement: queue time provided for ${e} is ${r}`);else if(!r){this.logger.trace(`PerformanceClient.addQueueMeasurement: no queue time provided for ${e}`);return}const i={eventName:e,queueTime:o?0:r,manuallyCompleted:o},s=this.queueMeasurements.get(n);if(s)s.push(i),this.queueMeasurements.set(n,s);else{this.logger.trace(`PerformanceClient.addQueueMeasurement: adding correlationId ${n} to queue measurements`);const a=[i];this.queueMeasurements.set(n,a)}this.preQueueTimeByCorrelationId.delete(n)}startMeasurement(e,n){var i,s;const r=n||this.generateId();n||this.logger.info(`PerformanceClient: No correlation id provided for ${e}, generating`,r),this.logger.trace(`PerformanceClient: Performance measurement started for ${e}`,r);const o={eventId:this.generateId(),status:mE.InProgress,authority:this.authority,libraryName:this.libraryName,libraryVersion:this.libraryVersion,clientId:this.clientId,name:e,startTimeMs:Date.now(),correlationId:r,appName:(i=this.applicationTelemetry)==null?void 0:i.appName,appVersion:(s=this.applicationTelemetry)==null?void 0:s.appVersion};return this.cacheEventByCorrelationId(o),qte(o,this.abbreviations,this.eventStack.get(r)),{end:(a,c)=>this.endMeasurement({...o,...a},c),discard:()=>this.discardMeasurements(o.correlationId),add:a=>this.addFields(a,o.correlationId),increment:a=>this.incrementFields(a,o.correlationId),event:o,measurement:new yE}}endMeasurement(e,n){var u,d;const r=this.eventsByCorrelationId.get(e.correlationId);if(!r)return this.logger.trace(`PerformanceClient: Measurement not found for ${e.eventId}`,e.correlationId),null;const o=e.eventId===r.eventId;let i={totalQueueTime:0,totalQueueCount:0,manuallyCompletedCount:0};e.durationMs=Math.round(e.durationMs||this.getDurationMs(e.startTimeMs));const s=JSON.stringify(Yte(e,this.abbreviations,this.eventStack.get(r.correlationId),n));if(o?(i=this.getQueueInfo(e.correlationId),this.discardMeasurements(r.correlationId)):(u=r.incompleteSubMeasurements)==null||u.delete(e.eventId),this.logger.trace(`PerformanceClient: Performance measurement ended for ${e.name}: ${e.durationMs} ms`,e.correlationId),!o)return r[e.name+"DurationMs"]=Math.floor(e.durationMs),{...r};n&&Qte(n,this.logger,r);let a={...r,...e},c=0;return(d=a.incompleteSubMeasurements)==null||d.forEach(f=>{this.logger.trace(`PerformanceClient: Incomplete submeasurement ${f.name} found for ${e.name}`,a.correlationId),c++}),a.incompleteSubMeasurements=void 0,a={...a,queuedTimeMs:i.totalQueueTime,queuedCount:i.totalQueueCount,queuedManuallyCompletedCount:i.manuallyCompletedCount,status:mE.Completed,incompleteSubsCount:c,context:s},this.truncateIntegralFields(a),this.emitEvents([a],e.correlationId),a}addFields(e,n){this.logger.trace("PerformanceClient: Updating static fields");const r=this.eventsByCorrelationId.get(n);r?this.eventsByCorrelationId.set(n,{...r,...e}):this.logger.trace("PerformanceClient: Event not found for",n)}incrementFields(e,n){this.logger.trace("PerformanceClient: Updating counters");const r=this.eventsByCorrelationId.get(n);if(r)for(const o in e){if(!r.hasOwnProperty(o))r[o]=0;else if(isNaN(Number(r[o])))return;r[o]+=e[o]}else this.logger.trace("PerformanceClient: Event not found for",n)}cacheEventByCorrelationId(e){const n=this.eventsByCorrelationId.get(e.correlationId);n?(this.logger.trace(`PerformanceClient: Performance measurement for ${e.name} added/updated`,e.correlationId),n.incompleteSubMeasurements=n.incompleteSubMeasurements||new Map,n.incompleteSubMeasurements.set(e.eventId,{name:e.name,startTimeMs:e.startTimeMs})):(this.logger.trace(`PerformanceClient: Performance measurement for ${e.name} started`,e.correlationId),this.eventsByCorrelationId.set(e.correlationId,{...e}),this.eventStack.set(e.correlationId,[]))}getQueueInfo(e){const n=this.queueMeasurements.get(e);n||this.logger.trace(`PerformanceClient: no queue measurements found for for correlationId: ${e}`);let r=0,o=0,i=0;return n==null||n.forEach(s=>{r+=s.queueTime,o++,i+=s.manuallyCompleted?1:0}),{totalQueueTime:r,totalQueueCount:o,manuallyCompletedCount:i}}discardMeasurements(e){this.logger.trace("PerformanceClient: Performance measurements discarded",e),this.eventsByCorrelationId.delete(e),this.logger.trace("PerformanceClient: QueueMeasurements discarded",e),this.queueMeasurements.delete(e),this.logger.trace("PerformanceClient: Pre-queue times discarded",e),this.preQueueTimeByCorrelationId.delete(e),this.logger.trace("PerformanceClient: Event stack discarded",e),this.eventStack.delete(e)}addPerformanceCallback(e){for(const[r,o]of this.callbacks)if(o.toString()===e.toString())return this.logger.warning(`PerformanceClient: Performance callback is already registered with id: ${r}`),r;const n=this.generateId();return this.callbacks.set(n,e),this.logger.verbose(`PerformanceClient: Performance callback registered with id: ${n}`),n}removePerformanceCallback(e){const n=this.callbacks.delete(e);return n?this.logger.verbose(`PerformanceClient: Performance callback ${e} removed.`):this.logger.verbose(`PerformanceClient: Performance callback ${e} not removed.`),n}emitEvents(e,n){this.logger.verbose("PerformanceClient: Emitting performance events",n),this.callbacks.forEach((r,o)=>{this.logger.trace(`PerformanceClient: Emitting event to callback ${o}`,n),r.apply(null,[e])})}truncateIntegralFields(e){this.intFields.forEach(n=>{n in e&&typeof e[n]=="number"&&(e[n]=Math.floor(e[n]))})}getDurationMs(e){const n=Date.now()-e;return n<0?n:0}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const YT="pkce_not_created",V5="crypto_nonexistent",Dy="empty_navigate_uri",$5="hash_empty_error",QT="no_state_in_hash",G5="hash_does_not_contain_known_properties",K5="unable_to_parse_state",W5="state_interaction_type_mismatch",q5="interaction_in_progress",Y5="popup_window_error",Q5="empty_window_error",Uc="user_cancelled",ene="monitor_popup_timeout",J5="monitor_window_timeout",X5="redirect_in_iframe",Z5="block_iframe_reload",e3="block_nested_popups",tne="iframe_closed_prematurely",jy="silent_logout_unsupported",t3="no_account_error",nne="silent_prompt_value_error",n3="no_token_request_cache_error",r3="unable_to_parse_token_request_cache_error",JT="no_cached_authority_error",rne="auth_request_not_set_error",one="invalid_cache_type",XT="non_browser_environment",eu="database_not_open",Kg="no_network_connectivity",o3="post_request_failed",i3="get_request_failed",bE="failed_to_parse_response",s3="unable_to_load_token",ZT="crypto_key_not_found",a3="auth_code_required",c3="auth_code_or_nativeAccountId_required",l3="spa_code_and_nativeAccountId_present",e_="database_unavailable",u3="unable_to_acquire_token_from_native_platform",d3="native_handshake_timeout",h3="native_extension_not_installed",vp="native_connection_not_established",f3="uninitialized_public_client_application",p3="native_prompt_not_supported",m3="invalid_base64_string",g3="invalid_pop_token_request";/*! @azure/msal-browser v3.26.1 2024-10-08 */const ns="For more visit: aka.ms/msaljs/browser-errors",ine={[YT]:"The PKCE code challenge and verifier could not be generated.",[V5]:"The crypto object or function is not available.",[Dy]:"Navigation URI is empty. Please check stack trace for more info.",[$5]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${ns}`,[QT]:"Hash does not contain state. Please verify that the request originated from msal.",[G5]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${ns}`,[K5]:"Unable to parse state. Please verify that the request originated from msal.",[W5]:"Hash contains state but the interaction type does not match the caller.",[q5]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${ns}`,[Y5]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[Q5]:"window.open returned null or undefined window object.",[Uc]:"User cancelled the flow.",[ene]:`Token acquisition in popup failed due to timeout.  ${ns}`,[J5]:`Token acquisition in iframe failed due to timeout.  ${ns}`,[X5]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[Z5]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${ns}`,[e3]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[tne]:"The iframe being monitored was closed prematurely.",[jy]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[t3]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[nne]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[n3]:"No token request found in cache.",[r3]:"The cached token request could not be parsed.",[JT]:"No cached authority found.",[rne]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[one]:"Invalid cache type",[XT]:"Login and token requests are not supported in non-browser environments.",[eu]:"Database is not open!",[Kg]:"No network connectivity. Check your internet connection.",[o3]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[i3]:"Network request failed. Please check the network trace to determine root cause.",[bE]:"Failed to parse network response. Check network trace.",[s3]:"Error loading token to cache.",[ZT]:"Cryptographic Key or Keypair not found in browser storage.",[a3]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[c3]:"An authorization code or nativeAccountId must be provided to this flow.",[l3]:"Request cannot contain both spa code and native account id.",[e_]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[u3]:`Unable to acquire token from native platform.  ${ns}`,[d3]:"Timed out while attempting to establish connection to browser extension",[h3]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[vp]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${ns}`,[f3]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${ns}`,[p3]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[m3]:"Invalid base64 encoded string.",[g3]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true."};class Ld extends St{constructor(e){super(e,ine[e]),Object.setPrototypeOf(this,Ld.prototype),this.name="BrowserAuthError"}}function Xe(t){return new Ld(t)}/*! @azure/msal-browser v3.26.1 2024-10-08 */const eo={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},fu={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},lc={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},Sn={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},Ex={GET:"GET",POST:"POST"},zt={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},Bs={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},rm={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},un={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var Ee;(function(t){t.Redirect="redirect",t.Popup="popup",t.Silent="silent",t.None="none"})(Ee||(Ee={}));const wx={scopes:ga},v3="jwk",CE="msal.db",sne=1,ane=`${CE}.keys`,Hn={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},cne=[Hn.Default,Hn.Skip,Hn.RefreshTokenAndNetwork],lne="msal.browser.log.level",une="msal.browser.log.pii",dne="msal.browser.performance.enabled";/*! @azure/msal-browser v3.26.1 2024-10-08 */function om(t){return encodeURIComponent(t_(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Uy(t){return y3(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function t_(t){return y3(new TextEncoder().encode(t))}function y3(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}/*! @azure/msal-browser v3.26.1 2024-10-08 */const hne="RSASSA-PKCS1-v1_5",b3="SHA-256",fne=2048,pne=new Uint8Array([1,0,1]),Ix="0123456789abcdef",Tx=new Uint32Array(1),n_={name:hne,hash:b3,modulusLength:fne,publicExponent:pne};function mne(t){if("crypto"in window)t.verbose("BrowserCrypto: modern crypto interface available");else throw t.error("BrowserCrypto: crypto interface is unavailable"),Xe(V5)}async function C3(t,e,n){e==null||e.addQueueMeasurement(R.Sha256Digest,n);const o=new TextEncoder().encode(t);return window.crypto.subtle.digest(b3,o)}function gne(t){return window.crypto.getRandomValues(t)}function kC(){return window.crypto.getRandomValues(Tx),Tx[0]}function Wi(){const t=Date.now(),e=kC()*1024+(kC()&1023),n=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=kC();n[0]=t/2**40,n[1]=t/2**32,n[2]=t/2**24,n[3]=t/2**16,n[4]=t/2**8,n[5]=t,n[6]=112|r>>>8,n[7]=r,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let s="";for(let a=0;a<n.length;a++)s+=Ix.charAt(n[a]>>>4),s+=Ix.charAt(n[a]&15),(a===3||a===5||a===7||a===9)&&(s+="-");return s}async function vne(t,e){return window.crypto.subtle.generateKey(n_,t,e)}async function xC(t){return window.crypto.subtle.exportKey(v3,t)}async function yne(t,e,n){return window.crypto.subtle.importKey(v3,t,n_,e,n)}async function bne(t,e){return window.crypto.subtle.sign(n_,t,e)}async function S3(t){const e=await C3(t),n=new Uint8Array(e);return Uy(n)}/*! @azure/msal-browser v3.26.1 2024-10-08 */const E3="storage_not_supported",Cne="stubbed_public_client_application_called",w3="in_mem_redirect_unavailable";/*! @azure/msal-browser v3.26.1 2024-10-08 */const Sne={[E3]:"Given storage configuration option was not supported.",[Cne]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[w3]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class Fy extends St{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Fy.prototype)}}function I3(t){return new Fy(t,Sne[t])}/*! @azure/msal-browser v3.26.1 2024-10-08 */function Ene(t){t.location.hash="",typeof t.history.replaceState=="function"&&t.history.replaceState(null,"",`${t.location.origin}${t.location.pathname}${t.location.search}`)}function wne(t){const e=t.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function r_(){return window.parent!==window}function Ine(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${eo.POPUP_NAME_PREFIX}.`)===0}function Jo(){return window.location.href.split("?")[0].split("#")[0]}function Tne(){const e=new It(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function _ne(){if(It.hashContainsKnownProperties(window.location.hash)&&r_())throw Xe(Z5)}function Ane(t){if(r_()&&!t)throw Xe(X5)}function kne(){if(Ine())throw Xe(e3)}function T3(){if(typeof window>"u")throw Xe(XT)}function o_(t){if(!t)throw Xe(f3)}function fs(t){T3(),_ne(),kne(),o_(t)}function _x(t,e){if(fs(t),Ane(e.system.allowRedirectInIframe),e.cache.cacheLocation===Sn.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw I3(w3)}function _3(t){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(t).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function To(){return Wi()}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Wg{navigateInternal(e,n){return Wg.defaultNavigateWindow(e,n)}navigateExternal(e,n){return Wg.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},n.timeout)})}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class xne{async sendGetRequestAsync(e,n){let r;try{r=await fetch(e,{method:Ex.GET,headers:this.getFetchHeaders(n)})}catch{throw window.navigator.onLine?Xe(i3):Xe(Kg)}try{return{headers:this.getHeaderDict(r.headers),body:await r.json(),status:r.status}}catch{throw Xe(bE)}}async sendPostRequestAsync(e,n){const r=n&&n.body||ae.EMPTY_STRING;let o;try{o=await fetch(e,{method:Ex.POST,headers:this.getFetchHeaders(n),body:r})}catch{throw window.navigator.onLine?Xe(o3):Xe(Kg)}try{return{headers:this.getHeaderDict(o.headers),body:await o.json(),status:o.status}}catch{throw Xe(bE)}}getFetchHeaders(e){const n=new Headers;if(!(e&&e.headers))return n;const r=e.headers;return Object.keys(r).forEach(o=>{n.append(o,r[o])}),n}getHeaderDict(e){const n={};return e.forEach((r,o)=>{n[o]=r}),n}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const Rne=6e4,qg=1e4,Nne=3e4,Pne=2e3;function One({auth:t,cache:e,system:n,telemetry:r},o){const i={clientId:ae.EMPTY_STRING,authority:`${ae.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:ae.EMPTY_STRING,authorityMetadata:ae.EMPTY_STRING,redirectUri:ae.EMPTY_STRING,postLogoutRedirectUri:ae.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:hs.AAD,OIDCOptions:{serverResponseType:gp.FRAGMENT,defaultScopes:[ae.OPENID_SCOPE,ae.PROFILE_SCOPE,ae.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:Mf.None,tenant:ae.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},s={cacheLocation:Sn.SessionStorage,temporaryCacheLocation:Sn.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===Sn.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:fn.Info,piiLoggingEnabled:!1},u={...{...O5,loggerOptions:a,networkClient:o?new xne:$te,navigationClient:new Wg,loadFrameTimeout:0,windowHashTimeout:(n==null?void 0:n.loadFrameTimeout)||Rne,iframeHashTimeout:(n==null?void 0:n.loadFrameTimeout)||qg,navigateFrameWait:0,redirectNavigationTimeout:Nne,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(n==null?void 0:n.nativeBrokerHandshakeTimeout)||Pne,pollIntervalMilliseconds:eo.DEFAULT_POLL_INTERVAL_MS},...n,loggerOptions:(n==null?void 0:n.loggerOptions)||a},d={application:{appName:ae.EMPTY_STRING,appVersion:ae.EMPTY_STRING},client:new z5};if((t==null?void 0:t.protocolMode)!==hs.OIDC&&(t!=null&&t.OIDCOptions)&&new si(u.loggerOptions).warning(JSON.stringify(Jt(T5))),t!=null&&t.protocolMode&&t.protocolMode!==hs.AAD&&(u!=null&&u.allowNativeBroker))throw Jt(_5);return{auth:{...i,...t,OIDCOptions:{...i.OIDCOptions,...t==null?void 0:t.OIDCOptions}},cache:{...s,...e},system:u,telemetry:{...d,...r}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const Yg="@azure/msal-browser",Fc="3.26.1";/*! @azure/msal-browser v3.26.1 2024-10-08 */class i_{static loggerCallback(e,n){switch(e){case fn.Error:console.error(n);return;case fn.Info:console.info(n);return;case fn.Verbose:console.debug(n);return;case fn.Warning:console.warn(n);return;default:console.log(n);return}}constructor(e){var c;this.browserEnvironment=typeof window<"u",this.config=One(e,this.browserEnvironment);let n;try{n=window[Sn.SessionStorage]}catch{}const r=n==null?void 0:n.getItem(lne),o=(c=n==null?void 0:n.getItem(une))==null?void 0:c.toLowerCase(),i=o==="true"?!0:o==="false"?!1:void 0,s={...this.config.system.loggerOptions},a=r&&Object.keys(fn).includes(r)?fn[r]:void 0;a&&(s.loggerCallback=i_.loggerCallback,s.logLevel=a),i!==void 0&&(s.piiLoggingEnabled=i),this.logger=new si(s,Yg,Fc),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Bc extends i_{getModuleName(){return Bc.MODULE_NAME}getId(){return Bc.ID}async initialize(){return this.available=typeof window<"u",this.available}}Bc.MODULE_NAME="";Bc.ID="StandardOperatingContext";/*! @azure/msal-browser v3.26.1 2024-10-08 */function Bi(t){return new TextDecoder().decode(Mne(t))}function Mne(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw Xe(m3)}const n=atob(e);return Uint8Array.from(n,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Lne{constructor(){this.dbName=CE,this.version=sne,this.tableName=ane,this.dbOpen=!1}async open(){return new Promise((e,n)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",o=>{const i=o;this.db=i.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>n(Xe(e_)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Xe(eu));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);s.addEventListener("success",a=>{const c=a;this.closeConnection(),n(c.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async setItem(e,n){return await this.validateDbIsOpen(),new Promise((r,o)=>{if(!this.db)return o(Xe(eu));const a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(n,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",c=>{this.closeConnection(),o(c)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Xe(eu));const s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);s.addEventListener("success",()=>{this.closeConnection(),n()}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,n)=>{if(!this.db)return n(Xe(eu));const i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",s=>{const a=s;this.closeConnection(),e(a.target.result)}),i.addEventListener("error",s=>{this.closeConnection(),n(s)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((n,r)=>{if(!this.db)return r(Xe(eu));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);s.addEventListener("success",a=>{const c=a;this.closeConnection(),n(c.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,n)=>{const r=window.indexedDB.deleteDatabase(CE),o=setTimeout(()=>n(!1),200);r.addEventListener("success",()=>(clearTimeout(o),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),r.addEventListener("error",()=>(clearTimeout(o),n(!1)))})}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Qg{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,n){this.cache.set(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Dne{constructor(e){this.inMemoryCache=new Qg,this.indexedDBCache=new Lne,this.logger=e}handleDatabaseAccessError(e){if(e instanceof Ld&&e.errorCode===e_)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const n=this.inMemoryCache.getItem(e);if(!n)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return n}async setItem(e,n){this.inMemoryCache.setItem(e,n);try{await this.indexedDBCache.setItem(e,n)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(n){this.handleDatabaseAccessError(n)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(n){this.handleDatabaseAccessError(n)}return e}async containsKey(e){const n=this.inMemoryCache.containsKey(e);if(!n)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return n}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Hc{constructor(e,n){this.logger=e,mne(e),this.cache=new Dne(this.logger),this.performanceClient=n}createNewGuid(){return Wi()}base64Encode(e){return t_(e)}base64Decode(e){return Bi(e)}base64UrlEncode(e){return om(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var d;const n=(d=this.performanceClient)==null?void 0:d.startMeasurement(R.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await vne(Hc.EXTRACTABLE,Hc.POP_KEY_USAGES),o=await xC(r.publicKey),i={e:o.e,kty:o.kty,n:o.n},s=Ax(i),a=await this.hashString(s),c=await xC(r.privateKey),u=await yne(c,!1,["sign"]);return await this.cache.setItem(a,{privateKey:u,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),n&&n.end({success:!0}),a}async removeTokenBindingKey(e){return await this.cache.removeItem(e),!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,n,r,o){var w;const i=(w=this.performanceClient)==null?void 0:w.startMeasurement(R.CryptoOptsSignJwt,o),s=await this.cache.getItem(n);if(!s)throw Xe(ZT);const a=await xC(s.publicKey),c=Ax(a),u=om(JSON.stringify({kid:n})),d=qT.getShrHeaderString({...r==null?void 0:r.header,alg:a.alg,kid:u}),f=om(d);e.cnf={jwk:JSON.parse(c)};const p=om(JSON.stringify(e)),g=`${f}.${p}`,b=new TextEncoder().encode(g),y=await bne(s.privateKey,b),C=Uy(new Uint8Array(y)),S=`${g}.${C}`;return i&&i.end({success:!0}),S}async hashString(e){return S3(e)}}Hc.POP_KEY_USAGES=["sign","verify"];Hc.EXTRACTABLE=!0;function Ax(t){return JSON.stringify(t,Object.keys(t).sort())}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Jg{constructor(e){this.validateWindowStorage(e),this.windowStorage=window[e]}validateWindowStorage(e){if(e!==Sn.LocalStorage&&e!==Sn.SessionStorage||!window[e])throw I3(E3)}getItem(e){return this.windowStorage.getItem(e)}setItem(e,n){this.windowStorage.setItem(e,n)}removeItem(e){this.windowStorage.removeItem(e)}getKeys(){return Object.keys(this.windowStorage)}containsKey(e){return this.windowStorage.hasOwnProperty(e)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function A3(t,e){if(!e)return null;try{return ti.parseRequestState(t,e).libraryState.meta}catch{throw Te(rd)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class SE extends od{constructor(e,n,r,o,i,s){super(e,r,o,i),this.COOKIE_LIFE_MULTIPLIER=24*60*60*1e3,this.cacheConfig=n,this.logger=o,this.internalStorage=new Qg,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupTemporaryCacheStorage(this.cacheConfig.temporaryCacheLocation,this.cacheConfig.cacheLocation),n.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=s}setupBrowserStorage(e){switch(e){case Sn.LocalStorage:case Sn.SessionStorage:try{return new Jg(e)}catch(n){this.logger.verbose(n);break}}return this.cacheConfig.cacheLocation=Sn.MemoryStorage,new Qg}setupTemporaryCacheStorage(e,n){switch(n){case Sn.LocalStorage:case Sn.SessionStorage:try{return new Jg(e||Sn.SessionStorage)}catch(r){return this.logger.verbose(r),this.internalStorage}case Sn.MemoryStorage:default:return this.internalStorage}}migrateCacheEntries(){const e=`${ae.CACHE_PREFIX}.${Qn.ID_TOKEN}`,n=`${ae.CACHE_PREFIX}.${Qn.CLIENT_INFO}`,r=`${ae.CACHE_PREFIX}.${Qn.ERROR}`,o=`${ae.CACHE_PREFIX}.${Qn.ERROR_DESC}`,i=this.browserStorage.getItem(e),s=this.browserStorage.getItem(n),a=this.browserStorage.getItem(r),c=this.browserStorage.getItem(o),u=[i,s,a,c];[Qn.ID_TOKEN,Qn.CLIENT_INFO,Qn.ERROR,Qn.ERROR_DESC].forEach((f,p)=>{const g=u[p];g&&this.setTemporaryCache(f,g,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.getItem(Bs.ACCOUNT_KEYS),n=this.getItem(`${Bs.TOKEN_KEYS}.${this.clientId}`);if(e&&n){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(o=>{if(this.isCredentialKey(o)){const i=this.getItem(o);if(i){const s=this.validateAndParseJson(i);if(s&&s.hasOwnProperty("credentialType"))switch(s.credentialType){case ut.ID_TOKEN:if(cx(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${o} found, saving key to token key map`);const a=s,c=this.updateCredentialCacheKey(o,a);this.addTokenKey(c,ut.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${o}`);break;case ut.ACCESS_TOKEN:case ut.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(ax(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${o} found, saving key to token key map`);const a=s,c=this.updateCredentialCacheKey(o,a);this.addTokenKey(c,ut.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${o}`);break;case ut.REFRESH_TOKEN:if(lx(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${o} found, saving key to token key map`);const a=s,c=this.updateCredentialCacheKey(o,a);this.addTokenKey(c,ut.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${o}`);break}}}if(this.isAccountKey(o)){const i=this.getItem(o);if(i){const s=this.validateAndParseJson(i);s&&$n.isAccountEntity(s)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${o} found, saving key to account key map`),this.addAccountKeyToMap(o))}}})}validateAndParseJson(e){try{const n=JSON.parse(e);return n&&typeof n=="object"?n:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,n){this.browserStorage.setItem(e,n)}getAccount(e,n){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,r,n)}getCachedAccountEntity(e){const n=this.getItem(e);if(!n)return this.removeAccountKeyFromMap(e),null;const r=this.validateAndParseJson(n);return!r||!$n.isAccountEntity(r)?(this.removeAccountKeyFromMap(e),null):od.toObject(new $n,r)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");const n=e.generateAccountKey();this.setItem(n,JSON.stringify(e)),this.addAccountKeyToMap(n)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem(Bs.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const n=this.getAccountKeys();n.indexOf(e)===-1?(n.push(e),this.setItem(Bs.ACCOUNT_KEYS,JSON.stringify(n)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const n=this.getAccountKeys(),r=n.indexOf(e);r>-1?(n.splice(r,1),this.setItem(Bs.ACCOUNT_KEYS,JSON.stringify(n)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,ut.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,ut.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,ut.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem(`${Bs.TOKEN_KEYS}.${this.clientId}`);if(e){const n=this.validateAndParseJson(e);if(n&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("accessToken")&&n.hasOwnProperty("refreshToken"))return n;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,n){this.logger.trace("BrowserCacheManager addTokenKey called");const r=this.getTokenKeys();switch(n){case ut.ID_TOKEN:r.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),r.idToken.push(e));break;case ut.ACCESS_TOKEN:r.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),r.accessToken.push(e));break;case ut.REFRESH_TOKEN:r.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),r.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${n}`),Te(hE)}this.setItem(`${Bs.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}removeTokenKey(e,n){this.logger.trace("BrowserCacheManager removeTokenKey called");const r=this.getTokenKeys();switch(n){case ut.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const o=r.idToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),r.idToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case ut.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const i=r.accessToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),r.accessToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case ut.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const s=r.refreshToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),r.refreshToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${n}`),Te(hE)}this.setItem(`${Bs.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}getIdTokenCredential(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,ut.ID_TOKEN),null;const r=this.validateAndParseJson(n);return!r||!cx(r)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,ut.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),r)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const n=du(e);this.setItem(n,JSON.stringify(e)),this.addTokenKey(n,ut.ID_TOKEN)}getAccessTokenCredential(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,ut.ACCESS_TOKEN),null;const r=this.validateAndParseJson(n);return!r||!ax(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,ut.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),r)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const n=du(e);this.setItem(n,JSON.stringify(e)),this.addTokenKey(n,ut.ACCESS_TOKEN)}getRefreshTokenCredential(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,ut.REFRESH_TOKEN),null;const r=this.validateAndParseJson(n);return!r||!lx(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,ut.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),r)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const n=du(e);this.setItem(n,JSON.stringify(e)),this.addTokenKey(n,ut.REFRESH_TOKEN)}getAppMetadata(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!Tee(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const n=Iee(e);this.setItem(n,JSON.stringify(e))}getServerTelemetry(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!Eee(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,n){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(n))}getAuthorityMetadata(e){const n=this.internalStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&_ee(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(n=>this.isAuthorityMetadata(n))}setWrapperMetadata(e,n){this.internalStorage.setItem(rm.WRAPPER_SKU,e),this.internalStorage.setItem(rm.WRAPPER_VER,n)}getWrapperMetadata(){const e=this.internalStorage.getItem(rm.WRAPPER_SKU)||ae.EMPTY_STRING,n=this.internalStorage.getItem(rm.WRAPPER_VER)||ae.EMPTY_STRING;return[e,n]}setAuthorityMetadata(e,n){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(){const e=this.generateCacheKey(Qn.ACTIVE_ACCOUNT_FILTERS),n=this.getItem(e);if(!n){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const o=this.generateCacheKey(Qn.ACTIVE_ACCOUNT),i=this.getItem(o);if(!i)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const s=this.getAccountInfoFilteredBy({localAccountId:i});return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(s),s):null}const r=this.validateAndParseJson(n);return r?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const n=this.generateCacheKey(Qn.ACTIVE_ACCOUNT_FILTERS),r=this.generateCacheKey(Qn.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");const o={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(n,JSON.stringify(o)),this.browserStorage.setItem(r,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(n),this.browserStorage.removeItem(r)}getThrottlingCache(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(n);return!r||!wee(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,n){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(n))}getTemporaryCache(e,n){const r=n?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const i=this.getItemCookie(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===Sn.LocalStorage){const i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,n,r){const o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.setItemCookie(o,n))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.clearItemCookie(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{(e.indexOf(ae.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{(e.indexOf(ae.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(e)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,n){e.addQueueMeasurement(R.ClearTokensAndKeysWithClaims,n);const r=this.getTokenKeys(),o=[];r.accessToken.forEach(i=>{const s=this.getAccessTokenCredential(i);s!=null&&s.requestedClaimsHash&&i.includes(s.requestedClaimsHash.toLowerCase())&&o.push(this.removeAccessToken(i))}),await Promise.all(o),o.length>0&&this.logger.warning(`${o.length} access tokens with claims in the cache keys have been removed from the cache.`)}setItemCookie(e,n,r){let o=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=Lax;`;if(r){const i=this.getCookieExpirationTime(r);o+=`expires=${i};`}this.cacheConfig.secureCookies&&(o+="Secure;"),document.cookie=o}getItemCookie(e){const n=`${encodeURIComponent(e)}=`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){let i=r[o];for(;i.charAt(0)===" ";)i=i.substring(1);if(i.indexOf(n)===0)return decodeURIComponent(i.substring(n.length,i.length))}return ae.EMPTY_STRING}clearMsalCookies(){const e=`${ae.CACHE_PREFIX}.${this.clientId}`;document.cookie.split(";").forEach(r=>{for(;r.charAt(0)===" ";)r=r.substring(1);if(r.indexOf(e)===0){const o=r.split("=")[0];this.clearItemCookie(o)}})}clearItemCookie(e){this.setItemCookie(e,ae.EMPTY_STRING,-1)}getCookieExpirationTime(e){const n=new Date;return new Date(n.getTime()+e*this.COOKIE_LIFE_MULTIPLIER).toUTCString()}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):ei.startsWith(e,ae.CACHE_PREFIX)||ei.startsWith(e,Qn.ADAL_ID_TOKEN)?e:`${ae.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:n}}=ti.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${zt.AUTHORITY}.${n}`)}generateNonceKey(e){const{libraryState:{id:n}}=ti.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${zt.NONCE_IDTOKEN}.${n}`)}generateStateKey(e){const{libraryState:{id:n}}=ti.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${zt.REQUEST_STATE}.${n}`)}getCachedAuthority(e){const n=this.generateStateKey(e),r=this.getTemporaryCache(n);if(!r)return null;const o=this.generateAuthorityKey(r);return this.getTemporaryCache(o)}updateCacheEntries(e,n,r,o,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const s=this.generateStateKey(e);this.setTemporaryCache(s,e,!1);const a=this.generateNonceKey(e);this.setTemporaryCache(a,n,!1);const c=this.generateAuthorityKey(e);if(this.setTemporaryCache(c,r,!1),i){const u={credential:i.homeAccountId,type:ro.HOME_ACCOUNT_ID};this.setTemporaryCache(zt.CCS_CREDENTIAL,JSON.stringify(u),!0)}else if(o){const u={credential:o,type:ro.UPN};this.setTemporaryCache(zt.CCS_CREDENTIAL,JSON.stringify(u),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(n=>{n.indexOf(e)!==-1&&this.removeTemporaryItem(n)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(zt.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(zt.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(zt.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(zt.CORRELATION_ID)),this.removeTemporaryItem(this.generateCacheKey(zt.CCS_CREDENTIAL)),this.removeTemporaryItem(this.generateCacheKey(zt.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const n=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(n);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r||ae.EMPTY_STRING)}this.clearMsalCookies()}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(n=>{if(n.indexOf(zt.REQUEST_STATE)===-1)return;const r=this.temporaryCacheStorage.getItem(n);if(!r)return;const o=A3(this.cryptoImpl,r);o&&o.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r))}),this.clearMsalCookies(),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const n=t_(JSON.stringify(e));this.setTemporaryCache(zt.REQUEST_PARAMS,n,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const n=this.getTemporaryCache(zt.REQUEST_PARAMS,!0);if(!n)throw Xe(n3);let r;try{r=JSON.parse(Bi(n))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${n}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),Xe(r3)}if(this.removeTemporaryItem(this.generateCacheKey(zt.REQUEST_PARAMS)),!r.authority){const o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw Xe(JT);r.authority=i}return r}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(zt.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const n=this.validateAndParseJson(e);return n||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const n=this.getInteractionInProgress();return e?n===this.clientId:!!n}getInteractionInProgress(){const e=`${ae.CACHE_PREFIX}.${zt.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){const n=`${ae.CACHE_PREFIX}.${zt.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw Xe(q5);this.setTemporaryCache(n,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(n)}getLegacyLoginHint(){const e=this.getTemporaryCache(Qn.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(Qn.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const n=this.getTemporaryCache(Qn.ID_TOKEN,!0);n&&(this.browserStorage.removeItem(this.generateCacheKey(Qn.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const r=n||e;if(r){const o=fl(r,Bi);if(o.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),o.preferred_username;if(o.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),o.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,n){const r=du(n);if(e!==r){const o=this.getItem(e);if(o)return this.browserStorage.removeItem(e),this.setItem(r,o),this.logger.verbose(`Updated an outdated ${n.credentialType} cache key`),r;this.logger.error(`Attempted to update an outdated ${n.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}async hydrateCache(e,n){var a,c,u;const r=Ry((a=e.account)==null?void 0:a.homeAccountId,(c=e.account)==null?void 0:c.environment,e.idToken,this.clientId,e.tenantId);let o;n.claims&&(o=await this.cryptoImpl.hashString(n.claims));const i=Ny((u=e.account)==null?void 0:u.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,Bi,void 0,e.tokenType,void 0,n.sshKid,n.claims,o),s={idToken:r,accessToken:i};return this.saveCacheRecord(s)}async saveCacheRecord(e,n,r){try{await super.saveCacheRecord(e,n,r)}catch(o){if(o instanceof yc&&this.performanceClient&&r)try{const i=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:i.refreshToken.length,cacheIdCount:i.idToken.length,cacheAtCount:i.accessToken.length},r)}catch{}throw o}}}const jne=(t,e)=>{const n={cacheLocation:Sn.MemoryStorage,temporaryCacheLocation:Sn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new SE(t,n,Bg,e)};/*! @azure/msal-browser v3.26.1 2024-10-08 */function Une(t,e,n,r){return t.verbose("getAllAccounts called"),n?e.getAllAccounts(r):[]}function Fne(t,e,n){if(e.trace("getAccount called"),Object.keys(t).length===0)return e.warning("getAccount: No accountFilter provided"),null;const r=n.getAccountInfoFilteredBy(t);return r?(e.verbose("getAccount: Account matching provided filter found, returning"),r):(e.verbose("getAccount: No matching account found, returning null"),null)}function Bne(t,e,n){if(e.trace("getAccountByUsername called"),!t)return e.warning("getAccountByUsername: No username provided"),null;const r=n.getAccountInfoFilteredBy({username:t});return r?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),r):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function Hne(t,e,n){if(e.trace("getAccountByHomeId called"),!t)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const r=n.getAccountInfoFilteredBy({homeAccountId:t});return r?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),r):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function zne(t,e,n){if(e.trace("getAccountByLocalId called"),!t)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const r=n.getAccountInfoFilteredBy({localAccountId:t});return r?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),r):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function Vne(t,e){e.setActiveAccount(t)}function $ne(t){return t.getActiveAccount()}/*! @azure/msal-browser v3.26.1 2024-10-08 */const le={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};/*! @azure/msal-browser v3.26.1 2024-10-08 */class k3{constructor(e){this.eventCallbacks=new Map,this.logger=e||new si({})}addEventCallback(e,n,r){if(typeof window<"u"){const o=r||To();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,n||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,n,r,o){if(typeof window<"u"){const i={eventType:e,interactionType:n||null,payload:r||null,error:o||null,timestamp:Date.now()};this.eventCallbacks.forEach(([s,a],c)=>{(a.length===0||a.includes(e))&&(this.logger.verbose(`Emitting event to callback ${c}: ${e}`),s.apply(null,[i]))})}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class x3{constructor(e,n,r,o,i,s,a,c,u){this.config=e,this.browserStorage=n,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=c,this.correlationId=u||Wi(),this.logger=o.clone(eo.MSAL_SKU,Fc,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e){if(e){$n.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount($n.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const n=e||this.config.auth.redirectUri||Jo();return It.getAbsoluteUrl(n,Jo())}initializeServerTelemetryManager(e,n){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Lf(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:n}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(R.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.requestAuthority||this.config.auth.authority,s=r!=null&&r.length?r==="true":this.config.auth.instanceAware,a=n&&s?this.config.auth.authority.replace(It.getDomainFromUrl(i),n.environment):i,c=hr.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),u=await Le(L5,R.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(c,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(n&&!u.isAlias(n.environment))throw Jt(A5);return u}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const Gne=32;async function Kne(t,e,n){t.addQueueMeasurement(R.GeneratePkceCodes,n);const r=pl(Wne,R.GenerateCodeVerifier,e,t,n)(t,e,n),o=await Le(qne,R.GenerateCodeChallengeFromVerifier,e,t,n)(r,t,e,n);return{verifier:r,challenge:o}}function Wne(t,e,n){try{const r=new Uint8Array(Gne);return pl(gne,R.GetRandomValues,e,t,n)(r),Uy(r)}catch{throw Xe(YT)}}async function qne(t,e,n,r){e.addQueueMeasurement(R.GenerateCodeChallengeFromVerifier,r);try{const o=await Le(C3,R.Sha256Digest,n,e,r)(t,e,r);return Uy(new Uint8Array(o))}catch{throw Xe(YT)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */async function s_(t,e,n,r){n.addQueueMeasurement(R.InitializeBaseRequest,t.correlationId);const o=t.authority||e.auth.authority,i=[...t&&t.scopes||[]],s={...t,correlationId:t.correlationId,authority:o,scopes:i};if(!s.authenticationScheme)s.authenticationScheme=Ht.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===Ht.SSH){if(!t.sshJwk)throw Jt(Py);if(!t.sshKid)throw Jt(I5)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&t.claims&&!ei.isEmptyObj(t.claims)&&(s.requestedClaimsHash=await S3(t.claims)),s}async function Yne(t,e,n,r,o){r.addQueueMeasurement(R.InitializeSilentRequest,t.correlationId);const i=await Le(s_,R.InitializeBaseRequest,o,r,t.correlationId)(t,n,r,o);return{...t,...i,account:e,forceRefresh:t.forceRefresh||!1}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class Dd extends x3{async initializeAuthorizationCodeRequest(e){this.performanceClient.addQueueMeasurement(R.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);const n=await Le(Kne,R.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),r={...e,redirectUri:e.redirectUri,code:ae.EMPTY_STRING,codeVerifier:n.verifier};return e.codeChallenge=n.challenge,e.codeChallengeMethod=ae.S256_CODE_CHALLENGE_METHOD,r}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const n={correlationId:this.correlationId||Wi(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),n.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",n.correlationId),n.postLogoutRedirectUri=It.getAbsoluteUrl(e.postLogoutRedirectUri,Jo())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",n.correlationId),n.postLogoutRedirectUri=It.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Jo())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",n.correlationId),n.postLogoutRedirectUri=It.getAbsoluteUrl(Jo(),Jo())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",n.correlationId),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(R.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const n=await Le(this.getClientConfiguration.bind(this),R.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new U5(n,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:n,requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}=e;this.performanceClient.addQueueMeasurement(R.StandardInteractionClientGetClientConfiguration,this.correlationId);const a=await Le(this.getDiscoveredAuthority.bind(this),R.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}),c=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:c.loggerCallback,piiLoggingEnabled:c.piiLoggingEnabled,logLevel:c.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:n,libraryInfo:{sku:eo.MSAL_SKU,version:Fc,cpu:ae.EMPTY_STRING,os:ae.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,n){this.performanceClient.addQueueMeasurement(R.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),o={interactionType:n},i=ti.setRequestState(this.browserCrypto,e&&e.state||ae.EMPTY_STRING,o),a={...await Le(s_,R.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:i,nonce:e.nonce||Wi(),responseMode:this.config.auth.OIDCOptions.serverResponseType},c=e.account||this.browserStorage.getActiveAccount();if(c&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${c.homeAccountId}`,this.correlationId),a.account=c),!a.loginHint&&!c){const u=this.browserStorage.getLegacyLoginHint();u&&(a.loginHint=u)}return a}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const Qne="ContentError",R3="user_switch";/*! @azure/msal-browser v3.26.1 2024-10-08 */const Jne="USER_INTERACTION_REQUIRED",Xne="USER_CANCEL",Zne="NO_NETWORK",ere="PERSISTENT_ERROR",tre="DISABLED",nre="ACCOUNT_UNAVAILABLE";/*! @azure/msal-browser v3.26.1 2024-10-08 */const rre=-2147186943,ore={[R3]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class ki extends St{constructor(e,n,r){super(e,n),Object.setPrototypeOf(this,ki.prototype),this.name="NativeAuthError",this.ext=r}}function tu(t){if(t.ext&&t.ext.status&&(t.ext.status===ere||t.ext.status===tre)||t.ext&&t.ext.error&&t.ext.error===rre)return!0;switch(t.errorCode){case Qne:return!0;default:return!1}}function EE(t,e,n){if(n&&n.status)switch(n.status){case nre:return gE(D5);case Jne:return new kr(t,e);case Xne:return Xe(Uc);case Zne:return Xe(Kg)}return new ki(t,ore[t]||e,n)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class N3 extends Dd{async acquireToken(e){this.performanceClient.addQueueMeasurement(R.SilentCacheClientAcquireToken,e.correlationId);const n=this.initializeServerTelemetryManager(un.acquireTokenSilent_silentFlow),r=await Le(this.getClientConfiguration.bind(this),R.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new Vte(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const s=(await Le(o.acquireCachedToken.bind(o),R.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),s}catch(i){throw i instanceof Ld&&i.errorCode===ZT&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}}logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(n==null?void 0:n.account)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */const RC={BROKER_CLIENT_ID:"brk_client_id",BROKER_REDIRECT_URI:"brk_redirect_uri"};class ku extends x3{constructor(e,n,r,o,i,s,a,c,u,d,f,p){var v;super(e,n,r,o,i,s,c,u,p),this.apiId=a,this.accountId=d,this.nativeMessageHandler=u,this.nativeStorageManager=f,this.silentCacheClient=new N3(e,this.nativeStorageManager,r,o,i,s,c,u,p),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);const g=this.nativeMessageHandler.getExtensionId()===fu.PREFERRED_EXTENSION_ID?"chrome":(v=this.nativeMessageHandler.getExtensionId())!=null&&v.length?"unknown":void 0;this.skus=Lf.makeExtraSkuString({libraryName:eo.MSAL_SKU,libraryVersion:Fc,extensionName:g,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[_te]:this.skus}}async acquireToken(e){this.performanceClient.addQueueMeasurement(R.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const n=this.performanceClient.startMeasurement(R.NativeInteractionClientAcquireToken,e.correlationId),r=Gi();try{const o=await this.initializeNativeRequest(e);try{const u=await this.acquireTokensFromCache(this.accountId,o);return n.end({success:!0,isNativeBroker:!1,fromCache:!0}),u}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...i}=o,s={method:lc.GetToken,request:i},a=await this.nativeMessageHandler.sendMessage(s),c=this.validateNativeResponse(a);return await this.handleNativeResponse(c,o,r).then(u=>(n.end({success:!0,isNativeBroker:!0,requestId:u.requestId}),this.serverTelemetryManager.clearNativeBrokerErrorCode(),u)).catch(u=>{throw n.end({success:!1,errorCode:u.errorCode,subErrorCode:u.subError,isNativeBroker:!0}),u})}catch(o){throw o instanceof ki&&this.serverTelemetryManager.setNativeBrokerErrorCode(o.errorCode),o}}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:kn.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}async acquireTokensFromCache(e,n){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),Te(uE);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!r)throw Te(uE);try{const o=this.createSilentCacheRequest(n,r),i=await this.silentCacheClient.acquireToken(o),s={...r,idTokenClaims:i==null?void 0:i.idTokenClaims,idToken:i==null?void 0:i.idToken};return{...i,account:s}}catch(o){throw o}}async acquireTokenRedirect(e,n){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const o=await this.initializeNativeRequest(r),i={method:lc.GetToken,request:o};try{const c=await this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(c)}catch(c){if(c instanceof ki&&(this.serverTelemetryManager.setNativeBrokerErrorCode(c.errorCode),tu(c)))throw c}this.browserStorage.setTemporaryCache(zt.NATIVE_REQUEST,JSON.stringify(o),!0);const s={apiId:un.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);n.end({success:!0}),await this.navigationClient.navigateExternal(a,s)}async handleRedirectPromise(e,n){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&n&&(e==null||e.addFields({errorCode:"no_cached_request"},n)),null;const{prompt:o,...i}=r;o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(zt.NATIVE_REQUEST));const s={method:lc.GetToken,request:i},a=Gi();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const c=await this.nativeMessageHandler.sendMessage(s);this.validateNativeResponse(c);const u=this.handleNativeResponse(c,i,a);this.browserStorage.setInteractionInProgress(!1);const d=await u;return this.serverTelemetryManager.clearNativeBrokerErrorCode(),d}catch(c){throw this.browserStorage.setInteractionInProgress(!1),c}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,n,r){var d;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const o=fl(e.id_token,Bi),i=this.createHomeAccountIdentifier(e,o),s=(d=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n.accountId}))==null?void 0:d.homeAccountId;if(i!==s&&e.account.id!==n.accountId)throw EE(R3);const a=await this.getDiscoveredAuthority({requestAuthority:n.authority}),c=KT(this.browserStorage,a,i,Bi,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger),u=await this.generateAuthenticationResult(e,n,o,c,a.canonicalAuthority,r);return this.cacheAccount(c),this.cacheNativeTokens(e,n,i,o,e.access_token,u.tenantId,r),u}createHomeAccountIdentifier(e,n){return $n.generateHomeAccountId(e.client_info||ae.EMPTY_STRING,Ko.Default,this.logger,this.browserCrypto,n)}generateScopes(e,n){return e.scope?kn.fromString(e.scope):kn.fromString(n.scope)}async generatePopAccessToken(e,n){if(n.tokenType===Ht.POP&&n.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new Dc(this.browserCrypto),o={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce};if(!n.keyId)throw Te(MT);return r.signPopToken(e.access_token,n.keyId,o)}else return e.access_token}async generateAuthenticationResult(e,n,r,o,i,s){const a=this.addTelemetryFromNativeResponse(e),c=e.scope?kn.fromString(e.scope):kn.fromString(n.scope),u=e.account.properties||{},d=u.UID||r.oid||r.sub||ae.EMPTY_STRING,f=u.TenantId||r.tid||ae.EMPTY_STRING,p=HT(o.getAccountInfo(),void 0,r,e.id_token);p.nativeAccountId!==e.account.id&&(p.nativeAccountId=e.account.id);const g=await this.generatePopAccessToken(e,n),v=n.tokenType===Ht.POP?Ht.POP:Ht.BEARER;return{authority:i,uniqueId:d,tenantId:f,scopes:c.asArray(),account:p,idToken:e.id_token,idTokenClaims:r,accessToken:g,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:new Date(Number(s+e.expires_in)*1e3),tokenType:v,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(n=>{this.logger.error(`Error occurred while removing account context from browser storage. ${n}`)})}cacheNativeTokens(e,n,r,o,i,s,a){const c=Ry(r,n.authority,e.id_token||"",n.clientId,o.tid||""),u=n.tokenType===Ht.POP?ae.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,d=a+u,f=this.generateScopes(e,n),p=Ny(r,n.authority,i,n.clientId,o.tid||s,f.printScopes(),d,0,Bi,void 0,n.tokenType,void 0,n.keyId),g={idToken:c,accessToken:p};this.nativeStorageManager.saveCacheRecord(g,n.storeInCache)}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw WD(xy,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const n=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:n,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new It(n);r.validateAsUri();const{scopes:o,...i}=e,s=new kn(o||[]);s.appendScopes(ga);const a=()=>{switch(this.apiId){case un.ssoSilent:case un.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),er.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case er.NONE:case er.CONSENT:case er.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),Xe(p3)}},c={...i,accountId:this.accountId,clientId:this.config.auth.clientId,authority:r.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:a(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(c.signPopToken&&e.popKid)throw Xe(g3);if(this.handleExtraBrokerParams(c),c.extraParameters=c.extraParameters||{},c.extraParameters.telemetry=fu.MATS_TELEMETRY,e.authenticationScheme===Ht.POP){const u={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},d=new Dc(this.browserCrypto);let f;if(c.keyId)f=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:c.keyId})),c.signPopToken=!1;else{const p=await Le(d.generateCnf.bind(d),R.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(u,this.logger);f=p.reqCnfString,c.keyId=p.kid,c.signPopToken=!0}c.reqCnf=f}return this.addRequestSKUs(c),c}handleExtraBrokerParams(e){if(e.extraParameters&&e.extraParameters.hasOwnProperty(RC.BROKER_CLIENT_ID)&&e.extraParameters.hasOwnProperty(RC.BROKER_REDIRECT_URI)&&e.extraParameters.hasOwnProperty(id)){const n=e.extraParameters[id],r=e.redirectUri,o=e.extraParameters[RC.BROKER_REDIRECT_URI];e.extraParameters={child_client_id:n,child_redirect_uri:r},e.redirectUri=o}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class ji{constructor(e,n,r,o){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(R.NativeMessageHandlerHandshake)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const n={channel:fu.CHANNEL_ID,extensionId:this.extensionId,responseId:Wi(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(n)}`),this.messageChannel.port1.postMessage(n),new Promise((r,o)=>{this.resolvers.set(n.responseId,{resolve:r,reject:o})})}static async createProvider(e,n,r){e.trace("NativeMessageHandler - createProvider called.");try{const o=new ji(e,n,r,fu.PREFERRED_EXTENSION_ID);return await o.sendHandshakeRequest(),o}catch{const i=new ji(e,n,r);return await i.sendHandshakeRequest(),i}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:fu.CHANNEL_ID,extensionId:this.extensionId,responseId:Wi(),body:{method:lc.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=n=>{this.onChannelMessage(n)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((n,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:n,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(Xe(d3)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const n=e.data;if(!(!n.channel||n.channel!==fu.CHANNEL_ID)&&!(n.extensionId&&n.extensionId!==this.extensionId)&&n.body.method===lc.HandshakeRequest){const r=this.handshakeResolvers.get(n.responseId);if(!r){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${n.responseId}`);return}this.logger.verbose(n.extensionId?`Extension with id: ${n.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(Xe(h3))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const n=e.data,r=this.resolvers.get(n.responseId),o=this.handshakeResolvers.get(n.responseId);try{const i=n.body.method;if(i===lc.Response){if(!r)return;const s=n.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")r.reject(EE(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?r.reject(EE(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result);else throw WD(xy,"Event does not contain result.");this.resolvers.delete(n.responseId)}else if(i===lc.HandshakeResponse){if(!o){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${n.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(n.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,n,r,o){if(n.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return n.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return n.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case Ht.BEARER:case Ht.POP:return n.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return n.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class a_{constructor(e,n,r,o,i){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}async handleCodeResponse(e,n){this.performanceClient.addQueueMeasurement(R.HandleCodeResponse,n.correlationId);let r;try{r=this.authModule.handleFragmentResponse(e,n.state)}catch(o){throw o instanceof Ki&&o.subError===Uc?Xe(Uc):o}return Le(this.handleCodeResponseFromServer.bind(this),R.HandleCodeResponseFromServer,this.logger,this.performanceClient,n.correlationId)(r,n)}async handleCodeResponseFromServer(e,n,r=!0){if(this.performanceClient.addQueueMeasurement(R.HandleCodeResponseFromServer,n.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await Le(this.authModule.updateAuthority.bind(this.authModule),R.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,n.correlationId)(e.cloud_instance_host_name,n.correlationId),r&&(e.nonce=n.nonce||void 0),e.state=n.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const i=this.createCcsCredentials(n);i&&(this.authCodeRequest.ccsCredential=i)}return await Le(this.authModule.acquireToken.bind(this.authModule),R.AuthClientAcquireToken,this.logger,this.performanceClient,n.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:ro.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:ro.UPN}:null}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function P3(t,e,n){const r=Vg(t);if(!r)throw x5(t)?(n.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${e} detected is: ${t}`),Xe(G5)):(n.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),Xe($5));return r}function ire(t,e,n){if(!t.state)throw Xe(QT);const r=A3(e,t.state);if(!r)throw Xe(K5);if(r.interactionType!==n)throw Xe(W5)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class sre extends Dd{constructor(e,n,r,o,i,s,a,c,u,d){super(e,n,r,o,i,s,a,u,d),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c}acquireToken(e){try{const r={popupName:this.generatePopupName(e.scopes||ga,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(e,r))}catch(n){return Promise.reject(n)}}logout(e){try{this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,o,i))}catch(n){return Promise.reject(n)}}async acquireTokenPopupAsync(e,n){var i;this.logger.verbose("acquireTokenPopupAsync called");const r=this.initializeServerTelemetryManager(un.acquireTokenPopup),o=await Le(this.initializeAuthorizationRequest.bind(this),R.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,Ee.Popup);_3(o.authority);try{const s=await Le(this.initializeAuthorizationCodeRequest.bind(this),R.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(o),a=await Le(this.createAuthCodeClient.bind(this),R.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),c=ji.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let u;c&&(u=this.performanceClient.startMeasurement(R.FetchAccountIdWithNativeBroker,e.correlationId));const d=await a.getAuthCodeUrl({...o,nativeBroker:c}),f=new a_(a,this.browserStorage,s,this.logger,this.performanceClient),p=this.initiateAuthRequest(d,n);this.eventHandler.emitEvent(le.POPUP_OPENED,Ee.Popup,{popupWindow:p},null);const g=await this.monitorPopupForHash(p,n.popupWindowParent),v=pl(P3,R.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(g,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(Ai.removeThrottle(this.browserStorage,this.config.auth.clientId,s),v.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),u&&u.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw Xe(vp);const y=new ku(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,un.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,v.accountId,this.nativeStorage,o.correlationId),{userRequestState:C}=ti.parseRequestState(this.browserCrypto,o.state);return await y.acquireToken({...o,state:C,prompt:void 0})}return await f.handleCodeResponse(v,o)}catch(s){throw(i=n.popup)==null||i.close(),s instanceof St&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),s}}async logoutPopupAsync(e,n,r,o){var s,a,c,u;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(le.LOGOUT_START,Ee.Popup,e);const i=this.initializeServerTelemetryManager(un.logoutPopup);try{await this.clearCacheOnLogout(e.account);const d=await Le(this.createAuthCodeClient.bind(this),R.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:r,account:e.account||void 0});try{d.authority.endSessionEndpoint}catch{if((s=e.account)!=null&&s.homeAccountId&&e.postLogoutRedirectUri&&d.authority.protocolMode===hs.OIDC){if(this.browserStorage.removeAccount((a=e.account)==null?void 0:a.homeAccountId),this.eventHandler.emitEvent(le.LOGOUT_SUCCESS,Ee.Popup,e),o){const g={apiId:un.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},v=It.getAbsoluteUrl(o,Jo());await this.navigationClient.navigateInternal(v,g)}(c=n.popup)==null||c.close();return}}const f=d.getLogoutUri(e);this.eventHandler.emitEvent(le.LOGOUT_SUCCESS,Ee.Popup,e);const p=this.openPopup(f,n);if(this.eventHandler.emitEvent(le.POPUP_OPENED,Ee.Popup,{popupWindow:p},null),await this.monitorPopupForHash(p,n.popupWindowParent).catch(()=>{}),o){const g={apiId:un.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},v=It.getAbsoluteUrl(o,Jo());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${v}`),await this.navigationClient.navigateInternal(v,g)}else this.logger.verbose("No main window navigation requested")}catch(d){throw(u=n.popup)==null||u.close(),d instanceof St&&(d.setCorrelationId(this.correlationId),i.cacheFailedRequest(d)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(le.LOGOUT_FAILURE,Ee.Popup,null,d),this.eventHandler.emitEvent(le.LOGOUT_END,Ee.Popup),d}this.eventHandler.emitEvent(le.LOGOUT_END,Ee.Popup)}initiateAuthRequest(e,n){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,n);throw this.logger.error("Navigate url is empty"),Xe(Dy)}monitorPopupForHash(e,n){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const i=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),o(Xe(Uc));return}let s="";try{s=e.location.href}catch{}if(!s||s==="about:blank")return;clearInterval(i);let a="";const c=this.config.auth.OIDCOptions.serverResponseType;e&&(c===gp.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,n)})}openPopup(e,n){try{let r;if(n.popup?(r=n.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,n)),!r)throw Xe(Q5);return r.focus&&r.focus(),this.currentWindow=r,n.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),this.browserStorage.setInteractionInProgress(!1),Xe(Y5)}}openSizedPopup(e,{popupName:n,popupWindowAttributes:r,popupWindowParent:o}){var g,v,b,y;const i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let u=(g=r.popupSize)==null?void 0:g.width,d=(v=r.popupSize)==null?void 0:v.height,f=(b=r.popupPosition)==null?void 0:b.top,p=(y=r.popupPosition)==null?void 0:y.left;return(!u||u<0||u>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),u=eo.POPUP_WIDTH),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),d=eo.POPUP_HEIGHT),(!f||f<0||f>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),f=Math.max(0,c/2-eo.POPUP_HEIGHT/2+s)),(!p||p<0||p>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),p=Math.max(0,a/2-eo.POPUP_WIDTH/2+i)),o.open(e,n,`width=${u}, height=${d}, top=${f}, left=${p}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(Ee.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,n){e.close(),n.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,n){return`${eo.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){const n=e.account&&e.account.homeAccountId;return`${eo.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${n}.${this.correlationId}`}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class kx{constructor(e,n,r,o,i){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}async initiateAuthRequest(e,n){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){n.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(zt.ORIGIN_URI,n.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(zt.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:un.acquireTokenRedirect,timeout:n.redirectTimeout,noHistory:!1};if(typeof n.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),n.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await n.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await n.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),Xe(Dy)}async handleCodeResponse(e,n){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const r=this.browserStorage.generateStateKey(n),o=this.browserStorage.getTemporaryCache(r);if(!o)throw Te(Fg,"Cached State");let i;try{i=this.authModule.handleFragmentResponse(e,o)}catch(u){throw u instanceof Ki&&u.subError===Uc?Xe(Uc):u}const s=this.browserStorage.generateNonceKey(o),a=this.browserStorage.getTemporaryCache(s);if(this.authCodeRequest.code=i.code,i.cloud_instance_host_name&&await Le(this.authModule.updateAuthority.bind(this.authModule),R.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(i.cloud_instance_host_name,this.authCodeRequest.correlationId),i.nonce=a||void 0,i.state=o,i.client_info)this.authCodeRequest.clientInfo=i.client_info;else{const u=this.checkCcsCredentials();u&&(this.authCodeRequest.ccsCredential=u)}const c=await this.authModule.acquireToken(this.authCodeRequest,i);return this.browserStorage.cleanRequestByState(n),c}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache(zt.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function are(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const t=window.performance.getEntriesByType("navigation"),e=t.length?t[0]:void 0;return e==null?void 0:e.type}class cre extends Dd{constructor(e,n,r,o,i,s,a,c,u,d){super(e,n,r,o,i,s,a,u,d),this.nativeStorage=c}async acquireToken(e){const n=await Le(this.initializeAuthorizationRequest.bind(this),R.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,Ee.Redirect);this.browserStorage.updateCacheEntries(n.state,n.nonce,n.authority,n.loginHint||"",n.account||null);const r=this.initializeServerTelemetryManager(un.acquireTokenRedirect),o=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(n.state),this.eventHandler.emitEvent(le.RESTORE_FROM_BFCACHE,Ee.Redirect))};try{const i=await Le(this.initializeAuthorizationCodeRequest.bind(this),R.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(n),s=await Le(this.createAuthCodeClient.bind(this),R.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),a=new kx(s,this.browserStorage,i,this.logger,this.performanceClient),c=await s.getAuthCodeUrl({...n,nativeBroker:ji.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}),u=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${u}`),window.addEventListener("pageshow",o),await a.initiateAuthRequest(c,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:u,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(i){throw i instanceof St&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),window.removeEventListener("pageshow",o),this.browserStorage.cleanRequestByState(n.state),i}}async handleRedirectPromise(e="",n){const r=this.initializeServerTelemetryManager(un.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[o,i]=this.getRedirectResponse(e||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(Ee.Redirect),are()!=="back_forward"?n.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const s=this.browserStorage.getTemporaryCache(zt.ORIGIN_URI,!0)||ae.EMPTY_STRING,a=It.removeHashFromUrl(s),c=It.removeHashFromUrl(window.location.href);if(a===c&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),s.indexOf("#")>-1&&wne(s),await this.handleResponse(o,r);if(this.config.auth.navigateToLoginRequestUrl){if(!r_()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(zt.URL_HASH,i,!0);const u={apiId:un.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let d=!0;if(!s||s==="null"){const f=Tne();this.browserStorage.setTemporaryCache(zt.ORIGIN_URI,f,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),d=await this.navigationClient.navigateInternal(f,u)}else this.logger.verbose(`Navigating to loginRequestUrl: ${s}`),d=await this.navigationClient.navigateInternal(s,u);if(!d)return await this.handleResponse(o,r)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(o,r);return null}catch(o){throw o instanceof St&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.browserStorage.cleanRequestByInteractionType(Ee.Redirect),o}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let n=e;n||(this.config.auth.OIDCOptions.serverResponseType===gp.QUERY?n=window.location.search:n=window.location.hash);let r=Vg(n);if(r){try{ire(r,this.browserCrypto,Ee.Redirect)}catch(i){return i instanceof St&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return Ene(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,n]}const o=this.browserStorage.getTemporaryCache(zt.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(zt.URL_HASH)),o&&(r=Vg(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}async handleResponse(e,n){const r=e.state;if(!r)throw Xe(QT);const o=this.browserStorage.getCachedRequest(r);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Xe(vp);const c=new ku(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,un.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,o.correlationId),{userRequestState:u}=ti.parseRequestState(this.browserCrypto,r);return c.acquireToken({...o,state:u,prompt:void 0}).finally(()=>{this.browserStorage.cleanRequestByState(r)})}const i=this.browserStorage.getCachedAuthority(r);if(!i)throw Xe(JT);const s=await Le(this.createAuthCodeClient.bind(this),R.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:n,requestAuthority:i});return Ai.removeThrottle(this.browserStorage,this.config.auth.clientId,o),new kx(s,this.browserStorage,o,this.logger,this.performanceClient).handleCodeResponse(e,r)}async logout(e){var o,i;this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(un.logout);try{this.eventHandler.emitEvent(le.LOGOUT_START,Ee.Redirect,e),await this.clearCacheOnLogout(n.account);const s={apiId:un.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=await Le(this.createAuthCodeClient.bind(this),R.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(a.authority.protocolMode===hs.OIDC)try{a.authority.endSessionEndpoint}catch{if((o=n.account)!=null&&o.homeAccountId){this.browserStorage.removeAccount((i=n.account)==null?void 0:i.homeAccountId),this.eventHandler.emitEvent(le.LOGOUT_SUCCESS,Ee.Redirect,n);return}}const c=a.getLogoutUri(n);if(this.eventHandler.emitEvent(le.LOGOUT_SUCCESS,Ee.Redirect,n),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(c)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(c,s);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(c,s);return}}catch(s){throw s instanceof St&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),this.eventHandler.emitEvent(le.LOGOUT_FAILURE,Ee.Redirect,null,s),this.eventHandler.emitEvent(le.LOGOUT_END,Ee.Redirect),s}this.eventHandler.emitEvent(le.LOGOUT_END,Ee.Redirect)}getRedirectStartPage(e){const n=e||window.location.href;return It.getAbsoluteUrl(n,Jo())}}/*! @azure/msal-browser v3.26.1 2024-10-08 */async function lre(t,e,n,r,o){if(e.addQueueMeasurement(R.SilentHandlerInitiateAuthRequest,r),!t)throw n.info("Navigate url is empty"),Xe(Dy);return o?Le(dre,R.SilentHandlerLoadFrame,n,e,r)(t,o,e,r):pl(hre,R.SilentHandlerLoadFrameSync,n,e,r)(t)}async function ure(t,e,n,r,o,i,s){return r.addQueueMeasurement(R.SilentHandlerMonitorIframeForHash,i),new Promise((a,c)=>{e<qg&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${qg}ms). This may result in timeouts.`);const u=window.setTimeout(()=>{window.clearInterval(d),c(Xe(J5))},e),d=window.setInterval(()=>{let f="";const p=t.contentWindow;try{f=p?p.location.href:""}catch{}if(!f||f==="about:blank")return;let g="";p&&(s===gp.QUERY?g=p.location.search:g=p.location.hash),window.clearTimeout(u),window.clearInterval(d),a(g)},n)}).finally(()=>{pl(fre,R.RemoveHiddenIframe,o,r,i)(t)})}function dre(t,e,n,r){return n.addQueueMeasurement(R.SilentHandlerLoadFrame,r),new Promise((o,i)=>{const s=O3();window.setTimeout(()=>{if(!s){i("Unable to load iframe");return}s.src=t,o(s)},e)})}function hre(t){const e=O3();return e.src=t,e}function O3(){const t=document.createElement("iframe");return t.className="msalSilentIframe",t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(t),t}function fre(t){document.body===t.parentNode&&document.body.removeChild(t)}/*! @azure/msal-browser v3.26.1 2024-10-08 */class pre extends Dd{constructor(e,n,r,o,i,s,a,c,u,d,f){super(e,n,r,o,i,s,c,d,f),this.apiId=a,this.nativeStorage=u}async acquireToken(e){this.performanceClient.addQueueMeasurement(R.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const n={...e};n.prompt?n.prompt!==er.NONE&&n.prompt!==er.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${n.prompt} with ${er.NONE}`),n.prompt=er.NONE):n.prompt=er.NONE;const r=await Le(this.initializeAuthorizationRequest.bind(this),R.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,Ee.Silent);_3(r.authority);const o=this.initializeServerTelemetryManager(this.apiId);let i;try{return i=await Le(this.createAuthCodeClient.bind(this),R.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),await Le(this.silentTokenHelper.bind(this),R.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(i,r)}catch(s){if(s instanceof St&&(s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s)),!i||!(s instanceof St)||s.errorCode!==eo.INVALID_GRANT_ERROR)throw s;this.performanceClient.addFields({retryError:s.errorCode},this.correlationId);const a=await Le(this.initializeAuthorizationRequest.bind(this),R.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(n,Ee.Silent);return await Le(this.silentTokenHelper.bind(this),R.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(i,a)}}logout(){return Promise.reject(Xe(jy))}async silentTokenHelper(e,n){const r=n.correlationId;this.performanceClient.addQueueMeasurement(R.SilentIframeClientTokenHelper,r);const o=await Le(this.initializeAuthorizationCodeRequest.bind(this),R.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,r)(n),i=await Le(e.getAuthCodeUrl.bind(e),R.GetAuthCodeUrl,this.logger,this.performanceClient,r)({...n,nativeBroker:ji.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,n.authenticationScheme)}),s=new a_(e,this.browserStorage,o,this.logger,this.performanceClient),a=await Le(lre,R.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(i,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait),c=this.config.auth.OIDCOptions.serverResponseType,u=await Le(ure,R.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,c),d=pl(P3,R.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(u,c,this.logger);if(d.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw Xe(vp);const f=new ku(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,d.accountId,this.browserStorage,r),{userRequestState:p}=ti.parseRequestState(this.browserCrypto,n.state);return Le(f.acquireToken.bind(f),R.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,r)({...n,state:p,prompt:n.prompt||er.NONE})}return Le(s.handleCodeResponse.bind(s),R.HandleCodeResponse,this.logger,this.performanceClient,r)(d,n)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class mre extends Dd{async acquireToken(e){this.performanceClient.addQueueMeasurement(R.SilentRefreshClientAcquireToken,e.correlationId);const n=await Le(s_,R.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...n};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const o=this.initializeServerTelemetryManager(un.acquireTokenSilent_silentFlow),i=await this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return Le(i.acquireTokenByRefreshToken.bind(i),R.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(s=>{throw s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s),s})}logout(){return Promise.reject(Xe(jy))}async createRefreshTokenClient(e){const n=await Le(this.getClientConfiguration.bind(this),R.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new vE(n,this.performanceClient)}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class gre{constructor(e,n,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=n,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,n,r){if(!this.isBrowserEnvironment)throw Xe(XT);const o=n.id_token?fl(n.id_token,Bi):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},s=e.authority?new hr(hr.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||Wi()):void 0,a=this.loadAccount(e,r.clientInfo||n.client_info||"",o,s),c=this.loadIdToken(n,a.homeAccountId,a.environment,a.realm),u=this.loadAccessToken(e,n,a.homeAccountId,a.environment,a.realm,r),d=this.loadRefreshToken(n,a.homeAccountId,a.environment);return this.generateAuthenticationResult(e,{account:a,idToken:c,accessToken:u,refreshToken:d},o,s)}loadAccount(e,n,r,o){if(this.logger.verbose("TokenCache - loading account"),e.account){const c=$n.createFromAccountInfo(e.account);return this.storage.setAccount(c),c}else if(!o||!n&&!r)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),Xe(s3);const i=$n.generateHomeAccountId(n,o.authorityType,this.logger,this.cryptoObj,r),s=r==null?void 0:r.tid,a=KT(this.storage,o,i,Bi,r,n,o.hostnameAndPort,s,void 0,void 0,this.logger);return this.storage.setAccount(a),a}loadIdToken(e,n,r,o){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const i=Ry(n,r,e.id_token,this.config.auth.clientId,o);return this.storage.setIdTokenCredential(i),i}loadAccessToken(e,n,r,o,i,s){if(n.access_token)if(n.expires_in){if(!n.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const a=n.scope?kn.fromString(n.scope):new kn(e.scopes),c=s.expiresOn||n.expires_in+new Date().getTime()/1e3,u=s.extendedExpiresOn||(n.ext_expires_in||n.expires_in)+new Date().getTime()/1e3,d=Ny(r,o,n.access_token,this.config.auth.clientId,i,a.printScopes(),c,u,Bi);return this.storage.setAccessTokenCredential(d),d}loadRefreshToken(e,n,r){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const o=f5(n,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(o),o}generateAuthenticationResult(e,n,r,o){var d,f,p;let i="",s=[],a=null,c;n!=null&&n.accessToken&&(i=n.accessToken.secret,s=kn.fromString(n.accessToken.target).asArray(),a=new Date(Number(n.accessToken.expiresOn)*1e3),c=new Date(Number(n.accessToken.extendedExpiresOn)*1e3));const u=n.account;return{authority:o?o.canonicalAuthority:"",uniqueId:n.account.localAccountId,tenantId:n.account.realm,scopes:s,account:u.getAccountInfo(),idToken:((d=n.idToken)==null?void 0:d.secret)||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:((f=n.refreshToken)==null?void 0:f.familyId)||"",tokenType:((p=n==null?void 0:n.accessToken)==null?void 0:p.tokenType)||"",state:e.state||"",cloudGraphHostName:u.cloudGraphHostName||"",msGraphHost:u.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class vre extends U5{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v3.26.1 2024-10-08 */class yre extends Dd{constructor(e,n,r,o,i,s,a,c,u,d){super(e,n,r,o,i,s,c,u,d),this.apiId=a}async acquireToken(e){if(!e.code)throw Xe(a3);const n=await Le(this.initializeAuthorizationRequest.bind(this),R.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,Ee.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const o={...n,code:e.code},i=await Le(this.getClientConfiguration.bind(this),R.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:n.authority,requestAzureCloudOptions:n.azureCloudOptions,requestExtraQueryParameters:n.extraQueryParameters,account:n.account}),s=new vre(i);this.logger.verbose("Auth code client created");const a=new a_(s,this.browserStorage,o,this.logger,this.performanceClient);return await Le(a.handleCodeResponseFromServer.bind(a),R.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},n,!1)}catch(o){throw o instanceof St&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),o}}logout(){return Promise.reject(Xe(jy))}}/*! @azure/msal-browser v3.26.1 2024-10-08 */function pi(t){const e=t==null?void 0:t.idTokenClaims;if(e!=null&&e.tfp||e!=null&&e.acr)return"B2C";if(e!=null&&e.tid){if((e==null?void 0:e.tid)==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function im(t,e){try{fs(t)}catch(n){throw e.end({success:!1},n),n}}class By{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new Hc(this.logger,this.performanceClient):Bg,this.eventHandler=new k3(this.logger),this.browserStorage=this.isBrowserEnvironment?new SE(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,Ote(this.config.auth),this.performanceClient):jne(this.config.auth.clientId,this.logger);const n={cacheLocation:Sn.MemoryStorage,temporaryCacheLocation:Sn.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new SE(this.config.auth.clientId,n,this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new gre(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static async createController(e,n){const r=new By(e);return await r.initialize(n),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(le.INITIALIZE_END);return}const n=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),r=this.config.system.allowNativeBroker,o=this.performanceClient.startMeasurement(R.InitializeClientApplication,n);if(this.eventHandler.emitEvent(le.INITIALIZE_START),r)try{this.nativeExtensionProvider=await ji.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(i){this.logger.verbose(i)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await Le(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),R.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,n)(this.performanceClient,n)),this.initialized=!0,this.eventHandler.emitEvent(le.INITIALIZE_END),o.end({allowNativeBroker:r,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),o_(this.initialized),this.isBrowserEnvironment){const n=e||"";let r=this.redirectResponse.get(n);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(n,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){const n=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),o=r&&ji.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,i=o?r==null?void 0:r.correlationId:this.browserStorage.getTemporaryCache(zt.CORRELATION_ID,!0)||"",s=this.performanceClient.startMeasurement(R.AcquireTokenRedirect,i);this.eventHandler.emitEvent(le.HANDLE_REDIRECT_START,Ee.Redirect);let a;if(o&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");const c=new ku(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,un.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,r.accountId,this.nativeInternalStorage,r.correlationId);a=Le(c.handleRedirectPromise.bind(c),R.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const c=this.createRedirectClient(i);a=Le(c.handleRedirectPromise.bind(c),R.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,s)}return a.then(c=>(c?(n.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(le.LOGIN_SUCCESS,Ee.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_SUCCESS,Ee.Redirect,c),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0,accountType:pi(c.account)})):s.event.errorCode?s.end({success:!1}):s.discard(),this.eventHandler.emitEvent(le.HANDLE_REDIRECT_END,Ee.Redirect),c)).catch(c=>{const u=c;throw n.length>0?this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_FAILURE,Ee.Redirect,null,u):this.eventHandler.emitEvent(le.LOGIN_FAILURE,Ee.Redirect,null,u),this.eventHandler.emitEvent(le.HANDLE_REDIRECT_END,Ee.Redirect),s.end({success:!1},u),c})}async acquireTokenRedirect(e){const n=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",n);const r=this.performanceClient.startMeasurement(R.AcquireTokenPreRedirect,n);r.add({accountType:pi(e.account),scenarioId:e.scenarioId});const o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=s=>{const a=typeof o=="function"?o(s):void 0;return a!==!1?r.end({success:!0}):r.discard(),a};else{const s=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{const c=typeof s=="function"?s(a):void 0;return c!==!1?r.end({success:!0}):r.discard(),c}}const i=this.getAllAccounts().length>0;try{_x(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),i?this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_START,Ee.Redirect,e):this.eventHandler.emitEvent(le.LOGIN_START,Ee.Redirect,e);let s;return this.nativeExtensionProvider&&this.canUseNative(e)?s=new ku(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,un.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,n).acquireTokenRedirect(e,r).catch(c=>{if(c instanceof ki&&tu(c))return this.nativeExtensionProvider=void 0,this.createRedirectClient(n).acquireToken(e);if(c instanceof kr)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(n).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),c}):s=this.createRedirectClient(n).acquireToken(e),await s}catch(s){throw r.end({success:!1},s),i?this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_FAILURE,Ee.Redirect,null,s):this.eventHandler.emitEvent(le.LOGIN_FAILURE,Ee.Redirect,null,s),s}}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(R.AcquireTokenPopup,n);r.add({scenarioId:e.scenarioId,accountType:pi(e.account)});try{this.logger.verbose("acquireTokenPopup called",n),im(this.initialized,r),this.browserStorage.setInteractionInProgress(!0)}catch(s){return Promise.reject(s)}const o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_START,Ee.Popup,e):this.eventHandler.emitEvent(le.LOGIN_START,Ee.Popup,e);let i;return this.canUseNative(e)?i=this.acquireTokenNative({...e,correlationId:n},un.acquireTokenPopup).then(s=>(this.browserStorage.setInteractionInProgress(!1),r.end({success:!0,isNativeBroker:!0,requestId:s.requestId,accountType:pi(s.account)}),s)).catch(s=>{if(s instanceof ki&&tu(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(n).acquireToken(e);if(s instanceof kr)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),s}):i=this.createPopupClient(n).acquireToken(e),i.then(s=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(le.LOGIN_SUCCESS,Ee.Popup,s):this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_SUCCESS,Ee.Popup,s),r.end({success:!0,requestId:s.requestId,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:pi(s.account)}),s)).catch(s=>(o.length>0?this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_FAILURE,Ee.Popup,null,s):this.eventHandler.emitEvent(le.LOGIN_FAILURE,Ee.Popup,null,s),r.end({success:!1},s),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var i,s;const n=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:n};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(R.SsoSilent,n),(i=this.ssoSilentMeasurement)==null||i.add({scenarioId:e.scenarioId,accountType:pi(e.account)}),im(this.initialized,this.ssoSilentMeasurement),(s=this.ssoSilentMeasurement)==null||s.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",n),this.eventHandler.emitEvent(le.SSO_SILENT_START,Ee.Silent,r);let o;return this.canUseNative(r)?o=this.acquireTokenNative(r,un.ssoSilent).catch(a=>{if(a instanceof ki&&tu(a))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw a}):o=this.createSilentIframeClient(r.correlationId).acquireToken(r),o.then(a=>{var c;return this.eventHandler.emitEvent(le.SSO_SILENT_SUCCESS,Ee.Silent,a),(c=this.ssoSilentMeasurement)==null||c.end({success:!0,isNativeBroker:a.fromNativeBroker,requestId:a.requestId,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:pi(a.account)}),a}).catch(a=>{var c;throw this.eventHandler.emitEvent(le.SSO_SILENT_FAILURE,Ee.Silent,null,a),(c=this.ssoSilentMeasurement)==null||c.end({success:!1},a),a}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const n=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",n);const r=this.performanceClient.startMeasurement(R.AcquireTokenByCode,n);im(this.initialized,r),this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_BY_CODE_START,Ee.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw Xe(l3);if(e.code){const o=e.code;let i=this.hybridAuthCodeResponses.get(o);return i?(this.logger.verbose("Existing acquireTokenByCode request found",n),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",n),i=this.acquireTokenByCodeAsync({...e,correlationId:n}).then(s=>(this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_BY_CODE_SUCCESS,Ee.Silent,s),this.hybridAuthCodeResponses.delete(o),r.end({success:!0,isNativeBroker:s.fromNativeBroker,requestId:s.requestId,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:pi(s.account)}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_BY_CODE_FAILURE,Ee.Silent,null,s),r.end({success:!1},s),s}),this.hybridAuthCodeResponses.set(o,i)),await i}else if(e.nativeAccountId)if(this.canUseNative(e,e.nativeAccountId)){const o=await this.acquireTokenNative({...e,correlationId:n},un.acquireTokenByCode,e.nativeAccountId).catch(i=>{throw i instanceof ki&&tu(i)&&(this.nativeExtensionProvider=void 0),i});return r.end({accountType:pi(o.account),success:!0}),o}else throw Xe(u3);else throw Xe(c3)}catch(o){throw this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_BY_CODE_FAILURE,Ee.Silent,null,o),r.end({success:!1},o),o}}async acquireTokenByCodeAsync(e){var o;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(R.AcquireTokenByCodeAsync,e.correlationId),(o=this.acquireTokenByCodeAsyncMeasurement)==null||o.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(i=>{var s;return(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker,requestId:i.requestId}),i}).catch(i=>{var s;throw(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,n){switch(this.performanceClient.addQueueMeasurement(R.AcquireTokenFromCache,e.correlationId),n){case Hn.Default:case Hn.AccessToken:case Hn.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return Le(r.acquireToken.bind(r),R.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw Te(Di)}}async acquireTokenByRefreshToken(e,n){switch(this.performanceClient.addQueueMeasurement(R.AcquireTokenByRefreshToken,e.correlationId),n){case Hn.Default:case Hn.AccessTokenAndRefreshToken:case Hn.RefreshToken:case Hn.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return Le(r.acquireToken.bind(r),R.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw Te(Di)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(R.AcquireTokenBySilentIframe,e.correlationId);const n=this.createSilentIframeClient(e.correlationId);return Le(n.acquireToken.bind(n),R.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const n=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",n),this.logoutRedirect({correlationId:n,...e})}async logoutRedirect(e){const n=this.getRequestCorrelationId(e);return _x(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),this.createRedirectClient(n).logout(e)}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return fs(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(n).logout(e)}catch(n){return Promise.reject(n)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const n=this.getRequestCorrelationId(e);return this.createSilentCacheClient(n).logout(e)}getAllAccounts(e){return Une(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return Fne(e,this.logger,this.browserStorage)}getAccountByUsername(e){return Bne(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return Hne(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return zne(e,this.logger,this.browserStorage)}setActiveAccount(e){Vne(e,this.browserStorage)}getActiveAccount(){return $ne(this.browserStorage)}async hydrateCache(e,n){this.logger.verbose("hydrateCache called");const r=$n.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(r),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,n)):this.browserStorage.hydrateCache(e,n)}async acquireTokenNative(e,n,r){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw Xe(vp);return new ku(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,n,this.performanceClient,this.nativeExtensionProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)}canUseNative(e,n){if(this.logger.trace("canUseNative called"),!ji.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case er.NONE:case er.CONSENT:case er.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!n&&!this.getNativeAccountId(e)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new sre(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new cre(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new pre(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,un.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new N3(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new mre(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new yre(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,un.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,n){return this.eventHandler.addEventCallback(e,n)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return T3(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){var n;try{(n=e.key)!=null&&n.includes(Qn.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent(le.ACTIVE_ACCOUNT_CHANGED);const r=e.newValue||e.oldValue;if(!r)return;const o=JSON.parse(r);if(typeof o!="object"||!$n.isAccountEntity(o))return;const s=od.toObject(new $n,o).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent(le.ACCOUNT_ADDED,void 0,s)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent(le.ACCOUNT_REMOVED,void 0,s))}catch{return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?Wi():ae.EMPTY_STRING}async loginRedirect(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",n),this.acquireTokenRedirect({correlationId:n,...e||wx})}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",n),this.acquireTokenPopup({correlationId:n,...e||wx})}async acquireTokenSilent(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(R.AcquireTokenSilent,n);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),im(this.initialized,r),this.logger.verbose("acquireTokenSilent called",n);const o=e.account||this.getActiveAccount();if(!o)throw Xe(t3);r.add({accountType:pi(o)});const i={clientId:this.config.auth.clientId,authority:e.authority||ae.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:o.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},s=JSON.stringify(i),a=this.activeSilentTokenRequests.get(s);if(typeof a>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",n);const c=Le(this.acquireTokenSilentAsync.bind(this),R.AcquireTokenSilentAsync,this.logger,this.performanceClient,n)({...e,correlationId:n},o).then(u=>(this.activeSilentTokenRequests.delete(s),r.end({success:!0,fromCache:u.fromCache,isNativeBroker:u.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,requestId:u.requestId,accessTokenSize:u.accessToken.length,idTokenSize:u.idToken.length}),u)).catch(u=>{throw this.activeSilentTokenRequests.delete(s),r.end({success:!1},u),u});return this.activeSilentTokenRequests.set(s,c),{...await c,state:e.state}}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",n),r.discard(),{...await a,state:e.state}}async acquireTokenSilentAsync(e,n){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(R.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_START,Ee.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const o=await Le(Yne,R.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,n,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||Hn.Default;return this.acquireTokenSilentNoIframe(o,i).catch(async a=>{if(bre(a,i))if(this.activeIframeRequest)if(i!==Hn.Skip){const[u,d]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${d}`,o.correlationId);const f=this.performanceClient.startMeasurement(R.AwaitConcurrentIframe,o.correlationId);f.add({awaitIframeCorrelationId:d});const p=await u;if(f.end({success:p}),p)return this.logger.verbose(`Parallel iframe request with correlationId: ${d} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,i);throw this.logger.info(`Iframe request with correlationId: ${d} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),Le(this.acquireTokenBySilentIframe.bind(this),R.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let u;return this.activeIframeRequest=[new Promise(d=>{u=d}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),Le(this.acquireTokenBySilentIframe.bind(this),R.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(d=>(u(!0),d)).catch(d=>{throw u(!1),d}).finally(()=>{this.activeIframeRequest=void 0})}else throw a}).then(a=>(this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_SUCCESS,Ee.Silent,a),e.correlationId&&this.performanceClient.addFields({fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker,requestId:a.requestId},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_FAILURE,Ee.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,n){return ji.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,un.acquireTokenSilent_silentFlow).catch(async r=>{throw r instanceof ki&&tu(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,Te(Di)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),Le(this.acquireTokenFromCache.bind(this),R.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,n).catch(r=>{if(n===Hn.AccessToken)throw r;return this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_NETWORK_START,Ee.Silent,e),Le(this.acquireTokenByRefreshToken.bind(this),R.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,n)}))}}function bre(t,e){const n=!(t instanceof kr&&t.subError!==Ly),r=t.errorCode===eo.INVALID_GRANT_ERROR||t.errorCode===Di,o=n&&r||t.errorCode===Gg||t.errorCode===GT,i=cne.includes(e);return o&&i}/*! @azure/msal-browser v3.26.1 2024-10-08 */async function Cre(t,e){const n=new Bc(t);return await n.initialize(),By.createController(n,e)}/*! @azure/msal-browser v3.26.1 2024-10-08 */let Sre=class M3{static async createPublicClientApplication(e){const n=await Cre(e);return new M3(e,n)}constructor(e,n){this.controller=n||new By(new Bc(e))}async initialize(e){return this.controller.initialize(e)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,n){return this.controller.addEventCallback(e,n)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,n){return this.controller.hydrateCache(e,n)}clearCache(e){return this.controller.clearCache(e)}};/*! @azure/msal-browser v3.26.1 2024-10-08 */class xx{constructor(e,n){const r=n&&n.loggerOptions||{};this.logger=new si(r,Yg,Fc),this.cryptoOps=new Hc(this.logger),this.popTokenGenerator=new Dc(this.cryptoOps),this.shrParameters=e}async generatePublicKeyThumbprint(){const{kid:e}=await this.popTokenGenerator.generateKid(this.shrParameters);return e}async signRequest(e,n,r){return this.popTokenGenerator.signPayload(e,n,this.shrParameters,r)}async removeKeys(e){return this.cryptoOps.removeTokenBindingKey(e)}}function Rx(){let t;try{t=window[Sn.SessionStorage];const e=t==null?void 0:t.getItem(dne);if(Number(e)===1)return z(()=>import("./BrowserPerformanceMeasurement-CIsv1iQ0.js"),[])}catch{}}function zm(){return typeof window<"u"&&typeof window.performance<"u"&&typeof window.performance.now=="function"}function Ere(t){if(!(!t||!zm()))return Math.round(window.performance.now()-t)}class wre extends Zte{constructor(e,n,r){var o,i;super(e.auth.clientId,e.auth.authority||`${ae.DEFAULT_AUTHORITY}`,new si(((o=e.system)==null?void 0:o.loggerOptions)||{},Yg,Fc),Yg,Fc,((i=e.telemetry)==null?void 0:i.application)||{appName:"",appVersion:""},n,r)}generateId(){return Wi()}getPageVisibility(){var e;return((e=document.visibilityState)==null?void 0:e.toString())||null}deleteIncompleteSubMeasurements(e){var n;(n=Rx())==null||n.then(r=>{const o=this.eventsByCorrelationId.get(e.event.correlationId),i=o&&o.eventId===e.event.eventId,s=[];i&&(o!=null&&o.incompleteSubMeasurements)&&o.incompleteSubMeasurements.forEach(a=>{s.push({...a})}),r.BrowserPerformanceMeasurement.flushMeasurements(e.event.correlationId,s)})}startMeasurement(e,n){var a;const r=this.getPageVisibility(),o=super.startMeasurement(e,n),i=zm()?window.performance.now():void 0,s=(a=Rx())==null?void 0:a.then(c=>new c.BrowserPerformanceMeasurement(e,o.event.correlationId));return s==null||s.then(c=>c.startMeasurement()),{...o,end:(c,u)=>{const d=o.end({...c,startPageVisibility:r,endPageVisibility:this.getPageVisibility(),durationMs:Ere(i)},u);return s==null||s.then(f=>f.endMeasurement()),this.deleteIncompleteSubMeasurements(o),d},discard:()=>{o.discard(),s==null||s.then(c=>c.flushMeasurement()),this.deleteIncompleteSubMeasurements(o)}}}setPreQueueTime(e,n){if(!zm()){this.logger.trace(`BrowserPerformanceClient: window performance API not available, unable to set telemetry queue time for ${e}`);return}if(!n){this.logger.trace(`BrowserPerformanceClient: correlationId for ${e} not provided, unable to set telemetry queue time`);return}const r=this.preQueueTimeByCorrelationId.get(n);r&&(this.logger.trace(`BrowserPerformanceClient: Incomplete pre-queue ${r.name} found`,n),this.addQueueMeasurement(r.name,n,void 0,!0)),this.preQueueTimeByCorrelationId.set(n,{name:e,time:window.performance.now()})}addQueueMeasurement(e,n,r,o){if(!zm()){this.logger.trace(`BrowserPerformanceClient: window performance API not available, unable to add queue measurement for ${e}`);return}if(!n){this.logger.trace(`BrowserPerformanceClient: correlationId for ${e} not provided, unable to add queue measurement`);return}const i=super.getPreQueueTime(e,n);if(!i)return;const s=window.performance.now(),a=r||super.calculateQueuedTime(i,s);return super.addQueueMeasurement(e,n,a,o)}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const bt={...R,PairwiseBrokerApplicationInitializeBrokering:"pairwiseBrokerApplicationInitializeBrokering",BrokerClientApplicationHandleBrokerHandshake:"brokerClientApplicationHandleBrokerHandshake",BrokerClientApplicationBrokeredSSOSilentRequest:"brokerClientApplicationBrokeredSSOSilentRequest",BrokerClientApplicationBrokeredSilentRequest:"brokerClientApplicationBrokeredSilentRequest",EmbeddedClientApplicationSendSSOSilentRequest:"embeddedSSOSilent",EmbeddedClientApplicationSendPopupRequest:"embeddedPopup",EmbeddedClientApplicationSendRedirectRequest:"embeddedRedirect",EmbeddedClientApplicationHandleRedirectRequest:"embeddedHandleRedirect",EmbeddedClientApplicationSendSilentRefreshRequest:"embeddedSilentRefresh"},Ire=new Map([[bt.PairwiseBrokerApplicationInitializeBrokering,"PWBInitBrk"],[bt.BrokerClientApplicationHandleBrokerHandshake,"BrkClientHandeBrkHandshake"],[bt.BrokerClientApplicationBrokeredSSOSilentRequest,"BrkClientBrkSSOReq"],[bt.BrokerClientApplicationBrokeredSilentRequest,"BrkClientBrkSltReq"],[bt.EmbeddedClientApplicationSendSSOSilentRequest,"EmbClientSendSSOReq"],[bt.EmbeddedClientApplicationSendPopupRequest,"EmbClientSendPopupReq"],[bt.EmbeddedClientApplicationSendRedirectRequest,"EmbClientSendRedirectReq"],[bt.EmbeddedClientApplicationHandleRedirectRequest,"EmbClientHandleRedirectReq"],[bt.EmbeddedClientApplicationSendSilentRefreshRequest,"EmbClientSendSltRefreshReq"]]),Tre=new Set(["brokerInteractionTimeoutMs","brokerMessageTimeoutMs","brokerHandshakeTimeoutMs","brokerIframeTimeoutMs"]);var _re="function",c_="object",l_="undefined",of="prototype",u_=Object,Are=u_[of];/*! https://github.com/nevware21/ts-utils v0.11.5 */function xs(t,e){return t||e}function Or(t,e){return t[e]}var to=void 0,Vn=null,d_="",Hy="function",yp="object",ps="prototype",wE="__proto__",uc="undefined",Xg="constructor",h_="Symbol",kre="_polyfill",bc="length",Zg="name",ar="call",zy="toString",jo=xs(Object),f_=Or(jo,ps),L3=xs(String),ml=Or(L3,ps),xre=xs(Math),D3=xs(Array),j3=Or(D3,ps),Ss=Or(j3,"slice");function cr(t,e){try{return{v:t.apply(this,e)}}catch(n){return{e:n}}}function Rre(t,e){var n=cr(t);return n.e?e:n.v}var NC;function Vy(t){return function(e){return typeof e===t}}function U3(t){var e="[object "+t+"]";return function(n){return!!(n&&Nre(n)===e)}}function Nre(t){return f_[zy].call(t)}function qt(t){return typeof t===uc||t===uc}function Pre(t){return!p_(t)}function Yt(t){return t===Vn||qt(t)}function Ore(t){return t===Vn||!p_(t)}function p_(t){return!!t||t!==to}function Mre(t){return!NC&&(NC=["string","number","boolean",uc,"symbol","bigint"]),t!==yp&&NC.indexOf(t)!==-1}var mr=Vy("string"),en=Vy(Hy);function sd(t){return!t&&Yt(t)?!1:!!t&&typeof t===yp}var Tt=Or(D3,"isArray"),Lre=U3("Date"),va=Vy("number"),zc=Vy("boolean"),Dre=U3("Error");function ad(t){return!!(t&&t.then&&en(t.then))}function Nx(t){return!(!t||Rre(function(){return!(t&&0+t)},!t))}var m_=Or(jo,"getOwnPropertyDescriptor");function No(t,e){return!!t&&f_.hasOwnProperty[ar](t,e)}var xu=xs(Or(jo,"hasOwn"),jre);function jre(t,e){return No(t,e)||!!m_(t,e)}function tn(t,e,n){if(t&&sd(t)){for(var r in t)if(xu(t,r)&&e[ar](t,r,t[r])===-1)break}}var sm={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function F3(t){var e={};if(e[sm.c]=!0,e[sm.e]=!0,t.l){e.get=function(){return t.l.v};var n=m_(t.l,"v");n&&n.set&&(e.set=function(r){t.l.v=r})}return tn(t,function(r,o){e[sm[r]]=Pre(o)?e[sm[r]]:o}),e}var Es=Or(jo,"defineProperty"),Ure=Or(jo,"defineProperties");function pn(t,e,n){return Es(t,e,F3(n))}function B3(t,e){var n={};return tn(e,function(r,o){n[r]=F3(o)}),Ure(t,n)}function H3(t,e,n,r,o){var i={};return tn(t,function(s,a){ev(i,s,e?a:s),ev(i,a,s)}),r?r(i):i}function ev(t,e,n,r){Es(t,e,{value:n,enumerable:!0,writable:!1})}var Xo=xs(L3),Fre="[object Error]";function Mt(t,e){var n=d_,r=f_[zy][ar](t);r===Fre&&(t={stack:Xo(t.stack),message:Xo(t.message),name:Xo(t.name)});try{n=JSON.stringify(t,Vn,e?typeof e=="number"?e:4:to),n=(n?n.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):Vn)||Xo(t)}catch(o){n=" - "+Mt(o,e)}return r+": "+n}function bo(t){throw new Error(t)}function Uo(t){throw new TypeError(t)}var z3=Or(jo,"freeze");function Bre(t){return t}function Hre(t){return t[wE]||Vn}var Px=Or(jo,"assign"),ms=Or(jo,"keys");function jd(t){return z3&&tn(t,function(e,n){(Tt(n)||sd(n))&&jd(n)}),Vc(t)}var Vc=xs(z3,Bre),IE=xs(Or(jo,"getPrototypeOf"),Hre);function zre(t){return H3(t,1,0,Vc)}function Vre(t){return H3(t,0,0,Vc)}function $re(t){var e={};return tn(t,function(n,r){ev(e,n,r[1]),ev(e,r[0],r[1])}),Vc(e)}function Gre(t){return $re(t)}var V3=Vre({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Ox="__tsUtils$gblCfg",PC;function $3(){var t;return typeof globalThis!==uc&&(t=globalThis),!t&&typeof self!==uc&&(t=self),!t&&typeof window!==uc&&(t=window),!t&&typeof global!==uc&&(t=global),t}function G3(){if(!PC){var t=cr($3).v||{};PC=t[Ox]=t[Ox]||{}}return PC}var $y=bp;function bp(t,e,n){var r=e?e[t]:Vn;return function(o){var i=(o?o[t]:Vn)||r;if(i||n){var s=arguments;return(i||n).apply(o,i?Ss[ar](s,1):s)}Uo('"'+Xo(t)+'" not defined for '+Mt(o))}}function Kre(t){return function(e){return e[t]}}var Wre=Or(xre,"max"),Mx=$y("slice",ml),xi=$y("substring",ml),nu=bp("substr",ml,qre);function qre(t,e,n){return Yt(t)&&Uo("Invalid "+Mt(t)),n<0?d_:(e=e||0,e<0&&(e=Wre(e+t[bc],0)),qt(n)?Mx(t,e):Mx(t,e,e+n))}function g_(t,e){return xi(t,0,e)}var Lx="_urid",OC;function Yre(){if(!OC){var t=G3();OC=t.gblSym=t.gblSym||{k:{},s:{}}}return OC}var am;function v_(t){var e={description:Xo(t),toString:function(){return h_+"("+t+")"}};return e[kre]=!0,e}function Qre(t){var e=Yre();if(!xu(e.k,t)){var n=v_(t),r=ms(e.s).length;n[Lx]=function(){return r+"_"+n[zy]()},e.k[t]=n,e.s[n[Lx]()]=Xo(t)}return e.k[t]}function Jre(t){!am&&(am={});var e,n=V3[t];return n&&(e=am[n]=am[n]||v_(h_+"."+n)),e}var On;function Ta(){On=G3()}function Xre(t){var e={};return!On&&Ta(),e.b=On.lzy,Es(e,"v",{configurable:!0,get:function(){var n=t();return On.lzy||Es(e,"v",{value:n}),e.b=On.lzy,n}}),e}function Fo(t){return Es({toJSON:function(){return t}},"v",{value:t})}var K3="window",sf;function Gy(t,e){var n;return function(){return!On&&Ta(),(!n||On.lzy)&&(n=Fo(cr(t,e).v)),n.v}}function Ud(t){return!On&&Ta(),(!sf||t===!1||On.lzy)&&(sf=Fo(cr($3).v||Vn)),sf.v}function Mn(t,e){var n;if(!sf||e===!1?n=Ud(e):n=sf.v,n&&n[t])return n[t];if(t===K3)try{return window}catch{}return Vn}function W3(){return!!ws()}var ws=Gy(Mn,["document"]);function Zre(){return!!_a()}var _a=Gy(Mn,[K3]);function eoe(){return!!Ji()}var Ji=Gy(Mn,["navigator"]),toe=Gy(function(){return!!cr(function(){return process&&(process.versions||{}).node}).v}),cd,MC;function Ky(){return cd=Fo(cr(Mn,[h_]).v),cd}function noe(t){var e=(On.lzy?0:cd)||Ky();return e.v?e.v[t]:to}function roe(){return!!ooe()}function ooe(){return!On&&Ta(),((On.lzy?0:cd)||Ky()).v}function y_(t,e){var n=V3[t];!On&&Ta();var r=(On.lzy?0:cd)||Ky();return r.v?r.v[n||t]:Jre(t)}function vh(t,e){!On&&Ta();var n=(On.lzy?0:cd)||Ky();return n.v?n.v(t):v_(t)}function b_(t){return!On&&Ta(),MC=(On.lzy?0:MC)||Fo(cr(noe,["for"]).v),(MC.v||Qre)(t)}function TE(t){return!!t&&en(t.next)}function q3(t){return!Ore(t)&&en(t[y_(3)])}var cm;function C_(t,e,n){if(t&&(TE(t)||(!cm&&(cm=Fo(y_(3))),t=t[cm.v]?t[cm.v]():Vn),TE(t))){var r=to,o=to;try{for(var i=0;!(o=t.next()).done&&e[ar](n||t,o.value,i,t)!==-1;)i++}catch(s){r={e:s},t.throw&&(o=Vn,t.throw(r))}finally{try{o&&!o.done&&t.return&&t.return(o)}finally{if(r)throw r.e}}}}function pu(t,e,n){return t.apply(e,n)}function ia(t,e){return!qt(e)&&t&&(Tt(e)?pu(t.push,t,e):TE(e)||q3(e)?C_(e,function(n){t.push(n)}):t.push(e)),t}function Ze(t,e,n){if(t)for(var r=t[bc]>>>0,o=0;o<r&&!(o in t&&e[ar](t,t[o],o,t)===-1);o++);}var Po=$y("indexOf",j3);function Wy(t,e,n){return((t?t.slice:Vn)||Ss).apply(t,Ss[ar](arguments,1))}var ya=xs(Or(jo,"create"),ioe);function ioe(t){if(!t)return{};var e=typeof t;e!==yp&&e!==Hy&&Uo("Prototype must be an Object or function: "+Mt(t));function n(){}return n[ps]=t,new n}var LC;function Y3(t,e){var n=jo.setPrototypeOf||function(r,o){var i;!LC&&(LC=Fo((i={},i[wE]=[],i instanceof Array))),LC.v?r[wE]=o:tn(o,function(s,a){return r[s]=a})};return n(t,e)}function soe(t,e,n){cr(pn,[e,Zg,{v:t,c:!0,e:!1}]),e=Y3(e,n);function r(){this[Xg]=e,cr(pn,[this,Zg,{v:t,c:!0,e:!1}])}return e[ps]=n===Vn?ya(n):(r[ps]=n[ps],new r),e}function Dx(t,e){e&&(t[Zg]=e)}function aoe(t,e,n){var r=Error,o=r[ps][Zg],i=Error.captureStackTrace;return soe(t,function(){var s=this,a=arguments;try{cr(Dx,[r,t]);var c=pu(r,s,Ss[ar](a))||s;if(c!==s){var u=IE(s);u!==IE(c)&&Y3(c,u)}return i&&i(c,s[Xg]),e&&e(c,a),c}finally{cr(Dx,[r,o])}},r)}function ba(){return(Date.now||coe)()}function coe(){return new Date().getTime()}function loe(t){return function(n){return Yt(n)&&Uo("strTrim called ["+Mt(n)+"]"),n&&n.replace&&(n=n.replace(t,d_)),n}}var uoe=loe(/^\s+|(?=\s)\s+$/g),Ur=bp("trim",ml,uoe),DC,jC,UC;function Zo(t){if(!t||typeof t!==yp)return!1;UC||(UC=Zre()?_a():!0);var e=!1;if(t!==UC){jC||(DC=Function[ps][zy],jC=DC[ar](jo));try{var n=IE(t);e=!n,e||(No(n,Xg)&&(n=n[Xg]),e=!!(n&&typeof n===Hy&&DC[ar](n)===jC))}catch{}}return e}function doe(t){return t.value&&J3(t),!0}var jx=[moe,J3,voe,goe];function hoe(t,e,n,r){var o;return Ze(t,function(i){if(i.k===e)return o=i,-1}),o||(o={k:e,v:e},t.push(o),r(o)),o.v}function S_(t,e,n,r){var o=n.handler,i=n.path?r?n.path.concat(r):n.path:[],s={handler:n.handler,src:n.src,path:i},a=typeof e,c=!1,u=e===Vn;u||(e&&a===yp?c=Zo(e):u=Mre(a));var d={type:a,isPrim:u,isPlain:c,value:e,result:e,path:i,origin:n.src,copy:function(f,p){return S_(t,f,p?s:n,p)},copyTo:function(f,p){return Q3(t,f,p,s)}};return d.isPrim?o&&o[ar](n,d)?d.result:e:hoe(t,e,i,function(f){pn(d,"result",{g:function(){return f.v},s:function(v){f.v=v}});for(var p=0,g=o;!(g||(p<jx.length?jx[p++]:doe))[ar](n,d);)g=Vn})}function Q3(t,e,n,r){if(!Yt(n))for(var o in n)e[o]=S_(t,n[o],r,o);return e}function foe(t,e,n){var r={handler:n,src:e,path:[]};return Q3([],t,e,r)}function poe(t,e){var n={handler:e,src:t};return S_([],t,n)}function moe(t){var e=t.value;if(Tt(e)){var n=t.result=[];return n.length=e.length,t.copyTo(n,e),!0}return!1}function goe(t){var e=t.value;return Lre(e)?(t.result=new Date(e.getTime()),!0):!1}function voe(t){return t.type===Hy}function J3(t){var e=t.value;if(e&&t.isPlain){var n=t.result={};return t.copyTo(n,e),!0}return!1}function yoe(t,e){return Ze(e,function(n){foe(t,n)}),t}function Ux(t,e,n,r,o,i,s){return yoe(poe(t)||{},Ss[ar](arguments))}var boe=Kre(bc),FC;function Coe(){return!On&&Ta(),(!FC||On.lzy)&&(FC=Fo(cr(Mn,["performance"]).v)),FC.v}function Soe(){var t=Coe();return t&&t.now?t.now():ba()}var Eoe=bp("endsWith",ml,woe);function woe(t,e,n){mr(t)||Uo("'"+Mt(t)+"' is not a string");var r=mr(e)?e:Xo(e),o=!qt(n)&&n<t[bc]?n:t[bc];return xi(t,o-r[bc],o)===r}var qy=$y("indexOf",ml),Fx=bp("startsWith",ml,Ioe);function Ioe(t,e,n){mr(t)||Uo("'"+Mt(t)+"' is not a string");var r=mr(e)?e:Xo(e),o=n>0?n:0;return xi(t,o,o+r[bc])===r}var BC="ref",HC="unref",zC="hasRef",Toe="enabled";function _oe(t,e,n){var r=!0,o=t?e(Vn):Vn,i;function s(){return r=!1,o&&o[HC]&&o[HC](),i}function a(){o&&n(o),o=Vn}function c(){return o=e(o),r||s(),i}function u(d){!d&&o&&a(),d&&!o&&c()}return i={cancel:a,refresh:c},i[zC]=function(){return o&&o[zC]?o[zC]():r},i[BC]=function(){return r=!0,o&&o[BC]&&o[BC](),i},i[HC]=s,i=Es(i,Toe,{get:function(){return!!o},set:u}),{h:i,dn:function(){o=Vn}}}function E_(t,e,n){var r=Tt(e),o=r?e.length:0,i=(o>0?e[0]:r?to:e)||setTimeout,s=(o>1?e[1]:to)||clearTimeout,a=n[0];n[0]=function(){c.dn(),pu(a,to,Ss[ar](arguments))};var c=_oe(t,function(u){if(u){if(u.refresh)return u.refresh(),u;pu(s,to,[u])}return pu(i,to,n)},function(u){pu(s,to,[u])});return c.h}function $c(t,e){return E_(!0,to,Ss[ar](arguments))}function Aoe(t,e,n){return E_(!0,t,Ss[ar](arguments,1))}function koe(t,e){return E_(!1,to,Ss[ar](arguments))}(Ud()||{}).Symbol;(Ud()||{}).Reflect;var xoe="hasOwnProperty",_E=function(t,e){return _E=u_.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)r[xoe](o)&&(n[o]=r[o])},_E(t,e)};function Cp(t,e){typeof e!==_re&&e!==null&&Uo("Class extends value "+String(e)+" is not a constructor or null"),_E(t,e);function n(){this.constructor=t}t[of]=e===null?ya(e):(n[of]=e[of],new n)}function Bx(t,e){for(var n=0,r=e.length,o=t.length;n<r;n++,o++)t[o]=e[n];return t}var lm,tv="constructor",Is="prototype",nv="function",rv="_dynInstFuncs",AE="_isDynProxy",Ru="_dynClass",Roe="_dynCls$",kE="_dynInstChk",Df=kE,X3="_dfOpts",Hx="_unknown_",w_="__proto__",um="_dyn"+w_,zx="__dynProto$Gbl",VC="_dynInstProto",Vm="useBaseInst",xE="setInstFuncs",I_=Object,jf=I_.getPrototypeOf,Vx=I_.getOwnPropertyNames,$x=Ud(),RE=$x[zx]||($x[zx]={o:(lm={},lm[xE]=!0,lm[Vm]=!0,lm),n:1e3});function $m(t){return t&&(t===I_[Is]||t===Array[Is])}function T_(t){return $m(t)||t===Function[Is]}function Gc(t){var e;if(t){if(jf)return jf(t);var n=t[w_]||t[Is]||(t[tv]?t[tv][Is]:null);e=t[um]||n,No(t,um)||(delete t[VC],e=t[um]=t[VC]||t[um],t[VC]=n)}return e}function ov(t,e){var n=[];if(Vx)n=Vx(t);else for(var r in t)typeof r=="string"&&No(t,r)&&n.push(r);if(n&&n.length>0)for(var o=0;o<n.length;o++)e(n[o])}function __(t,e,n){return e!==tv&&typeof t[e]===nv&&(n||No(t,e))&&e!==w_&&e!==Is}function iv(t){Uo("DynamicProto: "+t)}function Noe(t){var e=ya(null);return ov(t,function(n){!e[n]&&__(t,n,!1)&&(e[n]=t[n])}),e}function A_(t,e){for(var n=t.length-1;n>=0;n--)if(t[n]===e)return!0;return!1}function Poe(t,e,n,r){function o(c,u,d){var f=u[d];if(f[AE]&&r){var p=c[rv]||{};p[Df]!==!1&&(f=(p[u[Ru]]||{})[d]||f)}return function(){return f.apply(c,arguments)}}var i=ya(null);ov(n,function(c){i[c]=o(e,n,c)});for(var s=Gc(t),a=[];s&&!T_(s)&&!A_(a,s);)ov(s,function(c){!i[c]&&__(s,c,!jf)&&(i[c]=o(e,s,c))}),a.push(s),s=Gc(s);return i}function Ooe(t,e,n,r){var o=null;if(t&&No(n,Ru)){var i=t[rv]||ya(null);if(o=(i[n[Ru]]||ya(null))[e],o||iv("Missing ["+e+"] "+nv),!o[kE]&&i[Df]!==!1){for(var s=!No(t,e),a=Gc(t),c=[];s&&a&&!T_(a)&&!A_(c,a);){var u=a[e];if(u){s=u===r;break}c.push(a),a=Gc(a)}try{s&&(t[e]=o),o[kE]=1}catch{i[Df]=!1}}}return o}function Moe(t,e,n){var r=e[t];return r===n&&(r=Gc(e)[t]),typeof r!==nv&&iv("["+t+"] is not a "+nv),r}function Loe(t,e,n,r,o){function i(c,u){var d=function(){var f=Ooe(this,u,c,d)||Moe(u,c,d);return f.apply(this,arguments)};return d[AE]=1,d}if(!$m(t)){var s=n[rv]=n[rv]||ya(null);if(!$m(s)){var a=s[e]=s[e]||ya(null);s[Df]!==!1&&(s[Df]=!!o),$m(a)||ov(n,function(c){__(n,c,!1)&&n[c]!==r[c]&&(a[c]=n[c],delete n[c],(!No(t,c)||t[c]&&!t[c][AE])&&(t[c]=i(t,c)))})}}}function Doe(t,e){if(jf){for(var n=[],r=Gc(e);r&&!T_(r)&&!A_(n,r);){if(r===t)return!0;n.push(r),r=Gc(r)}return!1}return!0}function $C(t,e){return No(t,Is)?t.name||e||Hx:((t||{})[tv]||{}).name||e||Hx}function hn(t,e,n,r){No(t,Is)||iv("theClass is an invalid class definition.");var o=t[Is];Doe(o,e)||iv("["+$C(t)+"] not in hierarchy of ["+$C(e)+"]");var i=null;No(o,Ru)?i=o[Ru]:(i=Roe+$C(t,"_")+"$"+RE.n,RE.n++,o[Ru]=i);var s=hn[X3],a=!!s[Vm];a&&r&&r[Vm]!==void 0&&(a=!!r[Vm]);var c=Noe(e),u=Poe(o,e,c,a);n(e,u);var d=!!jf&&!!s[xE];d&&r&&(d=!!r[xE]),Loe(o,i,e,c,d!==!1)}hn[X3]=RE.o;var Z3=zre,$r=Gre,Ua=Z3({Unknown:0,NonRetryableStatus:1,InvalidEvent:2,SizeLimitExceeded:3,KillSwitch:4,QueueFull:5}),Dl=Z3({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),k_="toLowerCase",sv="blkVal",pt="length",av="rdOnly",cv="notify",lv="warnToConsole",Sp="throwInternal",Fd="setDf",ha="watch",_n="logger",Yy="apply",Bt="push",Ep="splice",e4="hdlr",mu="cancel",wp="initialize",Zs="identifier",uv="removeNotificationListener",dv="addNotificationListener",Ui="isInitialized",Gx="instrumentationKey",GC="INACTIVE",af="value",dm="getNotifyMgr",Uf="getPlugin",Cc="name",yh="iKey",Nu="time",_r="processNext",t4="getProcessTelContext",Kx="pollInternalLogs",gu="enabled",Wx="stopPollingInternalLogs",Ca="unload",hm="onComplete",qx="version",n4="loggingLevelConsole",Kc="createNew",ls="teardown",hv="messageId",Sc="message",ld="isAsync",gs="diagLog",fv="_doTeardown",Ff="update",Hi="getNext",Bf="setNextPlugin",r4="protocol",NE="userAgent",Qy="split",KC="nodeType",Ec="replace",joe="logInternalMessage",vs="type",x_="handler",Fh="status",Yx="getResponseHeader",Qx="getAllResponseHeaders",PE="isChildEvt",ru="data",Pu="getCtx",bi="setCtx",OE="complete",bh="urlString",Jx="sendPOST",WC="headers",jl="timeout",Xx="setRequestHeader",Zx="traceId",eR="spanId",tR="traceFlags",qC;function Uoe(t,e){qC||(qC=aoe("AggregationError",function(r,o){o[pt]>1&&(r.errors=o[1])}));var n=t;throw Ze(e,function(r,o){n+=`
`.concat(o," > ").concat(Mt(r))}),new qC(n,e||[])}/*!
 * NevWare21 Solutions LLC - ts-async, 0.5.2
 * https://github.com/nevware21/ts-async
 * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
 * Licensed under the MIT license.
 */var pv="Promise",R_="rejected";function ud(t,e){return o4(t,function(n){return e?e({status:"fulfilled",rejected:!1,value:n}):n},function(n){return e?e({status:R_,rejected:!0,reason:n}):n})}function o4(t,e,n,r){var o=t;try{if(ad(t))(e||n)&&(o=t.then(e,n));else try{e&&(o=e(t))}catch(i){if(n)o=n(i);else throw i}}finally{}return o}var i4=["pending","resolving","resolved",R_],nR="dispatchEvent",fm;function Foe(t){var e;return t&&t.createEvent&&(e=t.createEvent("Event")),!!e&&e.initEvent}function Boe(t,e,n,r){var o=ws();!fm&&(fm=Fo(!!cr(Foe,[o]).v));var i=fm.v?o.createEvent("Event"):r?new Event(e):{};if(n&&n(i),fm.v&&i.initEvent(e,!1,!0),i&&t[nR])t[nR](i);else{var s=t["on"+e];if(s)s(i);else{var a=Mn("console");a&&(a.error||a.log)(e,Mt(i))}}}var s4="unhandledRejection",Hoe=s4.toLowerCase(),rR=[],zoe=0,Voe=10,YC;function oR(t){return en(t)?t.toString():Mt(t)}function a4(t,e,n){var r=Wy(arguments,3),o=0,i=!1,s,a=[],c=zoe++,u=!1,d=null,f;function p(E,I){try{rR.push(c),u=!0,d&&d.cancel(),d=null;var T=t(function(A,_){a.push(function(){try{var U=o===2?E:I,k=qt(U)?s:en(U)?U(s):U;ad(k)?k.then(A,_):U?A(k):o===3?_(k):A(k)}catch(G){_(G)}}),i&&y()},r);return T}finally{rR.pop()}}function g(E){return p(void 0,E)}function v(E){var I=E,T=E;return en(E)&&(I=function(A){return E&&E(),A},T=function(A){throw E&&E(),A}),p(I,T)}function b(){return i4[o]}function y(){if(a.length>0){var E=a.slice();a=[],u=!0,d&&d.cancel(),d=null,e(E)}}function C(E,I){return function(T){if(o===I){if(E===2&&ad(T)){o=1,T.then(C(2,1),C(3,1));return}o=E,i=!0,s=T,y(),!u&&E===3&&!d&&(d=$c(S,Voe))}}}function S(){if(!u)if(u=!0,toe())process.emit(s4,s,f);else{var E=_a()||Ud();!YC&&(YC=Fo(cr(Mn,[pv+"RejectionEvent"]).v)),Boe(E,Hoe,function(I){return pn(I,"promise",{g:function(){return f}}),I.reason=s,I},!!YC.v)}}f={then:p,catch:g,finally:v},Es(f,"state",{get:b}),roe()&&(f[y_(11)]="IPromise");function w(){return"IPromise "+b()+(i?" - "+oR(s):"")}return f.toString=w,function(){en(n)||Uo(pv+": executor is not a function - "+oR(n));var I=C(3,0);try{n.call(f,C(2,0),I)}catch(T){I(T)}}(),f}function $oe(t){return function(e){var n=Wy(arguments,1);return t(function(r,o){try{var i=[],s=1;C_(e,function(a,c){a&&(s++,o4(a,function(u){i[c]=u,--s===0&&r(i)},o))}),s--,s===0&&r(i)}catch(a){o(a)}},n)}}function Goe(t){return Fo(function(e){var n=Wy(arguments,1);return t(function(r,o){var i=[],s=1;function a(c,u){s++,ud(c,function(d){d.rejected?i[u]={status:R_,reason:d.reason}:i[u]={status:"fulfilled",value:d.value},--s===0&&r(i)})}try{Tt(e)?Ze(e,a):q3(e)?C_(e,a):Uo("Input is not an iterable"),s--,s===0&&r(i)}catch(c){o(c)}},n)})}function c4(t){Ze(t,function(e){try{e()}catch{}})}function Koe(t){var e=va(t)?t:0;return function(n){$c(function(){c4(n)},e)}}function l4(t,e){return a4(l4,Koe(e),t,e)}var QC;function Woe(t,e){!QC&&(QC=Fo(cr(Mn,[pv]).v||null));var n=QC.v;if(!n)return l4(t);en(t)||Uo(pv+": executor is not a function - "+Mt(t));var r=0;function o(){return i4[r]}var i=new n(function(s,a){function c(d){r=2,s(d)}function u(d){r=3,a(d)}t(c,u)});return Es(i,"state",{get:o}),i}var JC;function u4(t){return a4(u4,c4,t)}function qoe(t,e){return!JC&&(JC=Goe(u4)),JC.v(t,e)}var XC;function Wc(t,e){return!XC&&(XC=Fo(Woe)),XC.v.call(this,t,e)}var Yoe=$oe(Wc),_i=void 0,Nt="",nc="channels",zn="core",ME="createPerfMgr",LE="disabled",Ou="extensionConfig",ou="extensions",qi="processTelemetry",mv="priority",Gm="eventsSent",cf="eventsDiscarded",Km="eventsSendRequest",dc="perfEvent",ZC="offlineEventsStored",eS="offlineBatchSent",tS="offlineBatchDrop",gv="getPerfMgr",DE="domain",nS="path",Qoe="Not dynamic - ",Joe=/-([a-z])/g,Xoe=/([^\w\d_$])/g,Zoe=/^(\d+[\w\d_$])/;function vv(t){return!Yt(t)}function jE(t){var e=t;return e&&mr(e)&&(e=e[Ec](Joe,function(n,r){return r.toUpperCase()}),e=e[Ec](Xoe,"_"),e=e[Ec](Zoe,function(n,r){return"_"+r})),e}function Lr(t,e){return t&&e?qy(t,e)!==-1:!1}function UE(t){return t&&t.toISOString()||""}function d4(t){return Dre(t)?t[Cc]:Nt}function Ul(t,e,n,r,o){var i=n;return t&&(i=t[e],i!==n&&(!o||o(i))&&(!r||r(n))&&(i=n,t[e]=i)),i}function eie(t,e,n){var r;return t?(r=t[e],!r&&Yt(r)&&(r=qt(n)?{}:n,t[e]=r)):r=qt(n)?{}:n,r}function tie(t,e){var n=null,r=null;return en(t)?n=t:r=t,function(){var o=arguments;if(n&&(r=n()),r)return r[e][Yy](r,o)}}function yv(t,e,n,r,o){t&&e&&n&&(t[e]=tie(n,r))}function h4(t,e,n,r){return t&&e&&sd(t)&&Tt(n)&&Ze(n,function(o){mr(o)&&yv(t,o,e,o)}),t}function iu(t){return t&&Px&&(t=u_(Px({},t))),t}function dd(t){try{return t.responseText}catch{}return null}function nie(t,e){return t?"XDomainRequest,Response:"+dd(t)||"":e}function iR(t,e){return t?"XMLHttpRequest,Status:"+t[Fh]+",Response:"+dd(t)||t.response||"":e}function sR(t,e){return e&&(va(e)?t=[e].concat(t):Tt(e)&&(t=e.concat(t))),t}var rie="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",aR="withCredentials",oie="timeout";function iie(t,e,n,r,o,i){o===void 0&&(o=!1);function s(c,u,d){try{c[u]=d}catch{}}var a=new XMLHttpRequest;return s(a,rie,r),n&&s(a,aR,n),a.open(t,e,!o),n&&s(a,aR,n),!o&&i&&s(a,oie,i),a}function sie(t){var e={};if(mr(t)){var n=Ur(t)[Qy](/[\r\n]+/);Ze(n,function(r){if(r){var o=r.indexOf(": ");if(o!==-1){var i=Ur(r.substring(0,o))[k_](),s=Ur(r.substring(o+1));e[i]=s}else e[Ur(r)]=1}})}return e}function rS(t,e,n){if(!t[n]&&e&&e[Yx]){var r=e[Yx](n);r&&(t[n]=Ur(r))}return t}var aie="kill-duration",cie="kill-duration-seconds",lie="time-delta-millis";function Wm(t,e){var n={};return t[Qx]?n=sie(t[Qx]()):e&&(n=rS(n,t,lie),n=rS(n,t,aie),n=rS(n,t,cie)),n}var uie="location",die="console",f4="JSON",hie="crypto",fie="msCrypto",pie="ReactNative",mie="msie",gie="trident/",p4="XMLHttpRequest",oS=null,iS=null,Fl=null,sS=null;function m4(t,e){var n=!1;if(t){try{if(n=e in t,!n){var r=t[of];r&&(n=e in r)}}catch{}if(!n)try{var o=new t;n=!qt(o[e])}catch{}}return n}function Jy(t){return typeof location===c_&&location?location:Mn(uie)}function vie(){return typeof console!==l_?console:Mn(die)}function g4(){return!!(typeof JSON===c_&&JSON||Mn(f4)!==null)}function yie(){return g4()?JSON||Mn(f4):null}function bie(){return Mn(hie)}function Cie(){return Mn(fie)}function FE(){var t=Ji();return t&&t.product?t.product===pie:!1}function BE(){var t=Ji();if(t&&(t[NE]!==iS||oS===null)){iS=t[NE];var e=(iS||Nt)[k_]();oS=Lr(e,mie)||Lr(e,gie)}return oS}function v4(t){return(sS===null||t===!1)&&(sS=eoe()&&!!Ji().sendBeacon),sS}function y4(t){var e=!1;try{e=!!Mn("fetch");var n=Mn("Request");e&&t&&n&&(e=m4(n,"keepalive"))}catch{}return e}function Sie(){return Fl===null&&(Fl=typeof XDomainRequest!==l_,Fl&&b4()&&(Fl=Fl&&!m4(Mn(p4),"withCredentials"))),Fl}function b4(){var t=!1;try{var e=Mn(p4);t=!!e}catch{}return t}var C4=4294967296,wc=4294967295,S4=123456789,E4=987654321,w4=!1,Bh=S4,Hh=E4;function Eie(t){t<0&&(t>>>=0),Bh=S4+t&wc,Hh=E4-t&wc,w4=!0}function wie(){try{var t=ba()&2147483647;Eie((Math.random()*C4^t)+t)}catch{}}function Hf(t){var e=0,n=bie()||Cie();return n&&n.getRandomValues&&(e=n.getRandomValues(new Uint32Array(1))[0]&wc),e===0&&BE()&&(w4||wie(),e=Iie()&wc),e===0&&(e=Math.floor(C4*Math.random()|0)),t||(e>>>=0),e}function Iie(t){Hh=36969*(Hh&65535)+(Hh>>16)&wc,Bh=18e3*(Bh&65535)+(Bh>>16)&wc;var e=(Hh<<16)+(Bh&65535)>>>0&wc|0;return e>>>=0,e}function N_(t){t===void 0&&(t=22);for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=Hf()>>>0,r=0,o=Nt;o[pt]<t;)r++,o+=e.charAt(n&63),n>>>=6,r===5&&(n=(Hf()<<2&4294967295|n&3)>>>0,r=0);return o}var I4="3.3.3",Tie="."+N_(6),_ie=0;function T4(t){return t[KC]===1||t[KC]===9||!+t[KC]}function Aie(t,e){var n=e[t.id];if(!n){n={};try{T4(e)&&pn(e,t.id,{e:!1,v:n})}catch{}}return n}function Bd(t,e){return e===void 0&&(e=!1),jE(t+_ie+++(e?"."+I4:Nt)+Tie)}function _4(t){var e={id:Bd("_aiData-"+(t||Nt)+"."+I4),accept:function(n){return T4(n)},get:function(n,r,o,i){var s=n[e.id];return s?s[jE(r)]:(i&&(s=Aie(e,n),s[jE(r)]=o),o)},kill:function(n,r){if(n&&n[r])try{delete n[r]}catch{}}};return e}function qm(t){return t&&sd(t)&&(t.isVal||t.fb||xu(t,"v")||xu(t,"mrg")||xu(t,"ref")||t.set)}function A4(t,e,n){var r,o=n.dfVal||p_;if(e&&n.fb){var i=n.fb;Tt(i)||(i=[i]);for(var s=0;s<i[pt];s++){var a=i[s],c=e[a];if(o(c)?r=c:t&&(c=t.cfg[a],o(c)&&(r=c),t.set(t.cfg,Xo(a),c)),o(r))break}}return!o(r)&&o(n.v)&&(r=n.v),r}function HE(t,e,n){var r=n;if(n&&qm(n)&&(r=A4(t,e,n)),r){qm(r)&&(r=HE(t,e,r));var o;Tt(r)?(o=[],o[pt]=r[pt]):Zo(r)&&(o={}),o&&(tn(r,function(i,s){s&&qm(s)&&(s=HE(t,e,s)),o[i]=s}),r=o)}return r}function P_(t,e,n,r){var o,i,s,a=r,c,u,d,f;qm(a)?(o=a.isVal,i=a.set,d=a[av],f=a[sv],c=a.mrg,u=a.ref,!u&&qt(u)&&(u=!!c),s=A4(t,e,a)):s=r,f&&t[sv](e,n);var p,g=!0,v=e[n];(v||!Yt(v))&&(p=v,g=!1,o&&p!==s&&!o(p)&&(p=s,g=!0),i&&(p=i(p,s,e),g=p===s)),g?s?p=HE(t,e,s):p=s:(Zo(p)||Tt(s))&&c&&s&&(Zo(s)||Tt(s))&&tn(s,function(b,y){P_(t,p,b,y)}),t.set(e,n,p),u&&t.ref(e,n),d&&t[av](e,n)}var Sa=b_("[[ai_dynCfg_1]]"),k4=b_("[[ai_blkDynCfg_1]]"),kie=b_("[[ai_frcDynCfg_1]]");function x4(t){if(t){var e;if(Tt(t)?(e=[],e[pt]=t[pt]):Zo(t)&&(e={}),e)return tn(t,function(n,r){e[n]=x4(r)}),e}return t}function xie(t){if(t){var e=t[Sa]||t;if(e.cfg&&(e.cfg===t||e.cfg[Sa]===e))return e}return null}function Rie(t){if(t&&(Zo(t)||Tt(t)))try{t[k4]=!0}catch{}return t}function aS(t,e,n){var r=!1;return n&&!t[e.blkVal]&&(r=n[kie],!r&&!n[k4]&&(r=Zo(n)||Tt(n))),r}function R4(t){Uo("InvalidAccess:"+t)}var Nie=["push","pop","shift","unshift","splice"],zf=function(t,e,n,r){t&&t[Sp](3,108,"".concat(n," [").concat(e,"] failed - ")+Mt(r))};function Pie(t,e,n){Tt(e)&&Ze(Nie,function(r){var o=e[r];e[r]=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];var a=o[Yy](this,i);return Cv(t,e,n,"Patching"),a}})}function bv(t,e){var n=m_(t,e);return n&&n.get}function Oie(t,e,n,r){var o={n,h:[],trk:function(u){u&&u.fn&&(Po(o.h,u)===-1&&o.h[Bt](u),t.trk(u,o))},clr:function(u){var d=Po(o.h,u);d!==-1&&o.h[Ep](d,1)}},i=!0,s=!1;function a(){i&&(s=s||aS(a,t,r),r&&!r[Sa]&&s&&(r=Cv(t,r,n,"Converting")),i=!1);var u=t.act;return u&&o.trk(u),r}a[t.prop]={chng:function(){t.add(o)}};function c(u){if(r!==u){a[t.ro]&&!t.upd&&R4("["+n+"] is read-only:"+Mt(e)),i&&(s=s||aS(a,t,r),i=!1);var d=s&&a[t.rf];if(s)if(d){tn(r,function(p){r[p]=u?u[p]:_i});try{tn(u,function(p,g){Xy(t,r,p,g)}),u=r}catch(p){zf((t.hdlr||{})[_n],n,"Assigning",p),s=!1}}else r&&r[Sa]&&tn(r,function(p){var g=bv(r,p);if(g){var v=g[t.prop];v&&v.chng()}});if(u!==r){var f=u&&aS(a,t,u);!d&&f&&(u=Cv(t,u,n,"Converting")),r=u,s=f}t.add(o)}}pn(e,o.n,{g:a,s:c})}function Xy(t,e,n,r){if(e){var o=bv(e,n),i=o&&!!o[t.prop];i?e[n]=r:Oie(t,e,n,r)}return e}function cS(t,e,n,r){if(e){var o=bv(e,n),i=o&&!!o[t.prop],s=r&&r[0],a=r&&r[1],c=r&&r[2];if(!i){if(c)try{Rie(e)}catch(u){zf((t.hdlr||{})[_n],n,"Blocking",u)}try{Xy(t,e,n,e[n]),o=bv(e,n)}catch(u){zf((t.hdlr||{})[_n],n,"State",u)}}s&&(o[t.rf]=s),a&&(o[t.ro]=a),c&&(o[t.blkVal]=!0)}return e}function Cv(t,e,n,r){try{tn(e,function(o,i){Xy(t,e,o,i)}),e[Sa]||(Es(e,Sa,{get:function(){return t[e4]}}),Pie(t,e,n))}catch(o){zf((t.hdlr||{})[_n],n,r,o)}return e}var Ch="[[ai_",Sh="]]";function Mie(t){var e,n=vh(Ch+"get"+t.uid+Sh),r=vh(Ch+"ro"+t.uid+Sh),o=vh(Ch+"rf"+t.uid+Sh),i=vh(Ch+"blkVal"+t.uid+Sh),s=vh(Ch+"dtl"+t.uid+Sh),a=null,c=null,u;function d(v,b){var y=u.act;try{u.act=v,v&&v[s]&&(Ze(v[s],function(S){S.clr(v)}),v[s]=[]),b({cfg:t.cfg,set:t.set.bind(t),setDf:t[Fd].bind(t),ref:t.ref.bind(t),rdOnly:t[av].bind(t)})}catch(S){var C=t[_n];throw C&&C[Sp](1,107,Mt(S)),S}finally{u.act=y||null}}function f(){if(a){var v=a;a=null,c&&c[mu](),c=null;var b=[];if(Ze(v,function(y){if(y&&(y[s]&&(Ze(y[s],function(C){C.clr(y)}),y[s]=null),y.fn))try{d(y,y.fn)}catch(C){b[Bt](C)}}),a)try{f()}catch(y){b[Bt](y)}b[pt]>0&&Uoe("Watcher error(s): ",b)}}function p(v){if(v&&v.h[pt]>0){a||(a=[]),c||(c=$c(function(){c=null,f()},0));for(var b=0;b<v.h[pt];b++){var y=v.h[b];y&&Po(a,y)===-1&&a[Bt](y)}}}function g(v,b){if(v){var y=v[s]=v[s]||[];Po(y,b)===-1&&y[Bt](b)}}return u=(e={prop:n,ro:r,rf:o},e[sv]=i,e[e4]=t,e.add=p,e[cv]=f,e.use=d,e.trk=g,e),u}function Lie(t,e){var n={fn:e,rm:function(){n.fn=null,t=null,e=null}};return pn(n,"toJSON",{v:function(){return"WatcherHandler"+(n.fn?"":"[X]")}}),t.use(n,e),n}function Die(t,e,n){var r,o=xie(e);if(o)return o;var i=Bd("dyncfg",!0),s=e&&n!==!1?e:x4(e),a;function c(){a[cv]()}function u(C,S,w){try{C=Xy(a,C,S,w)}catch(E){zf(t,S,"Setting value",E)}return C[S]}function d(C){return Lie(a,C)}function f(C,S){a.use(null,function(w){var E=a.upd;try{qt(S)||(a.upd=S),C(w)}finally{a.upd=E}})}function p(C,S){var w;return cS(a,C,S,(w={},w[0]=!0,w))[S]}function g(C,S){var w;return cS(a,C,S,(w={},w[1]=!0,w))[S]}function v(C,S){var w;return cS(a,C,S,(w={},w[2]=!0,w))[S]}function b(C,S){return S&&tn(S,function(w,E){P_(y,C,w,E)}),C}var y=(r={uid:null,cfg:s},r[_n]=t,r[cv]=c,r.set=u,r[Fd]=b,r[ha]=d,r.ref=p,r[av]=g,r[sv]=v,r._block=f,r);return pn(y,"uid",{c:!1,e:!1,w:!1,v:i}),a=Mie(y),Cv(a,s,"config","Creating"),y}function jie(t,e){t?(t[lv](e),t[Sp](2,108,e)):R4(e)}function co(t,e,n,r){var o=Die(n,t||{},r);return e&&o[Fd](o.cfg,e),o}function vr(t,e,n){var r=t[Sa]||t;return r.cfg&&(r.cfg===t||r.cfg[Sa]===r)?r[ha](e):(jie(n,Qoe+Mt(t)),co(t,null,n)[ha](e))}function zh(t,e){if(t&&t[Ca])return t[Ca](e)}function N4(t,e,n){var r;return n||(r=Wc(function(o){n=o})),t&&boe(t)>0?ud(zh(t[0],e),function(){N4(Wy(t,1),e,n)}):n(),r}var Uie=500,cR="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function zE(t){return{mrg:!0,v:t}}function Fa(t){return{isVal:mr,v:Xo(Nt)}}var lS=[Gm,cf,Km,dc],Sv=null,pm;function Fie(t,e){return function(){var n=arguments,r=P4(e);if(r){var o=r.listener;o&&o[t]&&o[t][Yy](o,n)}}}function Bie(){var t=Mn("Microsoft");return t&&(Sv=t.ApplicationInsights),Sv}function P4(t){var e=Sv;return!e&&t.disableDbgExt!==!0&&(e=Sv||Bie()),e?e.ChromeDbgExt:null}function Hie(t){if(!pm){pm={};for(var e=0;e<lS[pt];e++)pm[lS[e]]=Fie(lS[e],t)}return pm}var Bl,O4="warnToConsole",zie="AI (Internal): ",Vie="AI: ",$ie="AITR_",Gie={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},Kie=(Bl={},Bl[0]=null,Bl[1]="errorToConsole",Bl[2]=O4,Bl[3]="debugToConsole",Bl);function lR(t){return t?'"'+t[Ec](/\"/g,Nt)+'"':Nt}function uS(t,e){var n=vie();if(n){var r="log";n[t]&&(r=t),en(n[r])&&n[r](e)}}var VE=function(){function t(e,n,r,o){r===void 0&&(r=!1);var i=this;i[hv]=e,i[Sc]=(r?Vie:zie)+e;var s=Nt;g4()&&(s=yie().stringify(o));var a=(n?" message:"+lR(n):Nt)+(o?" props:"+lR(s):Nt);i[Sc]+=a}return t.dataType="MessageData",t}();function O_(t,e){return(t||{})[_n]||new Ev(e)}var Ev=function(){function t(e){this.identifier="DiagnosticLogger",this.queue=[];var n=0,r={},o,i,s,a,c;hn(t,this,function(u){c=f(e||{}),u.consoleLoggingLevel=function(){return o},u[Sp]=function(v,b,y,C,S){S===void 0&&(S=!1);var w=new VE(b,y,S,C);if(a)throw Mt(w);var E=Kie[v]||O4;if(qt(w[Sc]))g("throw"+(v===1?"Critical":"Warning"),w);else{if(S){var I=+w[hv];!r[I]&&o>=v&&(u[E](w[Sc]),r[I]=!0)}else o>=v&&u[E](w[Sc]);d(v,w)}},u.debugToConsole=function(v){uS("debug",v),g("warning",v)},u[lv]=function(v){uS("warn",v),g("warning",v)},u.errorToConsole=function(v){uS("error",v),g("error",v)},u.resetInternalMessageCount=function(){n=0,r={}},u[joe]=d,u[Ca]=function(v){c&&c.rm(),c=null};function d(v,b){if(!p()){var y=!0,C=$ie+b[hv];if(r[C]?y=!1:r[C]=!0,y&&(v<=i&&(u.queue[Bt](b),n++,g(v===1?"error":"warn",b)),n===s)){var S="Internal events throttle limit per PageView reached for this app.",w=new VE(23,S,!1);u.queue[Bt](w),v===1?u.errorToConsole(S):u[lv](S)}}}function f(v){return vr(co(v,Gie,u).cfg,function(b){var y=b.cfg;o=y[n4],i=y.loggingLevelTelemetry,s=y.maxMessageLimit,a=y.enableDebug})}function p(){return n>=s}function g(v,b){var y=P4(e||{});y&&y[gs]&&y[gs](v,b)}})}return t.__ieDyn=1,t}();function M4(t){return t||new Ev}function Xt(t,e,n,r,o,i){i===void 0&&(i=!1),M4(t)[Sp](e,n,r,o,i)}function lf(t,e){M4(t)[lv](e)}var dS,Ba,uR="toGMTString",dR="toUTCString",M_="cookie",hS="expires",hR="isCookieUseDisabled",$E="disableCookiesUsage",vu="_ckMgr",mm=null,fS=null,fR=null,zi,pR={},wv={},Wie=(dS={cookieCfg:zE((Ba={},Ba[DE]={fb:"cookieDomain",dfVal:vv},Ba.path={fb:"cookiePath",dfVal:vv},Ba.enabled=_i,Ba.ignoreCookies=_i,Ba.blockedCookies=_i,Ba)),cookieDomain:_i,cookiePath:_i},dS[$E]=_i,dS);function L_(){!zi&&(zi=Xre(function(){return ws()}))}function qie(t,e){var n=Ym[vu]||wv[vu];return n||(n=Ym[vu]=Ym(t,e),wv[vu]=n),n}function gm(t){return t?t.isEnabled():!0}function L4(t,e){return e&&t&&Tt(t.ignoreCookies)?Po(t.ignoreCookies,e)!==-1:!1}function Yie(t,e){return e&&t&&Tt(t.blockedCookies)&&Po(t.blockedCookies,e)!==-1?!0:L4(t,e)}function mR(t,e){var n=e[gu];if(Yt(n)){var r=void 0;qt(t[hR])||(r=!t[hR]),qt(t[$E])||(r=!t[$E]),n=r}return n}function D4(t,e){var n;return t&&(n=t.getCookieMgr()),n||(n=qie(e,(t||{})[_n])),n}function Ym(t,e){var n,r,o,i,s,a,c,u,d;t=co(t||wv,null,e).cfg,s=vr(t,function(p){p[Fd](p.cfg,Wie),r=p.ref(p.cfg,"cookieCfg"),o=r[nS]||"/",i=r[DE],a=mR(t,r)!==!1,c=r.getCookie||Qie,u=r.setCookie||bR,d=r.delCookie||bR},e);var f=(n={isEnabled:function(){var p=mR(t,r)!==!1&&a&&gR(e),g=wv[vu];return p&&g&&f!==g&&(p=gm(g)),p},setEnabled:function(p){a=p!==!1,r[gu]=p},set:function(p,g,v,b,y){var C=!1;if(gm(f)&&!Yie(r,p)){var S={},w=Ur(g||Nt),E=qy(w,";");if(E!==-1&&(w=Ur(g_(g,E)),S=j4(xi(g,E+1))),Ul(S,DE,b||i,Nx,qt),!Yt(v)){var I=BE();if(qt(S[hS])){var T=ba(),A=T+v*1e3;if(A>0){var _=new Date;_.setTime(A),Ul(S,hS,vR(_,I?uR:dR)||vR(_,I?uR:dR)||Nt,Nx)}}I||Ul(S,"max-age",Nt+v,null,qt)}var U=Jy();U&&U[r4]==="https:"&&(Ul(S,"secure",null,null,qt),fS===null&&(fS=!Jie((Ji()||{})[NE])),fS&&Ul(S,"SameSite","None",null,qt)),Ul(S,nS,y||o,null,qt),u(p,yR(w,S)),C=!0}return C},get:function(p){var g=Nt;return gm(f)&&!L4(r,p)&&(g=c(p)),g},del:function(p,g){var v=!1;return gm(f)&&(v=f.purge(p,g)),v},purge:function(p,g){var v,b=!1;if(gR(e)){var y=(v={},v[nS]=g||"/",v[hS]="Thu, 01 Jan 1970 00:00:01 GMT",v);BE()||(y["max-age"]="0"),d(p,yR(Nt,y)),b=!0}return b}},n[Ca]=function(p){s&&s.rm(),s=null},n);return f[vu]=f,f}function gR(t){if(mm===null){mm=!1,!zi&&L_();try{var e=zi.v||{};mm=e[M_]!==void 0}catch(n){Xt(t,2,68,"Cannot access document.cookie - "+d4(n),{exception:Mt(n)})}}return mm}function j4(t){var e={};if(t&&t[pt]){var n=Ur(t)[Qy](";");Ze(n,function(r){if(r=Ur(r||Nt),r){var o=qy(r,"=");o===-1?e[r]=null:e[Ur(g_(r,o))]=Ur(xi(r,o+1))}})}return e}function vR(t,e){return en(t[e])?t[e]():null}function yR(t,e){var n=t||Nt;return tn(e,function(r,o){n+="; "+r+(Yt(o)?Nt:"="+o)}),n}function Qie(t){var e=Nt;if(!zi&&L_(),zi.v){var n=zi.v[M_]||Nt;fR!==n&&(pR=j4(n),fR=n),e=Ur(pR[t]||Nt)}return e}function bR(t,e){!zi&&L_(),zi.v&&(zi.v[M_]=t+"="+e)}function Jie(t){return mr(t)?!!(Lr(t,"CPU iPhone OS 12")||Lr(t,"iPad; CPU OS 12")||Lr(t,"Macintosh; Intel Mac OS X 10_14")&&Lr(t,"Version/")&&Lr(t,"Safari")||Lr(t,"Macintosh; Intel Mac OS X 10_14")&&Eoe(t,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Lr(t,"Chrome/5")||Lr(t,"Chrome/6")||Lr(t,"UnrealEngine")&&!Lr(t,"Chrome")||Lr(t,"UCBrowser/12")||Lr(t,"UCBrowser/11")):!1}var Xie={perfEvtsSendAll:!1};function Zie(t){t.h=null;var e=t.cb;t.cb=[],Ze(e,function(n){cr(n.fn,[n.arg])})}function Hs(t,e,n,r){Ze(t,function(o){o&&o[e]&&(n?(n.cb[Bt]({fn:r,arg:o}),n.h=n.h||$c(Zie,0,n)):cr(r,[o]))})}var ese=function(){function t(e){this.listeners=[];var n,r,o=[],i={h:null,cb:[]},s=co(e,Xie);r=s[ha](function(a){n=!!a.cfg.perfEvtsSendAll}),hn(t,this,function(a){pn(a,"listeners",{g:function(){return o}}),a[dv]=function(c){o[Bt](c)},a[uv]=function(c){for(var u=Po(o,c);u>-1;)o[Ep](u,1),u=Po(o,c)},a[Gm]=function(c){Hs(o,Gm,i,function(u){u[Gm](c)})},a[cf]=function(c,u){Hs(o,cf,i,function(d){d[cf](c,u)})},a[Km]=function(c,u){Hs(o,Km,u?i:null,function(d){d[Km](c,u)})},a[dc]=function(c){c&&(n||!c[PE]())&&Hs(o,dc,null,function(u){c[ld]?$c(function(){return u[dc](c)},0):u[dc](c)})},a[ZC]=function(c){c&&c[pt]&&Hs(o,ZC,i,function(u){u[ZC](c)})},a[eS]=function(c){c&&c[ru]&&Hs(o,eS,i,function(u){u[eS](c)})},a[tS]=function(c,u){if(c>0){var d=u||0;Hs(o,tS,i,function(f){f[tS](c,d)})}},a[Ca]=function(c){var u=function(){r&&r.rm(),r=null,o=[],i.h&&i.h[mu](),i.h=null,i.cb=[]},d;if(Hs(o,"unload",null,function(f){var p=f[Ca](c);p&&(d||(d=[]),d[Bt](p))}),d)return Wc(function(f){return ud(Yoe(d),function(){u(),f()})});u()}})}return t.__ieDyn=1,t}(),Mu="ctx",GE="ParentContextKey",uf="ChildrenContextKey",tse=null,Qm=function(){function t(e,n,r){var o=this;if(o.start=ba(),o[Cc]=e,o[ld]=r,o[PE]=function(){return!1},en(n)){var i;pn(o,"payload",{g:function(){return!i&&en(n)&&(i=n(),n=null),i}})}o[Pu]=function(s){return s?s===t[GE]||s===t[uf]?o[s]:(o[Mu]||{})[s]:null},o[bi]=function(s,a){if(s)if(s===t[GE])o[s]||(o[PE]=function(){return!0}),o[s]=a;else if(s===t[uf])o[s]=a;else{var c=o[Mu]=o[Mu]||{};c[s]=a}},o[OE]=function(){var s=0,a=o[Pu](t[uf]);if(Tt(a))for(var c=0;c<a[pt];c++){var u=a[c];u&&(s+=u[Nu])}o[Nu]=ba()-o.start,o.exTime=o[Nu]-s,o[OE]=function(){}}}return t.ParentContextKey="parent",t.ChildrenContextKey="childEvts",t}(),nse=function(){function t(e){this.ctx={},hn(t,this,function(n){n.create=function(r,o,i){return new Qm(r,o,i)},n.fire=function(r){r&&(r[OE](),e&&en(e[dc])&&e[dc](r))},n[bi]=function(r,o){if(r){var i=n[Mu]=n[Mu]||{};i[r]=o}},n[Pu]=function(r){return(n[Mu]||{})[r]}})}return t.__ieDyn=1,t}(),pS="CoreUtils.doPerf";function jr(t,e,n,r,o){if(t){var i=t;if(i[gv]&&(i=i[gv]()),i){var s=void 0,a=i[Pu](pS);try{if(s=i.create(e(),r,o),s){if(a&&s[bi]&&(s[bi](Qm[GE],a),a[Pu]&&a[bi])){var c=a[Pu](Qm[uf]);c||(c=[],a[bi](Qm[uf],c)),c[Bt](s)}return i[bi](pS,s),n(s)}}catch(u){s&&s[bi]&&s[bi]("exception",u)}finally{s&&i.fire(s),i[bi](pS,a)}}}return n()}function rse(){return tse}function U4(){var t=KE();return xi(t,0,8)+"-"+xi(t,8,12)+"-"+xi(t,12,16)+"-"+xi(t,16,20)+"-"+xi(t,20)}function KE(){for(var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],e=Nt,n,r=0;r<4;r++)n=Hf(),e+=t[n&15]+t[n>>4&15]+t[n>>8&15]+t[n>>12&15]+t[n>>16&15]+t[n>>20&15]+t[n>>24&15]+t[n>>28&15];var o=t[8+(Hf()&3)|0];return nu(e,0,8)+nu(e,9,4)+"4"+nu(e,13,3)+o+nu(e,16,3)+nu(e,19,12)}var ose="00000000000000000000000000000000",ise="0000000000000000";function F4(t,e,n){return t&&t[pt]===e&&t!==n?!!t.match(/^[\da-f]*$/i):!1}function B4(t){return F4(t,32,ose)}function H4(t){return F4(t,16,ise)}var sse=_4("plugin");function Ic(t){return sse.get(t,"state",{},!0)}function CR(t,e){for(var n=[],r=null,o=t[Hi](),i;o;){var s=o[Uf]();if(s){r&&r[Bf]&&s[qi]&&r[Bf](s),i=Ic(s);var a=!!i[Ui];s[Ui]&&(a=s[Ui]()),a||n[Bt](s),r=s,o=o[Hi]()}}Ze(n,function(c){var u=t[zn]();c[wp](t.getCfg(),u,e,t[Hi]()),i=Ic(c),!c[zn]&&!i[zn]&&(i[zn]=u),i[Ui]=!0,delete i[ls]})}function mS(t){return t.sort(function(e,n){var r=0;if(n){var o=n[qi];e[qi]?r=o?e[mv]-n[mv]:1:o&&(r=-1)}else r=e?1:-1;return r})}function ase(t){var e={};return{getName:function(){return e[Cc]},setName:function(n){e[Cc]=n},getTraceId:function(){return e[Zx]},setTraceId:function(n){B4(n)&&(e[Zx]=n)},getSpanId:function(){return e[eR]},setSpanId:function(n){H4(n)&&(e[eR]=n)},getTraceFlags:function(){return e[tR]},setTraceFlags:function(n){e[tR]=n}}}var cse="TelemetryPluginChain",SR="_hasRun",ER="_getTelCtx",wR=0;function lse(t,e,n){for(;t;){if(t[Uf]()===n)return t;t=t[Hi]()}return Yc([n],e.config||{},e)}function D_(t,e,n,r){var o=null,i=[];e||(e=co({},null,n[_n])),r!==null&&(o=r?lse(t,n,r):t);var s={_next:c,ctx:{core:function(){return n},diagLog:function(){return O_(n,e.cfg)},getCfg:function(){return e.cfg},getExtCfg:d,getConfig:f,hasNext:function(){return!!o},getNext:function(){return o},setNext:function(g){o=g},iterate:p,onComplete:a}};function a(g,v){for(var b=[],y=2;y<arguments.length;y++)b[y-2]=arguments[y];g&&i[Bt]({func:g,self:qt(v)?s.ctx:v,args:b})}function c(){var g=o;if(o=g?g[Hi]():null,!g){var v=i;v&&v[pt]>0&&(Ze(v,function(b){try{b.func.call(b.self,b.args)}catch(y){Xt(n[_n],2,73,"Unexpected Exception during onComplete - "+Mt(y))}}),i=[])}return g}function u(g,v){var b=null,y=e.cfg;if(y&&g){var C=y[Ou];!C&&v&&(C={}),y[Ou]=C,C=e.ref(y,Ou),C&&(b=C[g],!b&&v&&(b={}),C[g]=b,b=e.ref(C,g))}return b}function d(g,v){var b=u(g,!0);return v&&tn(v,function(y,C){if(Yt(b[y])){var S=e.cfg[y];(S||!Yt(S))&&(b[y]=S)}P_(e,b,y,C)}),e[Fd](b,v)}function f(g,v,b){b===void 0&&(b=!1);var y,C=u(g,!1),S=e.cfg;return C&&(C[v]||!Yt(C[v]))?y=C[v]:(S[v]||!Yt(S[v]))&&(y=S[v]),y||!Yt(y)?y:b}function p(g){for(var v;v=s._next();){var b=v[Uf]();b&&g(b)}}return s}function qc(t,e,n,r){var o=co(e),i=D_(t,o,n,r),s=i.ctx;function a(u){var d=i._next();return d&&d[qi](u,s),!d}function c(u,d){return u===void 0&&(u=null),Tt(u)&&(u=Yc(u,o.cfg,n,d)),qc(u||s[Hi](),o.cfg,n,d)}return s[_r]=a,s[Kc]=c,s}function Iv(t,e,n){var r=co(e.config),o=D_(t,r,e,n),i=o.ctx;function s(c){var u=o._next();return u&&u[Ca](i,c),!u}function a(c,u){return c===void 0&&(c=null),Tt(c)&&(c=Yc(c,r.cfg,e,u)),Iv(c||i[Hi](),e,u)}return i[_r]=s,i[Kc]=a,i}function j_(t,e,n){var r=co(e.config),o=D_(t,r,e,n),i=o.ctx;function s(c){return i.iterate(function(u){en(u[Ff])&&u[Ff](i,c)})}function a(c,u){return c===void 0&&(c=null),Tt(c)&&(c=Yc(c,r.cfg,e,u)),j_(c||i[Hi](),e,u)}return i[_r]=s,i[Kc]=a,i}function Yc(t,e,n,r){var o=null,i=!r;if(Tt(t)&&t[pt]>0){var s=null;Ze(t,function(a){if(!i&&r===a&&(i=!0),i&&a&&en(a[qi])){var c=use(a,e,n);o||(o=c),s&&s._setNext(c),s=c}})}return r&&!o?Yc([r],e,n):o}function use(t,e,n){var r=null,o=en(t[qi]),i=en(t[Bf]),s;t?s=t[Zs]+"-"+t[mv]+"-"+wR++:s="Unknown-0-"+wR++;var a={getPlugin:function(){return t},getNext:function(){return r},processTelemetry:d,unload:f,update:p,_id:s,_setNext:function(g){r=g}};function c(){var g;return t&&en(t[ER])&&(g=t[ER]()),g||(g=qc(a,e,n)),g}function u(g,v,b,y,C){var S=!1,w=t?t[Zs]:cse,E=g[SR];return E||(E=g[SR]={}),g.setNext(r),t&&jr(g[zn](),function(){return w+":"+b},function(){E[s]=!0;try{var I=r?r._id:Nt;I&&(E[I]=!1),S=v(g)}catch(A){var T=r?E[r._id]:!0;T&&(S=!0),(!r||!T)&&Xt(g[gs](),1,73,"Plugin ["+w+"] failed during "+b+" - "+Mt(A)+", run flags: "+Mt(E))}},y,C),S}function d(g,v){v=v||c();function b(y){if(!t||!o)return!1;var C=Ic(t);return C[ls]||C[LE]?!1:(i&&t[Bf](r),t[qi](g,y),!0)}u(v,b,"processTelemetry",function(){return{item:g}},!g.sync)||v[_r](g)}function f(g,v){function b(){var y=!1;if(t){var C=Ic(t),S=t[zn]||C[zn];t&&(!S||S===g.core())&&!C[ls]&&(C[zn]=null,C[ls]=!0,C[Ui]=!1,t[ls]&&t[ls](g,v)===!0&&(y=!0))}return y}u(g,b,"unload",function(){},v[ld])||g[_r](v)}function p(g,v){function b(){var y=!1;if(t){var C=Ic(t),S=t[zn]||C[zn];t&&(!S||S===g.core())&&!C[ls]&&t[Ff]&&t[Ff](g,v)===!0&&(y=!0)}return y}u(g,b,"update",function(){},!1)||g[_r](v)}return Vc(a)}function z4(){var t=[];function e(r){r&&t[Bt](r)}function n(r,o){Ze(t,function(i){try{i(r,o)}catch(s){Xt(r[gs](),2,73,"Unexpected error calling unload handler - "+Mt(s))}}),t=[]}return{add:e,run:n}}function V4(){var t=[];function e(r){var o=t;t=[],Ze(o,function(i){try{(i.rm||i.remove).call(i)}catch(s){Xt(r,2,73,"Unloading:"+Mt(s))}})}function n(r){r&&ia(t,r)}return{run:e,add:n}}var gS,zs="getPlugin",dse=(gS={},gS[Ou]={isVal:vv,v:{}},gS),U_=function(){function t(){var e=this,n,r,o,i,s;u(),hn(t,e,function(d){d[wp]=function(f,p,g,v){c(f,p,v),n=!0},d[ls]=function(f,p){var g,v=d[zn];if(!v||f&&v!==f[zn]())return;var b,y=!1,C=f||Iv(null,v,o&&o[zs]?o[zs]():o),S=p||(g={reason:0},g[ld]=!1,g);function w(){y||(y=!0,i.run(C,p),s.run(C[gs]()),b===!0&&C[_r](S),u())}return!d[fv]||d[fv](C,S,w)!==!0?w():b=!0,b},d[Ff]=function(f,p){var g=d[zn];if(!g||f&&g!==f[zn]())return;var v,b=!1,y=f||j_(null,g,o&&o[zs]?o[zs]():o),C=p||{reason:0};function S(){b||(b=!0,c(y.getCfg(),y.core(),y[Hi]()))}return!d._doUpdate||d._doUpdate(y,C,S)!==!0?S():v=!0,v},yv(d,"_addUnloadCb",function(){return i},"add"),yv(d,"_addHook",function(){return s},"add"),pn(d,"_unloadHooks",{g:function(){return s}})}),e[gs]=function(d){return a(d)[gs]()},e[Ui]=function(){return n},e.setInitialized=function(d){n=d},e[Bf]=function(d){o=d},e[_r]=function(d,f){f?f[_r](d):o&&en(o[qi])&&o[qi](d,null)},e._getTelCtx=a;function a(d){d===void 0&&(d=null);var f=d;if(!f){var p=r||qc(null,{},e[zn]);o&&o[zs]?f=p[Kc](null,o[zs]):f=p[Kc](null,o)}return f}function c(d,f,p){co(d,dse,O_(f)),!p&&f&&(p=f[t4]()[Hi]());var g=o;o&&o[zs]&&(g=o[zs]()),e[zn]=f,r=qc(p,d,f,g)}function u(){n=!1,e[zn]=null,r=null,o=null,s=V4(),i=z4()}}return t.__ieDyn=1,t}();function hse(t,e,n){var r={id:e,fn:n};ia(t,r);var o={remove:function(){Ze(t,function(i,s){if(i.id===r.id)return t[Ep](s,1),-1})}};return o}function fse(t,e,n){for(var r=!1,o=t[pt],i=0;i<o;++i){var s=t[i];if(s)try{if(s.fn[Yy](null,[e])===!1){r=!0;break}}catch(a){Xt(n,2,64,"Telemetry initializer failed: "+d4(a),{exception:Mt(a)},!0)}}return!r}var pse=function(t){Cp(e,t);function e(){var n=t.call(this)||this;n.identifier="TelemetryInitializerPlugin",n.priority=199;var r,o;i(),hn(e,n,function(s,a){s.addTelemetryInitializer=function(c){return hse(o,r++,c)},s[qi]=function(c,u){fse(o,c,u?u[gs]():s[gs]())&&s[_r](c,u)},s[fv]=function(){i()}});function i(){r=0,o=[]}return n}return e.__ieDyn=1,e}(U_),Vs,$4="Plugins must provide initialize method",mse="_notificationManager",IR="SDK is still unloading...",gse="SDK is not initialized",vse=100,yse=5e4,vS=jd((Vs={cookieCfg:{}},Vs[ou]={rdOnly:!0,ref:!0,v:[]},Vs[nc]={rdOnly:!0,ref:!0,v:[]},Vs[Ou]={ref:!0,v:{}},Vs[ME]=_i,Vs.loggingLevelConsole=0,Vs.diagnosticLogInterval=_i,Vs));function bse(t,e){return new nse(e)}function Cse(t,e,n){var r,o=[],i=[],s={};return Ze(n,function(a){(Yt(a)||Yt(a[wp]))&&bo($4);var c=a[mv],u=a[Zs];a&&c&&(Yt(s[c])?s[c]=u:lf(t,"Two extensions have same priority #"+c+" - "+s[c]+", "+u)),!c||c<e?o[Bt](a):i[Bt](a)}),r={},r[zn]=o,r[nc]=i,r}function TR(t,e){var n=!1;return Ze(e,function(r){if(r===t)return n=!0,-1}),n}function WE(t,e,n,r){n&&tn(n,function(o,i){r&&Zo(i)&&Zo(e[o])&&WE(t,e[o],i,r),r&&Zo(i)&&Zo(e[o])?WE(t,e[o],i,r):t.set(e,o,i)})}function _R(t,e){var n=null,r=-1;return Ze(t,function(o,i){if(o.w===e)return n=o,r=i,-1}),{i:r,l:n}}function Sse(t,e){var n=_R(t,e).l;return n||(n={w:e,rm:function(){var r=_R(t,e);r.i!==-1&&t[Ep](r.i,1)}},t[Bt](n)),n}function Ese(t,e,n){Ze(e,function(r){var o=vr(t,r.w,n);delete r.w,r.rm=function(){o.rm()}})}function wse(t,e,n,r){return e.add(t[ha](function(o){var i=o.cfg.disableDbgExt;i===!0&&r&&(n[uv](r),r=null),n&&!r&&i!==!0&&(r=Hie(o.cfg),n[dv](r))})),r}function Ise(t){return pn({rm:function(){t.rm()}},"toJSON",{v:function(){return"aicore::onCfgChange<"+JSON.stringify(t)+">"}})}var Tse=function(){function t(){var e,n,r,o,i,s,a,c,u,d,f,p,g,v,b,y,C,S,w,E,I,T,A,_,U,k,G,K,ie,P,$,Z;hn(t,this,function(x){X(),x._getDbgPlgTargets=function(){return[A,o]},x[Ui]=function(){return n},x.activeStatus=function(){return k},x._setPendingStatus=function(){k=3},x[wp]=function(N,te,Ce,D){g&&bo(IR),x[Ui]()&&bo("Core cannot be initialized more than once"),e=co(N,vS,Ce||x[_n],!1),N=e.cfg,we(e[ha](function(Je){var it=Je.cfg,st=k===3;if(!st){K=it.initInMemoMaxSize||vse;var Be=it[Gx],$e=it.endpointUrl;if(Yt(Be)){I=null,k=Dl[GC];var wt="Please provide instrumentation key";n?(Xt(r,1,100,wt),ne()):bo(wt);return}var nn=[];if(ad(Be)?(nn[Bt](Be),I=null):I=Be,ad($e)?(nn[Bt]($e),G=null):G=$e,nn[pt]){ie=!1,k=3;var _t=vv(it.initTimeOut)?it.initTimeOut:yse,rn=qoe(nn);$c(function(){ie||L()},_t),ud(rn,function(j){try{if(ie)return;if(!j.rejected){var ue=j[af];if(ue&&ue[pt]){var q=ue[0];if(I=q&&q[af],ue[pt]>1){var ce=ue[1];G=ce&&ce[af]}}I&&(N[Gx]=I,N.endpointUrl=G)}L()}catch{ie||L()}})}else L();var Rn=Je.ref(Je.cfg,Ou);tn(Rn,function(j){Je.ref(Rn,j)})}})),i=D,w=wse(e,S,i&&x[dm](),w),B(),x[_n]=Ce;var Y=N[ou];if(d=[],d[Bt].apply(d,Bx(Bx([],te,!1),Y)),f=N[nc],Oe(null),(!p||p[pt]===0)&&bo("No "+nc+" available"),f&&f[pt]>1){var Ie=x[Uf]("TeeChannelController");(!Ie||!Ie.plugin)&&Xt(r,1,28,"TeeChannel required")}Ese(N,T,r),T=null,n=!0,k===Dl.ACTIVE&&ne()},x.getChannels=function(){var N=[];return p&&Ze(p,function(te){N[Bt](te)}),Vc(N)},x.track=function(N){jr(x[gv](),function(){return"AppInsightsCore:track"},function(){N===null&&(oe(N),bo("Invalid telemetry item")),!N[Cc]&&Yt(N[Cc])&&(oe(N),bo("telemetry name required")),N[yh]=N[yh]||I,N[Nu]=N[Nu]||UE(new Date),N.ver=N.ver||"4.0",!g&&x[Ui]()&&k===Dl.ACTIVE?ge()[_r](N):k!==Dl[GC]&&o[pt]<=K&&o[Bt](N)},function(){return{item:N}},!N.sync)},x[t4]=ge,x[dm]=function(){return i||(i=new ese(e.cfg),x[mse]=i),i},x[dv]=function(N){x.getNotifyMgr()[dv](N)},x[uv]=function(N){i&&i[uv](N)},x.getCookieMgr=function(){return c||(c=Ym(e.cfg,x[_n])),c},x.setCookieMgr=function(N){c!==N&&(zh(c,!1),c=N)},x[gv]=function(){return s||a||rse()},x.setPerfMgr=function(N){s=N},x.eventCnt=function(){return o[pt]},x.releaseQueue=function(){if(n&&o[pt]>0){var N=o;o=[],k===2?Ze(N,function(te){te[yh]=te[yh]||I,ge()[_r](te)}):Xt(r,2,20,"core init status is not active")}},x[Kx]=function(N){return b=N||null,Z=!1,P&&P[mu](),se(!0)};function L(){ie=!0,Yt(I)?(k=Dl[GC],Xt(r,1,112,"ikey can't be resolved from promises")):k=Dl.ACTIVE,ne()}function ne(){n&&(x.releaseQueue(),x[Kx]())}function se(N){if((!P||!P[gu])&&!Z){var te=N||r&&r.queue[pt]>0;te&&($||($=!0,we(e[ha](function(Ce){var D=Ce.cfg.diagnosticLogInterval;(!D||!(D>0))&&(D=1e4);var Y=!1;P&&(Y=P[gu],P[mu]()),P=koe(Ve,D),P.unref(),P[gu]=Y}))),P[gu]=!0)}return P}x[Wx]=function(){Z=!0,P&&P[mu](),Ve()},h4(x,function(){return v},["addTelemetryInitializer"]),x[Ca]=function(N,te,Ce){var D;N===void 0&&(N=!0),n||bo(gse),g&&bo(IR);var Y=(D={reason:50},D[ld]=N,D.flushComplete=!1,D),Ie;N&&!te&&(Ie=Wc(function(st){te=st}));var Je=Iv(Fe(),x);Je[hm](function(){S.run(x[_n]),N4([c,i,r],N,function(){X(),te&&te(Y)})},x);function it(st){Y.flushComplete=st,g=!0,C.run(Je,Y),x[Wx](),Je[_r](Y)}return Ve(),he(N,it,6,Ce),Ie},x[Uf]=Se,x.addPlugin=function(N,te,Ce,D){if(!N){D&&D(!1),Q($4);return}var Y=Se(N[Zs]);if(Y&&!te){D&&D(!1),Q("Plugin ["+N[Zs]+"] is already loaded!");return}var Ie={reason:16};function Je(Be){d[Bt](N),Ie.added=[N],Oe(Ie),D&&D(!0)}if(Y){var it=[Y.plugin],st={reason:2,isAsync:!!Ce};Re(it,st,function(Be){Be?(Ie.removed=it,Ie.reason|=32,Je()):D&&D(!1)})}else Je()},x.updateCfg=function(N,te){te===void 0&&(te=!0);var Ce;if(x[Ui]()){Ce={reason:1,cfg:e.cfg,oldCfg:Ux({},e.cfg),newConfig:Ux({},N),merge:te},N=Ce.newConfig;var D=e.cfg;N[ou]=D[ou],N[nc]=D[nc]}e._block(function(Y){var Ie=Y.cfg;WE(Y,Ie,N,te),te||tn(Ie,function(Je){xu(N,Je)||Y.set(Ie,Je,_i)}),Y[Fd](Ie,vS)},!0),e[cv](),Ce&&Pe(Ce)},x.evtNamespace=function(){return y},x.flush=he,x.getTraceCtx=function(N){return E||(E=ase()),E},x.setTraceCtx=function(N){E=N||null},x.addUnloadHook=we,yv(x,"addUnloadCb",function(){return C},"add"),x.onCfgChange=function(N){var te;return n?te=vr(e.cfg,N,x[_n]):te=Sse(T,N),Ise(te)},x.getWParam=function(){return W3()||e.cfg.enableWParam?0:-1};function fe(){var N={};_=[];var te=function(Ce){Ce&&Ze(Ce,function(D){if(D[Zs]&&D[qx]&&!N[D.identifier]){var Y=D[Zs]+"="+D[qx];_[Bt](Y),N[D.identifier]=D}})};te(p),f&&Ze(f,function(Ce){te(Ce)}),te(d)}function X(){n=!1,e=co({},vS,x[_n]),e.cfg[n4]=1,pn(x,"config",{g:function(){return e.cfg},s:function(te){x.updateCfg(te,!1)}}),pn(x,"pluginVersionStringArr",{g:function(){return _||fe(),_}}),pn(x,"pluginVersionString",{g:function(){return U||(_||fe(),U=_.join(";")),U||Nt}}),pn(x,"logger",{g:function(){return r||(r=new Ev(e.cfg),e[_n]=r),r},s:function(te){e[_n]=te,r!==te&&(zh(r,!1),r=te)}}),x[_n]=new Ev(e.cfg),A=[];var N=x.config[ou]||[];N.splice(0,N[pt]),ia(N,A),v=new pse,o=[],zh(i,!1),i=null,s=null,a=null,zh(c,!1),c=null,u=null,d=[],f=null,p=null,g=!1,b=null,y=Bd("AIBaseCore",!0),C=z4(),E=null,I=null,S=V4(),T=[],U=null,_=null,Z=!1,P=null,$=!1,k=0,G=null,K=null,ie=!1}function ge(){var N=qc(Fe(),e.cfg,x);return N[hm](se),N}function Oe(N){var te=Cse(x[_n],Uie,d);u=null,U=null,_=null,p=(f||[])[0]||[],p=mS(ia(p,te[nc]));var Ce=ia(mS(te[zn]),p);A=Vc(Ce);var D=x.config[ou]||[];D.splice(0,D[pt]),ia(D,A);var Y=ge();p&&p[pt]>0&&CR(Y[Kc](p),Ce),CR(Y,Ce),N&&Pe(N)}function Se(N){var te=null,Ce=null,D=[];return Ze(A,function(Y){if(Y[Zs]===N&&Y!==v)return Ce=Y,-1;Y.getChannel&&D[Bt](Y)}),!Ce&&D[pt]>0&&Ze(D,function(Y){if(Ce=Y.getChannel(N),!Ce)return-1}),Ce&&(te={plugin:Ce,setEnabled:function(Y){Ic(Ce)[LE]=!Y},isEnabled:function(){var Y=Ic(Ce);return!Y[ls]&&!Y[LE]},remove:function(Y,Ie){var Je;Y===void 0&&(Y=!0);var it=[Ce],st=(Je={reason:1},Je[ld]=Y,Je);Re(it,st,function(Be){Be&&Oe({reason:32,removed:it}),Ie&&Ie(Be)})}}),te}function Fe(){if(!u){var N=(A||[]).slice();Po(N,v)===-1&&N[Bt](v),u=Yc(mS(N),e.cfg,x)}return u}function Re(N,te,Ce){if(N&&N[pt]>0){var D=Yc(N,e.cfg,x),Y=Iv(D,x);Y[hm](function(){var Ie=!1,Je=[];Ze(d,function(st,Be){TR(st,N)?Ie=!0:Je[Bt](st)}),d=Je,U=null,_=null;var it=[];f&&(Ze(f,function(st,Be){var $e=[];Ze(st,function(wt){TR(wt,N)?Ie=!0:$e[Bt](wt)}),it[Bt]($e)}),f=it),Ce&&Ce(Ie),se()}),Y[_r](te)}else Ce(!1)}function Ve(){if(r&&r.queue){var N=r.queue.slice(0);r.queue[pt]=0,Ze(N,function(te){var Ce,D=(Ce={},Ce[Cc]=b||"InternalMessageId: "+te[hv],Ce[yh]=I,Ce[Nu]=UE(new Date),Ce.baseType=VE.dataType,Ce.baseData={message:te[Sc]},Ce);x.track(D)})}}function he(N,te,Ce,D){var Y=1,Ie=!1,Je=null;D=D||5e3;function it(){Y--,Ie&&Y===0&&(Je&&Je[mu](),Je=null,te&&te(Ie),te=null)}if(p&&p[pt]>0){var st=ge()[Kc](p);st.iterate(function(Be){if(Be.flush){Y++;var $e=!1;Be.flush(N,function(){$e=!0,it()},Ce)||$e||(N&&Je==null?Je=$c(function(){Je=null,it()},D):it())}})}return Ie=!0,it(),!0}function B(){var N;we(e[ha](function(te){var Ce=te.cfg.enablePerfMgr;if(Ce){var D=te.cfg[ME];N!==D&&(D||(D=bse),eie(te.cfg,ME,D),N=D,a=null),!s&&!a&&en(D)&&(a=D(x,x[dm]()))}else a=null,N=null}))}function Pe(N){var te=j_(Fe(),x);te[hm](se),(!x._updateHook||x._updateHook(te,N)!==!0)&&te[_r](N)}function Q(N){var te=x[_n];te?(Xt(te,2,73,N),se()):bo(N)}function oe(N){var te=x[dm]();te&&te[cf]([N],2)}function we(N){S.add(N)}})}return t.__ieDyn=1,t}(),mi="",_se="NoResponseBody",AR="&"+_se+"=true",yS="POST",Ase=function(){function t(){var e=0,n,r,o,i,s,a,c,u,d,f,p,g,v,b;hn(t,this,function(y,C){var S=!0;ie(),y[wp]=function(P,$){o=$,r&&Xt(o,1,28,"Sender is already initialized"),y.SetConfig(P),r=!0},y._getDbgPlgTargets=function(){return[r,i,a,n]},y.SetConfig=function(P){try{if(s=P.senderOnCompleteCallBack||{},a=!!P.disableCredentials,c=P.fetchCredentials,i=!!P.isOneDs,n=!!P.enableSendPromise,d=!!P.disableXhr,f=!!P.disableBeacon,p=!!P.disableBeaconSync,b=P.timeWrapper,v=!!P.addNoResponse,g=!!P.disableFetchKeepAlive,u={sendPOST:k},i||(S=!1),a){var $=Jy();$&&$.protocol&&$.protocol[k_]()==="file:"&&(S=!1)}return!0}catch{}return!1},y.getSyncFetchPayload=function(){return e},y.getSenderInst=function(P,$){return P&&P[pt]?T(P,$):null},y.getFallbackInst=function(){return u},y[fv]=function(P,$){ie()};function w(P,$){A($,200,{},P)}function E(P,$){Xt(o,2,26,"Failed to send telemetry.",{message:P}),A($,400,{})}function I(P){E("No endpoint url is provided for the batch",P)}function T(P,$){for(var Z,x=0,L=null,ne=0;L==null&&ne<P[pt];)x=P[ne],!d&&x===1?Sie()?L=K:b4()&&(L=k):x===2&&y4($)&&(!$||!g)?L=G:x===3&&v4()&&($?!p:!f)&&(L=U),ne++;return L?(Z={_transport:x,_isSync:$},Z[Jx]=L,Z):null}function A(P,$,Z,x){try{P&&P($,Z,x)}catch{}}function _(P,$){var Z=Ji(),x=P[bh];if(!x)return I($),!0;x=P[bh]+(v?AR:mi);var L=P[ru],ne=i?L:new Blob([L],{type:"text/plain;charset=UTF-8"}),se=Z.sendBeacon(x,ne);return se}function U(P,$,Z){var x=P[ru];try{if(x)if(_(P,$))w(mi,$);else{var L=s&&s.beaconOnRetry;L&&en(L)?L(P,$,_):(u&&u[Jx](P,$,!0),Xt(o,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(ne){i&&lf(o,"Failed to send telemetry using sendBeacon API. Ex:"+Mt(ne)),A($,i?0:400,{},mi)}}function k(P,$,Z){var x,L,ne,se=P[WC]||{};!Z&&n&&(x=Wc(function(Oe,Se){L=Oe,ne=Se})),i&&Z&&P.disableXhrSync&&(Z=!1);var fe=P[bh];if(!fe){I($),L&&L(!1);return}var X=iie(yS,fe,S,!0,Z,P[jl]);i||X[Xx]("Content-type","application/json"),Ze(ms(se),function(Oe){X[Xx](Oe,se[Oe])}),X.onreadystatechange=function(){i||(ge(X),X.readyState===4&&L&&L(!0))},X.onload=function(){i&&ge(X)};function ge(Oe){var Se=s&&s.xhrOnComplete,Fe=Se&&en(Se);if(Fe)Se(Oe,$,P);else{var Re=dd(Oe);A($,Oe[Fh],Wm(Oe,i),Re)}}return X.onerror=function(Oe){A($,i?X[Fh]:400,Wm(X,i),i?mi:iR(X)),ne&&ne(Oe)},X.ontimeout=function(){A($,i?X[Fh]:500,Wm(X,i),i?mi:iR(X)),L&&L(!1)},X.send(P[ru]),x}function G(P,$,Z){var x,L=P[bh],ne=P[ru],se=i?ne:new Blob([ne],{type:"application/json"}),fe,X,ge,Oe=new Headers,Se=ne[pt],Fe=!1,Re=!1,Ve=P[WC]||{},he=(x={method:yS,body:se},x[cR]=!0,x);P.headers&&ms(P.headers)[pt]>0&&(Ze(ms(Ve),function(oe){Oe.append(oe,Ve[oe])}),he[WC]=Oe),c?he.credentials=c:S&&i&&(he.credentials="include"),Z&&(he.keepalive=!0,e+=Se,i?P._sendReason===2&&(Fe=!0,v&&(L+=AR)):Fe=!0);var B=new Request(L,he);try{B[cR]=!0}catch{}if(!Z&&n&&(fe=Wc(function(oe,we){X=oe,ge=we})),!L){I($),X&&X(!1);return}function Pe(oe){A($,i?0:400,{},i?mi:oe)}function Q(oe,we,N){var te=oe[Fh],Ce=s.fetchOnComplete;Ce&&en(Ce)?Ce(oe,$,N||mi,we):A($,te,{},N||mi)}try{ud(fetch(i?L:B,i?he:null),function(oe){if(Z&&(e-=Se,Se=0),!Re)if(Re=!0,oe.rejected)Pe(oe.reason&&oe.reason[Sc]),ge&&ge(oe.reason);else{var we=oe[af];try{!i&&!we.ok?(Pe(we.statusText),X&&X(!1)):i&&!we.body?(Q(we,null,mi),X&&X(!0)):ud(we.text(),function(N){Q(we,P,N[af]),X&&X(!0)})}catch(N){Pe(Mt(N)),ge&&ge(N)}}})}catch(oe){Re||(Pe(Mt(oe)),ge&&ge(oe))}return Fe&&!Re&&(Re=!0,A($,200,{}),X&&X(!0)),i&&!Re&&P[jl]>0&&b&&b.set(function(){Re||(Re=!0,A($,500,{}),X&&X(!0))},P[jl]),fe}function K(P,$,Z){var x=_a(),L=new XDomainRequest,ne=P[ru];L.onload=function(){var Oe=dd(L),Se=s&&s.xdrOnComplete;Se&&en(Se)?Se(L,$,P):A($,200,{},Oe)},L.onerror=function(){A($,400,{},i?mi:nie(L))},L.ontimeout=function(){A($,500,{})},L.onprogress=function(){};var se=x&&x.location&&x.location[r4]||"",fe=P[bh];if(!fe){I($);return}if(!i&&fe.lastIndexOf(se,0)!==0){var X="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";Xt(o,2,40,". "+X),E(X,$);return}var ge=i?fe:fe[Ec](/^(https?:)/,"");L.open(yS,ge),P[jl]&&(L[jl]=P[jl]),L.send(ne),i&&Z?b&&b.set(function(){L.send(ne)},0):L.send(ne)}function ie(){e=0,r=!1,n=!1,o=null,i=null,s=null,a=null,c=null,u=null,d=!1,f=!1,p=!1,g=!1,v=!1,b=null}})}return t.__ieDyn=1,t}(),G4="on",kR="attachEvent",xR="addEventListener",RR="detachEvent",NR="removeEventListener",qE="events",Vf="visibilitychange",Zy="pagehide",K4="pageshow",W4="unload",q4="beforeunload",Y4=Bd("aiEvtPageHide"),Q4=Bd("aiEvtPageShow"),kse=/\.[\.]+/g,xse=/[\.]+$/,Rse=1,Tv=_4("events"),Nse=/^([^.]*)(?:\.(.+)|)/;function PR(t){return t&&t[Ec]?t[Ec](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Nt):t}function F_(t,e){var n;if(e){var r=Nt;Tt(e)?(r=Nt,Ze(e,function(i){i=PR(i),i&&(i[0]!=="."&&(i="."+i),r+=i)})):r=PR(e),r&&(r[0]!=="."&&(r="."+r),t=(t||Nt)+r)}var o=Nse.exec(t||Nt)||[];return n={},n[vs]=o[1],n.ns=(o[2]||Nt).replace(kse,".").replace(xse,Nt)[Qy](".").sort().join("."),n}function J4(t,e,n){n===void 0&&(n=!0);var r=Tv.get(t,qE,{},n),o=r[e];return o||(o=r[e]=[]),o}function X4(t,e,n,r){t&&e&&e[vs]&&(t[NR]?t[NR](e[vs],n,r):t[RR]&&t[RR](G4+e[vs],n))}function Pse(t,e,n,r){var o=!1;return t&&e&&e[vs]&&n&&(t[xR]?(t[xR](e[vs],n,r),o=!0):t[kR]&&(t[kR](G4+e[vs],n),o=!0)),o}function OR(t,e,n,r){for(var o=e[pt];o--;){var i=e[o];i&&(!n.ns||n.ns===i.evtName.ns)&&(!r||r(i))&&(X4(t,i.evtName,i[x_],i.capture),e[Ep](o,1))}}function Ose(t,e,n){if(e[vs])OR(t,J4(t,e[vs]),e,n);else{var r=Tv.get(t,qE,{});tn(r,function(o,i){OR(t,i,e,n)}),ms(r)[pt]===0&&Tv.kill(t,qE)}}function Ip(t,e){var n;return e?(Tt(e)?n=[t].concat(e):n=[t,e],n=F_("xx",n).ns[Qy](".")):n=t,n}function bS(t,e,n,r,o){var i;o===void 0&&(o=!1);var s=!1;if(t)try{var a=F_(e,r);if(s=Pse(t,a,n,o),s&&Tv.accept(t)){var c=(i={guid:Rse++,evtName:a},i[x_]=n,i.capture=o,i);J4(t,a.type)[Bt](c)}}catch{}return s}function CS(t,e,n,r,o){if(o===void 0&&(o=!1),t)try{var i=F_(e,r),s=!1;Ose(t,i,function(a){return i.ns&&!n||a[x_]===n?(s=!0,!0):!1}),s||X4(t,i,n,o)}catch{}}function Mse(t,e,n){var r=!1,o=_a();o&&(r=bS(o,t,e,n),r=bS(o.body,t,e,n)||r);var i=ws();return i&&(r=bS(i,t,e,n)||r),r}function Lse(t,e,n){var r=_a();r&&(CS(r,t,e,n),CS(r.body,t,e,n));var o=ws();o&&CS(o,t,e,n)}function hd(t,e,n,r){var o=!1;return e&&t&&t[pt]>0&&Ze(t,function(i){i&&(!n||Po(n,i)===-1)&&(o=Mse(i,e,r)||o)}),o}function Dse(t,e,n,r){var o=!1;return e&&t&&Tt(t)&&(o=hd(t,e,n,r),!o&&n&&n[pt]>0&&(o=hd(t,e,null,r))),o}function $f(t,e,n){t&&Tt(t)&&Ze(t,function(r){r&&Lse(r,e,n)})}function jse(t,e,n){return Dse([q4,W4,Zy],t,e,n)}function Use(t,e){$f([q4,W4,Zy],t,e)}function Z4(t,e,n){function r(s){var a=ws();t&&a&&a.visibilityState==="hidden"&&t(s)}var o=Ip(Y4,n),i=hd([Zy],t,e,o);return(!e||Po(e,Vf)===-1)&&(i=hd([Vf],r,e,o)||i),!i&&e&&(i=Z4(t,null,n)),i}function Fse(t,e){var n=Ip(Y4,e);$f([Zy],t,n),$f([Vf],null,n)}function ej(t,e,n){function r(s){var a=ws();t&&a&&a.visibilityState==="visible"&&t(s)}var o=Ip(Q4,n),i=hd([K4],t,e,o);return i=hd([Vf],r,e,o)||i,!i&&e&&(i=ej(t,null,n)),i}function Bse(t,e){var n=Ip(Q4,e);$f([K4],t,n),$f([Vf],null,n)}var Hd="",Hse="https://browser.events.data.microsoft.com/OneCollector/1.0/",MR="version",SS="properties",LR="initialize",DR="logger",Jm="indexOf",ea="timings",jR="pollInternalLogs",go="value",UR="kind",B_="length",ES="processTelemetryStart",rs,zse="4.3.3",tj="1DS-Web-JS-"+zse,nj=Are.hasOwnProperty,Vse=(rs={},rs[0]=0,rs[2]=6,rs[1]=1,rs[3]=7,rs[4098]=6,rs[4097]=1,rs[4099]=7,rs),wS=null;function ta(t){return!(t===Hd||Yt(t))}function $se(t){if(t){var e=qy(t,"-");if(e>-1)return g_(t,e)}return Hd}function vxe(){return wS===null&&(wS=!qt(Uint8Array)&&!Yse()&&!FE()),wS}function Gse(t){return!!(t&&va(t)&&t>=1&&t<=4)}function Kse(t,e,n){if(!e&&!ta(e)||typeof t!="string")return null;var r=typeof e;if(r==="string"||r==="number"||r==="boolean"||Tt(e))e={value:e};else if(r==="object"&&!nj.call(e,"value"))e={value:n?JSON.stringify(e):e};else if(Yt(e[go])||e[go]===Hd||!mr(e[go])&&!va(e[go])&&!zc(e[go])&&!Tt(e[go]))return null;if(Tt(e[go])&&!Qse(e[go]))return null;if(!Yt(e[UR])){if(Tt(e[go])||!Wse(e[UR]))return null;e[go]=e[go].toString()}return e}function rj(t,e,n){var r=-1;if(!qt(t))if(e>0&&(e===32?r=8192:e<=13&&(r=e<<5)),qse(n))r===-1&&(r=0),r|=n;else{var o=Vse[QE(t)]||-1;r!==-1&&o!==-1?r|=o:o===6&&(r=o)}return r}function fd(t,e,n){n===void 0&&(n=!0);var r;return t&&(r=t.get(e),n&&r&&decodeURIComponent&&(r=decodeURIComponent(r))),r||Hd}function FR(t){t===void 0&&(t="D");var e=U4();return t==="B"?e="{"+e+"}":t==="P"?e="("+e+")":t==="N"&&(e=e.replace(/-/g,Hd)),e}function _v(t,e,n,r,o){var i={},s=!1,a=0,c=arguments[B_],u=arguments;for(zc(u[0])&&(s=u[0],a++);a<c;a++){var t=u[a];tn(t,function(f,p){s&&p&&sd(p)?Tt(p)?(i[f]=i[f]||[],Ze(p,function(g,v){g&&sd(g)?i[f][v]=_v(!0,i[f][v],g):i[f][v]=g})):i[f]=_v(!0,i[f],p):i[f]=p})}return i}var Ci=Soe;function Wse(t){return t===0||t>0&&t<=13||t===32}function qse(t){return t>=0&&t<=9}function Yse(){var t=Ji();if(!qt(t)&&t.userAgent){var e=t.userAgent.toLowerCase();if((e[Jm]("safari")>=0||e[Jm]("firefox")>=0)&&e[Jm]("chrome")<0)return!0}return!1}function Qse(t){return t[B_]>0}function YE(t,e){var n=t;n[ea]=n[ea]||{},n[ea][ES]=n[ea][ES]||{},n[ea][ES][e]=Ci()}function QE(t){var e=0;if(t!=null){var n=typeof t;n==="string"?e=1:n==="number"?e=2:n==="boolean"?e=3:n===c_&&(e=4,Tt(t)?(e=4096,t[B_]>0&&(e|=QE(t[0]))):nj.call(t,"value")&&(e=8192|QE(t[go])))}return e}function Jse(){return!!Mn("chrome")}function df(t){return t>0}var Xse=jd({endpointUrl:Hse,propertyStorageOverride:{isVal:Zse}});function Zse(t){return t&&(!t.getProperty||!t.setProperty)&&bo("Invalid property storage override passed."),!0}var eae=function(t){Cp(e,t);function e(){var n=t.call(this)||this;return hn(e,n,function(r,o){r[LR]=function(i,s,a,c){jr(r,function(){return"AppInsightsCore.initialize"},function(){try{o[LR](co(i,Xse,a||r[DR],!1).cfg,s,a,c)}catch(f){var u=r[DR],d=Mt(f);d[Jm]("channels")!==-1&&(d+=`
 - Channels must be provided through config.channels only!`),Xt(u,1,514,"SDK Initialization Failed - no telemetry will be sent: "+d)}},function(){return{config:i,extensions:s,logger:a,notificationManager:c}})},r.track=function(i){jr(r,function(){return"AppInsightsCore.track"},function(){var s=i;if(s){s[ea]=s[ea]||{},s[ea].trackStart=Ci(),Gse(s.latency)||(s.latency=1);var a=s.ext=s.ext||{};a.sdk=a.sdk||{},a.sdk.ver=tj;var c=s.baseData=s.baseData||{};c[SS]=c[SS]||{};var u=c[SS];u[MR]=u[MR]||r.pluginVersionString||Hd}o.track(s)},function(){return{item:i}},!i.sync)},r[jR]=function(i){return o[jR](i||"InternalLog")}}),n}return e.__ieDyn=1,e}(Tse),tae="device",oj="locale",H_="ver",nae="browser",rae="browserVer",oae="popSample",iae="eventFlags",z_="name",sae="serviceName",Yr=$r({UserExt:[0,"user"],DeviceExt:[1,tae],TraceExt:[2,"trace"],WebExt:[3,"web"],AppExt:[4,"app"],OSExt:[5,"os"],SdkExt:[6,"sdk"],IntWebExt:[7,"intweb"],UtcExt:[8,"utc"],LocExt:[9,"loc"],CloudExt:[10,"cloud"],DtExt:[11,"dt"]}),aae=$r({id:[0,"id"],ver:[1,H_],appName:[2,z_],locale:[3,oj],expId:[4,"expId"],env:[5,"env"]}),cae=$r({domain:[0,"domain"],browser:[1,nae],browserVer:[2,rae],screenRes:[3,"screenRes"],userConsent:[4,"userConsent"],consentDetails:[5,"consentDetails"]}),lae=$r({locale:[0,oj],localId:[1,"localId"],id:[2,"id"]}),uae=$r({osName:[0,z_],ver:[1,H_]}),dae=$r({ver:[0,H_],seq:[1,"seq"],installId:[2,"installId"],epoch:[3,"epoch"]}),hae=$r({msfpc:[0,"msfpc"],anid:[1,"anid"],serviceName:[2,sae]}),fae=$r({popSample:[0,oae],eventFlags:[1,iae]}),pae=$r({tz:[0,"tz"]}),mae=$r({sessionId:[0,"sesId"]}),gae=$r({localId:[0,"localId"],deviceClass:[1,"deviceClass"],make:[2,"make"],model:[3,"model"]}),vae=$r({role:[0,"role"],roleInstance:[1,"roleInstance"],roleVer:[2,"roleVer"]}),yae=$r({traceId:[0,"traceID"],traceName:[1,z_],parentId:[2,"parentID"]}),bae=$r({traceId:[0,"traceId"],spanId:[1,"spanId"],traceFlags:[2,"traceFlags"]}),hf;function ij(){return hf===void 0&&(hf=!!aj(0)),hf}function sj(){return ij()?aj(0):null}function aj(t){var e=null,n,r;try{var o=Ud();if(!o)return null;r=new Date,e=t===0?o.localStorage:o.sessionStorage,e&&en(e.setItem)&&(e.setItem(r,r),n=e.getItem(r)!==r,e.removeItem(r),n&&(e=null))}catch{e=null}return e}function Cae(t,e,n){var r=sj();if(r!==null)try{return r.setItem(e,n),!0}catch(o){hf=!1,Xt(t,1,504,"Browser failed write to local storage. "+o)}return!1}function Sae(t,e){var n=sj();if(n!==null)try{return n.getItem(e)}catch(r){hf=!1,Xt(t,1,503,"Browser failed read of local storage. "+r)}return null}function Eae(){return this.getId()}function wae(t){this.setId(t)}var cj=function(){function t(){hn(t,this,function(e){e.setId=function(n){e.customId=n},e.getId=function(){return mr(e.customId)?e.customId:e.automaticId}})}return t._staticInit=function(){pn(t.prototype,"id",{g:Eae,s:wae})}(),t}(),BR="ai_session",Iae=function(){function t(e,n,r){var o,i=O_(e),s=D4(e),a,c;hn(t,this,function(u){var d=vr(n,function(){c=n,u.config=c});r&&r.add(d),a=function(){return u.config.namePrefix?BR+u.config.namePrefix:BR},u.automaticSession=new cj,u.update=function(){u.automaticSession.getId()||f();var y=u.automaticSession,C=u.config,S=new Date().getTime(),w=S-y.acquisitionDate>C.sessionExpirationMs,E=S-y.renewalDate>C.sessionRenewalMs;if(w||E)g();else{var I=o;(!I||S-I>t.cookieUpdateInterval)&&(y.renewalDate=S,v(y.getId(),y.acquisitionDate,y.renewalDate))}},u.backup=function(){var y=u.automaticSession;b(y.getId(),y.acquisitionDate,y.renewalDate)};function f(){var y=s.get(a());if(y&&en(y.split))p(y);else{var C=Sae(i,a());C&&p(C)}u.automaticSession.getId()||g()}function p(y){var C=u.automaticSession,S=y.split("|");S.length>0&&C.setId(S[0]);try{if(S.length>1){var w=+S[1];C.acquisitionDate=+new Date(w),C.acquisitionDate=C.acquisitionDate>0?C.acquisitionDate:0}if(S.length>2){var E=+S[2];C.renewalDate=+new Date(E),C.renewalDate=C.renewalDate>0?C.renewalDate:0}}catch(I){Xt(i,1,510,"Error parsing ai_session cookie, session will be reset: "+I)}C.renewalDate===0&&Xt(i,2,517,"AI session renewal date is 0, session will be reset.")}function g(){var y=u.automaticSession,C=new Date().getTime(),S=u.config.sessionAsGuid;!qt(S)&&S?zc(S)?y.setId(FR()):y.setId(FR(S)):y.setId(N_(c.idLength||22)),y.acquisitionDate=C,y.renewalDate=C,v(y.getId(),y.acquisitionDate,y.renewalDate),ij()||Xt(i,2,505,"Browser does not support local storage. Session durations will be inaccurate.")}function v(y,C,S){var w=C+u.config.sessionExpirationMs,E=S+u.config.sessionRenewalMs,I=new Date,T=[y,C,S];w<E?I.setTime(w):I.setTime(E);var A=u.config.cookieDomain||null;s.set(a(),T.join("|")+";expires="+I.toUTCString(),null,A),o=new Date().getTime()}function b(y,C,S){Cae(i,a(),[y,C,S].join("|"))}})}return t.cookieUpdateInterval=6e4,t}(),V_=["AX","EX","SF","CS","CF","CT","CU","DC","DF","H5","HL","WS","WP"];function HR(t,e){e===void 0&&(e=V_);var n=null;if(t)for(var r=t.split(","),o=0;o<r.length;o++)Tae(r[o],e)&&(n?n+=","+r[o]:n=r[o]);return n}function Tae(t,e){if(e===void 0&&(e=V_),!t||t.length<4)return!1;for(var n=!1,r=256,o=t.substring(0,3).toString().toUpperCase(),i=0;i<e.length;i++)if(e[i]+":"===o&&t.length<=r){n=!0;break}return n}function _ae(){return this.getExpId()}var Aae=function(){function t(e,n,r){var o=null,i=V_.slice(0),s="Treatments",a,c=null;hn(t,this,function(u){if(b(e),W3()){var d=ws().documentElement;d&&(u.locale=d.lang)}u.getExpId=function(){return c.expId?v(c.expId):g()};function f(y){var C,S={},w=ws();if(w){C=w&&w.querySelectorAll("meta");for(var E=0;E<C.length;E++){var I=C[E];if(I.name){var T=I.name.toLowerCase();if(T.indexOf(y)===0){var A=I.name.replace(y,"");S[A]=I.content}}}}return S}function p(y){y!==o&&(o=HR(y,i))}function g(){var y=fd(a,s);return p(y),o}function v(y){return p(y),o}function b(y){var C=vr(y,function(){a=n&&n.getCookieMgr(),c=y||{},u.env=c.env||f("awa-").env});r&&r.add(C)}})}return t.validateAppExpId=HR,t._staticInit=function(){pn(t.prototype,"expId",{g:_ae})}(),t}(),kae=function(){function t(){}return t}(),xae=function(){function t(){}return t}();function Rae(){return this.getMsfpc()}function Nae(){return this.getAnid()}var Pae=function(){function t(e,n,r){var o;hn(t,this,function(i){s(e),i.getMsfpc=function(){return fd(o,"MSFPC")},i.getAnid=function(){return fd(o,"ANON").slice(0,34)};function s(a){var c=vr(a,function(){o=n&&n.getCookieMgr();var u=a||{};u.serviceName&&(i.serviceName=u.serviceName)});r&&r.add(c)}})}return t._staticInit=function(){var e=t.prototype;pn(e,"msfpc",{g:Rae}),pn(e,"anid",{g:Nae})}(),t}(),Oae=function(){function t(){var e=new Date().getTimezoneOffset(),n=e%60,r=(e-n)/60,o="+";r>0&&(o="-"),r=Math.abs(r),n=Math.abs(n),this.tz=o+(r<10?"0"+r:r.toString())+":"+(n<10?"0"+n:n.toString())}return t}(),$s={WIN:/(windows|win32)/i,WINRT:/ arm;/i,WINPHONE:/windows\sphone\s\d+\.\d+/i,OSX:/(macintosh|mac os x)/i,IOS:/(ipad|iphone|ipod)(?=.*like mac os x)/i,LINUX:/(linux|joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk)/i,ANDROID:/android/i,CROS:/CrOS/i},zR={"5.1":"XP","6.0":"Vista","6.1":"7","6.2":"8","6.3":"8.1","10.0":"10"},Mae="([\\d,.]+)",lj="([\\d,_,.]+)",zd="Unknown",VR=[{r:$s.WINPHONE,os:"Windows Phone"},{r:$s.WINRT,os:"Windows RT"},{r:$s.WIN,os:"Windows"},{r:$s.IOS,os:"iOS"},{r:$s.ANDROID,os:"Android"},{r:$s.LINUX,os:"Linux"},{r:$s.CROS,os:"Chrome OS"},{s:"x11",os:"Unix"},{s:"blackberry",os:"BlackBerry"},{s:"symbian",os:"Symbian"},{s:"nokia",os:"Nokia"},{r:$s.OSX,os:"Mac OS X"}];function Lae(t){for(var e=0;e<VR.length;e++){var n=VR[e];if(n.r&&t.match(n.r))return n.os;if(n.s&&t.indexOf(n.s)!==-1)return n.os}return zd}function Dae(t,e){return e==="Windows"?$R(t,"Windows NT"):e==="Android"?$R(t,e):e==="Mac OS X"?jae(t):e==="iOS"?Uae(t):zd}function $R(t,e){var n=t.match(new RegExp(e+" "+Mae));return n?zR[n[1]]?zR[n[1]]:n[1]:zd}function jae(t){var e=t.match(new RegExp("Mac OS X "+lj));if(e){var n=e[1].replace(/_/g,".");if(n){var r=uj(n);if(r){var o=n.split(r);return o[0]}else return n}}return zd}function Uae(t){var e=t.match(new RegExp("OS "+lj));if(e){var n=e[1].replace(/_/g,".");if(n){var r=uj(n);if(r){var o=n.split(r);return o[0]}else return n}}return zd}function uj(t){return t.indexOf(".")>-1?".":t.indexOf("_")>-1?"_":null}var Fae=function(){function t(e,n){var r=this,o,i=null,s=null,a=null,c=null,u=function(v){a=v},d=function(v){c=v},f=function(){return a||i},p=function(){return c||s},g=vr(e,function(){if(o=e||{},o.populateOperatingSystemInfo){var v=Ji()||{},b=e.userAgent||v.userAgent||"",y=(e.userAgentData||{}).platform||(v.userAgentData||{}).platform;if(b){var C=Lae(b.toLowerCase());i=C,s=Dae(b,C)}(!i||i===zd)&&mr(y)&&(i=y)}});n&&n.add(g),pn(r,"name",{s:u,g:f}),pn(r,"ver",{s:d,g:p})}return t}(),IS="MicrosoftApplicationsTelemetryDeviceId";function Bae(t,e,n,r){e?e.setProperty(n,r):t.set(n,r,31536e3)}function Hae(t,e,n){return e?e.getProperty(n)||"":fd(t,n)}var zae=function(){function t(e,n,r){var o=0,i;hn(t,this,function(s){s.seq=o,s.epoch=Hf(!1).toString(),s.getSequenceId=function(){return++o};var a=vr(e,function(c){i=n&&n.getCookieMgr();var u=c.cfg,d=u.propertyStorageOverride,f=i.isEnabled();if(f||d){var p=Hae(i,d,IS);p||(p=U4()),Bae(i,d,IS,p),s.installId=p}else i.purge(IS)});r&&r.add(a)})}return t.__ieDyn=1,t}(),Vae=function(){function t(e,n,r,o,i){var s=this;s.traceId=n||KE();var a=vr(e,function(){var c=e;if(c.enableDistributedTracing&&!r&&(r=KE().substring(0,16)),s.parentId=s.parentId||r,c.enableApplicationInsightsTrace&&!o){var u=Jy();u&&u.pathname&&(o=u.pathname)}s.name=s.name||o});i&&i.add(a)}return t}(),dj="setLocalId";function $ae(){return this.getLocalId()}function Gae(t){this[dj](t)}var Kae=function(){function t(e,n,r,o){var i,s,a;hn(t,this,function(c){if(f(n),typeof navigator<"u"){var u=navigator;c.locale=u.userLanguage||u.language}c.getLocalId=function(){return s||d()},c[dj]=function(p){s=p};function d(){if(!i.hashIdentifiers&&!i.dropIdentifiers){var p=fd(a,"MUID");p&&(s="t:"+p)}return s}function f(p){var g=vr(p,function(){if(a=r&&r.getCookieMgr(),i=p,s=null,a&&a.isEnabled()&&(d(),i.enableApplicationInsightsUser)){var v=fd(a,t.userCookieName);if(v){var b=v.split(t.cookieSeparator);b.length>0&&(c.id=b[0])}if(!c.id){c.id=N_(e&&!qt(e.idLength)?e.idLength:22);var y=UE(new Date);c.accountAcquisitionDate=y;var C=[c.id,y],S=i.cookieDomain?i.cookieDomain:void 0;a.set(t.userCookieName,C.join(t.cookieSeparator),31536e3,S)}}});o&&o.add(g)}})}return t.cookieSeparator="|",t.userCookieName="ai_user",t._staticInit=function(){pn(t.prototype,"localId",{g:$ae,s:Gae})}(),t}(),Wae=1048576,qae=2097152,Yae=4194304,Qae=function(){function t(e,n){var r=this;r.popSample=100;var o=vr(e,function(){r.eventFlags=0,e.hashIdentifiers&&(r.eventFlags=r.eventFlags|Wae),e.dropIdentifiers&&(r.eventFlags=r.eventFlags|qae),e.scrubIpOnly&&(r.eventFlags=r.eventFlags|Yae)});n&&n.add(o)}return t}(),GR=["Required","Analytics","SocialMedia","Advertising"],Av="([\\d,.]+)",hj="Unknown",fj="Edg/",pj="EdgiOS/",TS=[{ua:"OPR/",b:"Opera"},{ua:"PhantomJS",b:"PhantomJS"},{ua:"Edge",b:"Edge"},{ua:fj,b:"Edge"},{ua:pj,b:"Edge"},{ua:"Electron",b:"Electron"},{ua:"Chrome",b:"Chrome"},{ua:"Trident",b:"MSIE"},{ua:"MSIE ",b:"MSIE"},{ua:"Firefox",b:"Firefox"},{ua:"Safari",b:"Safari"},{ua:"SkypeShell",b:"SkypeShell"}],_S=[{br:"Microsoft Edge",b:"Edge"},{br:"Google Chrome",b:"Chrome"},{br:"Opera",b:"Opera"}];function JE(t,e){return e.indexOf(t)>-1}function Jae(t,e){for(var n=0;n<e.length;n++)if(t==e[n].brand)return e[n].version;return null}function Xae(t){if(t)for(var e=0;e<TS.length;e++){var n=TS[e].ua;if(JE(n,t))return TS[e].b}return hj}function Zae(t,e){return e==="MSIE"?ece(t):tce(e,t)}function ece(t){var e=t.match(new RegExp("MSIE "+Av));if(e)return e[1];var n=t.match(new RegExp("rv:"+Av));if(n)return n[1]}function tce(t,e){t==="Safari"?t="Version":t==="Edge"&&(JE(fj,e)?t="Edg":JE(pj,e)&&(t="EdgiOS"));var n=e.match(new RegExp(t+"/"+Av));return n||t==="Opera"&&(n=e.match(new RegExp("OPR/"+Av)),n)?n[1]:hj}function nce(){var t={h:0,w:0},e=_a();return e&&e.screen&&(t.h=screen.height,t.w=screen.width),t}function rce(){return this.getUserConsent()}var oce=function(){function t(e,n,r){D4(n);var o=e||{},i=null,s=null,a=null,c=null,u=null,d=null,f=null;hn(t,this,function(p){A(e);var g=Jy();if(g){var v=g.hostname;v&&(p.domain=g.protocol==="file:"?"local":v)}var b=nce();p.screenRes=b.w+"X"+b.h,p.getUserConsent=function(){return!1},p.getUserConsentDetails=function(){var _=null;try{var U=o.callback;if(U&&U.userConsentDetails){var k=U.userConsentDetails();if(k){o.disableConsentDetailsSanitize?_=k:_={};for(var G=0;G<GR.length;G++){var K=GR[G];_[K]=k[K]||!1}}}return f!==null&&(_=_||{},_.GPC_DataSharingOptIn=!!f),_?JSON.stringify(_):null}catch{}};function y(_,U){if(Tt(U))try{for(var k=0;k<_S.length;k++){var G=Jae(_S[k].br,U);if(G){u=_S[k].b,d=G;return}}}catch{}if(_){var K=Xae(_);u=K,d=Zae(_,K)}}function C(_){a=_}function S(_){c=_}function w(){return a||u}function E(){return c||d}var I=function(){return f},T=function(_){f=zc(_)?_:null,o.gpcDataSharingOptIn=f};function A(_){var U=vr(_,function(){if(o=_,o.populateBrowserInfo){var k=o.userAgent,G=(o.userAgentData||{}).brands;if(k!==i||G!==s){if(!k||!G||G.length===0){var K=Ji();K&&(k=k||K.userAgent||"",G=G||(K.userAgentData||{}).brands)}y(k,G),i=k,s=G}}f=zc(o.gpcDataSharingOptIn)?o.gpcDataSharingOptIn:null});r&&r.add(U)}B3(p,{userConsent:{g:p.getUserConsent},browser:{s:C,g:w},browserVer:{s:S,g:E},gpcDataSharingOptIn:{g:I,s:T}})})}return t._staticInit=function(){pn(t.prototype,"userConsent",{g:rce})}(),t}();function Wr(t,e,n,r,o){var i=e.ext[Yr[t]];if(i)try{tn(r,function(s,a){if(mr(a)||va(a)||zc(a)){var c=i[n[s]];!o&&(c||mr(c)||va(c)||zc(c))&&(a=c),i[n[s]]=a}})}catch{}return i}var ice=function(){function t(e,n,r,o){hn(t,this,function(i){i.app=new Aae(n,r,o),i.cloud=new kae,i.user=new Kae(e,n,r,o),i.os=new Fae(n,o),i.web=new oce(n,r,o);var s=new zae(e,r,o),a=new Pae(n,r,o),c=new Qae(n,o);i.loc=new Oae,i.device=new xae;var u=new Iae(r,n,o);i.session=new cj;var d=void 0,f=sce(new Vae(n,d,d,d,o),v()),p=!(n||{}).eventContainExtFields;function g(){var b=i.session;if(b&&mr(b.customId))return b.customId;u.update();var y=u.automaticSession;if(y){var C=y.getId();C&&mr(C)&&(b.automaticId=C)}return b.automaticId}i.getTraceCtx=function(){return f},i.getSessionId=g,i.applyApplicationContext=function(b){var y,C=i.app;Wr(4,b,aae,(y={},y[0]=C.id,y[1]=C.ver,y[2]=C.name,y[3]=C.locale,y[4]=C.getExpId(),y[5]=C.env,y),p)},i.applyUserContext=function(b){var y,C=i.user;Wr(0,b,lae,(y={},y[1]=C.getLocalId(),y[0]=C.locale,y[2]=C.id,y),p)},i.applyWebContext=function(b){var y,C=i.web;Wr(3,b,cae,(y={},y[0]=C.domain,y[1]=C.browser,y[2]=C.browserVer,y[3]=C.screenRes,y[5]=C.getUserConsentDetails(),y[4]=!1,y),p)},i.applyOsContext=function(b){var y,C=i.os;Wr(5,b,uae,(y={},y[0]=C.name,y[1]=C.ver,y),p)},i.applySdkContext=function(b){var y;Wr(6,b,dae,(y={},y[2]=s.installId,y[1]=s.getSequenceId(),y[3]=s.epoch,y),p)},i.applyIntWebContext=function(b){var y;Wr(7,b,hae,(y={},y[0]=a.getMsfpc(),y[1]=a.getAnid(),y[2]=a.serviceName,y),p)},i.applyUtcContext=function(b){var y,C=(y={},y[0]=c.popSample,y);c.eventFlags>0&&(C[1]=c.eventFlags),Wr(8,b,fae,C,p)},i.applyLocContext=function(b){var y;Wr(9,b,pae,(y={},y[0]=i.loc.tz,y),p)},i.applySessionContext=function(b){var y;Wr(4,b,mae,(y={},y[0]=g(),y),p)},i.applyDeviceContext=function(b){var y,C=i.device;Wr(1,b,gae,(y={},y[0]=C.localId,y[2]=C.make,y[3]=C.model,y[1]=C.deviceClass,y),p)},i.applyCloudContext=function(b){var y,C=i.cloud;Wr(10,b,vae,(y={},y[0]=C.role,y[1]=C.roleInstance,y[2]=C.roleVer,y),p)},i.applyAITraceContext=function(b){var y;if(n.enableApplicationInsightsTrace){var C=v();C&&Wr(2,b,yae,(y={},y[0]=C.getTraceId(),y[1]=C.getName(),y[2]=C.getSpanId(),y),!1)}},i.applyDistributedTraceContext=function(b){var y,C=v();if(C){var S=(y={},y[0]=C.getTraceId(),y[1]=C.getSpanId(),y),w=C.getTraceFlags();Yt(w)||(S[2]=w),Wr(11,b,bae,S,!1)}};function v(){var b=f;return r&&r.getTraceCtx&&(b=r.getTraceCtx(!1)||f),b}})}return t.__ieDyn=1,t}();function sce(t,e){var n=t||{};return{getName:function(){return n.name},setName:function(r){e&&e.setName(r),n.name=r},getTraceId:function(){return n.traceId},setTraceId:function(r){e&&e.setTraceId(r),B4(r)&&(n.traceId=r)},getSpanId:function(){return n.parentId},setSpanId:function(r){e&&e.setSpanId(r),H4(r)&&(n.parentId=r)},getTraceFlags:function(){return n.traceFlags},setTraceFlags:function(r){e&&e.setTraceFlags(r),n.traceFlags=r}}}var vm,ace=[Yr[4],Yr[0],Yr[3],Yr[5],Yr[6],Yr[7],Yr[8],Yr[9],Yr[1],Yr[2],Yr[11],Yr[10]],cce=jd({populateBrowserInfo:!1,populateOperatingSystemInfo:!1,userAgent:Fa(),userAgentData:zE({brands:vm,mobile:vm,platform:vm}),userConsentCookieName:Fa(),userConsented:!1,serviceName:Fa(),env:Fa(),expId:Fa(),sessionRenewalMs:18e5,sessionExpirationMs:864e5,sessionAsGuid:null,cookieDomain:Fa(),namePrefix:Fa(),enableApplicationInsightsTrace:!1,enableApplicationInsightsUser:!1,hashIdentifiers:!1,dropIdentifiers:!1,scrubIpOnly:!1,callback:zE({userConsentDetails:null}),gpcDataSharingOptIn:vm,idLength:22,enableDistributedTracing:!1,eventContainExtFields:!1}),lce=function(t){Cp(e,t);function e(){var n=t.call(this)||this;n.identifier="SystemPropertiesCollector",n.priority=3,n.version="4.3.3";var r,o,i;return hn(e,n,function(s,a){c(),s.initialize=function(f,p,g){a.initialize(f,p,g),u(f)},s.processTelemetry=function(f,p){YE(f,s.identifier),p=s._getTelCtx(p);var g=f.ext=f.ext?f.ext:{};f.data=f.data?f.data:{},Ze(ace,function(v){g[v]=g[v]||{}}),r&&(r.applyUtcContext(f),r.applyApplicationContext(f),r.applyUserContext(f),r.applyWebContext(f),r.applyOsContext(f),r.applySdkContext(f),r.applyIntWebContext(f),r.applyLocContext(f),r.applySessionContext(f),r.applyDeviceContext(f),i.enableApplicationInsightsTrace&&r.applyAITraceContext(f),i.enableDistributedTracing&&r.applyDistributedTraceContext(f),r.applyCloudContext(f)),Ze(ms(g),function(v){ms(g[v]).length===0&&delete g[v]}),d(o,f.data),s.processNext(f,p)},s.getPropertiesContext=function(){return r},s.setProperty=function(f,p){o[f]=p},s._doTeardown=function(f,p){var g=(f||{}).core();if(g&&g.getTraceCtx&&r){var v=g.getTraceCtx(!1);v&&v===r.getTraceCtx()&&g.setTraceCtx(null)}c()},s._getDbgPlgTargets=function(){return[i]};function c(){r=null,o={}}function u(f){var p=s.identifier,g=s.core;s._addHook(vr(f,function(){var v=qc(null,f,g);i=v.getExtCfg(p,cce)})),r=new ice(f,i,g,s._unloadHooks),g&&g.setTraceCtx&&g.setTraceCtx(r.getTraceCtx())}function d(f,p){f&&tn(f,function(g,v){p[g]||(p[g]=v)})}}),n}return e.__ieDyn=1,e}(U_),ym="REAL_TIME",uce="NEAR_REAL_TIME",dce="BEST_EFFORT",Js="",XE="drop",hce="send",KR="requeue",fce="rspFail",pce="oth",WR="no-cache, no-store",ZE="application/x-json-stream",bm="cache-control",Vh="content-type",mce="kill-tokens",gce="kill-duration",vce="time-delta-millis",ew="client-version",mj="client-id",tw="time-delta-to-apply-millis",nw="upload-time",rw="apikey",ow="AuthMsaDeviceTicket",qR="WebAuthToken",YR="AuthXToken",yce="NoResponseBody",kv="msfpc",QR="trace",AS="user",iw="allowRequestSending",gj="firstRequestSent",vj="shouldAddClockSkewHeaders",yj="getClockSkewHeaderValue",sw="setClockSkew",yt="length",Tc="concat",Ri="iKey",Bn="count",hc="events",Er="push",Lu="split",eb="splice",aw="toLowerCase",su="hdrs",cw="useHdrs",ff="initialize",bj="setTimeoutOverride",Cj="clearTimeoutOverride",bce="payloadPreprocessor",JR="overrideEndpointUrl",XR="avoidOptions",Cce="disableEventTimings",Sce="stringifyObjects",kS="enableCompoundKey",ZR="disableXhrSync",eN="disableFetchKeepAlive",Ece="addNoResponse",wce="excludeCsMetaData",tN="useSendBeacon",nN="fetchCredentials",rN="alwaysUseXhrOverride",Ice="unloadTransports",Sj="serializeOfflineEvt",Ej="getOfflineRequestDetails",xS="createPayload",lw="createOneDSPayload",oN="payloadBlob",gi="headers",Eh="_thePayload",iN="urlString",Dr="batches",qr="sendType",uw="addHeader",dw="canSendRequest",xv="sendQueuedRequests",wj="isCompletelyIdle",hw="setUnloading",Tce="isTenantKilled",Xm="resume",Ij="sendSynchronousBatch",RS="_transport",Rv="getWParam",sN="isBeacon",Cm="timings",NS="isTeardown",PS="isSync",Zm="data",_ce="timeout",OS="_sendReason",Tj="setKillSwitchTenants",_j="_backOffTransmission",Sm="identifier",Ace="disableOptimizeObj",kce="ignoreMc1Ms0CookieProcessing",aN="eventsLimitInMem",cN="autoFlushEventsLimit",xce="disableAutoBatchFlushLimit",Rce="overrideInstrumentationKey",Nce="disableTelemetry",MS="baseData",Em="sendAttempt",Ha="latency",Hl="sync";function Aj(t){var e=(t.ext||{}).intweb;return e&&ta(e[kv])?e[kv]:null}function lN(t){for(var e=null,n=0;e===null&&n<t[yt];n++)e=Aj(t[n]);return e}var Gf=function(){function t(e,n){var r=n?[][Tc](n):[],o=this,i=lN(r);o[Ri]=function(){return e},o.Msfpc=function(){return i||Js},o[Bn]=function(){return r[yt]},o[hc]=function(){return r},o.addEvent=function(s){return s?(r[Er](s),i||(i=Aj(s)),!0):!1},o[Lu]=function(s,a){var c;if(s<r[yt]){var u=r[yt]-s;Yt(a)||(u=a<u?a:u),c=r[eb](s,u),i=lN(r)}return new t(e,c)}}return t.create=function(e,n){return new t(e,n)},t}(),Pce=function(){function t(){var e=!0,n=!0,r=!0,o="use-collector-delta",i=!1;hn(t,this,function(s){s[iw]=function(){return e},s[gj]=function(){r&&(r=!1,i||(e=!1))},s[vj]=function(){return n},s[yj]=function(){return o},s[sw]=function(a){i||(a?(o=a,n=!0,i=!0):n=!1,e=!0)}})}return t.__ieDyn=1,t}(),Oce=1e3,Mce=function(){function t(){var e={};function n(r){var o=[];return r&&Ze(r,function(i){o[Er](Ur(i))}),o}hn(t,this,function(r){r[Tj]=function(o,i){if(o&&i)try{var s=n(o[Lu](","));if(i==="this-request-only")return s;for(var a=parseInt(i,10)*Oce,c=0;c<s[yt];++c)e[s[c]]=ba()+a}catch{return[]}return[]},r[Tce]=function(o){var i=e,s=Ur(o);return i[s]!==void 0&&i[s]>ba()?!0:(delete i[s],!1)}})}return t.__ieDyn=1,t}(),Lce=.8,Dce=1.2,uN=3e3,jce=6e5;function Uce(t){return!(t>=300&&t<500&&t!=429||t==501||t==505)}function kj(t){var e=0,n=uN*Lce,r=uN*Dce,o=Math.floor(Math.random()*(r-n))+n;return e=Math.pow(2,t)*o,Math.min(e,jce)}var Fce=20,Bce=3984588,xj=65e3,Rj=2e6,Hce=Math.min(Rj,xj),dN="metadata",wm="f",zce=/\./,Vce=function(){function t(e,n,r,o,i,s){var a="data",c="baseData",u="ext",d=!!o,f=!0,p=n,g={},v=!!s,b=i||rj;hn(t,this,function(y){y.createPayload=function(w,E,I,T,A,_){return{apiKeys:[],payloadBlob:Js,overflow:null,sizeExceed:[],failedEvts:[],batches:[],numEvents:0,retryCnt:w,isTeardown:E,isSync:I,isBeacon:T,sendType:_,sendReason:A}},y.appendPayload=function(w,E,I){var T=w&&E&&!w.overflow;return T&&jr(e,function(){return"Serializer:appendPayload"},function(){for(var A=E.events(),_=w.payloadBlob,U=w.numEvents,k=!1,G=[],K=[],ie=w.isBeacon,P=ie?xj:Bce,$=ie?Hce:Rj,Z=0,x=0;Z<A.length;){var L=A[Z];if(L){if(U>=I){w.overflow=E.split(Z);break}var ne=y.getEventBlob(L);if(ne&&ne.length<=$){var se=ne.length,fe=_.length;if(fe+se>P){w.overflow=E.split(Z);break}_&&(_+=`
`),_+=ne,x++,x>Fce&&(nu(_,0,1),x=0),k=!0,U++}else ne?G.push(L):K.push(L),A.splice(Z,1),Z--}Z++}if(G.length>0&&w.sizeExceed.push(Gf.create(E.iKey(),G)),K.length>0&&w.failedEvts.push(Gf.create(E.iKey(),K)),k){w.batches.push(E),w.payloadBlob=_,w.numEvents=U;var X=E.iKey();Po(w.apiKeys,X)===-1&&w.apiKeys.push(X)}},function(){return{payload:w,theBatch:{iKey:E.iKey(),evts:E.events()},max:I}}),T},y.getEventBlob=function(w){try{return jr(e,function(){return"Serializer.getEventBlob"},function(){var E={};E.name=w.name,E.time=w.time,E.ver=w.ver,E.iKey="o:"+$se(w.iKey);var I={},T;v||(T=function(k,G,K){$ce(b,I,k,G,K)});var A=w[u];A&&(E[u]=I,tn(A,function(k,G){var K=I[k]={};S(G,K,"ext."+k,!0,null,null,!0)}));var _=E[a]={};_.baseType=w.baseType;var U=_[c]={};return S(w.baseData,U,c,!1,[c],T,f),S(w.data,_,a,!1,[],T,f),JSON.stringify(E)},function(){return{item:w}})}catch{return null}};function C(w,E){var I=g[w];return I===void 0&&(w.length>=7&&(I=Fx(w,"ext.metadata")||Fx(w,"ext.web")),g[w]=I),I}function S(w,E,I,T,A,_,U){tn(w,function(k,G){var K=null;if(G||ta(G)){var ie=I,P=k,$=A,Z=E;if(d&&!T&&zce.test(k)){var x=k.split("."),L=x.length;if(L>1){$&&($=$.slice());for(var ne=0;ne<L-1;ne++){var se=x[ne];Z=Z[se]=Z[se]||{},ie+="."+se,$&&$.push(se)}P=x[L-1]}}var fe=T&&C(ie);if(!fe&&p&&p.handleField(ie,P)?K=p.value(ie,P,G,r):K=Kse(P,G,r),K){var X=K.value;if(Z[P]=X,_&&_($,P,K),typeof X=="object"&&!Tt(X)){var ge=$;ge&&(ge=ge.slice(),ge.push(P)),S(G,X,ie+"."+P,T,ge,_)}}}})}})}return t.__ieDyn=1,t}();function $ce(t,e,n,r,o){if(o&&e){var i=t(o.value,o.kind,o.propertyType);if(i>-1){var s=e[dN];s||(s=e[dN]={f:{}});var a=s[wm];if(a||(a=s[wm]={}),n)for(var c=0;c<n.length;c++){var u=n[c];a[u]||(a[u]={f:{}});var d=a[u][wm];d||(d=a[u][wm]={}),a=d}a=a[r]={},Tt(o.value)?a.a={t:i}:a.t=i}}}function Nv(t,e){return{set:function(n,r){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];return Aoe([t,e],n,r,o)}}}var za,LS="sendAttempt",Gce="&"+yce+"=true",Kce="?cors=true&"+Vh[aw]()+"="+ZE,Wce=(za={},za[1]=KR,za[100]=KR,za[200]="sent",za[8004]=XE,za[8003]=XE,za),fw={},pw={};function gl(t,e,n){fw[t]=e,n!==!1&&(pw[e]=t)}gl(ow,ow,!1);gl(ew,ew);gl(mj,"Client-Id");gl(rw,rw);gl(tw,tw);gl(nw,nw);gl(YR,YR);function Im(t,e){var n=!1;if(t&&e){var r=ms(t);if(r&&r[yt]>0)for(var o=e[aw](),i=0;i<r[yt];i++){var s=r[i];if(s&&No(e,s)&&s[aw]()===o){n=!0;break}}}return n}function zl(t,e,n,r){e&&n&&n[yt]>0&&(r&&fw[e]?(t[su][fw[e]]=n,t[cw]=!0):t.url+="&"+e+"="+n)}function qce(t,e,n){for(var r=0;r<t[yt];r++)if(t[r].name===e){t[r].value=n;return}t[Er]({name:e,value:n})}function Yce(t,e){for(var n=0;n<t[yt];n++)if(t[n].name===e){t[eb](n,1);return}}var Qce=function(){function t(e,n,r,o){var i,s,a,c,u=!1,d,f,p,g,v,b,y,C,S,w,E,I,T,A,_,U,k,G,K,ie,P,$,Z,x,L,ne,se,fe;hn(t,this,function(X){Re();var ge=!0;X[ff]=function(j,ue,q){x||(v=ue,I=ue.getCookieMgr(),f=q,p=f.diagLog(),ia(ie,vr(j,function(ce){var De,Ge=ce.cfg,Me=ce.cfg.extensionConfig[q.identifier];L=Nv(Me[bj],Me[Cj]),ta(Ge.anonCookieName)?qce(y,"anoncknm",Ge.anonCookieName):Yce(y,"anoncknm"),P=Me[bce],$=Me.payloadListener;var F=Me.httpXHROverride,re=Me[JR]?Me[JR]:Ge.endpointUrl;i=re+Kce,A=qt(Me[XR])?!0:!Me[XR],E=!Me[Cce];var de=Me.valueSanitizer,ke=Me[Sce],ve=!!Ge[kS];qt(Me[kS])||(ve=!!Me[kS]),_=Me.xhrTimeout,U=!!Me[ZR],k=!!Me[eN],K=Me[Ece]!==!1,ne=!!Me[wce],ue.getPlugin("LocalStorage")&&(k=!0),u=!FE(),w=new Vce(v,de,ke,ve,rj,ne),Yt(Me[tN])||(u=!!Me[tN]),Me[nN]&&(fe=Me[nN]);var Ke=Se();se?se.SetConfig(Ke):(se=new Ase,se[ff](Ke,p));var tt=F,ot=Me[rN]?F:null,vt=Me[rN]?F:null,Kn=[3,2];if(!F){b=!1;var bn=[];FE()?(bn=[2,1],Kn=[2,1,3]):bn=[1,2,3],bn=sR(bn,Me.transports),F=Oe(bn,!1),F||lf(p,"No available transport to send events"),tt=Oe(bn,!0)}ot||(Kn=sR(Kn,Me[Ice]),ot=Oe(Kn,!0)),G=!b&&(u&&v4()||!k&&y4(!0)),g=(De={},De[0]=F,De[1]=tt||Oe([1,2,3],!0),De[2]=ot||tt||Oe([1],!0),De[3]=vt||Oe([2,3],!0)||tt||Oe([1],!0),De)})),x=!0)},X.addResponseHandler=function(j){return Z[Er](j),{rm:function(){var ue=Z.indexOf(j);ue>=0&&Z[eb](ue,1)}}},X[Sj]=function(j){try{if(w)return w.getEventBlob(j)}catch{}return Js},X[Ej]=function(){try{var j=w&&w[xS](0,!1,!1,!1,1,0);return Y(j,A)}catch{}return null},X[lw]=function(j,ue){try{var q=[];Ze(j,function(F){ue&&(F=iu(F));var re=Gf.create(F[Ri],[F]);q[Er](re)});for(var ce=null;q[yt]>0&&w;){var De=q.shift();De&&De[Bn]()>0&&(ce=ce||w[xS](0,!1,!1,!1,1,0),w.appendPayload(ce,De,e))}var Ge=Y(ce,A),Me={data:ce[oN],urlString:Ge.url,headers:Ge[su],timeout:_,disableXhrSync:U,disableFetchKeepAlive:k};return A&&(Im(Me[gi],bm)||(Me[gi][bm]=WR),Im(Me[gi],Vh)||(Me[gi][Vh]=ZE)),Me}catch{}return null};function Oe(j,ue){try{return se&&se.getSenderInst(j,ue)}catch{}return null}X._getDbgPlgTargets=function(){return[g[0],s,w,g,Se(),i]};function Se(){try{var j={xdrOnComplete:Fe,fetchOnComplete:Ve,xhrOnComplete:he,beaconOnRetry:Pe},ue={enableSendPromise:!1,isOneDs:!0,disableCredentials:!ge,fetchCredentials:fe,disableXhr:!1,disableBeacon:!u,disableBeaconSync:!u,disableFetchKeepAlive:k,timeWrapper:L,addNoResponse:K,senderOnCompleteCallBack:j};return ue}catch{}return null}function Fe(j,ue,q){var ce=dd(j);B(ue,200,{},ce),_t(ce)}function Re(){var j;i=null,s=new Mce,a=!1,c=new Pce,u=!1,d=0,f=null,p=null,g=null,v=null,b=!0,y=[],C={},S=[],w=null,E=!1,I=null,T=!1,A=!1,_=j,U=j,k=j,G=j,K=j,ie=[],P=j,$=j,Z=[],x=!1,L=Nv(),ne=!1,se=null}function Ve(j,ue,q,ce){var De=function(F,re,de){B(ue,F,re,de),_t(de)},Ge={},Me=j[gi];Me&&Me.forEach(function(F,re){Ge[re]=F}),De(j.status,Ge,q||Js)}function he(j,ue,q){var ce=dd(j);B(ue,j.status,Wm(j,!0),ce),_t(ce)}function B(j,ue,q,ce){try{j(ue,q,ce)}catch(De){Xt(p,2,518,Mt(De))}}function Pe(j,ue,q){var ce=j,De=200,Ge=ce[Eh],Me=j[iN]+(K?Gce:Js);try{var F=Ji();if(Ge){var re=!!v.getPlugin("LocalStorage"),de=[],ke=[];Ze(Ge[Dr],function(ve){if(de&&ve&&ve[Bn]()>0)for(var Ke=ve[hc](),tt=0;tt<Ke[yt];tt++)if(F.sendBeacon(Me,w.getEventBlob(Ke[tt])))ke[Er](ve[tt]);else{de[Er](ve[Lu](tt));break}else de[Er](ve[Lu](0))}),ke[yt]>0&&(Ge.sentEvts=ke),re||rn(de,8003,Ge[qr],!0)}else De=0}catch(ve){lf(p,"Failed to send telemetry using sendBeacon API. Ex:"+Mt(ve)),De=0}finally{B(ue,De,{},Js)}}function Q(j){return j===2||j===3}function oe(j){return T&&Q(j)&&(j=2),j}X[uw]=function(j,ue){C[j]=ue},X.removeHeader=function(j){delete C[j]},X[dw]=function(){return we()&&c[iw]()},X[xv]=function(j,ue){qt(j)&&(j=0),T&&(j=oe(j),ue=2),te(S,j,0)&&D(N(),0,!1,j,ue||0)},X[wj]=function(){return!a&&d===0&&S[yt]===0},X[hw]=function(j){T=j},X.addBatch=function(j){if(j&&j[Bn]()>0){if(s.isTenantKilled(j[Ri]()))return!1;S[Er](j)}return!0},X.teardown=function(){S[yt]>0&&D(N(),0,!0,2,2),Ze(ie,function(j){j&&j.rm&&j.rm()}),ie=[]},X.pause=function(){a=!0},X[Xm]=function(){a=!1,X[xv](0,4)},X[Ij]=function(j,ue,q){j&&j[Bn]()>0&&(Yt(ue)&&(ue=1),T&&(ue=oe(ue),q=2),D([j],0,!1,ue,q||0))};function we(){return!a&&d<n}function N(){var j=S;return S=[],j}function te(j,ue,q){var ce=!1;return j&&j[yt]>0&&!a&&g[ue]&&w&&(ce=ue!==0||we()&&(q>0||c[iw]())),ce}function Ce(j){var ue={};return j&&Ze(j,function(q,ce){ue[ce]={iKey:q[Ri](),evts:q[hc]()}}),ue}function D(j,ue,q,ce,De){if(!(!j||j[yt]===0)){if(a){rn(j,1,ce);return}ce=oe(ce);try{var Ge=j,Me=ce!==0;jr(v,function(){return"HttpManager:_sendBatches"},function(F){F&&(j=j.slice(0));for(var re=[],de=null,ke=Ci(),ve=g[ce]||(Me?g[1]:g[0]),Ke=ve&&ve[RS],tt=G&&(T||Q(ce)||Ke===3||ve._isSync&&Ke===2);te(j,ce,ue);){var ot=j.shift();ot&&ot[Bn]()>0&&(s.isTenantKilled(ot[Ri]())?re[Er](ot):(de=de||w[xS](ue,q,Me,tt,De,ce),w.appendPayload(de,ot,e)?de.overflow!==null&&(j=[de.overflow][Tc](j),de.overflow=null,Je(de,ke,Ci(),De),ke=Ci(),de=null):(Je(de,ke,Ci(),De),ke=Ci(),j=[ot][Tc](j),de=null)))}de&&Je(de,ke,Ci(),De),j[yt]>0&&(S=j[Tc](S)),rn(re,8004,ce)},function(){return{batches:Ce(Ge),retryCount:ue,isTeardown:q,isSynchronous:Me,sendReason:De,useSendBeacon:Q(ce),sendType:ce}},!Me)}catch(F){Xt(p,2,48,"Unexpected Exception sending batch: "+Mt(F))}}}function Y(j,ue){var q={url:i,hdrs:{},useHdrs:!1};ue?(q[su]=_v(q[su],C),q.useHdrs=ms(q.hdrs)[yt]>0):tn(C,function(F,re){pw[F]?zl(q,pw[F],re,!1):(q[su][F]=re,q[cw]=!0)}),zl(q,mj,"NO_AUTH",ue),zl(q,ew,tj,ue);var ce=Js;Ze(j.apiKeys,function(F){ce[yt]>0&&(ce+=","),ce+=F}),zl(q,rw,ce,ue),zl(q,nw,ba().toString(),ue);var De=nn(j);if(ta(De)&&(q.url+="&ext.intweb.msfpc="+De),c[vj]()&&zl(q,tw,c[yj](),ue),v[Rv]){var Ge=v[Rv]();Ge>=0&&(q.url+="&w="+Ge)}for(var Me=0;Me<y[yt];Me++)q.url+="&"+y[Me].name+"="+y[Me].value;return q}function Ie(j,ue,q){j[ue]=j[ue]||{},j[ue][f.identifier]=q}function Je(j,ue,q,ce){if(j&&j.payloadBlob&&j.payloadBlob[yt]>0){var De=!!P,Ge=g[j.sendType];!Q(j[qr])&&j[sN]&&j.sendReason===2&&(Ge=g[2]||g[3]||Ge);var Me=A;(j.isBeacon||Ge[RS]===3)&&(Me=!1);var F=Y(j,Me);Me=Me||F[cw];var re=Ci();jr(v,function(){return"HttpManager:_doPayloadSend"},function(){for(var de=0;de<j.batches[yt];de++)for(var ke=j[Dr][de],ve=ke[hc](),Ke=0;Ke<ve[yt];Ke++){var tt=ve[Ke];if(E){var ot=tt[Cm]=tt[Cm]||{};Ie(ot,"sendEventStart",re),Ie(ot,"serializationStart",ue),Ie(ot,"serializationCompleted",q)}tt[LS]>0?tt[LS]++:tt[LS]=1}rn(j[Dr],1e3+(ce||0),j[qr],!0);var vt={data:j[oN],urlString:F.url,headers:F[su],_thePayload:j,_sendReason:ce,timeout:_,disableXhrSync:U,disableFetchKeepAlive:k};Me&&(Im(vt[gi],bm)||(vt[gi][bm]=WR),Im(vt[gi],Vh)||(vt[gi][Vh]=ZE));var Kn=null;Ge&&(Kn=function(bn){c[gj]();var lr=function(Tn,di){st(Tn,di,j,ce)},tr=j[NS]||j[PS];try{Ge.sendPOST(bn,lr,tr),$&&$(vt,bn,tr,j[sN])}catch(Tn){lf(p,"Unexpected exception sending payload. Ex:"+Mt(Tn)),B(lr,0,{})}}),jr(v,function(){return"HttpManager:_doPayloadSend.sender"},function(){if(Kn)if(j[qr]===0&&d++,De&&!j.isBeacon&&Ge[RS]!==3){var bn={data:vt[Zm],urlString:vt[iN],headers:_v({},vt[gi]),timeout:vt[_ce],disableXhrSync:vt[ZR],disableFetchKeepAlive:vt[eN]},lr=!1;jr(v,function(){return"HttpManager:_doPayloadSend.sendHook"},function(){try{P(bn,function(tr){lr=!0,!b&&!tr[Eh]&&(tr[Eh]=tr[Eh]||vt[Eh],tr[OS]=tr[OS]||vt[OS]),Kn(tr)},j.isSync||j[NS])}catch{lr||Kn(vt)}})}else Kn(vt)})},function(){return{thePayload:j,serializationStart:ue,serializationCompleted:q,sendReason:ce}},j[PS])}j.sizeExceed&&j.sizeExceed[yt]>0&&rn(j.sizeExceed,8003,j[qr]),j.failedEvts&&j.failedEvts[yt]>0&&rn(j.failedEvts,8002,j[qr])}function it(j,ue){E&&Ze(j,function(q){var ce=q[Cm]=q[Cm]||{};Ie(ce,"sendEventCompleted",ue)})}function st(j,ue,q,ce){var De=9e3,Ge=null,Me=!1,F=!1;try{var re=!0;if(typeof j!==l_){if(ue){c[sw](ue[vce]);var de=ue[gce]||ue["kill-duration-seconds"];Ze(s[Tj](ue[mce],de),function(ve){Ze(q[Dr],function(Ke){if(Ke[Ri]()===ve){Ge=Ge||[];var tt=Ke[Lu](0);q.numEvents-=tt[Bn](),Ge[Er](tt)}})})}if(j==200||j==204){De=200;return}(!Uce(j)||q.numEvents<=0)&&(re=!1),De=9e3+j%1e3}if(re){De=100;var ke=q.retryCnt;q[qr]===0&&(ke<r?(Me=!0,wt(function(){q[qr]===0&&d--,D(q[Dr],ke+1,q[NS],T?2:q[qr],5)},T,kj(ke))):(F=!0,T&&(De=8001)))}}finally{Me||(c[sw](),Be(q,De,ce,F)),rn(Ge,8004,q[qr])}}function Be(j,ue,q,ce){try{ce&&f[_j]();var De=j[Dr];ue===200&&(De=j.sentEvts||j[Dr],!ce&&!j[PS]&&f._clearBackOff(),$e(De)),rn(De,ue,j[qr],!0)}finally{j[qr]===0&&(d--,q!==5&&X.sendQueuedRequests(j[qr],q))}}function $e(j){if(E){var ue=Ci();Ze(j,function(q){q&&q[Bn]()>0&&it(q[hc](),ue)})}}function wt(j,ue,q){ue?j():L.set(j,q)}function nn(j){for(var ue=0;ue<j.batches[yt];ue++){var q=j[Dr][ue].Msfpc();if(q)return encodeURIComponent(q)}return Js}function _t(j){var ue=Z;try{for(var q=0;q<ue[yt];q++)try{ue[q](j)}catch(De){Xt(p,1,519,"Response handler failed: "+De)}if(j){var ce=JSON.parse(j);ta(ce.webResult)&&ta(ce.webResult[kv])&&I.set("MSFPC",ce.webResult[kv],365*86400)}}catch{}}function rn(j,ue,q,ce){if(j&&j[yt]>0&&o){var De=o[Rn(ue)];if(De){var Ge=q!==0;jr(v,function(){return"HttpManager:_sendBatchesNotification"},function(){wt(function(){try{De.call(o,j,ue,Ge,q)}catch(Me){Xt(p,1,74,"send request notification failed: "+Me)}},ce||Ge,0)},function(){return{batches:Ce(j),reason:ue,isSync:Ge,sendSync:ce,sendType:q}},!Ge)}}}function Rn(j){var ue=Wce[j];return ta(ue)||(ue=pce,j>=9e3&&j<=9999?ue=fce:j>=8e3&&j<=8999?ue=XE:j>=1e3&&j<=1999&&(ue=hce)),ue}})}return t.__ieDyn=1,t}(),Jce=.25,hN=500,Xce=20,Nj=6,Pj=2,Zce=4,fN=2,ele=1,mw=1e4,Va="eventsDiscarded",pN="",Pn=void 0,tle=jd({eventsLimitInMem:{isVal:df,v:mw},immediateEventLimit:{isVal:df,v:500},autoFlushEventsLimit:{isVal:df,v:0},disableAutoBatchFlushLimit:!1,httpXHROverride:{isVal:nle,v:Pn},overrideInstrumentationKey:Pn,overrideEndpointUrl:Pn,disableTelemetry:!1,ignoreMc1Ms0CookieProcessing:!1,setTimeoutOverride:Pn,clearTimeoutOverride:Pn,payloadPreprocessor:Pn,payloadListener:Pn,disableEventTimings:Pn,valueSanitizer:Pn,stringifyObjects:Pn,enableCompoundKey:Pn,disableOptimizeObj:!1,fetchCredentials:Pn,transports:Pn,unloadTransports:Pn,useSendBeacon:Pn,disableFetchKeepAlive:Pn,avoidOptions:!1,xhrTimeout:Pn,disableXhrSync:Pn,alwaysUseXhrOverride:!1,maxEventRetryAttempts:{isVal:va,v:Nj},maxUnloadEventRetryAttempts:{isVal:va,v:Pj},addNoResponse:Pn,excludeCsMetaData:Pn});function nle(t){return t&&t.sendPOST}var rle=function(t){Cp(e,t);function e(){var n=t.call(this)||this;n.identifier="PostChannel",n.priority=1011,n.version="4.3.3";var r,o=!1,i=[],s,a=!1,c=0,u,d=0,f,p={},g=ym,v,b,y,C,S,w,E,I,T,A,_,U,k,G,K,ie,P,$,Z,x,L,ne;return hn(e,n,function(se,fe){oe(),se._getDbgPlgTargets=function(){return[S,r]},se[ff]=function(F,re,de){jr(re,function(){return"PostChannel:initialize"},function(){fe[ff](F,re,de),Z=re.getNotifyMgr();try{K=Ip(Bd(se[Sm]),re.evtNamespace&&re.evtNamespace()),se._addHook(vr(F,function(ke){var ve=ke.cfg,Ke=qc(null,ve,re);r=Ke.getExtCfg(se[Sm],tle),ie=Nv(r[bj],r[Cj]),_=!r[Ace]&&Jse(),P=r[kce],ge(re),f=r[aN],u=r.immediateEventLimit,E=r[cN],k=r.maxEventRetryAttempts,G=r.maxUnloadEventRetryAttempts,$=r[xce],ad(ve.endpointUrl)?se.pause():a&&se[Xm](),Me(),L=r[Rce],ne=!!r[Nce],x&&X();var tt=ve.disablePageUnloadEvents||[];x=jse(Fe,tt,K),x=Z4(Fe,tt,K)||x,x=ej(Re,ve.disablePageShowEvents,K)||x})),S[ff](F,se.core,se)}catch(ke){throw se.setInitialized(!1),ke}},function(){return{theConfig:F,core:re,extensions:de}})},se.processTelemetry=function(F,re){YE(F,se[Sm]),re=re||se._getTelCtx(re);var de=F;!ne&&!o&&(L&&(de[Ri]=L),he(de,!0),U?te(2,2):Q()),se.processNext(de,re)},se.getOfflineSupport=function(){try{var F=S&&S[Ej]();if(S)return{getUrl:function(){return F?F.url:null},serialize:Se,batch:Oe,shouldProcess:function(re){return!ne},createPayload:function(re){return null},createOneDSPayload:function(re){if(S[lw])return S[lw](re,_)}}}catch{}return null},se._doTeardown=function(F,re){te(2,2),o=!0,S.teardown(),X(),oe()};function X(){Use(null,K),Fse(null,K),Bse(null,K)}function ge(F){var re=F[Rv];F[Rv]=function(){var de=0;return P&&(de=de|2),de|re.call(F)}}function Oe(F){var re=pN;return F&&F[yt]&&Ze(F,function(de){re&&(re+=`
`),re+=de}),re}function Se(F){var re=pN;try{Ve(F),re=S[Sj](F)}catch{}return re}function Fe(F){var re=F||_a().event;re.type!=="beforeunload"&&(U=!0,S[hw](U)),te(2,2)}function Re(F){U=!1,S[hw](U)}function Ve(F){F.ext&&F.ext[QR]&&delete F.ext[QR],F.ext&&F.ext[AS]&&F.ext[AS].id&&delete F.ext[AS].id,_&&(F.ext=iu(F.ext),F[MS]&&(F[MS]=iu(F[MS])),F[Zm]&&(F[Zm]=iu(F[Zm])))}function he(F,re){if(F[Em]||(F[Em]=0),F[Ha]||(F[Ha]=1),Ve(F),F[Hl]){if(y||a)F[Ha]=3,F[Hl]=!1;else if(S){_&&(F=iu(F)),S[Ij](Gf.create(F[Ri],[F]),F[Hl]===!0?1:F[Hl],3);return}}var de=F[Ha],ke=d,ve=f;de===4&&(ke=c,ve=u);var Ke=!1;if(ke<ve)Ke=!Ie(F,re);else{var tt=1,ot=Xce;de===4&&(tt=4,ot=1),Ke=!0,Je(F[Ri],F[Ha],tt,ot)&&(Ke=!Ie(F,re))}Ke&&Rn(Va,[F],Ua.QueueFull)}se.setEventQueueLimits=function(F,re){r[aN]=f=df(F)?F:mw,r[cN]=E=df(re)?re:0,Me();var de=d>F;if(!de&&I>0)for(var ke=1;!de&&ke<=3;ke++){var ve=w[ke];ve&&ve[Dr]&&Ze(ve[Dr],function(Ke){Ke&&Ke[Bn]()>=I&&(de=!0)})}Y(!0,de)},se.pause=function(){N(),a=!0,S&&S.pause()},se[Xm]=function(){a=!1,S&&S[Xm](),Q()},se._loadTransmitProfiles=function(F){wt(),tn(F,function(re,de){var ke=de[yt];if(ke>=2){var ve=ke>2?de[2]:0;if(de[eb](0,ke-2),de[1]<0&&(de[0]=-1),de[1]>0&&de[0]>0){var Ke=de[0]/de[1];de[0]=Math.ceil(Ke)*de[1]}ve>=0&&de[1]>=0&&ve>de[1]&&(ve=de[1]),de[Er](ve),p[re]=de}})},se.flush=function(F,re,de){F===void 0&&(F=!0);var ke;if(!a)if(de=de||1,F)re||(ke=Wc(function(Ke){re=Ke})),s==null?(N(),st(1,0,de),s=we(function(){s=null,Be(re,de)},0)):i[Er](re);else{var ve=N();B(1,1,de),re&&re(),ve&&Q()}return ke},se.setMsaAuthTicket=function(F){S[uw](ow,F)},se.setAuthPluginHeader=function(F){S[uw](qR,F)},se.removeAuthPluginHeader=function(){S.removeHeader(qR)},se.hasEvents=Pe,se._setTransmitProfile=function(F){g!==F&&p[F]!==void 0&&(N(),g=F,Q())},h4(se,function(){return S},["addResponseHandler"]);function B(F,re,de){var ke=st(F,re,de);return S[xv](re,de),ke}function Pe(){return d>0}function Q(){if(T>=0&&st(T,0,A)&&S[xv](0,A),c>0&&!b&&!a){var F=p[g][2];F>=0&&(b=we(function(){b=null,B(4,0,1),Q()},F))}var re=p[g][1];!v&&!s&&re>=0&&!a&&(Pe()?v=we(function(){v=null,B(C===0?3:1,0,1),C++,C%=2,Q()},re):C=0)}se[_j]=function(){y<Zce&&(y++,N(),Q())},se._clearBackOff=function(){y&&(y=0,N(),Q())};function oe(){r=null,o=!1,i=[],s=null,a=!1,c=0,u=500,d=0,f=mw,p={},g=ym,v=null,b=null,y=0,C=0,w={},E=0,x=!1,I=0,T=-1,A=null,_=!0,U=!1,k=Nj,G=Pj,K=null,L=null,ne=!1,ie=Nv(),S=new Qce(hN,fN,ele,{requeue:_t,send:ue,sent:q,drop:ce,rspFail:De,oth:Ge}),nn(),Ce(),Me()}function we(F,re){re===0&&y&&(re=1);var de=1e3;return y&&(de=kj(y-1)),ie.set(F,re*de)}function N(){return v!==null?(v.cancel(),v=null,C=0,!0):!1}function te(F,re){N(),s&&(s.cancel(),s=null),a||B(1,F,re)}function Ce(){w[4]={batches:[],iKeyMap:{}},w[3]={batches:[],iKeyMap:{}},w[2]={batches:[],iKeyMap:{}},w[1]={batches:[],iKeyMap:{}}}function D(F,re,de){var ke=w[re];ke||(re=1,ke=w[re]);var ve=ke.iKeyMap[F];return!ve&&de&&(ve=Gf.create(F),ke.batches[Er](ve),ke.iKeyMap[F]=ve),ve}function Y(F,re){S[dw]()&&!y&&(E>0&&d>E&&(re=!0),re&&s==null&&se.flush(F,function(){},20))}function Ie(F,re){_&&(F=iu(F));var de=F[Ha],ke=D(F[Ri],de,!0);return ke.addEvent(F)?(de!==4?(d++,re&&F[Em]===0&&Y(!F.sync,I>0&&ke[Bn]()>=I)):c++,!0):!1}function Je(F,re,de,ke){for(;de<=re;){var ve=D(F,re,!0);if(ve&&ve[Bn]()>0){var Ke=ve[Lu](0,ke),tt=Ke[Bn]();if(tt>0)return de===4?c-=tt:d-=tt,j(Va,[Ke],Ua.QueueFull),!0}de++}return it(),!1}function it(){for(var F=0,re=0,de=function(ve){var Ke=w[ve];Ke&&Ke[Dr]&&Ze(Ke[Dr],function(tt){ve===4?F+=tt[Bn]():re+=tt[Bn]()})},ke=1;ke<=4;ke++)de(ke);d=re,c=F}function st(F,re,de){var ke=!1,ve=re===0;return!ve||S[dw]()?jr(se.core,function(){return"PostChannel._queueBatches"},function(){for(var Ke=[],tt=4;tt>=F;){var ot=w[tt];ot&&ot.batches&&ot.batches[yt]>0&&(Ze(ot[Dr],function(vt){S.addBatch(vt)?ke=ke||vt&&vt[Bn]()>0:Ke=Ke[Tc](vt[hc]()),tt===4?c-=vt[Bn]():d-=vt[Bn]()}),ot[Dr]=[],ot.iKeyMap={}),tt--}Ke[yt]>0&&Rn(Va,Ke,Ua.KillSwitch),ke&&T>=F&&(T=-1,A=0)},function(){return{latency:F,sendType:re,sendReason:de}},!ve):(T=T>=0?Math.min(T,F):F,A=Math.max(A,de)),ke}function Be(F,re){B(1,0,re),it(),$e(function(){F&&F(),i[yt]>0?s=we(function(){s=null,Be(i.shift(),re)},0):(s=null,Q())})}function $e(F){S[wj]()?F():s=we(function(){s=null,$e(F)},Jce)}function wt(){N(),nn(),g=ym,Q()}function nn(){p={},p[ym]=[2,1,0],p[uce]=[6,3,0],p[dce]=[18,9,0]}function _t(F,re){var de=[],ke=k;U&&(ke=G),Ze(F,function(ve){ve&&ve[Bn]()>0&&Ze(ve[hc](),function(Ke){Ke&&(Ke[Hl]&&(Ke[Ha]=4,Ke[Hl]=!1),Ke[Em]<ke?(YE(Ke,se[Sm]),he(Ke,!1)):de[Er](Ke))})}),de[yt]>0&&Rn(Va,de,Ua.NonRetryableStatus),U&&te(2,2)}function rn(F,re){var de=Z||{},ke=de[F];if(ke)try{ke.apply(de,re)}catch(ve){Xt(se.diagLog(),1,74,F+" notification failed: "+ve)}}function Rn(F,re){for(var de=[],ke=2;ke<arguments.length;ke++)de[ke-2]=arguments[ke];re&&re[yt]>0&&rn(F,[re][Tc](de))}function j(F,re){for(var de=[],ke=2;ke<arguments.length;ke++)de[ke-2]=arguments[ke];re&&re[yt]>0&&Ze(re,function(ve){ve&&ve[Bn]()>0&&rn(F,[ve.events()][Tc](de))})}function ue(F,re,de){F&&F[yt]>0&&rn("eventsSendRequest",[re>=1e3&&re<=1999?re-1e3:0,de!==!0])}function q(F,re){j("eventsSent",F,re),Q()}function ce(F,re){j(Va,F,re>=8e3&&re<=8999?re-8e3:Ua.Unknown)}function De(F){j(Va,F,Ua.NonRetryableStatus),Q()}function Ge(F,re){j(Va,F,Ua.Unknown),Q()}function Me(){$?I=0:I=Math.max(hN*(fN+1),f/6)}}),n}return e.__ieDyn=1,e}(U_),ole=jd({cookieCfg:{ref:!0,v:{}},extensions:{rdOnly:!0,ref:!0,v:[]},channels:{rdOnly:!0,ref:!0,v:[]},extensionConfig:{ref:!0,v:{}}}),Oj=function(t){Cp(e,t);function e(){var n=t.call(this)||this,r,o;return hn(e,n,function(i,s){i.initialize=function(a,c){var u=n;jr(n,function(){return"ApplicationInsights:initialize"},function(){a=co(a,ole,u.logger,!1).cfg,r=new rle,o=new lce;var d=[o];c&&(d=d.concat(c)),a||bo("You must provide a config object!");var f=a.channels;if(f&&f.length>0){for(var p=!1,g=0;g<f[0].length;g++)if(f[0][g].identifier===r.identifier){p=!0;break}p||ia(f[0],r)}else a.channels.push([r]);var v=a.extensionConfig;v[r.identifier]=v[r.identifier]||a&&a.channelConfiguration||{},v[o.identifier]=v[o.identifier]||a&&a.propertyConfiguration||{};try{s.initialize(a,d),u.isInitialized()&&B3(a,{channelConfiguration:{g:function(){return a.extensionConfig[r.identifier]}},propertyConfiguration:{g:function(){return a.extensionConfig[o.identifier]}}})}catch(b){Xt(u.logger,1,514,"Failed to initialize SDK."+Mt(b))}},function(){return{config:a,extensions:c}})},i.getPropertyManager=function(){return o},i.getPostChannel=function(){return r}}),n}return e.__ieDyn=1,e}(eae);/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const Mj="msal.request";function eg(t){var e;try{return new Jg(((e=t.cache)==null?void 0:e.temporaryCacheLocation)||Sn.SessionStorage)}catch{return new Qg}}function gw(t){return`${Mj}.${t}`}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const ile="faab4ead691e451eb230afc98a28e0f2-698cf73d-7930-426b-87d8-d36936f6912f-7401",sle="https://eu-mobile.events.data.microsoft.com/OneCollector/1.0/",mN=`${Mj}.mats-telemetry-profile-id`;class ale{constructor(e,n,r,o){this.logger=e,this.appName=r,this.appVersion=o,this.eventsToEmit=new Set(n),this.sessionId=To();const i={instrumentationKey:ile,endpointUrl:sle,extensions:[],propertyConfiguration:{gpcDataSharingOptIn:!1},disableCookiesUsage:!0};this.appInsightsMATS=new Oj,this.appInsightsMATS.initialize(i,[]),this.logger.verbose("MATSTelemetryReporter: Initialized");try{const s=new Jg(Sn.LocalStorage),a=s.getItem(mN);if(a!=null&&a.length)this.profileTelemetryId=a;else{const c=To();this.profileTelemetryId=c,s.setItem(mN,c)}}catch{e.warning("MATSTelemetryReporter: local storage is not available"),this.profileTelemetryId=""}}sendCustomEvent(e){if(!this.eventsToEmit.has(e.name)){this.logger.verbose(`MATSTelemetryReporter: Skipping telemetry for ${e.name}`,e.correlationId);return}const n={...e,appName:this.appName,appVersion:this.appVersion,libraryName:"MSAL-JS",profileTelemetryId:this.profileTelemetryId,sessionId:this.sessionId};delete n.context,delete n.errorStack;const r={name:"actionmsaljs".concat(e.name.toLowerCase()||""),data:n};this.logger.verbose(`MATSTelemetryReporter: Sending ${r.name} for tracking`),this.appInsightsMATS.track(r),e.name===bt.AcquireTokenPreRedirect&&this.appInsightsMATS.flush()}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const cle="d634483c08244c1ca09af2b2d952c92e-ab2bba03-2ba3-49d8-a82c-ef6da750d8ab-7725";function lle(t){return Math.random()<=t}class ule{constructor(e,n,r){this.synthetic=!1,this.redactionRatio=.1,this.logger=e,this.eventsToEmit=new Set(n);const o={instrumentationKey:cle,extensions:[],propertyConfiguration:{gpcDataSharingOptIn:!1},disableCookiesUsage:!0};this.appInsights=new Oj,this.appInsights.initialize(o,[]),this.synthetic=r||!1,this.logger.verbose("PerformanceTelemetryReporter: Initialized")}sendCustomEvent(e){if(!this.eventsToEmit.has(e.name)){this.logger.verbose(`PerformanceTelemetryReporter: Skipping telemetry for ${e.name}`,e.correlationId);return}let n;!e.success||lle(this.redactionRatio)?(n={...e,appName:void 0,synthetic:this.synthetic},this.logger.verbose(`PerformanceTelemetryReporter: Sending ${n.name} for tracking`)):(n={name:e.name,eventId:e.eventId,correlationId:e.correlationId,requestId:e.requestId,success:e.success,status:e.status,fromCache:e.fromCache,startPageVisibility:e.startPageVisibility,endPageVisibility:e.endPageVisibility,authority:e.authority,durationMs:e.durationMs,startTimeMs:e.startTimeMs,clientId:e.clientId,libraryName:e.libraryName,libraryVersion:e.libraryVersion,accountType:e.accountType,synthetic:this.synthetic,isBroker:e.isBroker,isBackground:e.isBackground},this.logger.verbose(`PerformanceTelemetryReporter: Sending redacted ${n.name} for tracking`));const r={name:e.name,data:n};this.appInsights.track(r),e.name===bt.AcquireTokenPreRedirect&&this.appInsights.flush()}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const Tm=new Set([bt.AcquireTokenSilent,bt.AcquireTokenByCode,bt.AcquireTokenPopup,bt.AcquireTokenRedirect,bt.AcquireTokenPreRedirect,bt.PairwiseBrokerApplicationInitializeBrokering,bt.SsoSilent,bt.EmbeddedClientApplicationSendSSOSilentRequest,bt.EmbeddedClientApplicationSendPopupRequest,bt.EmbeddedClientApplicationSendRedirectRequest,bt.EmbeddedClientApplicationHandleRedirectRequest,bt.EmbeddedClientApplicationSendSilentRefreshRequest]);class dle{constructor(e,n){var o;this.logger=e;const r=((o=n==null?void 0:n.eventsToEmit)==null?void 0:o.filter(i=>Tm==null?void 0:Tm.has(i)))||[...Tm];this.matsTelemetryReporter=n!=null&&n.enableMATS?new ale(e,r,n==null?void 0:n.appName,n==null?void 0:n.appVersion):null,this.perfTelemetryReporter=new ule(e,r,n==null?void 0:n.synthetic)}sendCustomEvent(e){var n;this.perfTelemetryReporter.sendCustomEvent(e),(n=this.matsTelemetryReporter)==null||n.sendCustomEvent(e)}getTelemetryCallback(){this.logger.trace("TelemetryReporter: Attaching callback to send custom metrics.");const e=n=>{n.forEach(r=>{r.name===bt.AcquireTokenByBroker&&(r.name=r.brokerEventName||r.name,r.isBroker=!0,delete r.brokerEventName,this.logger.verbosePii(`TelemetryReporter: Updated broker event ${JSON.stringify(r)}`,r.correlationId)),this.sendCustomEvent(r)})};return this.logger.verbose("TelemetryReporter: Returning callback as telemetry emitted."),e}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const hle=[Mf.AzurePublic,Mf.AzurePpe];function fle(t){return t.auth.authority?hle.some(e=>{var n;return((n=t.auth.authority)==null?void 0:n.indexOf(e.toString()))===0}):!0}class Tp extends Sre{constructor(e,n){var i;let r;const o=typeof window<"u";if(!(n!=null&&n.disabled)&&fle(e)&&o?(r=((i=e.telemetry)==null?void 0:i.client)||new wre(e,new Set(Tre),new Map(Ire)),super({...e,telemetry:{...e.telemetry,client:r}})):(super(e),r=new z5),this.performanceClient=r,o){const s=new dle(this.getLogger(),n);this.addPerformanceCallback(s.getTelemetryCallback())}}static async createPublicClientApplication(e,n,r){const o=new Tp(e,n);return await o.initialize({correlationId:r}),o}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const Rt={BROKER_READY:"BrokerReady",HANDSHAKE_REQUEST:"BrokerHandshakeRequest",HANDSHAKE_RESPONSE:"BrokerHandshakeResponse",AUTH_REQUEST:"BrokerAuthRequest",REDIRECT_RESPONSE:"BrokerRedirectResponse",HANDLE_REDIRECT_REQUEST:"BrokerHandleRedirectRequest",AUTH_RESULT:"BrokerAuthResult",EMBEDDED_LOGOUT_REQUEST:"EmbeddedLogoutRequest",EMBEDDED_LOGOUT_RESPONSE:"EmbeddedLogoutResponse"},ss={BROKER_AUTH_ERROR_NAME:"BrokerAuthError",INTERACTION_REQ_ERROR_NAME:"InteractionRequiredAuthError",SERVER_ERROR_NAME:"ServerError",CLIENT_AUTH_ERR_NAME:"ClientAuthError",CLIENT_CONFIG_ERROR_NAME:"ClientConfigurationError",BROWSER_AUTH_ERROR_NAME:"BrowserAuthError",BROWSER_CONFIG_ERROR_NAME:"BrowserConfigurationError",AUTH_ERROR_NAME:"AuthError"},ple=2e3,mle=6e3,gle=3e5;/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class ai{constructor(e){this.messageType=e}static validateMessage(e){if(e.data&&e.data.messageType)switch(e.data.messageType){case Rt.HANDSHAKE_REQUEST:case Rt.HANDSHAKE_RESPONSE:case Rt.HANDLE_REDIRECT_REQUEST:case Rt.AUTH_REQUEST:case Rt.AUTH_RESULT:case Rt.REDIRECT_RESPONSE:case Rt.EMBEDDED_LOGOUT_REQUEST:return e;default:return null}else return null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class tb extends ai{constructor(e,n,r=!1,o){super(Rt.HANDSHAKE_REQUEST),this.embeddedClientId=e,this.version=n,this.allowTelemetry=r,this.nonce=o}static validate(e){return e.data&&e.data.messageType===Rt.HANDSHAKE_REQUEST&&e.data.embeddedClientId&&e.data.version?new tb(e.data.embeddedClientId,e.data.version,e.data.allowTelemetry,e.data.nonce):null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class nb extends ai{constructor(e,n,r){super(Rt.HANDSHAKE_RESPONSE),this.version=e,this.brokerOrigin=n,this.nonce=r}static validate(e,n){if(!n.includes(e.origin))return null;const r=ai.validateMessage(e);return r&&r.data.messageType===Rt.HANDSHAKE_RESPONSE&&r.data.version?new nb(r.data.version,r.origin,r.data.nonce):null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class rb extends ai{get embeddedAppOrigin(){return this._embeddedAppOrigin}constructor(e,n,r,o){super(Rt.AUTH_REQUEST),this.embeddedClientId=e,this._embeddedAppOrigin=o,this.interactionType=n,this.request=r}static validate(e,n){return e.data&&e.data.messageType===Rt.AUTH_REQUEST&&e.data.embeddedClientId&&e.data.interactionType&&e.data.request?new rb(e.data.embeddedClientId,e.data.interactionType,e.data.request,n):null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class ob extends ai{constructor(){super(Rt.REDIRECT_RESPONSE)}static validate(e){return e.data&&e.data.messageType===Rt.REDIRECT_RESPONSE?new ob:null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const qn={noEmbeddedAppError:{code:"no_embedded_app",desc:"The embedded application object was not created. Please ensure you have configured your application correctly for an embedded application: https://github.com/AzureAD/microsoft-authentication-library-for-js/blob/broker-v2/lib/msal-browser/docs/broker.md#brokered-application-configuration"},brokerResponseInvalidError:{code:"broker_response_invalid",desc:"The broker response did not have the expected values."},brokeredPopupRequestRedirecting:{code:"broker_popup_will_redirect",desc:"The request for a brokered popup requires a redirect by the broker. If your app does not perform the redirect, please check the broker's logs."},brokerTimeoutError:{code:"broker_timeout",desc:"Message broker timed out."},brokerHandshakeTimeoutError:{code:"broker_handshake_timeout",desc:"Broker handshake response timed out."},brokerHandshakeFailed:{code:"broker_handshake_failed",desc:"Broker handshake failed. Please see logs for details."},noTrustedBrokersProvided:{code:"no_trusted_brokers_provided",desc:"No trusted brokers provided."},brokeringDisabledError:{code:"brokering_disabled",desc:"Brokering is not enabled for the client application. Please check logs to see if handshake was performed."},shrGenerationError:{code:"shr_generation_error",desc:"Error generating SHRs. Kid is missing in the request."}};class ln extends St{constructor(e,n){super(e,n),Object.setPrototypeOf(this,ln.prototype),this.name=ss.BROKER_AUTH_ERROR_NAME}static createNoEmbeddedAppError(){return new ln(qn.noEmbeddedAppError.code,qn.noEmbeddedAppError.desc)}static createBrokerResponseInvalidError(){return new ln(qn.brokerResponseInvalidError.code,`${qn.brokerResponseInvalidError.desc}`)}static createBrokerPopupRequestRedirectingError(){return new ln(qn.brokeredPopupRequestRedirecting.code,qn.brokeredPopupRequestRedirecting.desc)}static createNoTrustedBrokersProvidedError(){return new ln(qn.noTrustedBrokersProvided.code,qn.noTrustedBrokersProvided.desc)}static createBrokeringDisabledError(){return new ln(qn.brokeringDisabledError.code,`${qn.brokeringDisabledError.desc}`)}static createMessageBrokerTimeoutError(){return new ln(qn.brokerTimeoutError.code,qn.brokerTimeoutError.desc)}static createMessageBrokerHandshakeTimeoutError(){return new ln(qn.brokerHandshakeTimeoutError.code,qn.brokerHandshakeTimeoutError.desc)}static createBrokerHandshakeFailedError(){return new ln(qn.brokerHandshakeFailed.code,qn.brokerHandshakeFailed.desc)}static createShrGenerationError(){return new ln(qn.shrGenerationError.code,qn.shrGenerationError.desc)}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class So extends ai{constructor(e,n,r){if(super(Rt.AUTH_RESULT),this.interactionType=e,this.result=n,r){const{setCorrelationId:o,...i}=r;this.errorPayload=i}}static validate(e){return e.data&&e.data.messageType===Rt.AUTH_RESULT&&e.data.interactionType&&(e.data.result||e.data.errorPayload)?new So(e.data.interactionType,e.data.result,e.data.errorPayload):null}static detectError(e){let n;switch(e.name){case ss.INTERACTION_REQ_ERROR_NAME:n=new kr(e.errorCode,e.errorMessage,e.subError);break;case ss.SERVER_ERROR_NAME:n=new Ki(e.errorCode,e.errorMessage,e.subError);break;case ss.CLIENT_AUTH_ERR_NAME:n=new Md(e.errorCode,e.errorMessage);break;case ss.CLIENT_CONFIG_ERROR_NAME:n=new Oy(e.errorCode);break;case ss.BROWSER_AUTH_ERROR_NAME:n=new Ld(e.errorCode);break;case ss.BROWSER_CONFIG_ERROR_NAME:n=new Fy(e.errorCode,e.errorMessage);break;case ss.BROKER_AUTH_ERROR_NAME:n=new ln(e.errorCode,e.errorMessage);break;case ss.AUTH_ERROR_NAME:n=new St(e.errorCode,e.errorMessage,e.subError);break;default:n=new St(xy,JSON.stringify(e));break}return n.setCorrelationId(e.correlationId),n}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class ib extends ai{constructor(e,n){super(Rt.HANDLE_REDIRECT_REQUEST),this.embeddedClientId=e,this.version=n}static validate(e){return e.data&&e.data.messageType===Rt.HANDLE_REDIRECT_REQUEST&&e.data.embeddedClientId&&e.data.version?new ib(e.data.embeddedClientId,e.data.version):null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */function Lj(t){return{...{preferredInteractionType:null,brokerRedirectParams:{},actAsBroker:!1,allowBrokering:!1,trustedBrokerDomains:[],brokerHandshakeTimeout:(t==null?void 0:t.brokerHandshakeTimeout)||ple,brokerMessageTimeout:(t==null?void 0:t.brokerMessageTimeout)||mle,brokerInteractionTimeout:(t==null?void 0:t.brokerInteractionTimeout)||gle},...t}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class sb extends ai{constructor(e,n){super(Rt.EMBEDDED_LOGOUT_REQUEST),this.version=e,this.correlationId=n}static validate(e){const n=ai.validateMessage(e);return n&&n.data&&n.data.version?new sb(n.data.version,n.data.correlationId):null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */function vle(t,e){const n={userState:e,brokerState:{requestOrigin:t.embeddedAppOrigin,requestClientId:t.embeddedClientId}},r=JSON.stringify(n),o=new TextEncoder().encode(r);return window.btoa(Array.from(o,i=>String.fromCodePoint(i)).join(""))}function yle(t){if(!t)return null;try{const e=window.atob(t),n=new Uint8Array(e.length);for(let i=0;i<n.length;i++)n[i]=e.charCodeAt(i);const r=new TextDecoder().decode(n),o=JSON.parse(r);return o.hasOwnProperty("brokerState")?o:null}catch{return null}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const ble="@azure/msal-browser-1p",Du="3.26.0";/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */function Dj(t){const e=t.split("-",1)[0].split(".",3);return{major:parseInt(e[0]),minor:parseInt(e[1]),patch:parseInt(e[2])}}function Vl(t){t.port1.close(),t.port2.close()}function jj(t,e,n,r=20){if(t.length===0||n>r)return[0,n-1];let o=n,i=t.length;for(let s=0;s<t.length;s++){t[s].postMessage(e,"*");const[a,c]=jj(t[s],e,n+1,r);i+=a,c>o&&(o=c)}return[i,o]}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class Cle extends Tp{constructor(e,n,r){var o;super(e),this.currentBrokerRedirectResponse=void 0,this.hybridAuthPromise=void 0,this.pwbBrokerAppConfiguration=Lj(n),this.redirectResponseMap=new Map,this.embeddedAppConfigMap=new Map,this.telemetryAllowedEmbeddedClients=new Set,this.logger=new si(((o=e.system)==null?void 0:o.loggerOptions)||{},ble,Du),this.eventHandler=r,this.messageListener=this.handleBrokerMessage.bind(this)}getRedirectCorrelationId(){const e=`msal.${this.getConfiguration().auth.clientId}`,n=eg(this.getConfiguration()).getItem(`${e}.request.native`);try{if(n){const r=JSON.parse(n);return r&&typeof r=="object"?r.correlationId:null}}catch{this.logger.error("BrokerClientApplication.getRedirectCorrelationId: Unable to parse native request")}return eg(this.getConfiguration()).getItem(`${e}.request.correlationId`)||""}async handleRedirectPromise(e){const n=this.getRedirectCorrelationId(),r=this.performanceClient.startMeasurement(bt.AcquireTokenByBroker,n);r.add({brokerEventName:bt.AcquireTokenRedirect});try{const o=super.handleRedirectPromise(e);this.currentBrokerRedirectResponse=o;const i=await this.currentBrokerRedirectResponse;if(this.currentBrokerRedirectResponse=void 0,i){const s=yle(i.state);if(this.setActiveAccount(i.account),s){const a={...i,state:s.userState};this.redirectResponseMap.set(s.brokerState.requestOrigin,a),r.add({embeddedClientId:s.brokerState.requestClientId,embeddedRedirectUri:s.brokerState.requestOrigin}),this.endBrokerPerformanceEvent(s.brokerState.requestClientId,r)}else return r.end({success:!0}),i}else r.discard();return null}catch(o){throw o instanceof St&&o.setCorrelationId(n),r.end({success:!1},o),o}}async listenForBrokerMessage(e,n){return this.logger.verbose("listening for child broker messages."),window.addEventListener("message",this.messageListener),this.broadcastBrokerReadyMessage(window.frames,e,n),e&&e.codeRequest&&(this.hybridAuthPromise=this.acquireTokenByCode(e.codeRequest)),this.hybridAuthPromise}broadcastBrokerReadyMessage(e,n,r){this.logger.trace("Broadcasting broker ready message to child frames.");const o={messageType:Rt.BROKER_READY};window.postMessage(o,"*");const[i,s]=jj(e,o,1,n==null?void 0:n.maxChildFrameDepth);r==null||r.add({maxFrameDepthReached:s,framesNotified:i,maxFrameDepthConfigured:n==null?void 0:n.maxChildFrameDepth}),this.logger.trace(`Broadcasted broker ready message to ${i} child frames with a max depth of ${s}`)}stopListeningForBrokerMessage(){this.logger.verbose("stop listening for child broker messages."),window.removeEventListener("message",this.messageListener),this.embeddedAppConfigMap.forEach(([e,n])=>{this.logger.verbose(`closing message port for ${e}`),n.close()}),this.embeddedAppConfigMap.clear()}async handleBrokerMessage(e){var r,o;const n=ai.validateMessage(e);if(!(!n||!n.data.messageType))switch(this.logger.verbose(`Broker received message with type: ${n.data.messageType}`),n.data.messageType){case Rt.HANDSHAKE_REQUEST:return this.handleBrokerHandshake(n);case Rt.HANDLE_REDIRECT_REQUEST:const i=ib.validate(n);return i?this.handleBrokerRedirectResponse(i,n):void 0;case Rt.AUTH_REQUEST:const s=rb.validate(n,((r=this.embeddedAppConfigMap.get(n.data.embeddedClientId))==null?void 0:r[0])||n.origin);if(!s)return;s.request.correlationId||(s.request.correlationId=To());const a=this.performanceClient.startMeasurement(bt.AcquireTokenByBroker,s.request.correlationId),c=(o=n.ports)==null?void 0:o[0];try{await this.handleBrokerAuthRequest(s,c),this.endBrokerPerformanceEvent(s.embeddedClientId,a);return}catch(u){throw this.endBrokerPerformanceEvent(s.embeddedClientId,a,u),u}default:return}}isDescendantFrame(e){const n=[];for(n.push(e.sourceFrame);n.length>0;){const r=n.pop();if(r)for(let o=0;o<r.frames.length;o++){const i=r.frames[o];if(i===e.targetFrame)return!0;i!==r&&n.push(i)}}return!1}async handleBrokerHandshake(e){var s,a;if(!(e.source&&e.source.window&&e.source.window===e.source)){this.logger.warning("Broker handshake request validation failed. Message origin is not an iframe");return}const n=e.source;window!==n&&!this.isDescendantFrame({sourceFrame:window,targetFrame:n})&&this.logger.warning("Broker handshake request validation failed. Message origin is not a descendant iframe");const r=tb.validate(e);if(!r){this.logger.warning("Broker handshake request validation failed. Message may not have come from MSAL.js.");return}const o=To(),i=this.performanceClient.startMeasurement(bt.BrokerClientApplicationHandleBrokerHandshake,o);try{if(i.add({embeddedClientId:r.embeddedClientId}),r.allowTelemetry&&this.telemetryAllowedEmbeddedClients.add(r.embeddedClientId),this.logger.verbose(`${r.messageType} validated for AppId: ${r.embeddedClientId}`),this.hybridAuthPromise)try{await this.hybridAuthPromise}catch(f){this.logger.error(`Broker could not obtain tokens using authorization code initializer: ${f}`)}const c=new nb(Du,"",e.data.nonce);this.logger.verbose(`Sending handshake response to ${e.origin}`);const u=(s=e.ports)==null?void 0:s[0];u&&(u.onmessage=this.messageListener,this.embeddedAppConfigMap.set(e.data.embeddedClientId,[e.origin,u]));const d=Dj(e.data.version);u&&d.major===3&&d.minor>=15&&d.minor<=19?u==null||u.postMessage(c):(a=e.source)==null||a.postMessage(c,e.origin)}catch(c){throw this.endBrokerPerformanceEvent(r.embeddedClientId,i,c),c}}async handleBrokerRedirectResponse(e,n){var r;if(e){const o=this.embeddedAppConfigMap.get(e.embeddedClientId);let i,s;o?[s,i]=o:(s=n.origin,i=(r=n.ports)==null?void 0:r[0]),this.currentBrokerRedirectResponse&&await this.currentBrokerRedirectResponse;const a=this.redirectResponseMap.get(s),c=new So(Ee.Redirect,a||null);this.logger.verbose("Sending auth response"),i==null||i.postMessage(c);const u=`msal.${this.getConfiguration().auth.clientId}`;eg(this.getConfiguration()).removeItem(`${u}.request.native`);return}}async handleBrokerAuthRequest(e,n){this.currentBrokerRedirectResponse&&await this.currentBrokerRedirectResponse,e.request.correlationId||(e.request.correlationId=To());const r=e.request.correlationId,o=e.request.account||this.getActiveAccount();let i;switch(e.interactionType){case Ee.Silent:if(o){this.performanceClient.addFields({brokerEventName:bt.AcquireTokenSilent},r),i=this.brokeredSilentRequest(e,o,n);break}this.performanceClient.addFields({brokerEventName:bt.SsoSilent},r),i=this.brokeredSsoSilentRequest(e,n);break;case Ee.Redirect:case Ee.Popup:default:const s=this.getInteractionType(e.interactionType);this.performanceClient.addFields({brokerEventName:s===Ee.Redirect?bt.AcquireTokenRedirect:bt.AcquireTokenPopup},r),i=this.interactiveBrokerRequest(s,e,n);break}return i}getInteractionType(e){const n=this.pwbBrokerAppConfiguration.preferredInteractionType;return n||e}async interactiveBrokerRequest(e,n,r){switch(e){case Ee.Redirect:return this.brokeredRedirectRequest(n,r);case Ee.Popup:return this.brokeredPopupRequest(n,r);case Ee.Silent:this.logger.error("Invalid code path. interactiveBrokerRequest() should only be called for interactive requests.");return;case Ee.None:this.logger.error("Broker is blocking interactive requests. Please attempt a silent request or sign into the broker first.");return;default:this.logger.error("Invalid code path. interactiveBrokerRequest() should only be called for interactive requests.");return}}async brokeredRedirectRequest(e,n){var i;this.logger.verbose("Brokered redirect request initiated.");const r=this.getAllAccounts();this.eventHandler.emitEvent(r.length===0?le.LOGIN_START:le.ACQUIRE_TOKEN_START,Ee.Redirect,e.request);const o=((i=this.embeddedAppConfigMap.get(e.embeddedClientId))==null?void 0:i[1])||n;try{const s=new ob;o==null||o.postMessage(s),this.logger.verbose(`Sending redirect response: ${s}`);const a=this.addBrokerRequestProperties(e);return a.state=vle(e,a.state),await super.acquireTokenRedirect(a)}catch(s){const a=new So(Ee.Redirect,null,s);this.logger.verbose(`Found auth error in redirect: ${s}`),o==null||o.postMessage(a),this.eventHandler.emitEvent(r.length===0?le.LOGIN_FAILURE:le.ACQUIRE_TOKEN_FAILURE,Ee.Redirect,null,s)}}async brokeredPopupRequest(e,n){var i;this.logger.verbose("Brokered popup request initiated.");const r=this.getAllAccounts();this.eventHandler.emitEvent(r.length===0?le.LOGIN_START:le.ACQUIRE_TOKEN_START,Ee.Popup,e.request);const o=((i=this.embeddedAppConfigMap.get(e.embeddedClientId))==null?void 0:i[1])||n;try{const s=this.addBrokerRequestProperties(e),a=await super.acquireTokenPopup(s),c=new So(Ee.Popup,a);this.logger.verbosePii("Sending auth response"),o==null||o.postMessage(c);const u=r.length<this.getAllAccounts().length;this.eventHandler.emitEvent(u?le.LOGIN_SUCCESS:le.ACQUIRE_TOKEN_SUCCESS,Ee.Popup,a)}catch(s){const a=new So(Ee.Popup,null,s);this.logger.verbose(`Found auth error in popup: ${s}`),o==null||o.postMessage(a),this.eventHandler.emitEvent(r.length===0?le.LOGIN_FAILURE:le.ACQUIRE_TOKEN_FAILURE,Ee.Popup,null,s)}}async brokeredSsoSilentRequest(e,n){var o;this.logger.verbose("Brokered SSO Silent request initiated."),this.eventHandler.emitEvent(le.SSO_SILENT_START,Ee.Silent,e.request);const r=((o=this.embeddedAppConfigMap.get(e.embeddedClientId))==null?void 0:o[1])||n;try{const i=this.addBrokerRequestProperties(e),s=await super.ssoSilent(i),a=new So(Ee.Silent,s);this.logger.verbosePii("Sending auth response"),r==null||r.postMessage(a),this.eventHandler.emitEvent(le.SSO_SILENT_SUCCESS,Ee.Silent,s)}catch(i){const s=new So(Ee.Silent,null,i);this.logger.verbose(`Found auth error in ssoSilent: ${i}`),r==null||r.postMessage(s),this.eventHandler.emitEvent(le.SSO_SILENT_FAILURE,Ee.Silent,null,i)}}async brokeredSilentRequest(e,n,r){var i;this.logger.verbose("Brokered Silent request initiated."),this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_START,Ee.Silent,e.request);const o=((i=this.embeddedAppConfigMap.get(e.embeddedClientId))==null?void 0:i[1])||r;try{const s=this.addBrokerRequestProperties(e,n);s.cacheLookupPolicy=Hn.RefreshTokenAndNetwork;const a=await super.acquireTokenSilent(s),c=new So(Ee.Silent,a);o==null||o.postMessage(c),this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_SUCCESS,Ee.Silent,a)}catch(s){const a=new So(Ee.Silent,null,s);this.logger.verbose(`Found auth error in silent: ${s}`),o==null||o.postMessage(a),this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_FAILURE,Ee.Silent,null,s)}}getEmbeddedAppRedirectUri(e){const n=new It(e);return`brk-${this.getConfiguration().auth.clientId}://${n.getUrlComponents().HostNameAndPort}`}addBrokerRequestProperties(e,n){const r={...e.request};r.redirectUri=this.getEmbeddedAppRedirectUri(e.embeddedAppOrigin),r.extraQueryParameters={...r.extraQueryParameters,client_id:e.embeddedClientId,brk_client_id:this.getConfiguration().auth.clientId,brk_redirect_uri:this.getConfiguration().auth.redirectUri||Jo()},r.tokenBodyParameters={...r.tokenBodyParameters,client_id:e.embeddedClientId,brk_client_id:this.getConfiguration().auth.clientId,brk_redirect_uri:this.getConfiguration().auth.redirectUri||Jo()},r.storeInCache={idToken:!1,accessToken:!1};const o=n||this.getActiveAccount();return o&&(r.account=o),e.request.correlationId&&this.performanceClient.addFields({embeddedClientId:e.embeddedClientId,embeddedRedirectUri:e.embeddedAppOrigin},e.request.correlationId),r}async sendLogoutRequestToEmbeddedApps(e){this.logger.verbose("sendLogoutRequestToEmbeddedApps called"),await this.messageEmbeddedAppsToLogout(new sb(Du,(e==null?void 0:e.correlationId)||To()))}async messageEmbeddedAppsToLogout(e){const n=[];this.embeddedAppConfigMap.forEach(r=>{n.push(new Promise((o,i)=>{var a;const s=window.setTimeout(()=>{o()},200);try{(a=r[1])==null||a.postMessage(e),r[1].addEventListener("message",c=>{c.data.messageType===Rt.EMBEDDED_LOGOUT_RESPONSE&&(this.logger.info(`Received logout response from embedded app: ${c.data.embeddedClientId}`),o(),clearTimeout(s))})}catch(c){this.logger.error(`Could not logout application ${r[0]}. Error in message channel: ${c}`),i(c)}}))}),await Promise.all(n)}endBrokerPerformanceEvent(e,n,r){this.telemetryAllowedEmbeddedClients.has(e)||(this.logger.verbosePii(`TelemetryReporter: Skipping brokered event as not allowed by the client ${e}`,n.event.correlationId),n.discard()),r?n.end({success:!1},r):n.end({success:!0})}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class Sle extends ai{constructor(e,n,r){super(Rt.EMBEDDED_LOGOUT_RESPONSE),this.version=e,this.correlationId=r,this.embeddedClientId=n}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */const wh={Interaction:"brokerInteractionTimeoutMs",Message:"brokerMessageTimeoutMs",Iframe:"brokerIframeTimeoutMs"},Ih={Interaction:"brokerInteractionTimedOut",Message:"brokerMessageTimedOut",Iframe:"brokerIframeTimedOut"};class Ele{get trustedBrokersProvided(){return!!this.pwbBrokeredAppConfiguration.trustedBrokerDomains&&this.pwbBrokeredAppConfiguration.trustedBrokerDomains.length>=1}get brokerConnectionEstablished(){return!!this.brokerMetadata}constructor(e,n,r,o,i,s,a,c){this.pwbBrokeredAppConfiguration=r,this.clientId=e,this.logger=o,this.brokerMetadata=null,this.performanceClient=i,this.hydrateCache=a,this.clearCache=c,this.messageChannelList=[],this.messageChannel=new MessageChannel,this.resolvers=new Map,this.temporaryBrokerStorage=s,this.onWindowMessageCb=this.onWindowMessage.bind(this),this.handshakeMetadata={correlationId:n}}getAncestors(){var r;const e=[];let n=window;for(;n&&n.parent&&n.parent.window!==n;)n=(r=n.parent)==null?void 0:r.window,e.push(n);return this.logger.verbose(`Attempting to send handshake request to ${e.length} ancestors`),e}async initiateHandshake(e){if(!this.trustedBrokersProvided)throw ln.createNoTrustedBrokersProvidedError();return this.initMeasurement&&this.initMeasurement.discard(),this.initMeasurement=e,new Promise((n,r)=>{const o=setTimeout(()=>{this.logger.warning("Broker handshake timed out"),e==null||e.add({brokerHandshakeTimedOut:!0,brokerHandshakeTimeoutMs:this.pwbBrokeredAppConfiguration.brokerHandshakeTimeout}),r(ln.createMessageBrokerHandshakeTimeoutError())},this.pwbBrokeredAppConfiguration.brokerHandshakeTimeout);this.handshakeMetadata.resolve=n,this.handshakeMetadata.reject=r,this.handshakeMetadata.timeoutId=o,window.addEventListener("message",this.onWindowMessageCb);const i=[];i.push(window),i.push(...this.getAncestors());for(let s=0;s<i.length;s++){const a=i[s],c=i.length-s-1;this.logger.verbose(`Sending handshake request to frame with depth = ${c}`),this.sendHandshakeRequest(a,c,void 0,e)}}).catch(n=>{const r=n;this.logger.error(r.message)})}async onWindowMessage(e){if(e.data&&e.origin&&this.pwbBrokeredAppConfiguration.trustedBrokerDomains.includes(e.origin))if(e.data.messageType===Rt.BROKER_READY){this.logger.verbose("Broker is available.");const n=this.performanceClient.startMeasurement(bt.PairwiseBrokerApplicationInitializeBrokering,this.handshakeMetadata.correlationId);return this.handshakeMetadata.performanceEvent&&this.handshakeMetadata.performanceEvent.discard(),this.handshakeMetadata.performanceEvent=n,n.add({isBackground:!0}),this.sendHandshakeRequest(e.source,this.getFrameDepth(e.source),e.origin,n)}else e.data.messageType===Rt.HANDSHAKE_RESPONSE&&(this.handshakeMetadata.performanceEvent=this.initMeasurement,this.onHandshakeResponse(e))}getFrameDepth(e){const n=[];n.push(window),n.push(...this.getAncestors());for(let r=0;r<n.length;r++)if(n[r]===e)return n.length-r-1;return 0}closeBrokerConnection(){this.logger.verbose("Closing broker connection."),this.brokerMetadata=null,Vl(this.messageChannel),this.messageChannelList.forEach(e=>Vl(e.channel)),window.removeEventListener("message",this.onWindowMessageCb)}async sendSsoSilentRequest(e){this.performanceEvent=this.performanceClient.startMeasurement(bt.EmbeddedClientApplicationSendSSOSilentRequest,e.correlationId),fs(!0),this.performanceEvent.increment({visibilityChangeCount:0});const n=()=>{this.trackPageVisibility()};document.addEventListener("visibilitychange",n);try{const r=await this.sendRequest(e,Ee.Silent,{type:wh.Iframe,error:Ih.Iframe,value:qg}),o=await this.handleResponse(r,e);if(o)this.performanceEvent.end({success:!0,fromCache:o.fromCache,accessTokenSize:o.accessToken.length,idTokenSize:o.idToken.length,isNativeBroker:o.fromNativeBroker,requestId:o.requestId},e.correlationId);else throw this.logger.errorPii(`Broker response is empty in brokered ssoSilent request: ${JSON.stringify(o)}`),ln.createBrokerResponseInvalidError();return o}catch(r){throw this.performanceEvent.end({success:!1},r),r}finally{document.removeEventListener("visibilitychange",n)}}async sendPopupRequest(e){this.performanceEvent=this.performanceClient.startMeasurement(bt.EmbeddedClientApplicationSendPopupRequest,e.correlationId),fs(!0);try{const n=await this.sendRequest(e,Ee.Popup,{type:wh.Interaction,error:Ih.Interaction,value:this.pwbBrokeredAppConfiguration.brokerInteractionTimeout}),r=await this.handleResponse(n,e);if(r)this.performanceEvent.end({success:!0,fromCache:r.fromCache,accessTokenSize:r.accessToken.length,idTokenSize:r.idToken.length,isNativeBroker:r.fromNativeBroker,requestId:r.requestId});else throw ob.validate(n)?(this.logger.verbose("popupRequest requires a redirect by the broker, this app will now redirect."),ln.createBrokerPopupRequestRedirectingError()):(this.logger.errorPii(`Broker response is empty in brokered popup request: ${JSON.stringify(r)}`),ln.createBrokerResponseInvalidError());return r}catch(n){throw this.performanceEvent.end({success:!1},n),n}}async sendHandleRedirectRequest(e){this.performanceEvent=this.performanceClient.startMeasurement(bt.EmbeddedClientApplicationHandleRedirectRequest);try{const n=new ib(this.clientId,Du),r=await this.messageBroker(n,e.correlationId,{type:wh.Message,error:Ih.Message,value:this.pwbBrokeredAppConfiguration.brokerMessageTimeout}),o=await this.handleResponse(r,e);return this.performanceEvent.end({success:!0,fromCache:o==null?void 0:o.fromCache,accessTokenSize:o==null?void 0:o.accessToken.length,idTokenSize:o==null?void 0:o.idToken.length,isNativeBroker:o==null?void 0:o.fromNativeBroker}),o}catch(n){throw this.performanceEvent.end({success:!1},n),n}}async sendSilentRefreshRequest(e){this.performanceEvent=this.performanceClient.startMeasurement(bt.EmbeddedClientApplicationSendSilentRefreshRequest,e.correlationId),fs(!0),this.performanceEvent.increment({visibilityChangeCount:0});const n=()=>this.trackPageVisibility();document.addEventListener("visibilitychange",n);try{const r=await this.sendRequest(e,Ee.Silent,{type:wh.Message,error:Ih.Message,value:this.pwbBrokeredAppConfiguration.brokerMessageTimeout}),o=await this.handleResponse(r,e);if(o)this.performanceEvent.end({success:!0,fromCache:o.fromCache,accessTokenSize:o.accessToken.length,idTokenSize:o.idToken.length,isNativeBroker:o.fromNativeBroker,requestId:o.requestId});else throw this.logger.errorPii(`Broker response is empty in brokered silent refresh request: ${JSON.stringify(o)}`),ln.createBrokerResponseInvalidError();return o}catch(r){throw this.performanceEvent.end({success:!1},r),r}finally{document.removeEventListener("visibilitychange",n)}}async sendRequest(e,n,r){if(e.authenticationScheme===Ht.POP){const i=new xx(e);e.popKid=await i.generatePublicKeyThumbprint();const s=gw(this.clientId);this.temporaryBrokerStorage.containsKey(s)&&this.temporaryBrokerStorage.setItem(s,JSON.stringify(e))}const o=new rb(this.clientId,n,e,"");return this.messageBroker(o,e.correlationId,r)}getMessageChannelProperties(e){return e?this.messageChannelList.find(n=>n.nonce===e):this.getMessageChannelPropertiesByDepth(0)}getMessageChannelPropertiesByDepth(e){return this.messageChannelList.find(n=>n.depth===e)}onHandshakeResponse(e){const{resolve:n,reject:r,performanceEvent:o,timeoutId:i}=this.handshakeMetadata;try{const s=nb.validate(e,this.pwbBrokeredAppConfiguration.trustedBrokerDomains);if(s){const a=this.getMessageChannelProperties(s.nonce);if(!a){this.logger.trace("No MessageChannel found, ignoring this response"),o==null||o.increment({handshakeIgnoredCount:1});return}if(s.nonce&&s.nonce!==a.nonce){this.logger.trace("Received handshake response but there is a newer handshake request in flight, ignoring this one"),o==null||o.increment({handshakeIgnoredCount:1});return}i&&clearTimeout(i),this.logger.verbose("Received handshake response");const c=Dj(s.version);this.brokerMetadata={origin:s.brokerOrigin,version:s.version,semver:c,frameDepth:a.depth},c.major<=3&&c.minor<15&&Vl(a.channel),Vl(this.messageChannel),this.messageChannel=a.channel,n&&n(),o==null||o.add({brokerFrameDepth:a.depth}),o==null||o.end({success:!0})}}catch(s){const a=s;r&&r(a),this.logger.error(a.message),o==null||o.end({success:!1},a)}}sendHandshakeRequest(e=window.top,n,r,o){if(this.logger.trace("Pairwise Broker - sendHandshakeRequest called."),!e)throw this.logger.error("Target frame is undefined."),ln.createBrokerHandshakeFailedError();let i=new MessageChannel;const s=To();i.port1.onmessage=async u=>{u.data&&(u.data.messageType===Rt.HANDSHAKE_RESPONSE?(this.logger.warning("Received handshake response but the broker app is using a version of MSAL.js that does not report its origin, attempting direct communication with each trusted broker domain to resolve. This is a known issue with versions 3.15.0-3.19.1, consider asking the broker app to upgrade."),this.pwbBrokeredAppConfiguration.trustedBrokerDomains.forEach(d=>{const f=new MessageChannel;f.port1.onmessage=p=>{Vl(i),i=f,this.onHandshakeResponse({...p,data:{...p.data},origin:d})},this.logger.verbose(`Sending handshake request to ${d}`),e==null||e.postMessage(a,d,[f.port2])})):await this.handleBrokerMessage(u))};const a=new tb(this.clientId,Du,!0,s),c=this.getMessageChannelPropertiesByDepth(n);c?(Vl(c.channel),c.channel=i,c.nonce=s):this.messageChannelList.push({channel:i,nonce:s,depth:n}),this.logger.verbose("Sending handshake request"),o==null||o.increment({handshakeSentCount:1}),e==null||e.postMessage(a,r||"*",[i.port2])}async handleBrokerMessage(e){var s,a,c,u;const n=((a=(s=e.data)==null?void 0:s.result)==null?void 0:a.correlationId)||((u=(c=e.data)==null?void 0:c.errorPayload)==null?void 0:u.correlationId),r=e.data.messageType;if(this.logger.verbose(`Received message from broker of type: ${r} with correlationId: ${n}`),!r)return;let o;if(r===Rt.EMBEDDED_LOGOUT_REQUEST){this.logger.verbose("Received logout message from broker."),await this.handleLogoutMessageFromBroker(e),this.messageChannel.port1.postMessage(new Sle(Du,this.clientId,n));return}else if(r===Rt.AUTH_RESULT&&e.data.interactionType===Ee.Redirect)this.logger.verbose("Received redirect response from broker."),o=Ee.Redirect;else if(n)this.logger.verbose(`Resolving message for ${n}.`),o=n;else{this.logger.verbose(`No correlationId found in message: ${r}.`);return}const i=this.resolvers.get(o);i?(clearTimeout(i.timeoutId),i.resolve(e),this.resolvers.delete(o)):this.logger.warning(`Cannot resolve message for ${n}. Ignoring.`)}async messageBroker(e,n,r={type:wh.Message,error:Ih.Message,value:this.pwbBrokeredAppConfiguration.brokerMessageTimeout}){return new Promise((o,i)=>{var d,f;if(!this.brokerMetadata){i(ln.createBrokeringDisabledError());return}const s=setTimeout(()=>{var v;const p={},g=r.error.toString();p[g]=!0,(v=this.performanceEvent)==null||v.add(p),i(ln.createMessageBrokerTimeoutError())},r.value),a={},c=r.type.toString();a[c]=r.value,(d=this.performanceEvent)==null||d.add(a);const u=e.messageType===Rt.HANDLE_REDIRECT_REQUEST?Ee.Redirect:n;if(this.resolvers.set(u,{resolve:o,reject:i,timeoutId:s}),this.brokerMetadata.semver.major>=3&&this.brokerMetadata.semver.minor>=15)this.messageChannel.port1.postMessage(e);else{const p=new MessageChannel;p.port1.onmessage=this.handleBrokerMessage.bind(this),(f=window.top)==null||f.postMessage(e,this.brokerMetadata.origin,[p.port2])}})}async handleResponse(e,n){const r=So.validate(e);if(!r)return null;if(r.errorPayload)throw So.detectError(r.errorPayload);if(!r.result)throw ln.createBrokerResponseInvalidError();await this.hydrateCache(r.result,n);let o;if(n.authenticationScheme===Ht.POP){if(!n.popKid)throw ln.createShrGenerationError();o=await new xx(n).signRequest(r.result.accessToken,n.popKid)}return{...r.result,accessToken:o||r.result.accessToken}}async handleLogoutMessageFromBroker(e){sb.validate(e)&&(this.logger.verbose("Logout request received from broker and validated. Logging out embedded app."),await this.clearCache())}trackPageVisibility(){this.performanceEvent&&(this.logger.info("Embedded client: Visibility change detected"),this.performanceEvent.increment({visibilityChangeCount:1}))}}/*! @azure/msal-browser-1p v3.26.0 2024-10-08 */class wle extends Tp{constructor(e,n,r){super(e,r),this.pwbBrokerAppConfig=Lj(n),this.temporaryBrokerStorage=eg(e),this.eventHandler=new k3(this.getLogger()),this.redirectResponse=new Map,this.initialized=!1}async initialize(e){await super.initialize(e),this.initialized=!0}async initializeBrokering(e,n){if(typeof window>"u")return;const r={...n,correlationId:(n==null?void 0:n.correlationId)||To()},o=this.performanceClient.startMeasurement(bt.PairwiseBrokerApplicationInitializeBrokering,r.correlationId);o.add({isBackground:!1});try{this.pwbBrokerAppConfig.actAsBroker?(this.pwbBrokerAppConfig.allowBrokering&&this.getLogger().verbose("Running in top frame and both actAsBroker, allowBrokering flags set to true. actAsBroker takes precedence."),this.broker=new Cle(this.getConfiguration(),this.pwbBrokerAppConfig,this.eventHandler),this.getLogger().verbose("Acting as Broker"),this.getLogger().verbose("Initialize the extension for the new broker instance"),o.add({isBroker:!0}),await this.broker.initialize(r),await this.broker.listenForBrokerMessage(e,o),o.end({success:!0})):this.pwbBrokerAppConfig.allowBrokering&&(this.embeddedApp=new Ele(this.getConfiguration().auth.clientId,r.correlationId,this.pwbBrokerAppConfig,this.getLogger(),this.performanceClient,this.temporaryBrokerStorage,this.hydrateCache.bind(this),this.clearCache.bind(this)),this.getLogger().verbose("Acting as child"),o.add({isBroker:!1}),await this.embeddedApp.initiateHandshake(o))}catch(i){throw o.end({success:!1},i),i}}async handleRedirectPromise(e){if(o_(this.initialized),typeof window<"u"){const n=e||"";let r=this.redirectResponse.get(n);if(typeof r>"u"){this.eventHandler.emitEvent(le.HANDLE_REDIRECT_START,Ee.Redirect);const o=this.getAllAccounts();r=this.handleRedirectPromiseInternal(e).then(i=>{if(!i)return null;const s=o.length<this.getAllAccounts().length;return this.eventHandler.emitEvent(s?le.LOGIN_SUCCESS:le.ACQUIRE_TOKEN_SUCCESS,Ee.Redirect,i),i}).catch(i=>{throw this.eventHandler.emitEvent(o.length>0?le.ACQUIRE_TOKEN_FAILURE:le.LOGIN_FAILURE,Ee.Redirect,null,i),i}).finally(()=>{this.eventHandler.emitEvent(le.HANDLE_REDIRECT_END,Ee.Redirect)}),this.redirectResponse.set(n,r)}return r}return null}async handleRedirectPromiseInternal(e){var n;if((n=this.embeddedApp)!=null&&n.brokerConnectionEstablished){const r=gw(this.controller.getConfiguration().auth.clientId),o=this.temporaryBrokerStorage.getItem(r);if(o){const i=JSON.parse(o);return await this.embeddedApp.sendHandleRedirectRequest(i).catch(a=>{throw a instanceof St&&a.setCorrelationId(i.correlationId),a}).finally(()=>{this.temporaryBrokerStorage.removeItem(r)})}else return null}else return this.broker?this.broker.handleRedirectPromise(e):super.handleRedirectPromise(e)}async loginRedirect(e){return this.acquireTokenRedirect(e||{scopes:ga})}async acquireTokenRedirect(e){const n=this.getAllAccounts().length===0;return this.eventHandler.emitEvent(n?le.LOGIN_START:le.ACQUIRE_TOKEN_START,Ee.Redirect,e),super.acquireTokenRedirect(e).catch(r=>(this.eventHandler.emitEvent(n?le.LOGIN_FAILURE:le.ACQUIRE_TOKEN_FAILURE,Ee.Redirect,null,r),Promise.reject(r)))}async loginPopup(e){return this.acquireTokenPopup(e||{scopes:ga})}async acquireTokenPopup(e){fs(!0);const n={...e,correlationId:e.correlationId||To()},r=this.getAllAccounts();return this.eventHandler.emitEvent(r.length===0?le.LOGIN_START:le.ACQUIRE_TOKEN_START,Ee.Popup,n),this.acquireTokenPopupInternal(n).then(o=>{const i=r.length<this.getAllAccounts().length;return this.eventHandler.emitEvent(i?le.LOGIN_SUCCESS:le.ACQUIRE_TOKEN_SUCCESS,Ee.Popup,o),o}).catch(o=>{o instanceof St&&o.setCorrelationId(n.correlationId);const i=r.length===0;return this.eventHandler.emitEvent(i?le.LOGIN_FAILURE:le.ACQUIRE_TOKEN_FAILURE,Ee.Popup,null,o),Promise.reject(o)})}async acquireTokenPopupInternal(e){var n;if((n=this.embeddedApp)!=null&&n.brokerConnectionEstablished){if(this.getLogger().verbose("pairwise broker (embedded app) acquireTokenPopup called",e.correlationId),!this.embeddedApp)throw ln.createNoEmbeddedAppError();const r=gw(this.controller.getConfiguration().auth.clientId);return this.temporaryBrokerStorage.setItem(r,JSON.stringify(e)),this.embeddedApp.sendPopupRequest(e).then(o=>(this.temporaryBrokerStorage.removeItem(r),o))}return super.acquireTokenPopup(e)}async ssoSilent(e){fs(!0);const n={...e,correlationId:e.correlationId||To()};return this.eventHandler.emitEvent(le.SSO_SILENT_START,Ee.Silent,n),this.ssoSilentInternal(n).then(r=>(this.eventHandler.emitEvent(le.SSO_SILENT_SUCCESS,Ee.Silent,r),r)).catch(r=>{throw r instanceof St&&r.setCorrelationId(n.correlationId),this.eventHandler.emitEvent(le.SSO_SILENT_FAILURE,Ee.Silent,null,r),r})}async ssoSilentInternal(e){return this.embeddedApp&&this.embeddedApp.brokerConnectionEstablished?(this.getLogger().verbose("ssoSilent called",e.correlationId),this.embeddedApp.sendSsoSilentRequest(e)):super.ssoSilent(e)}async acquireTokenSilent(e){fs(!0);const n={...e,correlationId:e.correlationId||To()};return this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_START,Ee.Silent,n),this.acquireTokenSilentInternal(n).then(r=>(this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_SUCCESS,Ee.Silent,r),r)).catch(r=>(r instanceof St&&r.setCorrelationId(n.correlationId),this.eventHandler.emitEvent(le.ACQUIRE_TOKEN_FAILURE,Ee.Silent,null,r),Promise.reject(r)))}async acquireTokenSilentInternal(e){var o;if(!((o=this.embeddedApp)!=null&&o.brokerConnectionEstablished))return super.acquireTokenSilent(e);this.getLogger().verbose("acquireTokenSilent - attempting to acquire token from web flow");const n={...e,cacheLookupPolicy:Hn.AccessToken};let r;return e.cacheLookupPolicy===Hn.RefreshToken||e.cacheLookupPolicy===Hn.RefreshTokenAndNetwork||e.cacheLookupPolicy===Hn.Skip||e.forceRefresh?r=Promise.reject(new Md(Di)):r=super.acquireTokenSilent(n),r.catch(async i=>{if(e.cacheLookupPolicy===Hn.AccessToken)throw i;if(!this.embeddedApp)throw ln.createNoEmbeddedAppError();return this.embeddedApp.sendSilentRefreshRequest(e)})}async logoutRedirect(e){if(this.embeddedApp&&this.embeddedApp.brokerConnectionEstablished)this.getLogger().error("Embedded app is not allowed to logout while the broker app is logged in.");else if(this.broker)return await this.broker.sendLogoutRequestToEmbeddedApps(),super.logoutRedirect(e)}async logoutPopup(e){if(this.embeddedApp&&this.embeddedApp.brokerConnectionEstablished)this.getLogger().error("Embedded app is not allowed to logout while the broker app is logged in.");else if(this.broker)return await this.broker.sendLogoutRequestToEmbeddedApps(),super.logoutPopup(e)}setActiveAccount(e){this.broker&&this.broker.setActiveAccount(e),super.setActiveAccount(e)}addEventCallback(e,n=Object.values(le)){const r=[le.ACQUIRE_TOKEN_START,le.ACQUIRE_TOKEN_SUCCESS,le.ACQUIRE_TOKEN_FAILURE,le.LOGIN_START,le.LOGIN_SUCCESS,le.LOGIN_FAILURE,le.SSO_SILENT_START,le.SSO_SILENT_SUCCESS,le.SSO_SILENT_FAILURE,le.HANDLE_REDIRECT_START,le.HANDLE_REDIRECT_END],o=[],i=[];n.forEach(a=>{r.includes(a)?o.push(a):i.push(a)});const s=super.addEventCallback(e,i);return s?(this.eventHandler.addEventCallback(e,o,s),s):null}removeEventCallback(e){super.removeEventCallback(e),this.eventHandler.removeEventCallback(e)}}const Ile=["token-retry-max-1","token-retry-max-2"];class Uj{supportsNaa(){return!1}supportsPwBBroker(){return!1}async handleInteractionRequiredError(e,n){var r;An(In,null),An(qo,{reason:"token-expired",provider:"microsoft",loginHint:(r=n.account)==null?void 0:r.username})}}class Tle extends Uj{async instantiateMsal(){IT({apiName:le.INITIALIZE_START,providerType:"microsoft"});const e=await Tp.createPublicClientApplication(RO,NO);return TT({apiName:le.INITIALIZE_END,providerType:"microsoft"}),e}}let Pv=null;function _le(t){Pv=t}const vw=new hl(Ale);async function Ale(){if(Pv){const t=await Pv.maybeInstantiate();if(t)return t}return new Tle}function Fj(t){return new Promise(e=>{setTimeout(e,t)})}const kle={maxRetries:2,initialDelayMs:100,maxDelayMs:500,backoffFactor:2,jitterFactor:.1};function xle(t){return t instanceof Error?{errorType:t.name,errorMessage:t.message}:{errorType:"Unknown",errorMessage:String(t)}}function Rle(t,e,n,r){const o=t.maxDurationMs!==void 0&&r>=t.maxDurationMs;return n>t.maxRetries?{shouldExit:!0,exitReason:"maxRetriesReached"}:o?{shouldExit:!0,exitReason:"maxDurationReached"}:t.shouldRetry&&!t.shouldRetry(e)?{shouldExit:!0,exitReason:"shouldRetryFalse"}:{shouldExit:!1,exitReason:null}}function Nle(t,e){const n=e.jitterFactor?t*e.jitterFactor*(Math.random()*2-1):0,r=t+n;return Math.min(Math.max(r,0),e.maxDelayMs)}async function Ple(t,e={}){var c,u,d,f;const n={...kle,...e},r=performance.now();let o=n.initialDelayMs,i=0;const s=[],a=[];for(let p=0;p<=n.maxRetries;p+=1)try{const g=await t(),v=performance.now();return(c=n.onSuccess)==null||c.call(n,{attemptCount:p+1,delayTimings:a,startTime:r,endTime:v,errors:s}),g}catch(g){i=p+1,s.push(xle(g));const v=performance.now();if(p===n.maxRetries)throw(u=n.onFailure)==null||u.call(n,{attemptCount:p+1,delayTimings:a,startTime:r,endTime:v,errors:s,exitReason:"maxRetriesReached"}),g;const b=v-r,{shouldExit:y,exitReason:C}=Rle(n,g,i,b);if(y)throw(d=n.onFailure)==null||d.call(n,{attemptCount:p+1,delayTimings:a,startTime:r,endTime:v,errors:s,exitReason:C}),g;let S=Nle(o,n);if(n.maxDurationMs!==void 0){const T=n.maxDurationMs-b;if(T<=0)throw(f=n.onFailure)==null||f.call(n,{attemptCount:p+1,delayTimings:a,startTime:r,endTime:v,errors:s,exitReason:"maxDurationReached"}),g;S=Math.min(S,T)}const w=performance.now();await Fj(S);const I=performance.now()-w;a.push(I),o=Math.min(o*n.backoffFactor,n.maxDelayMs)}throw new Error("Unexpected end of retry loop")}function Ole(t){return!(t instanceof kr||t instanceof St&&(t.errorMessage===QO||parseInt(t.errorCode,10)===_I))}const wr=new hl(Mle);async function Mle(){const t=await vw.get(),e=await t.instantiateMsal(),n=new Map([["login",null],["graph",null],["oneDrive",null]]);async function r(i,s){const a=YH(i),c={account:s,...a},u=ET(Ile,"any");try{if(!u)return{accessToken:(await e.acquireTokenSilent(c)).accessToken};const f={...xZ(),shouldRetry:g=>Ole(g),onSuccess:g=>wZ(g,i),onFailure:g=>IZ(g,i)};return await Ple(async()=>({accessToken:(await e.acquireTokenSilent(c)).accessToken}),f)}catch(d){if(d instanceof kr)return V.trackEvent({name:"system",data:{eventName:"copilotWebAcquireTokenRedirect",eventInfo_accountId:s==null?void 0:s.homeAccountId,eventInfo_requestType:i,eventInfo_traceId:d.traceId,eventInfo_errorMessage:d.errorMessage,eventInfo_errorCode:d.errorCode,eventInfo_correlationId:d.correlationId,eventInfo_timeSinceStartMs:performance.now()-window.appStart}}),t.handleInteractionRequiredError(e,c);if(d instanceof St&&(d.errorMessage===QO||parseInt(d.errorCode,10)===_I))throw V.trackEvent({name:"system",data:{eventName:"copilotWebAcquireTokenUnderaged",eventInfo_requestType:i,eventInfo_errorMessage:d.errorMessage,eventInfo_errorCode:d.errorCode,eventInfo_correlationId:d.correlationId}}),new Error(AI);return}}return{msal:e,getMsalAccessToken:async i=>{const s=e.getActiveAccount();if(!s&&!t.supportsNaa())return;const a=n.get(i);if(!a){const c=r(i,s??void 0);n.set(i,c);const u=await c;return n.set(i,null),u}return a}}}function Lle(t){var n;const e=(n=t.payload)==null?void 0:n.scopes;return Array.isArray(e)?e.some(r=>typeof r!="string"?!1:r==="ConsumerStore.Purchase"||r.endsWith("purchase.create")):!1}function Bj(t){const e=Lle(t);if(t.eventType===le.LOGIN_START){const n=t.payload;LD({apiName:le.LOGIN_START,authWorkflowAccountType:"microsoft",interactionType:t.interactionType??void 0,correlationId:n.correlationId,prompt:n.prompt,redirectUri:n.redirectUri,extraInfo:{eventInfo_isBrokered:e}})}else if(t.eventType===le.LOGIN_SUCCESS||t.eventType===le.SSO_SILENT_SUCCESS){const n=t.payload&&"account"in t.payload?t.payload.account:null,r=n?!Yo(n.tenantId):void 0,o=t.payload;sE({apiName:t.eventType,authWorkflowAccountType:"microsoft",interactionType:t.interactionType??void 0,correlationId:o.correlationId,authority:o.authority,isMSA:r,extraInfo:{eventInfo_isBrokered:e}})}else if(t.eventType===le.LOGOUT_SUCCESS)DD({apiName:le.LOGOUT_SUCCESS,providerType:"microsoft",extraInfo:{eventInfo_isBrokered:e}});else if(t.eventType===le.ACQUIRE_TOKEN_START||t.eventType===le.ACQUIRE_TOKEN_NETWORK_START){pa("msalAcquireTokenStartTime",Date.now().toString());const n=t.payload;ca({authWorkflowAccountType:"microsoft",apiName:t.eventType,extraInfo:{eventInfo_interactionType:t.interactionType??void 0,eventInfo_correlationId:n.correlationId,eventInfo_redirectUri:n.redirectUri,eventInfo_cacheLookupPolicy:n.cacheLookupPolicy,eventInfo_prompt:n.prompt,eventInfo_isBrokered:e}})}else if(t.eventType===le.ACQUIRE_TOKEN_SUCCESS){const n=Date.now()-parseInt(ni("msalAcquireTokenStartTime")??"0",10);pa("msalAcquireTokenStartTime","");const r=t.payload;ca({authWorkflowAccountType:"microsoft",apiName:t.eventType,extraInfo:{eventInfo_interactionType:t.interactionType??void 0,eventInfo_correlationId:r.correlationId,eventInfo_expiresOn:r.expiresOn,eventInfo_extExpiresOn:r.extExpiresOn,eventInfo_refreshOn:r.refreshOn,eventInfo_duration:n,eventInfo_fromCache:r.fromCache,eventInfo_isBrokered:e}})}else if(t.eventType===le.LOGIN_FAILURE||t.eventType===le.ACQUIRE_TOKEN_FAILURE||t.eventType===le.SSO_SILENT_FAILURE||t.eventType===le.ACQUIRE_TOKEN_BY_CODE_FAILURE||t.eventType===le.LOGOUT_FAILURE){let n;t.eventType===le.ACQUIRE_TOKEN_FAILURE&&(n=Date.now()-parseInt(ni("msalAcquireTokenStartTime")??"0",10));const r=t.error;td({authWorkflowAccountType:"microsoft",apiName:t.eventType,errorType:(r==null?void 0:r.name)??"",errorMessage:(r==null?void 0:r.message)??"",extraInfo:{eventInfo_isBrokered:e},errorExtraInfo:{eventInfo_correlationId:r==null?void 0:r.correlationId,eventInfo_errorMessage:r==null?void 0:r.errorMessage,eventInfo_errorCode:r==null?void 0:r.errorCode,eventInfo_name:r==null?void 0:r.name,eventInfo_interactionType:t.interactionType??void 0,eventInfo_subError:r==null?void 0:r.subError,eventInfo_duration:n}})}else ca({authWorkflowAccountType:"microsoft",apiName:t.eventType,extraInfo:{eventInfo_interactionType:t.interactionType??void 0,eventInfo_isBrokered:e}})}function Yo(t){return t!==gg}function Dle(t){ca({apiName:"msal:silentSSOCustomSuccess",authWorkflowAccountType:"microsoft",duration:t.duration,extraInfo:{eventInfo_accountUpdate:t.accountUpdate,eventInfo_accountType:t.accountType,eventInfo_message:t.message}})}function DS(t){td({apiName:"msal:silentSsoCustomError",authWorkflowAccountType:"microsoft",errorMessage:t.message,errorCode:t.errorCode})}class jle{constructor(){J(this,"hasTrackedRedirectError",!1)}async handleRedirect(){var e;try{const{msal:n}=await wr.get();await n.handleRedirectPromise()&&jD({authWorkflowAccountType:"microsoft",apiName:"msal:reauthSuccess"});const o=await this.getAccount();return o?(n.setActiveAccount(o),{id:((e=o.idTokenClaims)==null?void 0:e.oid)??"",tenantId:o.tenantId,provider:"microsoft",accountType:Yo(o.tenantId)?"AAD":"MSA"}):null}catch(n){this.trackRedirectErrorOncePerSession(n)}return null}async handleRedirectWithoutAccount(){try{const{msal:e}=await wr.get(),n=await e.handleRedirectPromise();n&&e.setActiveAccount(n.account)}catch(e){this.trackRedirectErrorOncePerSession(e)}}async maybeInitializeAccountWithToken(){var s;const{msal:e}=await wr.get(),n=e.getActiveAccount(),r=e.getAllAccounts(),o=Ye(In);ca({authWorkflowAccountType:"microsoft",apiName:"msal:maybeInitializeAccountWithToken",extraInfo:{eventInfo_activeAccount:n==null?void 0:n.homeAccountId,eventInfo_tenantId:n==null?void 0:n.tenantId,eventInfo_isAadTenant:n!=null&&n.tenantId?Yo(n.tenantId):!1,eventInfo_accounts:r.map(a=>({id:a.homeAccountId,type:Yo(a.tenantId)?"AAD":"MSA"})),eventInfo_userAccount:o}});const i=await this.getAuthToken();if(i){const a=await this.getAccount();return a?(e.setActiveAccount(a),{userAccount:{id:((s=a.idTokenClaims)==null?void 0:s.oid)??"",tenantId:a.tenantId,provider:"microsoft",accountType:Yo(a.tenantId)?"AAD":"MSA"},authToken:i}):null}return null}async logIn(){const{msal:e}=await wr.get(),n={...pI},r=this.buildRedirectUri();return r&&(n.redirectUri=r),e.loginRedirect(n)}buildRedirectUri(){const{surfaceQueryParam:e}=ye.instance().config(),n=new URLSearchParams;let r;if(e!=null&&e.useForLoginRedirect)for(const[i,s]of Object.entries(e.params))n.set(i,s);const o=new URLSearchParams(window.location.search).get("back");return o&&n.set("back",o),n.toString()&&(r=`${window.location.origin}?${n}`),r}async logOut(){const{msal:e}=await wr.get(),n=e.getAllAccounts(),r=e.getActiveAccount();try{if(Oc()){await e.logoutRedirect({account:r,onRedirectNavigate:()=>!1}),V.setPicassoId(null);return}for(const o of n)o.tenantId!==gg&&(await e.logoutRedirect({account:o,onRedirectNavigate:()=>!1}),V.setPicassoId(null))}catch(o){console.error(o)}await e.logoutRedirect({account:r,onRedirectNavigate:()=>!1}),V.setPicassoId(null)}async getAuthToken(){return(await wr.get()).getMsalAccessToken("login")}async getUserInfo(){const e=await(await wr.get()).getMsalAccessToken("graph");if(e)return ex(e.accessToken)}async getUserInfoFromToken(e){return ex(e)}supportsTokenType(e){return e===void 0}trackRedirectErrorOncePerSession(e){this.hasTrackedRedirectError||V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"msalHandleRedirectPromise",eventInfo_details:"Error handling redirect promise",eventInfo_errorMessage:`${e}`}}),this.hasTrackedRedirectError=!0}async getAccount(){var o,i;const{msal:e}=await wr.get(),n=e.getAllAccounts(),r=e.getActiveAccount();if((n.length>1||n.length===1&&(r==null?void 0:r.homeAccountId)!==((o=n[0])==null?void 0:o.homeAccountId))&&ca({authWorkflowAccountType:"microsoft",apiName:"msal:getAllAccounts",extraInfo:{eventInfo_accountCount:n.length,eventInfo_accountTypes:n.map(s=>Yo(s.tenantId)?"AAD":"MSA"),eventInfo_accountIds:n.map(s=>s.homeAccountId),eventInfo_currentAccountId:(i=e.getActiveAccount())==null?void 0:i.homeAccountId}}),n.length!==0){if(Oc())return n.length===0?void 0:n.length===1?n[0]:n.length>1&&r?r:void 0;for(const s of n)if(s.tenantId===gg)return s;return n[0]}}async getCurrentActiveUserAccount(){var n;const e=await this.getAccount();return e?{id:((n=e.idTokenClaims)==null?void 0:n.oid)??"",tenantId:e.tenantId,provider:"microsoft",accountType:Yo(e.tenantId)?"AAD":"MSA"}:null}}class Gr{constructor(){J(this,"middlewares",[])}add(e){this.middlewares.push(e)}async run(e){let n={...e};for(const r of this.middlewares)try{n=await r(n)}catch{continue}return n}}const Ule=new Gr,gN=new Gr,yxe=new Gr,bxe=new Gr,Fle=new Gr,Ble=new Gr,Hle=new Gr,zle=new Gr,Vle=new Gr,$le=new Gr,Gle=new Gr,Kle=new Gr,Wle=new Gr,qle=new Gr;var Uu;const ic=class ic{constructor(){J(this,"providers");this.providers={microsoft:new jle,auth0:new RZ}}async handleRedirect(){const e=await this.providers.microsoft.handleRedirect();if(e)return e;if(!ye.instance().config().enableAuth0)return null;const n=await this.providers.auth0.handleRedirect();return n||null}async handleRedirectWithoutAccount(){await this.providers.microsoft.handleRedirectWithoutAccount(),ye.instance().config().enableAuth0&&await this.providers.auth0.handleRedirectWithoutAccount()}async getCurrentActiveUserAccountAndSetGlobalUserAccount(){const e=await this.providers.microsoft.getCurrentActiveUserAccount();if(e){this.setUserAccount(e);return}if(!ye.instance().config().enableAuth0)return;const n=await this.providers.auth0.getCurrentActiveUserAccount();n&&this.setUserAccount(n)}static instance(){return pe(ic,Uu)||Ut(ic,Uu,new ic),pe(ic,Uu)}getCurrentProvider(){const e=Ye(In);return e?this.providers[e.provider]:null}async getAccountFromProviders(){var e;return Oc()?((e=this.getCurrentProvider())==null?void 0:e.getCurrentActiveUserAccount())??null:this.handleRedirect()}async maybeInitialize(){try{const e=await this.providers.microsoft.maybeInitializeAccountWithToken();if(e)return e;if(!ye.instance().config().enableAuth0)return null;const n=await this.providers.auth0.maybeInitializeAccountWithToken();if(n)return n}catch(e){e instanceof Error&&ii({feature:"accountInitialization",errorType:e.name,errorMessage:e.message,exception:e.stack})}return null}setUserAccount(e){An(In,e),V.setUserAccountType(e==null?void 0:e.accountType)}async getAuthToken(){var r;const e=await gN.run({type:"login"});if(e.isHandled){if(((r=e.authToken)==null?void 0:r.tokenType)!==void 0){const o=kZ(e.authToken.tokenType);V.setUserAccountType(o)}return e.authToken}if(Oc()){const o=this.getCurrentProvider();return o?o.getAuthToken():void 0}const n=this.getCurrentProvider();if(!n){const o=await this.handleRedirect();if(o)return this.setUserAccount(o),this.providers[o.provider].getAuthToken();const i=await this.maybeInitialize();if(i){const{authToken:s,userAccount:a}=i;return this.setUserAccount(a),s}return}return n.getAuthToken()}async getUserInfo(){const e=await gN.run({type:"graph"});if(e.isHandled){if(!e.authToken)return;const{tokenType:r,accessToken:o}=e.authToken;if(this.providers.microsoft.supportsTokenType(r))return this.providers.microsoft.getUserInfoFromToken(o);if(this.providers.auth0.supportsTokenType(r)){const i=await this.providers.auth0.getUserInfoFromToken(o);if(i)return i}return}const n=this.getCurrentProvider();if(n)return n.getUserInfo()}logIn(e,n){return this.providers[e].logIn(n)}async logOut(){const e=this.getCurrentProvider();return e&&(await e.logOut(),this.setUserAccount(null)),Promise.resolve()}async initAuthAccount(){await this.handleRedirectWithoutAccount(),await this.getCurrentActiveUserAccountAndSetGlobalUserAccount()}};Uu=new WeakMap,sn(ic,Uu,null);let Ts=ic;function Hj(){return null}function zj({featureOverrides:t,localFeatureOverrides:e,serverFeatures:n,surfaceConfig:r}){var i,s,a,c;const o=new Set([...n]);(i=r.settingsOverrides)!=null&&i.shouldHideShopping&&o.delete("shopping-card"),(s=r.settingsOverrides)!=null&&s.shouldHideMultipleCharacters&&o.delete("multiplecharacters"),r.startInVoice&&o.add("start-in-voice"),(a=r.pages)!=null&&a.enabled?o.add("pages"):((c=r.pages)==null?void 0:c.enabled)===!1&&o.delete("pages");for(const u of t)o.add(u);for(const u of e)o.add(u);return Array.from(o)}function Vj(){return[]}async function $_(){const{msal:t}=await wr.get();return t.getActiveAccount()}async function $j(){const t=await $_();return t?Yo(t.tenantId):!1}async function vN(){const t=await $_();if(!(!t||!Yo(t.tenantId)))return t}async function Yle(){const t=await $_();if(!(!t||Yo(t.tenantId)))return t}async function Qle(){return(await wr.get()).getMsalAccessToken("oneDrive")}const Gj="urlFeatureOverrides";function Jle(){return typeof window>"u"?null:sessionStorage.getItem(Gj)}function Kj(){const t=Jle();return t?t.split(",").map(n=>n):[]}function Xle(){const t=vn("features");return t!=null&&t.trim()&&typeof window<"u"&&sessionStorage.setItem(Gj,t.trim()),Kj()}const Zle={VITE_API_URL:"copilot.microsoft.com/c/api"};async function eue(t,e){try{return await t.json()}catch(n){throw(n instanceof SyntaxError||n instanceof TypeError||n instanceof DOMException)&&K$(n,t,e),n}}function Wj(t={}){const{query:e={}}=t,n=new URLSearchParams;for(const[s,a]of Object.entries(e))n.append(s,a);const r=zj({featureOverrides:Kj(),localFeatureOverrides:Vj(),serverFeatures:[],surfaceConfig:ye.instance().config()}).join(",");r&&(n.append("features",r),n.append("setflight",r));const o=Hj();o&&n.append("promptBranch",o);const{surfaceQueryParam:i}=ye.instance().config();if(i)for(const[s,a]of Object.entries(i.params))n.append(s,a);return n}async function yN(t,e){const{VITE_API_URL:n}=Zle,r=n,o={...e,"api-version":"2"},i=await Ts.instance().getAuthToken(),s=await $j();i&&!s&&(o.accessToken=i.accessToken,i.tokenType&&(o["X-UserIdentityType"]=i.tokenType)),i===void 0?OD(t,"getWssAPIUrl"):MD(t,"getWssAPIUrl"),Ye(fy)&&(o.appFlavor="beta");const a=Wj({query:o});return`wss://${r}/${t}?${a}`}function tue(t,e){let n="";n="https://copilot.microsoft.com/c/api",n+=t;const r=Wj({query:e});return r.toString()&&(n+=`?${r}`),n}async function Qc(t,e={}){const{options:n,query:r,analytics:o}=e,i=new Headers(n==null?void 0:n.headers);Ot.resolvedLanguage?i.set("X-Search-UILang",Ot.resolvedLanguage.toLowerCase()):Ot.language&&i.set("X-Search-UILang",Ot.language.toLowerCase());const s=await Ts.instance().getAuthToken(),a=await $j();s&&!a&&(i.set("Authorization",`Bearer ${s.accessToken}`),s.tokenType&&i.set("X-UserIdentityType",s.tokenType)),s===void 0?OD(t,"fetchApi"):MD(t,"fetchApi"),Ye(fy)&&i.set("X-Copilot-App-Flavor","beta");const c=performance.now(),u=await fetch(tue(t,r),{...n,credentials:"include",headers:i}),d=performance.now();return PD((o==null?void 0:o.anonymousPath)??t,(n==null?void 0:n.method)??"GET",d-c,u.clone()),uy.trackLatestApiAssignment(u.clone()),u}async function Hr({path:t,args:e={}}){var r;const n={method:"POST",...e.options,headers:{"Content-Type":"application/json",...(r=e.options)==null?void 0:r.headers},body:e.body?JSON.stringify(e.body):void 0};return Qc(t,{...e,options:n})}async function Gn(t,e,n={}){const{analytics:r,onFailedRequest:o}=n,i=(r==null?void 0:r.anonymousPath)??t,s=await Qc(t,n);let a=!0;if(!s.ok&&o&&(a=!!o(s)),!a)return{data:void 0,response:{ok:s.ok,status:s.status,headers:s.headers},zodError:void 0};const c=await eue(s,i);let u,d;const{safe:f}=n.parseOptions??{};if(f){const p=e.safeParse(c);p.error&&kf(p.error,i,!0),u=c,d=p.error}else try{u=e.parse(c)}catch(p){throw p instanceof dg&&kf(p,i,!1),p}return{data:u,response:{ok:s.ok,status:s.status,headers:s.headers},zodError:d}}function nue(){return mn(d1)!==null?!1:(so(PI),so(Af),sr(d1,"true"),!0)}function qj(){return parseInt(mn(PI)??"0",10)}function rue(){return new Date(mn(Af)??new Date().toISOString())}function oue(t){mn(Af)||sr(Af,t)}function iue(){let t;try{t=qj()}catch{t=0}t<D0&&(t+=1,sr(PI,`${t}`),t===D0&&oue(new Date().toISOString()))}function Yj(t){return Gn(t,yQ,{options:{method:"POST"}}).then(e=>e.data)}function _p(){const t=O(LI),{trigger:e}=EI("/conversations",Yj),n=O(yn),r=op(yn),o=_e(py),i=_e(KJ),s=mX(),[a,c]=m.useState(!1);return{startConversationDisabled:a,createConversation:m.useCallback(async u=>{const{shouldNavigateToChat:d=!0,characterId:f}=u??{};if(t){const p=n.get(t);if((p==null?void 0:p.characterId)===f)return s({id:t,shouldNavigateToChat:d}),t}if(!a)try{c(!0);const{id:p}=await e(),g={id:p,updatedAt:new Date().toISOString(),history:[],isNew:!0,characterId:f,streamingState:"idle",continuedAt:null};return r(v=>{v.set(p,g)}),s({id:p,shouldNavigateToChat:d}),o(!0),iue(),nX(),i(),p}catch(p){console.error(p)}finally{c(!1)}},[t,a,n,s,e,r,o,i])}}function $t(){return Q2({select:e=>e.pathname})}function ab(){const[t,e]=lt(sG),n=$t();return m.useEffect(()=>{n.endsWith("/chats/new/talk")&&(V.setLandingPage("deepLinkVoiceCall"),e("audioCall"))},[n,e]),[t,()=>e(null)]}const sue=M(0),aue=M(null),cue=M(null),Ap=M("center"),Qj=M(void 0),zr=M(null),lue=M(null),kp=M(null),cb=M(null),uue=M(t=>{var r;const e=t(li),n=yT(e);return((r=n==null?void 0:n.part.task)==null?void 0:r.type)==="research"}),Jj=M(null),due=M(!1);M(new Map);const Cxe=M(!1),G_=M(null),Xj=M(!1),yw=M(!1),K_="shouldPerformUserMerge";function hue(t){pa(K_,String(t))}function fue(){aM(K_)}function pue(){return ni(K_)!=="false"}function Sxe(){const t=O(li),e=Pr(),[n,r]=lt(hZ),o=me("user-conversation-merge"),i=o&&!e&&t.length>0;return m.useEffect(()=>{o&&hue(n)},[o,n]),{shouldShowMergeCheckbox:i,shouldMerge:n,setShouldMerge:r}}function bw(t){if(window.clarity)for(const[e,n]of Object.entries(t))window.clarity("set",e,n)}function bN(t){if(window.clarity)for(const e of t)window.clarity("event",e)}function W_(t){const e=qv(),n=m.useRef(t);n.current=t,m.useEffect(()=>e.subscribe("onBeforeNavigate",r=>{const{pathChanged:o}=r;o&&n.current(r)}),[e])}let Zj=!0,eU=!0;function mue(t){eU=t}function lb(){return Zj}function gue(){W_(()=>{eU||(Zj=!1)})}const vue=(t,e,n)=>{const r=t[e];return r?typeof r=="function"?r():Promise.resolve(r):new Promise((o,i)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==n?". Note that variables only represent file names one level deep.":""))))})},{slice:yue,forEach:bue}=[];function Cue(t){return bue.call(yue.call(arguments,1),e=>{if(e)for(const n in e)t[n]===void 0&&(t[n]=e[n])}),t}const CN=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,Sue=(t,e,n)=>{const r=n||{};r.path=r.path||"/";const o=encodeURIComponent(e);let i=`${t}=${o}`;if(r.maxAge>0){const s=r.maxAge-0;if(Number.isNaN(s))throw new Error("maxAge should be a Number");i+=`; Max-Age=${Math.floor(s)}`}if(r.domain){if(!CN.test(r.domain))throw new TypeError("option domain is invalid");i+=`; Domain=${r.domain}`}if(r.path){if(!CN.test(r.path))throw new TypeError("option path is invalid");i+=`; Path=${r.path}`}if(r.expires){if(typeof r.expires.toUTCString!="function")throw new TypeError("option expires is invalid");i+=`; Expires=${r.expires.toUTCString()}`}if(r.httpOnly&&(i+="; HttpOnly"),r.secure&&(i+="; Secure"),r.sameSite)switch(typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i},SN={create(t,e,n,r){let o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};n&&(o.expires=new Date,o.expires.setTime(o.expires.getTime()+n*60*1e3)),r&&(o.domain=r),document.cookie=Sue(t,encodeURIComponent(e),o)},read(t){const e=`${t}=`,n=document.cookie.split(";");for(let r=0;r<n.length;r++){let o=n[r];for(;o.charAt(0)===" ";)o=o.substring(1,o.length);if(o.indexOf(e)===0)return o.substring(e.length,o.length)}return null},remove(t){this.create(t,"",-1)}};var Eue={name:"cookie",lookup(t){let{lookupCookie:e}=t;if(e&&typeof document<"u")return SN.read(e)||void 0},cacheUserLanguage(t,e){let{lookupCookie:n,cookieMinutes:r,cookieDomain:o,cookieOptions:i}=e;n&&typeof document<"u"&&SN.create(n,t,r,o,i)}},wue={name:"querystring",lookup(t){var r;let{lookupQuerystring:e}=t,n;if(typeof window<"u"){let{search:o}=window.location;!window.location.search&&((r=window.location.hash)==null?void 0:r.indexOf("?"))>-1&&(o=window.location.hash.substring(window.location.hash.indexOf("?")));const s=o.substring(1).split("&");for(let a=0;a<s.length;a++){const c=s[a].indexOf("=");c>0&&s[a].substring(0,c)===e&&(n=s[a].substring(c+1))}}return n}};let Th=null;const EN=()=>{if(Th!==null)return Th;try{Th=window!=="undefined"&&window.localStorage!==null;const t="i18next.translate.boo";window.localStorage.setItem(t,"foo"),window.localStorage.removeItem(t)}catch{Th=!1}return Th};var Iue={name:"localStorage",lookup(t){let{lookupLocalStorage:e}=t;if(e&&EN())return window.localStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupLocalStorage:n}=e;n&&EN()&&window.localStorage.setItem(n,t)}};let _h=null;const wN=()=>{if(_h!==null)return _h;try{_h=window!=="undefined"&&window.sessionStorage!==null;const t="i18next.translate.boo";window.sessionStorage.setItem(t,"foo"),window.sessionStorage.removeItem(t)}catch{_h=!1}return _h};var Tue={name:"sessionStorage",lookup(t){let{lookupSessionStorage:e}=t;if(e&&wN())return window.sessionStorage.getItem(e)||void 0},cacheUserLanguage(t,e){let{lookupSessionStorage:n}=e;n&&wN()&&window.sessionStorage.setItem(n,t)}},_ue={name:"navigator",lookup(t){const e=[];if(typeof navigator<"u"){const{languages:n,userLanguage:r,language:o}=navigator;if(n)for(let i=0;i<n.length;i++)e.push(n[i]);r&&e.push(r),o&&e.push(o)}return e.length>0?e:void 0}},Aue={name:"htmlTag",lookup(t){let{htmlTag:e}=t,n;const r=e||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(n=r.getAttribute("lang")),n}},kue={name:"path",lookup(t){var o;let{lookupFromPathIndex:e}=t;if(typeof window>"u")return;const n=window.location.pathname.match(/\/([a-zA-Z-]*)/g);return Array.isArray(n)?(o=n[typeof e=="number"?e:0])==null?void 0:o.replace("/",""):void 0}},xue={name:"subdomain",lookup(t){var o,i;let{lookupFromSubdomainIndex:e}=t;const n=typeof e=="number"?e+1:1,r=typeof window<"u"&&((i=(o=window.location)==null?void 0:o.hostname)==null?void 0:i.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(r)return r[n]}};function Rue(){return{order:["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"],lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:t=>t}}class tU{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,n)}init(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=e||{languageUtils:{}},this.options=Cue(n,this.options||{},Rue()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=o=>o.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=r,this.addDetector(Eue),this.addDetector(wue),this.addDetector(Iue),this.addDetector(Tue),this.addDetector(_ue),this.addDetector(Aue),this.addDetector(kue),this.addDetector(xue)}addDetector(e){return this.detectors[e.name]=e,this}detect(e){e||(e=this.options.order);let n=[];return e.forEach(r=>{if(this.detectors[r]){let o=this.detectors[r].lookup(this.options);o&&typeof o=="string"&&(o=[o]),o&&(n=n.concat(o))}}),n=n.map(r=>this.options.convertDetectedLanguage(r)),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}cacheUserLanguage(e,n){n||(n=this.options.caches),n&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||n.forEach(r=>{this.detectors[r]&&this.detectors[r].cacheUserLanguage(e,this.options)}))}}tU.type="languageDetector";const nU=[{name:"Arabic",i18nCode:"ar",direction:"rtl"},{name:"Basque",i18nCode:"eu",direction:"ltr"},{name:"Bengali",i18nCode:"bn-IN",direction:"ltr"},{name:"Bulgarian",i18nCode:"bg",direction:"ltr"},{name:"Catalan",i18nCode:"ca",direction:"ltr"},{name:"Chinese (Simplified)",i18nCode:"zh-Hans",direction:"ltr"},{name:"Chinese (Traditional)",i18nCode:"zh-Hant",direction:"ltr"},{name:"Croatian",i18nCode:"hr",direction:"ltr"},{name:"Czech",i18nCode:"cs",direction:"ltr"},{name:"Danish",i18nCode:"da",direction:"ltr"},{name:"Dutch",i18nCode:"nl",direction:"ltr"},{name:"English",i18nCode:"en-US",direction:"ltr"},{name:"English (United Kingdom)",i18nCode:"en-GB",direction:"ltr"},{name:"Estonian",i18nCode:"et",direction:"ltr"},{name:"Finnish",i18nCode:"fi",direction:"ltr"},{name:"French",i18nCode:"fr",direction:"ltr"},{name:"Galician",i18nCode:"gl",direction:"ltr"},{name:"German",i18nCode:"de",direction:"ltr"},{name:"Gujarati",i18nCode:"gu",direction:"ltr"},{name:"Hebrew",i18nCode:"he",direction:"rtl"},{name:"Hindi",i18nCode:"hi",direction:"ltr"},{name:"Hungarian",i18nCode:"hu",direction:"ltr"},{name:"Icelandic",i18nCode:"is",direction:"ltr"},{name:"Indonesian",i18nCode:"id",direction:"ltr"},{name:"Italian",i18nCode:"it",direction:"ltr"},{name:"Japanese",i18nCode:"ja",direction:"ltr"},{name:"Kannada",i18nCode:"kn",direction:"ltr"},{name:"Korean",i18nCode:"ko",direction:"ltr"},{name:"Latvian",i18nCode:"lv",direction:"ltr"},{name:"Lithuanian",i18nCode:"lt",direction:"ltr"},{name:"Malay",i18nCode:"ms",direction:"ltr"},{name:"Malayalam",i18nCode:"ml",direction:"ltr"},{name:"Marathi",i18nCode:"mr",direction:"ltr"},{name:"Norwegian (Bokmål)",i18nCode:"nb-NO",direction:"ltr"},{name:"Polish",i18nCode:"pl",direction:"ltr"},{name:"Portuguese (Brazil)",i18nCode:"pt-BR",direction:"ltr"},{name:"Portuguese (Portugal)",i18nCode:"pt-PT",direction:"ltr"},{name:"Punjabi",i18nCode:"pa",direction:"ltr"},{name:"Romanian",i18nCode:"ro",direction:"ltr"},{name:"Russian",i18nCode:"ru",direction:"ltr"},{name:"Serbian (Latin)",i18nCode:"sr-Latn-RS",direction:"ltr"},{name:"Slovak",i18nCode:"sk",direction:"ltr"},{name:"Slovenian",i18nCode:"sl",direction:"ltr"},{name:"Spanish",i18nCode:"es",direction:"ltr"},{name:"Swedish",i18nCode:"sv",direction:"ltr"},{name:"Tamil",i18nCode:"ta",direction:"ltr"},{name:"Telugu",i18nCode:"te",direction:"ltr"},{name:"Thai",i18nCode:"th",direction:"ltr"},{name:"Turkish",i18nCode:"tr",direction:"ltr"},{name:"Ukrainian",i18nCode:"uk",direction:"ltr"},{name:"Vietnamese",i18nCode:"vi",direction:"ltr"}],rU=nU.map(t=>t.i18nCode);function Nue(t){return q_(t)[0]??t}async function oU(t={}){const e=Ot.use(tU).use(eB);return ye.instance().config().useI18nHttpApi&&z(()=>import("./index-BN3euqQO.js"),__vite__mapDeps([218,2,1])).then(n=>{e.use(n.default)}),e.init({supportedLngs:nU.map(({i18nCode:n})=>n),fallbackLng:q_,detection:{convertDetectedLanguage:Nue,...t},interpolation:{escapeValue:!1}}).then(async n=>(await Pue(Ot.language),Ot.on("languageChanged",r=>{typeof document<"u"&&(document.body.dir=Ot.dir(r.toLowerCase()),document.documentElement.lang=r.toLowerCase())}),n))}async function Pue(t){t&&(await Promise.all(q_(t).map(async e=>{try{const n=await vue(Object.assign({"../../config/strings/af/strings.json":()=>z(()=>import("./strings-DEtDpVAE.js"),[]),"../../config/strings/am/strings.json":()=>z(()=>import("./strings-BUJNoyyF.js"),[]),"../../config/strings/ar/strings.json":()=>z(()=>import("./strings-Bktp_u8m.js"),[]),"../../config/strings/as/strings.json":()=>z(()=>import("./strings-EpvT1fMU.js"),[]),"../../config/strings/az/strings.json":()=>z(()=>import("./strings-DrKMenC-.js"),[]),"../../config/strings/bg/strings.json":()=>z(()=>import("./strings-BBV20hlL.js"),[]),"../../config/strings/bn-IN/strings.json":()=>z(()=>import("./strings-ByYueQSJ.js"),[]),"../../config/strings/bs/strings.json":()=>z(()=>import("./strings-BNXqgDOy.js"),[]),"../../config/strings/ca-Es-VALENCIA/strings.json":()=>z(()=>import("./strings-B6c4fd4y.js"),[]),"../../config/strings/ca/strings.json":()=>z(()=>import("./strings-CKm6Y9yp.js"),[]),"../../config/strings/cs/strings.json":()=>z(()=>import("./strings-VPOX1lNC.js"),[]),"../../config/strings/cy/strings.json":()=>z(()=>import("./strings-BU0t-I0t.js"),[]),"../../config/strings/da/strings.json":()=>z(()=>import("./strings-9T7YZsCl.js"),[]),"../../config/strings/de/strings.json":()=>z(()=>import("./strings-DqzExEi-.js"),[]),"../../config/strings/el/strings.json":()=>z(()=>import("./strings-DP0kKTzi.js"),[]),"../../config/strings/en-GB/strings.json":()=>z(()=>import("./strings-BiAMBMPR.js"),[]),"../../config/strings/en-US/strings.json":()=>z(()=>import("./strings-EGTvGkRu.js"),[]),"../../config/strings/es-MX/strings.json":()=>z(()=>import("./strings-P7-lQQCq.js"),[]),"../../config/strings/es/strings.json":()=>z(()=>import("./strings-BPUKBzeQ.js"),[]),"../../config/strings/et/strings.json":()=>z(()=>import("./strings-BtKFcaIF.js"),[]),"../../config/strings/eu/strings.json":()=>z(()=>import("./strings-DPoHa8P0.js"),[]),"../../config/strings/fa/strings.json":()=>z(()=>import("./strings-nPH9U5xh.js"),[]),"../../config/strings/fi/strings.json":()=>z(()=>import("./strings-DhMApyOU.js"),[]),"../../config/strings/fil/strings.json":()=>z(()=>import("./strings-WxDwGBlR.js"),[]),"../../config/strings/fr-CA/strings.json":()=>z(()=>import("./strings-BqjbF5kY.js"),[]),"../../config/strings/fr/strings.json":()=>z(()=>import("./strings-di-Mhsde.js"),[]),"../../config/strings/ga/strings.json":()=>z(()=>import("./strings-Dk_-KKbI.js"),[]),"../../config/strings/gd/strings.json":()=>z(()=>import("./strings-CEbaVIGL.js"),[]),"../../config/strings/gl/strings.json":()=>z(()=>import("./strings-B1rSZgBg.js"),[]),"../../config/strings/gu/strings.json":()=>z(()=>import("./strings-C3fetEIO.js"),[]),"../../config/strings/he/strings.json":()=>z(()=>import("./strings-BVzkXNE-.js"),[]),"../../config/strings/hi/strings.json":()=>z(()=>import("./strings-B3gNcIQs.js"),[]),"../../config/strings/hr/strings.json":()=>z(()=>import("./strings-CrNRZeNS.js"),[]),"../../config/strings/hu/strings.json":()=>z(()=>import("./strings-mbpiMMVe.js"),[]),"../../config/strings/hy/strings.json":()=>z(()=>import("./strings-CPDApGrb.js"),[]),"../../config/strings/id/strings.json":()=>z(()=>import("./strings-DHEsM-kp.js"),[]),"../../config/strings/is/strings.json":()=>z(()=>import("./strings-Bu0CHN9w.js"),[]),"../../config/strings/it/strings.json":()=>z(()=>import("./strings-D7GS7ZWL.js"),[]),"../../config/strings/ja/strings.json":()=>z(()=>import("./strings-CBNTtOK4.js"),[]),"../../config/strings/ka/strings.json":()=>z(()=>import("./strings-BaRnVzvh.js"),[]),"../../config/strings/kk/strings.json":()=>z(()=>import("./strings-25ekegnD.js"),[]),"../../config/strings/km-KH/strings.json":()=>z(()=>import("./strings-B74DapJf.js"),[]),"../../config/strings/kn/strings.json":()=>z(()=>import("./strings-C-QCcUtz.js"),[]),"../../config/strings/ko/strings.json":()=>z(()=>import("./strings-twdKH7W-.js"),[]),"../../config/strings/kok/strings.json":()=>z(()=>import("./strings-MYL0TWy6.js"),[]),"../../config/strings/lb/strings.json":()=>z(()=>import("./strings-Dgd5bi7N.js"),[]),"../../config/strings/lo/strings.json":()=>z(()=>import("./strings-S8odS3aL.js"),[]),"../../config/strings/lt/strings.json":()=>z(()=>import("./strings-DhQWFdHF.js"),[]),"../../config/strings/lv/strings.json":()=>z(()=>import("./strings-IU5OtWBw.js"),[]),"../../config/strings/mi/strings.json":()=>z(()=>import("./strings-DxX8x6B0.js"),[]),"../../config/strings/mk/strings.json":()=>z(()=>import("./strings-Cti9kblJ.js"),[]),"../../config/strings/ml/strings.json":()=>z(()=>import("./strings-BJIh32le.js"),[]),"../../config/strings/mr/strings.json":()=>z(()=>import("./strings-xu6w9hwk.js"),[]),"../../config/strings/ms/strings.json":()=>z(()=>import("./strings-DFzSkTg0.js"),[]),"../../config/strings/mt/strings.json":()=>z(()=>import("./strings-D4ZSHYo7.js"),[]),"../../config/strings/nb-NO/strings.json":()=>z(()=>import("./strings-CALSTTD9.js"),[]),"../../config/strings/ne/strings.json":()=>z(()=>import("./strings-D_PtYGqc.js"),[]),"../../config/strings/nl/strings.json":()=>z(()=>import("./strings-D9Z3MLGH.js"),[]),"../../config/strings/nn-NO/strings.json":()=>z(()=>import("./strings-DqzIxIHr.js"),[]),"../../config/strings/or/strings.json":()=>z(()=>import("./strings-h5K8MLE0.js"),[]),"../../config/strings/pa/strings.json":()=>z(()=>import("./strings-C-UVRFu8.js"),[]),"../../config/strings/pl/strings.json":()=>z(()=>import("./strings-CQarmH7k.js"),[]),"../../config/strings/pt-BR/strings.json":()=>z(()=>import("./strings-C2Mfkefb.js"),[]),"../../config/strings/pt-PT/strings.json":()=>z(()=>import("./strings-GObG6HCR.js"),[]),"../../config/strings/quz/strings.json":()=>z(()=>import("./strings-DglALdHf.js"),[]),"../../config/strings/ro/strings.json":()=>z(()=>import("./strings-CwqRzEVg.js"),[]),"../../config/strings/ru/strings.json":()=>z(()=>import("./strings-P4ocPfZ-.js"),[]),"../../config/strings/sk/strings.json":()=>z(()=>import("./strings-D3VVitsw.js"),[]),"../../config/strings/sl/strings.json":()=>z(()=>import("./strings-CxLCApcq.js"),[]),"../../config/strings/sq/strings.json":()=>z(()=>import("./strings-Cg0ktfYy.js"),[]),"../../config/strings/sr-Cyrl-BA/strings.json":()=>z(()=>import("./strings-D6gpfFAn.js"),[]),"../../config/strings/sr-Cyrl-RS/strings.json":()=>z(()=>import("./strings-BVpLwXmW.js"),[]),"../../config/strings/sr-Latn-RS/strings.json":()=>z(()=>import("./strings-JVQR9IcU.js"),[]),"../../config/strings/sv/strings.json":()=>z(()=>import("./strings-DO0zhqmK.js"),[]),"../../config/strings/ta/strings.json":()=>z(()=>import("./strings-BbAIiJu2.js"),[]),"../../config/strings/te/strings.json":()=>z(()=>import("./strings-CLF6bFaR.js"),[]),"../../config/strings/th/strings.json":()=>z(()=>import("./strings-DMpwZKKh.js"),[]),"../../config/strings/tr/strings.json":()=>z(()=>import("./strings-DHfg5mys.js"),[]),"../../config/strings/tt/strings.json":()=>z(()=>import("./strings-DzSf-DXQ.js"),[]),"../../config/strings/ug/strings.json":()=>z(()=>import("./strings-EPGPB7rr.js"),[]),"../../config/strings/uk/strings.json":()=>z(()=>import("./strings-DlAI4dWj.js"),[]),"../../config/strings/ur/strings.json":()=>z(()=>import("./strings-DGZhWOWn.js"),[]),"../../config/strings/uz-Latn-UZ/strings.json":()=>z(()=>import("./strings-6d4BqQOR.js"),[]),"../../config/strings/vi/strings.json":()=>z(()=>import("./strings-uNItOvRd.js"),[]),"../../config/strings/zh-Hans/strings.json":()=>z(()=>import("./strings-DzECqsuO.js"),[]),"../../config/strings/zh-Hant/strings.json":()=>z(()=>import("./strings-CmsSQ2WV.js"),[])}),`../../config/strings/${e}/strings.json`,6);Ot.addResourceBundle(e,"translation",n,!0,!0)}catch{console.warn(`Translation file for '${e}' not found.`)}})),await Ot.changeLanguage(t))}function q_(t){const e="en-US";if(!t)return[e];const n=Oue(t),r=Mue(t),o=Lue(t);return[n,r,o,e].filter(i=>!!i).filter((i,s,a)=>a.indexOf(i)===s)}function Oue(t){return rU.find(e=>e.toLowerCase()===t.toLowerCase())}function Mue(t){if(["en-AU","en-NZ","en-IE"].includes(t))return"en-GB";if(t.startsWith("zh-")){const e=t.toLocaleLowerCase();return e==="zh-TW".toLocaleLowerCase()||e==="zh-HK".toLocaleLowerCase()?"zh-Hant":"zh-Hans"}}function Lue(t){var n;const e=(n=t.split("-")[0])==null?void 0:n.toLowerCase();if(e){const r=rU.find(o=>o.toLowerCase()===e||o.toLowerCase().startsWith(`${e}-`));if(r)return r}}async function Due(t){try{return(await Gn(`/conversations/${t}/history`,OL,{analytics:{anonymousPath:"/conversations/*/history"}}).then(n=>n.data)).results.length>0}catch{return!1}}function jue(){const t=$t(),e=me("enable-private-chat");return t===XO&&e}function Uue(t){const e=t!=null&&t.length?t.includes("enable-private-chat"):et("enable-private-chat");return window.location.pathname===XO&&e}async function Fue(t){const{conversationIdFromUrl:e,conversationIdFromStart:n}=t;return e&&e!=="new"&&await Due(e)?{conversationId:e,isNew:!1}:n?{conversationId:n,isNew:!0}:{conversationId:null,isNew:!0}}async function Bue(t){const{pathname:e,conversationIdFromUrl:n,conversationFromUrlExists:r,urlPrompt:o,features:i,isBanned:s,enablePageRedirect:a,deepLinkTarget:c,search:u}=t;if(!a||s||Uue(i)||navigator.userAgent.toLowerCase().includes("googlebot")&&e==="/")return null;if(o||n==="new")return{to:c==="audioCall"?"/chats/$conversationId/talk":"/chats/$conversationId",from:e,needsConversationId:!0};if(e.startsWith("/shares"))return e.startsWith("/shares/pages")?i.includes("pages")&&!i.includes("kill-shared-page")?null:jn(e):i.includes("kill-share-conversation")?jn(e):null;if(e.startsWith("/campaigns"))if(e.startsWith("/campaigns/gallery")){if(!i.includes("share-campaign-gallery"))return jn(e)}else if(e.startsWith("/campaigns/image-expression-tool")){if(!i.includes("gallery-expression-tool"))return jn(e)}else return i.includes("share-campaign")?null:jn(e);if(["/pro/subscribe","/pro/ewallet/return"].includes(e)||e==="/fang")return null;if(e.startsWith("/referrals")&&!i.includes("user-referral")||e.startsWith("/subscription")&&!i.includes("cmc-m365-sku"))return jn(e);if(e.startsWith("/memory/narrative"))return i.includes("memory-narrative")?null:jn(e);if(e.endsWith("/talk"))return e.startsWith("/labs/experiments/portrait/talk")?{from:e,to:"/labs/experiments/portrait",needsConversationId:!1}:jn(e);if(e.startsWith("/chats")&&!r)return jn(e);if(e.startsWith("/pages"))return i.includes("pages")?null:jn(e);if(e.startsWith("/labs")&&(e.startsWith("/labs/experiments")&&(e.startsWith("/labs/experiments/3d-generations")&&!i.includes("labs-3d-generations")||e.startsWith("/labs/experiments/portrait")&&!i.includes("labs-portrait-enabled"))||!i.includes("labs-landing"))||e.startsWith("/login"))return jn(e);if(e.startsWith("/podcasts"))return e.startsWith("/podcasts/user")||e.startsWith("/podcasts/public")?null:jn(e);if(e.includes("/w/landing"))return i.includes("cmc-landing")?null:jn(e);if(e==="/"){if(i.includes("start-in-voice"))return null;const d=u==null?void 0:u.get("back");return Hue(d)&&ye.instance().config().redirectBackEnabled?{from:"/login",to:new URL(d).pathname,needsConversationId:!1}:jn(e)}return e.startsWith("/gallery")?i.includes("creator-gallery")?null:jn(e):null}function Hue(t){if(!t)return!1;try{if(new URL(t).origin===window.location.origin)return!0;throw new Error("Invalid redirect URL: not from same origin")}catch{throw new Error("Invalid redirect URL, malformed URL")}}function jn(t){return ye.instance().config().neverStartInChat?{from:t,to:"/"}:{from:t,to:"/chats/$conversationId",needsConversationId:!0}}function zue(){try{const{timeZone:t}=Intl.DateTimeFormat().resolvedOptions();return t}catch{return}}function Y_(t){if(!t)return null;let e=null;const n=new Date(t).toISOString(),r=new Date().toISOString(),o=dV(n,r,{roundingMethod:"ceil"});return o>24?e="permanent":o>1&&o<=24?e="24-hr":o>0&&o<=1&&(e="1-hr"),e}function Q_(t,e,n){if(!t){so(F0);return}const r=rt();V.trackEvent({name:"system",data:{eventName:"copilotUserBan",eventInfo_banDuration:t,eventInfo_banSource:e,eventInfo_banExpiryTimestamp:n}}),r.set(KL,t),r.set(xf,"user-banned")}const Vue=I$(),IN=1e4;function $ue(){return setTimeout(()=>{ii({feature:"start",scenario:"callStartTimeout",errorType:"timeout",errorMessage:`Start call exceeded ${IN}ms timeout`})},IN)}async function Gue(t){let e=ni("sessionId");const n=ni("referralCode");!e&&n&&(e=crypto.randomUUID(),pa("sessionId",e));const r=pue(),o={timeZone:zue(),startNewConversation:!0,teenSupportEnabled:!0,deviceFingerprint:e??void 0,referralCode:n??void 0,correctPersonalizationSetting:!0,performUserMerge:r},i={};Vue&&(i.overrideFeatures="1");const{data:s,response:a,zodError:c}=await Gn(t,GY,{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)},parseOptions:{safe:!0},query:i});if(uy.trackClientExperimentationAssignment(a.headers),a.status===_I)throw new Error(AI);if(c)throw c;return s}function iU(){const{i18n:t}=He(),{showBoundary:e}=uO(),n=_e(xf),r=_e(yO),o=_e(yn),i=_e(Nc),s=_e(ft),a=_e(qL),c=_e(MI),u=ui(),[d]=ab(),f=$t(),p=m.useRef(f);p.current=f;const g=eI({strict:!1}),v=m.useRef(g);v.current=g;const b=m.useRef(v$()),y=O(kp),C=m.useRef(y);C.current=y;const S=m.useRef(!0),w=m.useRef(!1),{trigger:E}=EI("/start",Gue);return m.useCallback(async I=>{var U;if(!t.language||w.current&&!I.eventDriven)return!1;w.current=!0;const T=Xle(),{enablePageRedirect:A,overwriteData:_}=I;try{const k=$ue(),{isNewUser:G,banExpiresAt:K,remainingTurns:ie,features:P,currentConversationId:$,allowBeta:Z}=await E();clearTimeout(k),await oU(),Pt.emit("app:start-complete"),V.setFeatures(P),V.setIsNewUser(G),bw({isNewUser:G.toString()});const x=zj({featureOverrides:[],localFeatureOverrides:Vj(),serverFeatures:P,surfaceConfig:ye.instance().config()});x.includes("eager-msal")&&(Oi(z0,l.boolean(),!0),x.includes("msal-silent-sso")&&Oi(fM,l.boolean(),!0)),x.includes("kill-eager-msal")&&so(z0),x.includes("auth-module-refactor")?Oi(G0,l.boolean(),!0):so(G0),ye.instance().config().useMSALPwBApp&&(x.includes("cmc-msal-pwb")?Oi(K0,l.boolean(),!0):so(K0));const L=Y_(K),ne=await Fue({conversationIdFromUrl:v.current.conversationId,conversationIdFromStart:$});let{conversationId:se}=ne;if(!se){const{id:X}=await Yj("/conversations");se=X}const fe=await Bue({pathname:p.current,conversationIdFromUrl:v.current.conversationId,conversationFromUrlExists:v.current.conversationId===se,urlPrompt:((U=C.current)==null?void 0:U.prompt)??null,features:x,enablePageRedirect:A,isBanned:!!L,deepLinkTarget:d,search:new URLSearchParams(window.location.search)});o(X=>{if(!_&&X.size>0)return X;const ge=new Map([[se,{id:se,updatedAt:new Date().toISOString(),history:[],isNew:ne.isNew,characterId:null,streamingState:"idle",continuedAt:null}]]);return!ne.isNew&&$&&ge.set($,{id:$,updatedAt:new Date().toISOString(),history:[],isNew:!0,characterId:null,streamingState:"idle",continuedAt:null}),ge}),s(X=>X&&!_?X:se),r(X=>X.length>0&&!_?X:x),i(ie),a(G),c(Z??!1),Q_(L,"start",K),S.current&&(S.current=!1,fe&&await u({...fe,params:fe.needsConversationId?{conversationId:se}:{},search:b.current}))}catch(k){if(V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"StartEndpointError",eventInfo_errorMessage:k instanceof Error?k.message:"",eventInfo_details:k instanceof Error?k.stack??"":""}}),k instanceof Error&&k.message===AI)return n("age-verification"),!0;console.error(k),e(k)}finally{mue(!1)}return!0},[E,o,s,n,r,i,a,c,u,t.language,e,d])}const TN=el.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),jS={dedupe:!0},Kue=(t,e,n)=>{const{cache:r,compare:o,suspense:i,fallbackData:s,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:f,keepPreviousData:p}=n,[g,v,b,y]=Eo.get(r),[C,S]=bs(t),w=m.useRef(!1),E=m.useRef(!1),I=m.useRef(C),T=m.useRef(e),A=m.useRef(n),_=()=>A.current,U=()=>_().isVisible()&&_().isOnline(),[k,G,K,ie]=Ii(r,C),P=m.useRef({}).current,$=je(s)?n.fallback[C]:s,Z=(Q,oe)=>{for(const we in P){const N=we;if(N==="data"){if(!o(Q[N],oe[N])&&(!je(Q[N])||!o(Se,oe[N])))return!1}else if(oe[N]!==Q[N])return!1}return!0},x=m.useMemo(()=>{const Q=!C||!e?!1:je(a)?_().isPaused()||i?!1:je(c)?!0:c:a,oe=Y=>{const Ie=io(Y);return delete Ie._k,Q?{isValidating:!0,isLoading:!0,...Ie}:Ie},we=k(),N=ie(),te=oe(we),Ce=we===N?te:oe(N);let D=te;return[()=>{const Y=oe(k());return Z(Y,D)?(D.data=Y.data,D.isLoading=Y.isLoading,D.isValidating=Y.isValidating,D.error=Y.error,D):(D=Y,Y)},()=>Ce]},[r,C]),L=ey.useSyncExternalStore(m.useCallback(Q=>K(C,(oe,we)=>{Z(we,oe)||Q()}),[r,C]),x[0],x[1]),ne=!w.current,se=g[C]&&g[C].length>0,fe=L.data,X=je(fe)?$:fe,ge=L.error,Oe=m.useRef(X),Se=p?je(fe)?Oe.current:fe:X,Fe=se&&!je(ge)?!1:ne&&!je(a)?a:_().isPaused()?!1:i?je(X)?!1:c:je(X)||c,Re=!!(C&&e&&ne&&Fe),Ve=je(L.isValidating)?Re:L.isValidating,he=je(L.isLoading)?Re:L.isLoading,B=m.useCallback(async Q=>{const oe=T.current;if(!C||!oe||E.current||_().isPaused())return!1;let we,N,te=!0;const Ce=Q||{},D=!b[C]||!Ce.dedupe,Y=()=>kc?!E.current&&C===I.current&&w.current:C===I.current,Ie={isValidating:!1,isLoading:!1},Je=()=>{G(Ie)},it=()=>{const Be=b[C];Be&&Be[1]===N&&delete b[C]},st={isValidating:!0};je(k().data)&&(st.isLoading=!0);try{if(D&&(G(st),n.loadingTimeout&&je(k().data)&&setTimeout(()=>{te&&Y()&&_().onLoadingSlow(C,n)},n.loadingTimeout),b[C]=[oe(S),xc()]),[we,N]=b[C],we=await we,D&&setTimeout(it,n.dedupingInterval),!b[C]||b[C][1]!==N)return D&&Y()&&_().onDiscarded(C),!1;Ie.error=dn;const Be=v[C];if(!je(Be)&&(N<=Be[0]||N<=Be[1]||Be[1]===0))return Je(),D&&Y()&&_().onDiscarded(C),!1;const $e=k().data;Ie.data=o($e,we)?$e:we,D&&Y()&&_().onSuccess(we,C,n)}catch(Be){it();const $e=_(),{shouldRetryOnError:wt}=$e;$e.isPaused()||(Ie.error=Be,D&&Y()&&($e.onError(Be,C,$e),(wt===!0||Ir(wt)&&wt(Be))&&(!_().revalidateOnFocus||!_().revalidateOnReconnect||U())&&$e.onErrorRetry(Be,C,$e,nn=>{const _t=g[C];_t&&_t[0]&&_t[0](Tr.ERROR_REVALIDATE_EVENT,nn)},{retryCount:(Ce.retryCount||0)+1,dedupe:!0})))}return te=!1,Je(),!0},[C,r]),Pe=m.useCallback((...Q)=>ny(r,I.current,...Q),[]);if(Ao(()=>{T.current=e,A.current=n,je(fe)||(Oe.current=fe)}),Ao(()=>{if(!C)return;const Q=B.bind(dn,jS);let oe=0;const N=SI(C,g,(te,Ce={})=>{if(te==Tr.FOCUS_EVENT){const D=Date.now();_().revalidateOnFocus&&D>oe&&U()&&(oe=D+_().focusThrottleInterval,Q())}else if(te==Tr.RECONNECT_EVENT)_().revalidateOnReconnect&&U()&&Q();else{if(te==Tr.MUTATE_EVENT)return B();if(te==Tr.ERROR_REVALIDATE_EVENT)return B(Ce)}});return E.current=!1,I.current=C,w.current=!0,G({_k:S}),Fe&&(je(X)||ys?Q():vI(Q)),()=>{E.current=!0,N()}},[C]),Ao(()=>{let Q;function oe(){const N=Ir(u)?u(k().data):u;N&&Q!==-1&&(Q=setTimeout(we,N))}function we(){!k().error&&(d||_().isVisible())&&(f||_().isOnline())?B(jS).then(oe):oe()}return oe(),()=>{Q&&(clearTimeout(Q),Q=-1)}},[u,d,f,C]),m.useDebugValue(Se),i&&je(X)&&C){if(!kc&&ys)throw new Error("Fallback data is required when using suspense in SSR.");T.current=e,A.current=n,E.current=!1;const Q=y[C];if(!je(Q)){const oe=Pe(Q);TN(oe)}if(je(ge)){const oe=B(jS);je(Se)||(oe.status="fulfilled",oe.value=!0),TN(oe)}else throw ge}return{mutate:Pe,get data(){return P.data=!0,Se},get error(){return P.error=!0,ge},get isValidating(){return P.isValidating=!0,Ve},get isLoading(){return P.isLoading=!0,he}}},vl=CI(Kue);function Wue(){const{cache:t,mutate:e}=bI(),n=m.useCallback(async()=>{for(const o of t.keys())await e(o,void 0,{revalidate:!1})},[t,e]),r=m.useCallback(async o=>{await e(o,void 0,{revalidate:!1})},[e]);return{clearAllSWRCache:n,clearOneSWRCache:r}}function que(){so(pM)}function Vd(){const t=iU(),e=$t(),n=ui(),{clearAllSWRCache:r}=Wue(),o=async a=>{const{provider:c,opts:u={},onAuthComplete:d,onAuthError:f}=a;await Ts.instance().logIn(c,u).catch(p=>{console.error(p),f==null||f()})},i=async(a=!0)=>{await r(),que(),fue(),await Ts.instance().logOut().then(async()=>{a&&(await n({to:"/",from:e}),await t({enablePageRedirect:!1,overwriteData:!0}))})};return{login:o,logout:i,switchMicrosoftAccount:async()=>{await i(),await o({provider:"microsoft"})}}}function Yue({accountActionRequired:t,onReload:e}){const{t:n}=He(),r=nl(),{login:o}=Vd(),{reason:i,provider:s,loginHint:a}=t,c=async p=>{dt({source:"sessionExpired",scenario:"continueWithMicrosoftWithLoginHint",destination:"continueWithMicrosoftRedirect"}),EC({authWorkflowAccountType:"microsoft",apiName:"msal:reauthStart"});const{msal:g}=await wr.get();await g.acquireTokenRedirect({...pI,loginHint:p,account:g.getAccountByUsername(p)??void 0,prompt:void 0})},u=async()=>{if(i==="token-expired"&&t.provider==="microsoft"){const{msal:p}=await wr.get();if(!Oc())await p.clearCache();else{const g=p.getActiveAccount();await p.clearCache({account:g})}}},d=async(p,g)=>{await u();let v="";switch(p==="microsoft"?(v="MSA",EC({authWorkflowAccountType:"microsoft",apiName:"msal:reauthStart"})):p==="auth0"&&(v=(g==null?void 0:g.connection)==="apple"?"Apple":"Google",EC({authWorkflowAccountType:(g==null?void 0:g.connection)??"google",apiName:Go.REAUTH_START})),dt({source:"sessionExpired",scenario:`continueWith${v}`,destination:`continueWith${v}Redirect`}),p){case"microsoft":o({provider:p});break;case"auth0":o({provider:p,opts:g});break}},f=async()=>{En({source:"signin",scenario:"sessionExpired"}),await u(),o({provider:"microsoft"})};return h.jsxs(h.Fragment,{children:[h.jsx("h1",{className:"pb-3 text-lg",children:n("authentication.sessionExpired")}),h.jsx("p",{className:"pb-7",children:n("authentication.sessionExpiredMessage")}),i==="token-expired"&&s==="microsoft"&&a&&h.jsx(Ue,{onClick:()=>c(a),title:`${n("signInPrompt.continueAs",{name:a})}`,variant:"pill",size:"48-lg",className:"w-full",children:`${n("signInPrompt.continueAs",{name:a})}`}),r?h.jsxs(h.Fragment,{children:[h.jsxs(Ue,{onClick:()=>d("microsoft"),title:n("signInPrompt.continueWithMicrosoft"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[h.jsx(Zv,{className:"size-6"}),n("signInPrompt.continueWithMicrosoft")]}),h.jsxs(Ue,{onClick:()=>d("auth0",{connection:"apple"}),title:n("signInPrompt.continueWithApple"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[h.jsx(hI,{className:"size-6 text-black dark:text-white"}),n("signInPrompt.continueWithApple")]}),h.jsxs(Ue,{onClick:()=>d("auth0",{connection:"google"}),title:n("signInPrompt.continueWithGoogle"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:[h.jsx(fI,{className:"size-6"}),n("signInPrompt.continueWithGoogle")]})]}):h.jsx(Ue,{onClick:f,title:n("common.loginText"),variant:"pill",size:"48-lg",className:"mt-3 w-full",children:n("common.loginText")}),h.jsx(Ue,{onClick:e,title:n("signInPrompt.continueWithoutSignIn"),variant:"pill",color:"subtle-dimmed-inverted",size:"48-lg",className:"mt-3 w-full",children:n("signInPrompt.continueWithoutSignIn")})]})}function sU(t){try{return new URL(t,window.location.origin).origin!==window.location.origin}catch{return!1}}function xp(t){Ye(rl)&&sU(t)?rt().set(gy,t.toString()):window.location.href=t}function ub(){Que()}function Que(t){const{surfaceQueryParam:e}=ye.instance().config(),n=new URL(window.location.href);if(e)for(const[r,o]of Object.entries(e.params))n.searchParams.delete(r),n.searchParams.append(r,o);xp(n.href)}const db={type:"spring",mass:2.8,stiffness:280,damping:40},Jue={type:"spring",mass:1.8,stiffness:320,damping:40},Exe={type:"spring",mass:1.8,stiffness:440,damping:40},Cw={type:"spring",mass:1.4,stiffness:320,damping:40},aU={type:"spring",mass:1,stiffness:1200,damping:40},cU={type:"spring",mass:1.8,stiffness:640,damping:40},wxe={type:"spring",mass:3.2,stiffness:640,damping:40},Oo={type:"spring",mass:1,stiffness:280,damping:40},_N={duration:1.2,ease:"easeInOut",repeat:3,repeatType:"reverse",type:"tween"},lU=.2,uU=.25,Xue=1.5,Zue=[.16,1,.3,1];function ede(t,e){const{children:n,id:r,role:o,className:i,mode:s="wait",duration:a=Ro.default,exitDuration:c=Ro.default,exitDelay:u=0,delay:d=0,delayChildren:f=0,onAnimationComplete:p,"data-testid":g,initial:v="initial"}=t;return h.jsx(xn,{mode:s,children:n&&h.jsx(xe.div,{animate:"animate",exit:"exit",ref:e,role:o,initial:v,variants:{initial:ct,animate:Lt,exit:{...ct,transition:{duration:c,delay:u}}},transition:{duration:a,ease:"easeInOut",delay:d,delayChildren:f},className:i,onAnimationComplete:p,"data-testid":g,children:n},r)})}const Ln=m.forwardRef(ede),Rp=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M4.20889 10.7327C3.9232 11.0326 3.93475 11.5074 4.23467 11.7931C4.5346 12.0788 5.00933 12.0672 5.29502 11.7673L11.2495 5.516V20.25C11.2495 20.6642 11.5853 21 11.9995 21C12.4137 21 12.7495 20.6642 12.7495 20.25V5.51565L18.7043 11.7673C18.99 12.0672 19.4648 12.0788 19.7647 11.7931C20.0646 11.5074 20.0762 11.0326 19.7905 10.7327L12.7238 3.31379C12.5627 3.14474 12.3573 3.04477 12.1438 3.01386C12.0971 3.00477 12.0489 3 11.9995 3C11.9498 3 11.9012 3.00483 11.8543 3.01406C11.6412 3.04518 11.4363 3.14509 11.2756 3.31379L4.20889 10.7327Z"})),Ixe=Object.freeze(Object.defineProperty({__proto__:null,default:Rp},Symbol.toStringTag,{value:"Module"})),ko=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M4.39705 4.55379L4.46967 4.46967C4.73594 4.2034 5.1526 4.1792 5.44621 4.39705L5.53033 4.46967L12 10.939L18.4697 4.46967C18.7626 4.17678 19.2374 4.17678 19.5303 4.46967C19.8232 4.76256 19.8232 5.23744 19.5303 5.53033L13.061 12L19.5303 18.4697C19.7966 18.7359 19.8208 19.1526 19.6029 19.4462L19.5303 19.5303C19.2641 19.7966 18.8474 19.8208 18.5538 19.6029L18.4697 19.5303L12 13.061L5.53033 19.5303C5.23744 19.8232 4.76256 19.8232 4.46967 19.5303C4.17678 19.2374 4.17678 18.7626 4.46967 18.4697L10.939 12L4.46967 5.53033C4.2034 5.26406 4.1792 4.8474 4.39705 4.55379L4.46967 4.46967L4.39705 4.55379Z",fill:"currentColor"})),Txe=Object.freeze(Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"}));function hb(){const[t,e]=m.useState(document.body.dir==="rtl");return m.useEffect(()=>{const n=new MutationObserver(()=>{e(document.body.dir==="rtl")});return n.observe(document.body,{attributes:!0,attributeFilter:["dir"]}),()=>n.disconnect()},[]),t}const US=Ro.default,Ea=m.forwardRef((t,e)=>{const{isOpen:n,onBack:r,headerText:o,children:i,onClose:s,className:a,disableCloseOutside:c,headerTextClassName:u,headerClassName:d,trapFocus:f=!1,variant:p="modal"}=t,{t:g}=He(),v=m.useId(),{modalAttributes:b}=J2({trapFocus:f,legacyTrapFocus:f,alwaysFocusable:f}),y=f?b:{},C=hb()?-1:1,S=T=>{(c??!s)||T.target===T.currentTarget&&s()},w=T=>{T.stopPropagation()},E=p==="drawer",I=E?{initial:{x:`${C*100}%`},animate:{x:0,transition:Cw},exit:{x:`${C*100}%`,transition:{duration:US}}}:void 0;return h.jsx(Ln,{id:String(n),mode:"sync",duration:US,exitDuration:US,className:W("fixed inset-0",Zt.modal),children:n&&h.jsxs("div",{...y,role:"dialog","aria-modal":"true","aria-labelledby":o?v:void 0,children:[h.jsx("div",{className:W("fixed inset-0 bg-stone-850/30 backdrop-blur-[10px] dark:bg-midnight-850/70",Zt.modalBackground)}),h.jsx("div",{className:W("fixed inset-0 flex",E?"items-start justify-end":"items-center justify-center",Zt.modal),onClick:S,children:h.jsxs(xe.div,{...I,className:at("t-custom-scrollbar flex flex-col gap-3 border border-white/10 bg-background-150 p-6 shadow-xl dark:bg-background-250",E?"h-full w-80":"min-h-[150px] rounded-4xl",a),onClick:w,ref:T=>{typeof e=="function"?e(T):e&&(e.current=T)},children:[h.jsxs("div",{className:W("flex items-center justify-between gap-2",d),children:[r&&h.jsx(Ue,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:g("common.backText"),"aria-label":g("common.backText"),onClick:r,children:h.jsx(Rp,{className:"size-5 -rotate-90"})}),o&&h.jsx("h2",{id:v,className:W("text-foreground-800 text-md-strong",u),children:o}),s&&h.jsx(Ue,{className:!r&&!o?"ms-auto":"",variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:g("common.closeText"),"aria-label":g("common.closeText"),onClick:s,children:h.jsx(ko,{className:"size-5"})})]}),i]})})]})})});Ea.displayName="Modal";function dU(t){const{accountActionRequired:e}=t;return h.jsx(Ea,{isOpen:!0,children:h.jsx(tde,{accountActionRequired:e})})}function tde(t){const{accountActionRequired:e}=t,{reason:n}=e;m.useEffect(()=>{V.trackEvent({name:"system",data:{eventName:"copilotWebBackgroundAccountChange",eventInfo_action:"shown",eventInfo_reason:n}})},[n]);const r=async()=>{if(V.trackEvent({name:"system",data:{eventName:"copilotWebBackgroundAccountChange",eventInfo_action:"reload",eventInfo_reason:n}}),n==="token-expired"&&e.provider==="microsoft"){const{msal:o}=await wr.get();if(!Oc())await o.clearCache();else{const i=o.getActiveAccount();await o.clearCache({account:i})}}ub()};return n==="login"||n==="logout"?h.jsx("div",{className:"flex max-w-72 flex-col items-center p-1 text-center",children:h.jsx(zH,{reason:n,onReload:r})}):h.jsx("div",{className:"flex max-w-96 flex-col items-center p-1 text-center",children:h.jsx(Yue,{accountActionRequired:e,onReload:r})})}function J_(t,e){if(t){if(t.indexOf("-")!==-1)return t;if(e)return`${t}-${e}`}else if(e)return e;return"en-US"}const $d=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("g",{id:"Chevron"},m.createElement("path",{id:"Shape",d:"M8.46967 4.21967C8.17678 4.51256 8.17678 4.98744 8.46967 5.28033L15.1893 12L8.46967 18.7197C8.17678 19.0126 8.17678 19.4874 8.46967 19.7803C8.76256 20.0732 9.23744 20.0732 9.53033 19.7803L16.7803 12.5303C17.0732 12.2374 17.0732 11.7626 16.7803 11.4697L9.53033 4.21967C9.23744 3.92678 8.76256 3.92678 8.46967 4.21967Z",fill:"currentColor"}))),_xe=Object.freeze(Object.defineProperty({__proto__:null,default:$d},Symbol.toStringTag,{value:"Module"})),nde={top:36,bottom:36,left:24,right:24};function _m(t){const{ariaLabelId:e,options:n,renderOption:r,onSelect:o,value:i,id:s,actionLabel:a,placeholder:c,className:u,menuClassName:d,expandIconClassName:f,disabled:p=!1,isValid:g=!0,supportsBrowserAutofill:v,supportsTypeahead:b=!1,autoComplete:y,boundary:C,padding:S=nde}=t,[w,E]=m.useState(!1),[I,T]=m.useState(null),A=n.findIndex(Fe=>Fe.key===i),_=m.useRef([]),U=m.useRef([]),k=m.useCallback(Fe=>{var Ve;const Re=(Ve=n[Fe])==null?void 0:Ve.key;Re&&o(Re)},[o,n]),{refs:G,floatingStyles:K,context:ie}=tp({placement:"bottom-start",strategy:"absolute",open:w,onOpenChange:E,whileElementsMounted:bd,middleware:[np({padding:S}),X2({boundary:C,apply({rects:Fe,elements:Re,availableHeight:Ve}){Object.assign(Re.floating.style,{maxHeight:`${Ve}px`,minWidth:`${Fe.reference.width}px`})},padding:S})]}),P=tI(ie,{event:"mousedown",enabled:!p}),$=nI(ie),Z=rI(ie,{role:"listbox"}),x=uF(ie,{listRef:_,activeIndex:I,selectedIndex:A,onNavigate:T,loop:!0,focusItemOnHover:!1,openOnArrowKeyDown:!p}),L=dF(ie,{enabled:b,listRef:U,activeIndex:I,onMatch:w?T:k}),{getReferenceProps:ne,getFloatingProps:se,getItemProps:fe}=oI([$,Z,x,P,L]),X=m.useCallback(Fe=>{o(Fe),E(!1)},[o]),ge=A>-1?r(n[A]):h.jsx("div",{className:"truncate text-foreground-550 dark:text-slate-400",children:c}),Oe=m.useCallback(Fe=>{p||o(Fe.currentTarget.value)},[o,p]),Se=m.useRef(null);return h.jsxs(h.Fragment,{children:[v&&h.jsx("select",{"aria-hidden":!0,className:"hidden",onChange:Oe,autoComplete:y,disabled:p,children:n.map(Fe=>h.jsx("option",{value:Fe.key,children:Fe.text},Fe.key))}),h.jsxs("button",{role:"combobox",type:"button",id:s,ref:G.setReference,"aria-labelledby":e,"aria-autocomplete":"none","aria-invalid":!g,"aria-disabled":p,className:W("flex w-full cursor-pointer items-center justify-between gap-2 rounded-2xl bg-black/5 px-[1.125rem] py-4 dark:bg-midnight-550/25",u,p&&"pointer-events-none opacity-50"),...ne(),children:[h.jsx("div",{className:"min-w-0",children:ge}),h.jsxs("div",{className:W("flex min-h-[26px] shrink-0 grow items-center justify-end gap-2",f),children:[a&&h.jsx("span",{children:a}),h.jsx($d,{className:"size-6 rotate-90"})]})]}),h.jsx("div",{ref:Se}),w&&h.jsx(Yv,{root:Se.current,children:h.jsx(Qv,{context:ie,modal:!1,children:h.jsx("div",{ref:G.setFloating,style:K,className:W("flex overflow-hidden rounded-2xl shadow-md",d),...se(),children:h.jsx("div",{className:W("flex w-full flex-col p-2",EH),children:h.jsx("div",{className:W("vertical-scrollbar overflow-y-auto py-1 pe-1"),children:n.map((Fe,Re)=>h.jsx("div",{ref:Ve=>{_.current[Re]=Ve,U.current[Re]=Fe.text},role:"option",tabIndex:Re===I?0:-1,"aria-selected":Re===A&&Re===I,className:"relative cursor-default rounded-xl px-3 py-2 -outline-offset-2 hover:bg-black/5 dark:hover:bg-white/8",...fe({onClick(){X(Fe.key)},onKeyDown(Ve){Ve.key==="Enter"&&(Ve.preventDefault(),X(Fe.key))}}),children:r(Fe)},Fe.key))})})})})})]})}function AN(t){const{htmlFor:e,content:n,required:r,className:o,afterContent:i}=t;return h.jsxs("div",{className:"flex items-center",children:[h.jsxs("label",{htmlFor:e,className:W("flex items-center gap-0.5 text-foreground-900",o),children:[n,r&&h.jsx("span",{className:"text-system-red-550 dark:text-system-red-350",children:"*"})]}),i]})}function fb(){const t=$t();return t==="/discover"||t==="/"}const Ov={CLOSE_BUTTON:"closeButton",ONE_LINE_COMPOSER:"oneLineComposer",IMAGE_VIEWER:"imageViewer"},X_=M(),rde=M(t=>{const e=t(X_);if(!(!e||!Array.isArray(e.media)||typeof e.currentMediaIndex!="number"))return e.media[e.currentMediaIndex]});function hU(){return O(rde)}function ode(t){var e;En({source:"mediaViewerOpen",scenario:(e=t.media[t.currentMediaIndex])==null?void 0:e.type})}function ide(){var e,n;const t=Z_();t&&En({source:"mediaViewerNext",scenario:(e=t.media[t.currentMediaIndex])==null?void 0:e.type,destination:(n=t.media[t.currentMediaIndex+1])==null?void 0:n.type})}function sde(){var e,n;const t=Z_();t&&En({source:"mediaViewerPrevious",scenario:(e=t.media[t.currentMediaIndex])==null?void 0:e.type,destination:(n=t.media[t.currentMediaIndex-1])==null?void 0:n.type})}function kN(){var e;const t=Z_();t&&En({source:"mediaViewerClose",scenario:(e=t.media[t.currentMediaIndex])==null?void 0:e.type})}function Z_(){return rt().get(X_)}const ade=M();function fU(){const[t,e]=lt(ade);return{isPictureInPictureOpen:me("video-picture-in-picture")&&t!==void 0,openPictureInPicture:i=>{e(i),dt({source:"mediaViewer",scenario:"PictureInPictureOpen"})},closePictureInPicture:()=>e(void 0)}}function Aa(){var f;const[t,e]=lt(X_),{openPictureInPicture:n}=fU(),r=me("video-picture-in-picture"),o=m.useCallback(()=>{const{onClose:p}=t??{};kN(),e(void 0),p==null||p()},[e,t]),i=m.useCallback(()=>{ide(),e(p=>{if(!p)return p;if(p.currentMediaIndex<p.media.length-1){const g=p.currentMediaIndex+1;return{...p,currentMediaIndex:g,isCurrentMediaLoading:FS(p.media[g])}}return p})},[e]),s=m.useCallback(()=>{sde(),e(p=>{if(!p)return p;if(p.currentMediaIndex>0){const g=p.currentMediaIndex-1;return{...p,currentMediaIndex:g,isCurrentMediaLoading:FS(p.media[g])}}return p})},[e]),a=m.useCallback(p=>{ode(p),e({...p,isCurrentMediaLoading:FS(p.media[p.currentMediaIndex])})},[e]),c=r&&((f=t==null?void 0:t.media[t.currentMediaIndex])==null?void 0:f.type)==="video",u=m.useCallback(()=>{var g;const p=t==null?void 0:t.media[t.currentMediaIndex];if(p&&p.type==="video"){const{player:v}=p;n({url:p.url,title:((g=p.source)==null?void 0:g.title)??"",startTime:(v==null?void 0:v.getCurrentTime())??0}),kN(),e(void 0)}},[t,n,e]),d=(t==null?void 0:t.contentComposerType)??Ov.CLOSE_BUTTON;return m.useMemo(()=>({openMediaViewer:a,closeMediaViewer:o,isMediaViewerOpen:t!==void 0,next:i,previous:s,isPictureInPictureSupported:c,triggerPictureInPicture:u,contentComposerType:d,showOneLineComposerWhenMediaViewerOpen:d===Ov.ONE_LINE_COMPOSER,contentPageType:t==null?void 0:t.contentPageType}),[a,o,t,i,s,c,u,d])}function FS(t){if(t&&"initLoading"in t)return t.initLoading}const xN="bg-gradient-discover-light dark:bg-gradient-discover-dark",cde="bg-gradient-authentication-light dark:bg-gradient-authentication-dark";function lde(t={}){const{forceGradient:e=!1,gradientType:n}=t,{isMediaViewerOpen:r,contentPageType:o}=Aa(),i=fb(),s=$t()==="/login",a=o==="newsArticle"||o==="newsVideo"||o==="newsGem",c=()=>e?!0:r&&a?!1:i||s,u=()=>n==="discover"?xN:n==="authentication"||s?cde:xN;return{shouldShowGradient:c(),gradientClass:u()}}const RN="absolute size-full";function yl(t){const{isBottomFade:e,forceGradient:n,isFixed:r,overrideGradientType:o,customColor:i}=t,s=$t(),{shouldShowGradient:a,gradientClass:c}=lde({forceGradient:n,gradientType:o});return h.jsxs("div",{className:W(r?"fixed":"absolute",e?"-inset-x-4 bottom-0 h-dvh":"inset-0","overflow-hidden"),children:[h.jsx("div",{className:W(RN,"bg-none",i??"bg-background-150")}),h.jsx(xn,{children:a&&h.jsx(xe.div,{className:W(RN,c),initial:"initial",animate:"animate",exit:"exit",variants:{initial:ct,animate:Lt,exit:ct},transition:db},s)})]})}const pU=M([]);function mU(){var c;const[t,e]=lt(pU),n=m.useRef([]);m.useEffect(()=>{const u=n.current,d=t;if(u.length>d.length){const f=u.filter((g,v)=>v>=d.length),p=f.length;for(let g=p-1;g>=0;g-=1){const v=f[g];v!=null&&v.onPopPage&&v.onPopPage()}}n.current=t},[t]);const r=t.length>0?(c=t[t.length-1])==null?void 0:c.page:void 0,o=u=>i([u]),i=u=>{const d=u.map(f=>({page:f,onPopPage:void 0}));e(f=>[...f,...d])};return{currentPage:r,pushPage:o,pushPages:i,goBackOrClose:()=>{e(u=>u.length<=0?u:u.slice(0,-1))},closeSettings:()=>{e([])}}}function Axe(t,e){const n={page:t,onPopPage:e==null?void 0:e.onPopPageCallback};rt().set(pU,r=>[...r,n])}const Kf="https://www.bing.com/new/termsofuse",pd="https://go.microsoft.com/fwlink/?LinkId=521839",Mv="https://www.microsoft.com/microsoft-copilot/learn/?form=MG0AUO&OCID=MG0AUO#faqs",BS="hover:underline focus:underline";function NN(t){var e,n;return((n=(e=ye.instance().config()).textOverrides)==null?void 0:n.call(e,t))??t}function kxe(t){const{component:e="link",buttonClassName:n}=t,r=O(ft),{pushPage:o}=mU(),i=(s,a)=>{En({source:"complianceLinks",scenario:s,conversationId:r,destination:a})};return h.jsx("div",{className:W("flex w-full flex-wrap justify-center gap-x-5 gap-y-1 text-black/80 text-2xs dark:text-white/80",e==="button"?"flex-col p-0":"px-5 py-2"),children:e==="link"?h.jsx(ude,{handleAnalytics:i}):h.jsx(dde,{handleAnalytics:i,className:n??"",setPage:o})})}function ude(t){const{handleAnalytics:e}=t;return h.jsxs(h.Fragment,{children:[h.jsx(aa,{href:pd,title:ee(NN("settings.privacyLink")),className:BS,onClick:()=>e("privacy",pd),children:ee(NN("settings.privacyLink"))}),h.jsx(aa,{href:Kf,title:ee("settings.termsOfServiceLink"),className:BS,onClick:()=>e("terms",Kf),children:ee("settings.termsOfServiceLink")}),h.jsx(aa,{href:Mv,title:ee("settings.faqLink"),className:BS,onClick:()=>e("faq",Mv),children:ee("settings.faqLink")})]})}function dde(t){const{handleAnalytics:e,className:n,setPage:r}=t,o=(i,s)=>{var d;e(i,s);const c=(d=ye.instance().config().settingsOverrides)==null?void 0:d.shouldShowPolicyTermsQRCodes,u={privacy:"privacyStatement",terms:"terms",faq:"faq"};c&&i in u?r==null||r(u[i]):window.open(s,"_blank")};return h.jsxs(h.Fragment,{children:[h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:ee("settings.privacyLink"),onClick:()=>o("privacy",pd),children:h.jsx("span",{children:ee("settings.privacyLink")})}),h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:ee("settings.termsOfServiceLink"),onClick:()=>o("terms",Kf),children:h.jsx("span",{children:ee("settings.termsOfServiceLink")})}),h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:n,title:ee("settings.faqLink"),onClick:()=>o("faq",Mv),children:h.jsx("span",{children:ee("settings.faqLink")})})]})}const PN={...ip,"United Kingdom":"UK"},ON={termsLink:h.jsx(MN,{link:Kf}),privacyLink:h.jsx(MN,{link:pd})};function MN(t){const{children:e,link:n}=t;return h.jsx(aa,{className:"underline",href:n,title:"",children:e})}function hde(t,e,n){const r=new Date(n,e-1,t);return nM(r)&&r.getFullYear()===n&&r.getMonth()===e-1&&r.getDate()===t}function fde(t,e,n){const r=new Date(n,e-1,t),o=d$(new Date);return r<=o}const HS="border-2 border-system-red-550/50 bg-system-red-550/10 text-system-red-550 dark:text-system-red-350";function pde(){const[t,e]=m.useState(!1),[n,r]=m.useState(void 0),[o,i]=m.useState(void 0);m.useEffect(()=>{async function _(){const U=await AZ();i(U)}_()},[]),m.useEffect(()=>{const _=new URLSearchParams(window.location.search);_.delete("code"),_.delete("state"),_.delete("error"),window.history.replaceState({},document.title,`${window.location.pathname}?${_}`)},[]),m.useEffect(()=>{o&&Pd({page:"auth0AccountVerificationPage",scenario:"auth0Verification",customData:JSON.stringify({accountType:o})})},[o]);const[s,a]=m.useState(""),[c,u]=m.useState(""),[d,f]=m.useState(""),[p,g]=m.useState(PN["United States"]),{i18n:v}=He(),b=J_(v.resolvedLanguage),y=new Intl.NumberFormat(b,{minimumIntegerDigits:2,useGrouping:!1}),C=new Intl.NumberFormat(b,{minimumIntegerDigits:4,useGrouping:!1});m.useEffect(()=>{e(!!!(c&&d&&s&&p))},[c,d,s,p]);const S=[{key:"01",text:ee("common.date.month.january")},{key:"02",text:ee("common.date.month.february")},{key:"03",text:ee("common.date.month.march")},{key:"04",text:ee("common.date.month.april")},{key:"05",text:ee("common.date.month.may")},{key:"06",text:ee("common.date.month.june")},{key:"07",text:ee("common.date.month.july")},{key:"08",text:ee("common.date.month.august")},{key:"09",text:ee("common.date.month.september")},{key:"10",text:ee("common.date.month.october")},{key:"11",text:ee("common.date.month.november")},{key:"12",text:ee("common.date.month.december")}],w=Object.entries(PN).sort().map(([_,U])=>({key:U,text:_})),E=Array.from({length:31},(_,U)=>{const k=U+1,G=y.format(k);return{key:k.toString(),text:G}}),I=Array.from({length:125},(_,U)=>{const k=new Date().getFullYear()-U,G=C.format(k);return{key:`${new Date().getFullYear()-U}`,text:G}}),T=_=>h.jsx("p",{children:_.text}),A=async()=>{const _=parseInt(s,10),U=parseInt(c,10),k=parseInt(d,10);if(!hde(k,U,_)){dt({source:"auth0AccountVerificationPage",scenario:"auth0VerificationInvalidDate",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),r(!1);return}if(!fde(k,U,_)){dt({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotAdult",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),r(!1);return}const ie=_u(new Date(_,U-1,k),"yyyy-MM-dd");r(!0);const P=await _Z(ie,p);if(!P){dt({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotSuccessfulInvalidToken",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),r(!1);return}const{ageGroup:$}=P,Z=$===ec.NOT_ADULT,x=$===ec.ADULT;if(!(Z||x)){dt({source:"auth0AccountVerificationPage",scenario:"auth0VerificationNotSuccessfulNotTeenOrAdult",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),r(!1);return}dt({source:"auth0AccountVerificationPage",scenario:"auth0VerificationSuccessful",destination:"auth0AccountVerificationPage",customData:JSON.stringify({accountType:o})}),ub()};return h.jsxs(h.Fragment,{children:[h.jsx(yl,{forceGradient:!0,overrideGradientType:"authentication"}),h.jsxs("section",{className:"relative m-auto flex min-h-dvh max-w-[500px] flex-col items-center justify-center gap-3 overflow-y-auto px-5 py-12 text-center",children:[h.jsx("h1",{className:"mb-4 text-center font-semibold text-xl sm:text-3xl",children:ee("error.auth0VerificationTitle")}),h.jsx("p",{children:ee("error.auth0VerificationDescription")}),h.jsxs("div",{className:"mt-12 w-full",children:[h.jsx(AN,{className:"mb-2 text-base",htmlFor:"birthdate-month",content:ee("error.auth0VerificationBirthdate"),required:!0}),h.jsxs("div",{id:"birthdate-group",className:"flex gap-2",children:[h.jsx(_m,{renderOption:T,options:S,onSelect:_=>u(_),id:"birthdate-month","aria-labelledby":"birthdate-group",placeholder:ee("dates.month"),className:W("flex-1",ra,n===!1&&HS),value:c,isValid:n,menuClassName:Zt.dropdownMenuOverModal}),h.jsx(_m,{renderOption:T,options:E,onSelect:_=>f(_),id:"birthdate-day","aria-labelledby":"birthdate-group",placeholder:ee("dates.day"),className:W("flex-1",ra,n===!1&&HS),value:d,menuClassName:Zt.dropdownMenuOverModal}),h.jsx(_m,{renderOption:T,options:I,onSelect:_=>a(_),id:"birthdate-year","aria-labelledby":"birthdate-group",placeholder:ee("dates.year"),className:W("flex-1",ra,n===!1&&HS),value:s,menuClassName:Zt.dropdownMenuOverModal})]}),n===!1&&h.jsx("div",{className:W("mt-2 text-start text-system-red-550 text-sm dark:text-system-red-350"),children:ee("error.authh0VerificationAgeError")})]}),h.jsxs("div",{className:"mt-12 w-full",children:[h.jsx(AN,{className:"mb-2 text-base",htmlFor:"country",content:ee("error.auth0VerificationCountryRegion"),required:!0}),h.jsx(_m,{renderOption:T,options:w,onSelect:_=>g(_),id:"country","aria-labelledby":"country-group",placeholder:ee("error.auth0VerificationCountryRegion"),className:W("flex-1",ra),value:p,menuClassName:Zt.dropdownMenuOverModal})]}),h.jsxs("div",{className:"mt-12 w-full text-black text-2xs dark:text-white/90",children:[h.jsx($o,{i18nKey:ee("error.auth0VerificationDisclaimer"),components:{termsLink:ON.termsLink,privacyLink:ON.privacyLink}}),h.jsx(Ue,{className:"mt-4 w-full",color:"strong",size:"56-xl",variant:"rect",onClick:A,title:ee("common.continue"),disabled:t,children:ee("common.continue")})]})]})]})}function LN(t){var e,n;return((n=(e=ye.instance().config()).textOverrides)==null?void 0:n.call(e,t))??t}const zS="w-full";function mde(){const{switchMicrosoftAccount:t,logout:e,login:n}=Vd(),{t:r}=He(),o=nl(),i=async()=>{await t()},s=async(u,d)=>{switch(await e(),u){case"microsoft":n({provider:u});break;case"auth0":n({provider:u,opts:d});break}},a=ye.instance().config().hideAgeVerificationButton!==!0,c=ye.instance().config().hideAgeVerificationSwitchAccountButton!==!0;return h.jsxs(h.Fragment,{children:[h.jsx(yl,{forceGradient:!0}),h.jsxs("section",{className:"relative z-10 m-auto flex h-dvh max-w-96 flex-col items-center justify-center gap-3 px-5 text-center",children:[h.jsx("h1",{className:"text-3xl",children:r(LN("error.ageVerificationTitle"))}),h.jsx("h2",{className:"text-foreground-600",children:r(LN("error.ageVerification"))}),a&&h.jsx(Ue,{className:"mt-6 w-full",color:"default",size:"56-xl",variant:"rect",title:r("error.ageVerificationVerifyAge"),onClick:()=>{xp(Qz)},children:r("error.ageVerificationVerifyAge")}),a&&h.jsx("div",{className:"text-balance text-foreground-600",children:r("error.ageVerificationOr")}),o?h.jsxs(h.Fragment,{children:[h.jsxs(Ue,{onClick:()=>s("microsoft"),color:"default",title:r("signInPrompt.continueWithMicrosoft"),variant:"pill",size:"56-xl",className:W(zS),children:[h.jsx(Zv,{className:"size-6"}),r("signInPrompt.continueWithMicrosoft")]}),h.jsxs(Ue,{onClick:()=>s("auth0",{connection:"apple"}),color:"default",variant:"pill",size:"56-xl",title:r("signInPrompt.continueWithApple"),className:W(zS),children:[h.jsx(hI,{className:"size-6 text-black dark:text-white"}),r("signInPrompt.continueWithApple")]}),h.jsxs(Ue,{onClick:()=>s("auth0",{connection:"google"}),color:"default",variant:"pill",size:"56-xl",title:r("signInPrompt.continueWithGoogle"),className:W(zS),children:[h.jsx(fI,{className:"size-6"}),r("signInPrompt.continueWithGoogle")]})]}):c&&h.jsx(Ue,{className:"w-full",color:"default",size:"56-xl",variant:"rect",title:r("error.ageVerificationSwitchAccount"),onClick:i,children:r("error.ageVerificationSwitchAccount")})]})]})}function gde(){const t=O(In);return(t==null?void 0:t.provider)==="auth0"?h.jsx(pde,{}):h.jsx(mde,{})}const gU=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M12 4.5C7.85786 4.5 4.5 7.85786 4.5 12C4.5 16.1421 7.85786 19.5 12 19.5C16.1421 19.5 19.5 16.1421 19.5 12C19.5 11.6236 19.4723 11.2538 19.4188 10.8923C19.3515 10.4382 19.6839 10 20.1429 10C20.5138 10 20.839 10.2562 20.8953 10.6228C20.9642 11.0718 21 11.5317 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3C14.3051 3 16.4077 3.86656 18 5.29168V4.25C18 3.83579 18.3358 3.5 18.75 3.5C19.1642 3.5 19.5 3.83579 19.5 4.25V7.25C19.5 7.66421 19.1642 8 18.75 8H15.75C15.3358 8 15 7.66421 15 7.25C15 6.83579 15.3358 6.5 15.75 6.5H17.0991C15.7609 5.25883 13.9691 4.5 12 4.5Z",fill:"currentColor"})),xxe=Object.freeze(Object.defineProperty({__proto__:null,default:gU},Symbol.toStringTag,{value:"Module"}));function vde(t){const{t:e}=He(),{onBtnClick:n=()=>{}}=t;return h.jsxs("section",{className:"relative z-10 m-auto flex h-full max-w-96 flex-col items-center justify-center gap-3 px-5 text-center",children:[h.jsx("h1",{className:"text-3xl",children:e("error.unhandledErrorTitle")}),h.jsx("h2",{className:"text-foreground-600",children:e("error.unhandledError")}),h.jsxs(Ue,{className:"mt-6 w-full",color:"default",size:"56-xl",variant:"rect",title:e("error.unhandledErrorReload"),onClick:n,children:[h.jsx(gU,{className:"size-6"}),e("error.unhandledErrorReload")]})]})}function eA(){return h.jsxs("main",{className:"relative size-full overflow-hidden",children:[h.jsx(yl,{forceGradient:!0}),h.jsx(vde,{onBtnClick:()=>{ub()}})]})}function vU(t){const{deferred:e=!1}=t??{},n=Q2(),[r,o]=lt(TM),i=_e(kp);m.useEffect(()=>{const c=E$();c&&o(c)},[n.search,o]);const s=m.useCallback(()=>{o(null)},[o]),a=m.useCallback(c=>{c&&i({source:"promptInUrl",prompt:c})},[i]);return m.useEffect(()=>{r&&!e&&a(r)},[e,a,r]),{prompt:r,handler:e?a:void 0,clear:s}}function yde(){const t=me("prompt-pt-learn-partial"),e=me("prompt-pt-learn-full"),n=me("prompt-pt-learn-fill"),r=me("prompt-pt-advice-partial"),o=me("prompt-pt-advice-full"),i=me("prompt-pt-advice-fill"),s=me("prompt-pt-ideas-partial"),a=me("prompt-pt-ideas-full"),c=me("prompt-pt-ideas-fill"),u=me("prompt-pt-msn-answers"),d=me("prompt-pt-msn-headlines"),f=me("prompt-pt-msn-events"),p=me("prompt-pt-msn-answers-full"),g=me("prompt-pt-msn-headlines-full"),v=me("prompt-pt-msn-events-full"),b=V.getFormCode();let y=null,C=!1,S=!1,w=!1;switch(b){case"NTPCHB":{t||e||n?y="teach":r||o||i?y="advice":(s||a||c)&&(y="ideas"),C=t||r||s,S=e||o||a,w=n||i||c;break}case"MSNCHB":{u||p?y="answers":d||g?y="headlines":(f||v)&&(y="events"),S=p||g||v,w=u||d||f;break}default:y=null}let E=null;C?E="prefix":(S||w)&&(E="complete");let I=null;return C||w?I="partial":S&&(I="full"),{formCode:b,treatment:y,lengthVariant:E,passthroughType:I}}function tA(){var v,b;const t=me("labs-actions"),e=O(xd),n=me("labs-actions-skipprocheck"),r=me("freemium-actions-upsell")&&ye.instance().config().proSubscription.enabled,o=Pr(),i=!!O(Iy),s=O(Vr),a=!s||YO.includes(s),c=((v=ye.instance().config().actions)==null?void 0:v.overrideFreemiumActionsUpsellFeatureEnabled)??!1,u=(r||c)&&o&&!i&&!a,d=O(Qh),f=((b=ye.instance().config().actions)==null?void 0:b.overrideLabsActionsFeatureEnabled)??!1,[p,g]=m.useState(!1);return m.useEffect(()=>{async function y(){var S;await(((S=ye.instance().config().actions)==null?void 0:S.enableActions)??(()=>Promise.resolve(!1)))()&&g(!0)}y().catch(()=>{})},[g,d]),(f||t)&&(e||n||u)&&p}async function bde(){var v,b,y;const t=et("labs-actions"),e=Ye(xd),n=et("labs-actions-skipprocheck"),r=et("freemium-actions-upsell")&&ye.instance().config().proSubscription.enabled,o=Pg(),i=Ye(Iy),s=Ye(Vr),a=!s||YO.includes(s),c=((v=ye.instance().config().actions)==null?void 0:v.overrideFreemiumActionsUpsellFeatureEnabled)??!1,u=(r||c)&&o&&!i&&!a;if(!Ye(Qh))return!1;const f=((b=ye.instance().config().actions)==null?void 0:b.overrideLabsActionsFeatureEnabled)??!1,g=await(((y=ye.instance().config().actions)==null?void 0:y.enableActions)??(()=>Promise.resolve(!1)))();return(f||t)&&(e||n||u)&&g}let tg=null;function Cde(){const t=_e(wn),e=tA();m.useEffect(()=>{const n=C$();tg===null&&(tg=n);const r=i=>i==="td"?"reasoning":e&&i==="ac"?"computerUse":null,o=r(n||tg);o&&t(o)},[t,e])}function Sde(){return tg}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var Ede=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,o){r.__proto__=o}||function(r,o){for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])},t(e,n)};return function(e,n){t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),wde=Object.prototype.hasOwnProperty;function Sw(t,e){return wde.call(t,e)}function Ew(t){if(Array.isArray(t)){for(var e=new Array(t.length),n=0;n<e.length;n++)e[n]=""+n;return e}if(Object.keys)return Object.keys(t);var r=[];for(var o in t)Sw(t,o)&&r.push(o);return r}function oo(t){switch(typeof t){case"object":return JSON.parse(JSON.stringify(t));case"undefined":return null;default:return t}}function ww(t){for(var e=0,n=t.length,r;e<n;){if(r=t.charCodeAt(e),r>=48&&r<=57){e++;continue}return!1}return!0}function Qa(t){return t.indexOf("/")===-1&&t.indexOf("~")===-1?t:t.replace(/~/g,"~0").replace(/\//g,"~1")}function yU(t){return t.replace(/~1/g,"/").replace(/~0/g,"~")}function Iw(t){if(t===void 0)return!0;if(t){if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(Iw(t[e]))return!0}else if(typeof t=="object"){for(var r=Ew(t),o=r.length,i=0;i<o;i++)if(Iw(t[r[i]]))return!0}}return!1}function DN(t,e){var n=[t];for(var r in e){var o=typeof e[r]=="object"?JSON.stringify(e[r],null,2):e[r];typeof o<"u"&&n.push(r+": "+o)}return n.join(`
`)}var bU=function(t){Ede(e,t);function e(n,r,o,i,s){var a=this.constructor,c=t.call(this,DN(n,{name:r,index:o,operation:i,tree:s}))||this;return c.name=r,c.index=o,c.operation=i,c.tree=s,Object.setPrototypeOf(c,a.prototype),c.message=DN(n,{name:r,index:o,operation:i,tree:s}),c}return e}(Error),Cn=bU,Ide=oo,yu={add:function(t,e,n){return t[e]=this.value,{newDocument:n}},remove:function(t,e,n){var r=t[e];return delete t[e],{newDocument:n,removed:r}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:function(t,e,n){var r=Lv(n,this.path);r&&(r=oo(r));var o=_c(n,{op:"remove",path:this.from}).removed;return _c(n,{op:"add",path:this.path,value:o}),{newDocument:n,removed:r}},copy:function(t,e,n){var r=Lv(n,this.from);return _c(n,{op:"add",path:this.path,value:oo(r)}),{newDocument:n}},test:function(t,e,n){return{newDocument:n,test:Wf(t[e],this.value)}},_get:function(t,e,n){return this.value=t[e],{newDocument:n}}},Tde={add:function(t,e,n){return ww(e)?t.splice(e,0,this.value):t[e]=this.value,{newDocument:n,index:e}},remove:function(t,e,n){var r=t.splice(e,1);return{newDocument:n,removed:r[0]}},replace:function(t,e,n){var r=t[e];return t[e]=this.value,{newDocument:n,removed:r}},move:yu.move,copy:yu.copy,test:yu.test,_get:yu._get};function Lv(t,e){if(e=="")return t;var n={op:"_get",path:e};return _c(t,n),n.value}function _c(t,e,n,r,o,i){if(n===void 0&&(n=!1),r===void 0&&(r=!0),o===void 0&&(o=!0),i===void 0&&(i=0),n&&(typeof n=="function"?n(e,0,t,e.path):Dv(e,0)),e.path===""){var s={newDocument:t};if(e.op==="add")return s.newDocument=e.value,s;if(e.op==="replace")return s.newDocument=e.value,s.removed=t,s;if(e.op==="move"||e.op==="copy")return s.newDocument=Lv(t,e.from),e.op==="move"&&(s.removed=t),s;if(e.op==="test"){if(s.test=Wf(t,e.value),s.test===!1)throw new Cn("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return s.newDocument=t,s}else{if(e.op==="remove")return s.removed=t,s.newDocument=null,s;if(e.op==="_get")return e.value=t,s;if(n)throw new Cn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",i,e,t);return s}}else{r||(t=oo(t));var a=e.path||"",c=a.split("/"),u=t,d=1,f=c.length,p=void 0,g=void 0,v=void 0;for(typeof n=="function"?v=n:v=Dv;;){if(g=c[d],g&&g.indexOf("~")!=-1&&(g=yU(g)),o&&(g=="__proto__"||g=="prototype"&&d>0&&c[d-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(u[g]===void 0?p=c.slice(0,d).join("/"):d==f-1&&(p=e.path),p!==void 0&&v(e,0,t,p)),d++,Array.isArray(u)){if(g==="-")g=u.length;else{if(n&&!ww(g))throw new Cn("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",i,e,t);ww(g)&&(g=~~g)}if(d>=f){if(n&&e.op==="add"&&g>u.length)throw new Cn("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",i,e,t);var s=Tde[e.op].call(e,u,g,t);if(s.test===!1)throw new Cn("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return s}}else if(d>=f){var s=yu[e.op].call(e,u,g,t);if(s.test===!1)throw new Cn("Test operation failed","TEST_OPERATION_FAILED",i,e,t);return s}if(u=u[g],n&&d<f&&(!u||typeof u!="object"))throw new Cn("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",i,e,t)}}}function fc(t,e,n,r,o){if(r===void 0&&(r=!0),o===void 0&&(o=!0),n&&!Array.isArray(e))throw new Cn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(t=oo(t));for(var i=new Array(e.length),s=0,a=e.length;s<a;s++)i[s]=_c(t,e[s],n,!0,o,s),t=i[s].newDocument;return i.newDocument=t,i}function _de(t,e,n){var r=_c(t,e);if(r.test===!1)throw new Cn("Test operation failed","TEST_OPERATION_FAILED",n,e,t);return r.newDocument}function Dv(t,e,n,r){if(typeof t!="object"||t===null||Array.isArray(t))throw new Cn("Operation is not an object","OPERATION_NOT_AN_OBJECT",e,t,n);if(yu[t.op]){if(typeof t.path!="string")throw new Cn("Operation `path` property is not a string","OPERATION_PATH_INVALID",e,t,n);if(t.path.indexOf("/")!==0&&t.path.length>0)throw new Cn('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",e,t,n);if((t.op==="move"||t.op==="copy")&&typeof t.from!="string")throw new Cn("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&t.value===void 0)throw new Cn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",e,t,n);if((t.op==="add"||t.op==="replace"||t.op==="test")&&Iw(t.value))throw new Cn("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",e,t,n);if(n){if(t.op=="add"){var o=t.path.split("/").length,i=r.split("/").length;if(o!==i+1&&o!==i)throw new Cn("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",e,t,n)}else if(t.op==="replace"||t.op==="remove"||t.op==="_get"){if(t.path!==r)throw new Cn("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",e,t,n)}else if(t.op==="move"||t.op==="copy"){var s={op:"_get",path:t.from,value:void 0},a=CU([s],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Cn("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",e,t,n)}}}else throw new Cn("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",e,t,n)}function CU(t,e,n){try{if(!Array.isArray(t))throw new Cn("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(e)fc(oo(e),oo(t),n||!0);else{n=n||Dv;for(var r=0;r<t.length;r++)n(t[r],r,e,void 0)}}catch(o){if(o instanceof Cn)return o;throw o}}function Wf(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){var n=Array.isArray(t),r=Array.isArray(e),o,i,s;if(n&&r){if(i=t.length,i!=e.length)return!1;for(o=i;o--!==0;)if(!Wf(t[o],e[o]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(t);if(i=a.length,i!==Object.keys(e).length)return!1;for(o=i;o--!==0;)if(!e.hasOwnProperty(a[o]))return!1;for(o=i;o--!==0;)if(s=a[o],!Wf(t[s],e[s]))return!1;return!0}return t!==t&&e!==e}const Ade=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Cn,_areEquals:Wf,applyOperation:_c,applyPatch:fc,applyReducer:_de,deepClone:Ide,getValueByPointer:Lv,validate:CU,validator:Dv},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var nA=new WeakMap,kde=function(){function t(e){this.observers=new Map,this.obj=e}return t}(),xde=function(){function t(e,n){this.callback=e,this.observer=n}return t}();function Rde(t){return nA.get(t)}function Nde(t,e){return t.observers.get(e)}function Pde(t,e){t.observers.delete(e.callback)}function Ode(t,e){e.unobserve()}function Mde(t,e){var n=[],r,o=Rde(t);if(!o)o=new kde(t),nA.set(t,o);else{var i=Nde(o,e);r=i&&i.observer}if(r)return r;if(r={},o.value=oo(t),e){r.callback=e,r.next=null;var s=function(){Tw(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(s)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=t,r.unobserve=function(){Tw(r),clearTimeout(r.next),Pde(o,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},o.observers.set(e,new xde(e,r)),r}function Tw(t,e){e===void 0&&(e=!1);var n=nA.get(t.object);rA(n.value,t.object,t.patches,"",e),t.patches.length&&fc(n.value,t.patches);var r=t.patches;return r.length>0&&(t.patches=[],t.callback&&t.callback(r)),r}function rA(t,e,n,r,o){if(e!==t){typeof e.toJSON=="function"&&(e=e.toJSON());for(var i=Ew(e),s=Ew(t),a=!1,c=s.length-1;c>=0;c--){var u=s[c],d=t[u];if(Sw(e,u)&&!(e[u]===void 0&&d!==void 0&&Array.isArray(e)===!1)){var f=e[u];typeof d=="object"&&d!=null&&typeof f=="object"&&f!=null&&Array.isArray(d)===Array.isArray(f)?rA(d,f,n,r+"/"+Qa(u),o):d!==f&&(o&&n.push({op:"test",path:r+"/"+Qa(u),value:oo(d)}),n.push({op:"replace",path:r+"/"+Qa(u),value:oo(f)}))}else Array.isArray(t)===Array.isArray(e)?(o&&n.push({op:"test",path:r+"/"+Qa(u),value:oo(d)}),n.push({op:"remove",path:r+"/"+Qa(u)}),a=!0):(o&&n.push({op:"test",path:r,value:t}),n.push({op:"replace",path:r,value:e}))}if(!(!a&&i.length==s.length))for(var c=0;c<i.length;c++){var u=i[c];!Sw(t,u)&&e[u]!==void 0&&n.push({op:"add",path:r+"/"+Qa(u),value:oo(e[u])})}}}function Lde(t,e,n){n===void 0&&(n=!1);var r=[];return rA(t,e,r,"",n),r}const Dde=Object.freeze(Object.defineProperty({__proto__:null,compare:Lde,generate:Tw,observe:Mde,unobserve:Ode},Symbol.toStringTag,{value:"Module"}));Object.assign({},Ade,Dde,{JsonPatchError:bU,deepClone:oo,escapePathComponent:Qa,unescapePathComponent:yU});function jde(t){var n;const e=[];for(const r of t){if(r.type!=="product"&&r.type!=="propertyPromotion"&&r.type!=="tourActivity")return null;if(!r.tags)continue;if(r.tags.length>1)return null;const o=r.tags[0];if(!(!o||!o.value))if(e.length===0)e.push(o);else{if(((n=e[0])==null?void 0:n.category)!==o.category)return null;e.find(i=>i.value===o.value)||e.push(o)}}return e}function Rxe(t,e){var n;return t!=null&&t.length?JSON.stringify({tagCategory:(n=t[0])==null?void 0:n.category,tagValue:(e==null?void 0:e.value)??"recommended",tagPosition:e?t.indexOf(e)+1:null,tagCount:t.length}):""}function Ude(t){return t.every(e=>e.type==="product"||e.type==="propertyPromotion"||e.type==="tourActivity")}function Nxe(t,e,n){let r=t;return e!=null&&e.length&&n?r=t.filter(o=>{var i;return o.tags&&((i=o.tags[0])==null?void 0:i.value)===n.value}):e!=null&&e.length&&!n&&(r=t.filter(o=>!o.tags)),r}class Fde{constructor(e){J(this,"startTime",0);J(this,"timeToFirstToken",0);J(this,"receivedFirstToken",!1);J(this,"receivedLastToken",!1);J(this,"currentAdditionalData");J(this,"currentMessageId","");J(this,"receivedMessageTime",0);J(this,"startMessageTime",0);J(this,"mostRecentTokenTime",0);this.startTime=e}resetStartTime(e){this.startTime=e,this.timeToFirstToken=0}onBeforeSend(){this.receivedFirstToken=!1,this.receivedLastToken=!1}onSent(e){this.currentAdditionalData=e}onReceived(e){this.receivedMessageTime=performance.now(),V.trackEvent({name:"system",data:{eventName:"copilotChatRequest",eventInfo_additionalData:this.currentAdditionalData,eventInfo_duration:this.receivedMessageTime-this.startTime,eventInfo_conversationId:e.conversationId,eventInfo_messageId:this.currentMessageId,eventInfo_mode:e.chatMode}})}onStartMessage(e){this.startMessageTime=performance.now(),this.currentMessageId=e.messageId,this.receivedMessageTime||(this.receivedMessageTime=this.startTime),V.trackEvent({name:"system",data:{eventName:"copilotChatReqToResp",eventInfo_duration:this.startMessageTime-this.receivedMessageTime,eventInfo_additionalData:this.currentAdditionalData,eventInfo_conversationId:e.conversationId,eventInfo_messageId:e.messageId,eventInfo_mode:e.chatMode}})}onFirstToken(e,n,r){if(!this.receivedFirstToken&&e===this.currentMessageId){const o=performance.now()-this.startTime;this.timeToFirstToken=o,this.receivedFirstToken=!0,V.trackEvent({name:"system",data:{eventName:"copilotChatRespToReceived",eventInfo_additionalData:this.currentAdditionalData,eventInfo_conversationId:r,eventInfo_duration:performance.now()-this.receivedMessageTime,eventInfo_messageId:e,eventInfo_mode:n}}),V.trackEvent({name:"system",data:{eventName:"copilotFirstTokenReceived",eventInfo_conversationId:r,eventInfo_messageId:e,eventInfo_duration:o,eventInfo_mode:n,eventInfo_additionalData:this.currentAdditionalData}})}this.mostRecentTokenTime=performance.now()}onLastToken(e){const{citationCount:n,imageCount:r,messageId:o,inputMethod:i,conversationId:s,chatMode:a,chainOfThoughtCount:c}=e;if(!this.receivedLastToken&&o===this.currentMessageId){const u=this.mostRecentTokenTime-this.startTime;this.receivedLastToken=!0,V.trackEvent({name:"system",data:{eventName:"copilotResponseRender",eventInfo_conversationId:s,eventInfo_messageId:o,eventInfo_numCitations:n,eventInfo_numImagesGenerated:r,eventInfo_numChainOfThoughts:c,eventInfo_inputMethod:i,eventInfo_responseMethod:"text",eventInfo_mode:a,eventInfo_additionalData:this.currentAdditionalData,eventInfo_landingPage:V.getLandingPage(),eventInfo_firstToLastTokenDuration:u-this.timeToFirstToken}}),V.trackEvent({name:"system",data:{eventName:"copilotLastTokenReceived",eventInfo_conversationId:s,eventInfo_messageId:o,eventInfo_duration:u,eventInfo_mode:a,eventInfo_additionalData:this.currentAdditionalData}}),V.trackEvent({name:"system",data:{eventName:"copilotChatE2E",eventInfo_conversationId:s,eventInfo_messageId:o,eventInfo_duration:performance.now()-this.startTime,eventInfo_mode:a,eventInfo_additionalData:this.currentAdditionalData}}),this.currentAdditionalData=void 0}}onAdsRender(e){const n=performance.now()-this.startTime,{ads:r}=e,i=(r==null?void 0:r.find(c=>c.type==="miniShowroom"))??(r&&r.length>0?r[0]:void 0),s=r&&Ude(r)?jde(r):[],a=r==null?void 0:r.find(c=>c.type==="mainShowroom");V.trackEvent({name:"system",data:{eventName:"copilotAdsSignal",eventInfo_scenario:"render",eventInfo_adType:i==null?void 0:i.type,eventInfo_adCount:r==null?void 0:r.length,eventInfo_rguid:e.requestId,eventInfo_messageId:e.messageId,eventInfo_conversationId:e.conversationId,eventInfo_duration:n,eventInfo_additionalData:JSON.stringify({eventType:e.eventType,adTags:s!=null&&s.length?s:void 0,brandId:a==null?void 0:a.brandId})}})}onSubmitMessageBlocked(e,n,r){V.trackEvent({name:"interaction",data:{eventName:"copilotUserInputBlocked",eventInfo_inputMethod:n,eventInfo_mode:e,eventInfo_messageId:this.currentMessageId,eventInfo_conversationId:r,eventInfo_duration:performance.now()-this.startTime,eventInfo_additionalData:this.currentAdditionalData}})}onImageGenerationStart(e){const{messageId:n,conversationId:r,chatMode:o}=e,s=performance.now()-this.startTime;V.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"ImageGenStarted",eventInfo_messageId:n,eventInfo_conversationId:r,eventInfo_mode:o,eventInfo_duration:s}})}onImageReceived(e){const{messageId:n,conversationId:r,chatMode:o}=e,i=performance.now()-this.startTime;V.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"ImageGenReceived",eventInfo_messageId:n,eventInfo_conversationId:r,eventInfo_mode:o,eventInfo_duration:i}})}onPartialImageReceived(e){const{messageId:n,imageGenPhase:r,conversationId:o,chatMode:i}=e,s=performance.now()-this.startTime;V.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"PartialImageGenReceived",eventInfo_messageId:n,eventInfo_conversationId:o,eventInfo_mode:i,eventInfo_duration:s,eventInfo_customData:`${r}`}})}onMemorySignalReceived(e){const{messageId:n,conversationId:r}=e,i=performance.now()-this.startTime;V.trackEvent({name:"system",data:{eventName:"copilotFeatureLatency",eventInfo_scenario:"MemorySignalReceived",eventInfo_messageId:n,eventInfo_conversationId:r,eventInfo_duration:i}})}onChainOfThoughtReceived(e){const{messageId:n,conversationId:r,chatMode:o}=e,i=performance.now()-this.startTime;V.trackEvent({name:"system",data:{eventName:"copilotCoTFirstTokenReceived",eventInfo_messageId:n,eventInfo_conversationId:r,eventInfo_mode:o,eventInfo_duration:i}})}}function Bde(t,e,n){switch(t.type){case"research":return{type:"task",task:{id:t.id,type:t.type,contents:[],partialOutput:[],inlineCitations:[],status:"pending",prompt:t.prompt},partId:e};case"computerUse":return{type:"task",task:{id:t.id,conversationId:t.conversationId,type:t.type,status:"running",updatedAt:n},partId:e};case"podcast":return{type:"task",task:{id:t.id,type:t.type,status:t.status,podcast:t.podcast,updatedAt:t.updatedAt??n},partId:e};default:return null}}const Hde=M(t=>t(bl).isOpen||t(SU)),bl=M({isOpen:!1,scenario:null}),SU=M(t=>{const e=t(Nc);return e===null?!1:e===0||t(wM).includes(e)}),zde=M(t=>{const e=t(SU),n=t(tl("location-prompt")),r=t(li).filter(({author:i})=>i==="human").length,o=!!mn(O$);return e||!n||o?!1:r===Fz}),Gd=M(null);function EU({path:t,args:e,onLoad:n,alt:r,...o}){const{data:i,isLoading:s}=vl(t,async a=>{const u=await(await Qc(a,e)).blob();return URL.createObjectURL(u)});return m.useEffect(()=>{!s&&n&&n()},[s,n]),s?h.jsx("div",{...o}):h.jsx("img",{...o,src:i,alt:r})}const jN=rt();function Vde(t){var e,n;if(t.status==="completed"){const r=jN.get(ft);if(_l.latestLocation.pathname.startsWith("/chats")&&r&&t.conversationId===r)return;jN.set(Gd,{iconProvider:()=>{var o,i,s;return h.jsx(EU,{path:`/podcasts/user/${(o=t.podcast)==null?void 0:o.id}/Files/${(s=(i=t.podcast)==null?void 0:i.thumbnail)==null?void 0:s.name}`,className:"rounded-xl object-cover"})},title:ee("podcasts.generationNotification.title"),subtitle:((e=t.podcast)==null?void 0:e.title)??"",action:()=>{var o;Ay({from:window.location.pathname,to:`/podcasts/user/${(o=t.podcast)==null?void 0:o.id}`})},trackingArgs:{scenario:"podcastGenerationNotification",customData:JSON.stringify({podcastId:(n=t.podcast)==null?void 0:n.id})},dismissAfter:3e4})}}const UN=rt();function $de(t,e){const n=UN.get(ft);if(!n||n===e)return;const r={title:ee("research.generationNotification.title"),subtitle:ee("research.generationNotification.subTitle"),link:ee("research.generationNotification.subTitleLink"),action:()=>{Ay({from:window.location.pathname,to:`/chats/${e}`})},dismissable:!0,trackingArgs:{scenario:"researchCompletionNotification",customData:JSON.stringify({researchId:t.id,sourceConversationId:e})}};UN.set(Gd,r)}function Gde(){const t=O(ri),e=O(ft);return m.useMemo(()=>{if(e){for(const n of t.values())if(n.conversationId===e)return n}},[e,t])}function Kde(){const t=rt(),e=t.get(ri),n=t.get(ft);if(n){for(const r of e.values())if(r.conversationId===n)return r}}const Ni=rt(),Wde="MissingUrlFromApi";function qde(t,e){const n=Ni.get(ri).get(t);return(n==null?void 0:n.type)==="computerUse"&&!n.lastUserCommand&&Yde(n)&&e.some(o=>o.op==="replace"&&o.path==="/status"&&o.value==="paused")?_w(e,["userTakeControl","pauseByClick"]):!1}function wU(t){return t==="paused"||t==="running"||t==="pending"}function Yde(t){var e,n;return t.status==="paused"&&(((e=t.statusChange)==null?void 0:e.reason)==="safetyRiskDetected"||((n=t.statusChange)==null?void 0:n.reason)==="askUserInput")}function Qde(t){var e;return t.status==="paused"&&((e=t.statusChange)==null?void 0:e.reason)==="safetyRiskDetected"}function Jde(t){var e;return t.status==="paused"&&((e=t.statusChange)==null?void 0:e.reason)==="userTakeControl"&&t.lastUserCommand==="takeTaskControl"}function VS(t,e=!1){return t.map(n=>({type:"chainOfThought",text:n.text,screenshotUrl:e?Wde:null,reaction:null,partId:Math.random().toString()}))}function _w(t,e){return t.some(n=>{if(n.op==="replace"&&n.path==="/statusChange"){const{value:r}=n;if(typeof r=="object"&&r!==null&&"reason"in r){const{reason:o}=r;if(typeof o=="string"){const i=$M.safeParse(o);return i.success&&e.includes(i.data)}}}return!1})}function Xde(t,e){const n=Ni.get(ri).get(t);if((n==null?void 0:n.type)==="computerUse"){const{conversationId:r,status:o,statusChange:i}=n;if(!r)return;if(o==="cancelled"&&Wt(r,d=>{const f=FN(t,"cancelTask");d.push(f)}),_w(e,["giveBackControl"])?Wt(r,d=>{const f=FN(t,"takeTaskControl");d.push(f)}):(i==null?void 0:i.reason)==="giveBackControl"&&BN(t),_w(e,["taskCompleted"])&&Wt(r,d=>{const f={id:Math.random().toString(),createdAt:new Date().toISOString(),author:"ai",content:[{type:"card",partId:Math.random().toString(),card:{type:"computerUseFeedback"}}]};d.push(f)}),i)switch(i.reason){case"askUserInput":case"safetyRiskDetected":{o==="paused"?(i.reason==="askUserInput"&&Pc({feature:"computerUse",scenario:"askUserInput",customData:JSON.stringify({id:n.id,conversationId:n.conversationId})}),r===Ni.get(ft)||Ni.set(Gd,{title:n.title&&n.title!==""?ee("actions.alertTitleTemplate",{conversationName:n.title}):ee("actions.defaultAlertTitle"),subtitle:i.reason==="safetyRiskDetected"?ee("actions.safetyRiskAlertSubTitle"):ee("actions.askUserInputAlertSubTitle"),action:()=>uD({id:r}),dismissAfter:30*1e3,dismissable:!0}),bT(t,f=>{"lastUserCommand"in f&&(f.lastUserCommand=void 0)})):BN(t);break}}const c=e.filter(d=>d.op==="add"&&d.path==="/chainOfThought/-").map(d=>({text:"value"in d?d.value:""}));c.length>0&&Wt(r,d=>{if(d.length===0)return;const f=HN(d);if(f)f.push(...VS(c));else{const p={id:Math.random().toString(),createdAt:new Date().toISOString(),author:"ai",content:VS(c)};d.push(p)}}),e.filter(d=>d.op==="replace"&&d.path==="/computerAction").length>0&&Wt(r,d=>{const f=HN(d);f&&f.push(...VS([{text:n.computerAction??""}],!0))})}}function FN(t,e){return{id:Math.random().toString(),createdAt:new Date().toISOString(),author:"human",content:[{type:"command",command:{type:e,taskId:t}}]}}function BN(t){bT(t,e=>{"statusChange"in e&&(e.statusChange=void 0)})}function HN(t){const e=t.at(-1);if(e&&e.author==="ai"&&e.content.find(n=>n.type==="chainOfThought"))return e.content}function Pxe(t){const e=Kde();return(e==null?void 0:e.type)==="computerUse"?e.status!=="running"&&!e.isReplaying?!0:!t:!0}function Oxe(t){return!!(et("labs-actions-replay")&&t&&t.type==="computerUse"&&!wU(t.status))}function Mxe(t){return{cancelTask:"copilotActionsCancelTask",takeTaskControl:"copilotActionsTakeControl",startTask:void 0,pauseTask:void 0,resumeTask:void 0,releaseTaskControl:void 0}[t]}function IU(t){return nD({tasks:Ni.get(ri),conversationId:t,taskType:"computerUse"})}function Zde(t,e){if(t===e&&Ni.set(Ar,"side-by-side"),!et("actions-auto-open-L2")||!t)return;const r=Ni.get(ft);r&&Ni.set(Ig,r),Ni.set(ft,t),Ni.set(Ar,"side-by-side")}function Lxe(t,e,n){V.trackEvent({name:"interaction",data:{eventName:"activityArtifactDrawerOpened",eventInfo_messageId:t,eventInfo_partId:e,eventInfo_messageType:n}})}function ehe(t){V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"handleActivityStart",eventInfo_errorMessage:`Could not find message with ID ${t} to start activity`,eventInfo_details:"Error starting activity"}})}function the(t,e){V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"handleActivityUpdate",eventInfo_errorMessage:`Could not find activity message with partId ${e} in message with ID ${t}`,eventInfo_details:"Error updating activity"}})}function nhe(t){V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"handleActivityUpdate",eventInfo_errorMessage:`${t}`,eventInfo_details:"Error updating activity"}})}const rhe=rt();function ohe({entryAd:t,mainAd:e,messageId:n,partId:r,conversationId:o}){let i=!1;const s=rhe.get(ol);return(!s&&t&&e||(s==null?void 0:s.conversationId)===o&&!t&&e&&e.brandId===s.brandId)&&(i=!0),i||V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"AdsError",eventInfo_details:JSON.stringify({messageId:n,partId:r,conversationId:o,hasEntryAd:!!t,hasMainAd:!!e,mainAdBrandId:e==null?void 0:e.brandId,isShowroomOpened:!!s,showroomBrandId:s==null?void 0:s.brandId}),eventInfo_errorMessage:`Unexpcted showroom data received when showroom is ${s?"opened":"closed"}`}}),i}function ihe({card:t,messageId:e,partId:n,conversationState:r,conversationId:o}){const{ads:i}=t;if(r.timing.onAdsRender({requestId:t.requestId,messageId:e,conversationId:o,eventType:"card",ads:i}),i!=null&&i.some(s=>s.type==="mainShowroom"||s.type==="miniShowroom")){const s=i[0],a=(s==null?void 0:s.type)==="miniShowroom",c=a?s:void 0,u=a?i[1]:s;if(!ohe({entryAd:c,partId:n,conversationId:o,messageId:e,mainAd:(u==null?void 0:u.type)==="mainShowroom"?u:void 0}))return}Wt(o,s=>{const a=Yn(s,e);a&&a.content.push({type:"card",partId:n,card:t})})}const she=GI.extend({actionName:l.literal("edge_get_page_content"),parameters:l.array(l.object({tabId:l.number(),windowId:l.number(),pageUrl:l.string().nullish(),pageTitle:l.string().nullish(),pageType:l.string().nullish(),lastAccessedTime:l.number().nullish()}))}),ahe=l.discriminatedUnion("actionName",[she,YK]),che=rt();function lhe(t){che.set(yn,e=>xo(e,n=>{for(const{title:r,id:o,updatedAt:i,continuedAt:s}of t){const a=n.get(o);a?(a.title=r,a.id=o,a.updatedAt=i,a.continuedAt=s):n.set(o,{id:o,title:r,updatedAt:i,history:[],streamingState:"idle",continuedAt:s})}}))}const uhe=rt();function dhe(t,e,n){fhe(t.map(r=>hhe(r,e,n)).filter(r=>r!==void 0))}function hhe(t,e,n){switch(t.type){case"research":return{id:t.id,conversationId:e,type:t.type,status:t.status,updatedAt:""};case"computerUse":return{id:t.id,conversationId:t.conversationId??"",type:t.type,status:t.status,updatedAt:t.updatedAt??"",title:t.title??"",lastScreenshot:t.lastScreenshot};case"podcast":return{id:t.id,conversationId:e,status:t.status==="completed"?"completed":"running",type:t.type,podcast:t.podcast,updatedAt:t.updatedAt??n};default:return}}function fhe(t){uhe.set(ri,n=>xo(n,r=>{for(const o of t){const i=r.get(o.id);if(i)i.title=o.title,i.conversationId=o.conversationId,i.updatedAt=o.updatedAt,i.status=o.status,i.type=o.type,i.type==="computerUse"&&o.type==="computerUse"&&(i.lastScreenshot=o.lastScreenshot);else{const s={id:o.id,title:o.title,conversationId:o.conversationId,updatedAt:o.updatedAt,status:o.status,type:o.type};s.type==="computerUse"&&o.type==="computerUse"&&(s.chainOfThought=[],s.lastScreenshot=o.lastScreenshot),o.type==="podcast"&&s.type==="podcast"&&(s.podcast=o.podcast),r.set(o.id,s)}}}));const e=t.filter(n=>n.type==="computerUse"&&n.conversationId).map(n=>{const{conversationId:r,title:o,updatedAt:i}=n;return{id:r??"",title:o,updatedAt:i,continuedAt:null,history:[],streamingState:"idle"}});lhe(e)}const TU="cf-turnstile",phe=`#${TU}`;function mhe(){const t=O(Yh),e=O(ks);return ci("kill-cf-turnstile")?null:h.jsx(Ea,{isOpen:t,className:"w-3/4 sm:w-[350px]",children:h.jsx("div",{id:TU,className:"flex flex-1 items-center justify-center","data-theme":e})})}const ghe=new hl(()=>new Promise((t,e)=>{const n=setTimeout(()=>{e(new Error("CF Turnstile script took too long to load"))},15e3),r=document.createElement("script");r.type="text/javascript",r.defer=!0,r.src="https://challenges.cloudflare.com/turnstile/v0/api.js",r.onload=()=>{clearTimeout(n),t()},r.onerror=()=>{clearTimeout(n),e(new Error("Failed to load turnstile script"))},document.body.appendChild(r)}));async function vhe(t){if(Fi("kill-cf-turnstile")||Ye(Yh))return;const n=rt();V.trackEvent({name:"system",data:{eventName:"copilotTurnstileEvent",eventInfo_stage:"attempt"}}),Z2.flushSync(()=>{n.set(Yh,!0)});try{await ghe.get()}catch{n.set(xf,"cf-turnstile");return}try{window.turnstile.render(phe,{sitekey:"0x4AAAAAAAg146IpY3lPNWte",callback:async r=>{t(r),window.turnstile.remove(),n.set(Yh,!1),V.trackEvent({name:"system",data:{eventName:"copilotTurnstileEvent",eventInfo_stage:"success"}})},"error-callback":r=>{V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"turnstileRenderErrorCallback",eventInfo_details:"Error rendering CF Turnstile.",eventInfo_errorMessage:r}})}})}catch(r){V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"turnstileRender",eventInfo_details:"Error rendering CF Turnstile",eventInfo_errorMessage:r instanceof Error?r.message:""}}),n.set(xf,"cf-turnstile")}}function jv(t,e){return t?Date.now()-parseInt(t,10)<=e:!1}function oA(t,e){return!t||parseInt(t,10)<e}var z2;const yr=(z2=ye.instance().config().crossPromotion)==null?void 0:z2.aggressive;var V2,$2,G2,K2,W2;const Cl={"thumbs-up":{cardFeature:"cross-promo-card-thumbsup",popupFeature:"cross-promo-popup-thumbsup",cardConfig:(V2=yr==null?void 0:yr.card)==null?void 0:V2.thumbsUp,popupConfig:($2=yr==null?void 0:yr.popup)==null?void 0:$2.thumbsUp},copied:{cardFeature:void 0,popupFeature:"cross-promo-popup-copied",cardConfig:void 0,popupConfig:(G2=yr==null?void 0:yr.popup)==null?void 0:G2.copied},engaging:{cardFeature:void 0,popupFeature:"cross-promo-popup-engaging",cardConfig:void 0,popupConfig:(K2=yr==null?void 0:yr.popup)==null?void 0:K2.engaging},"think-deeper":{cardFeature:void 0,popupFeature:"cross-promo-popup-think-deeper",cardConfig:void 0,popupConfig:(W2=yr==null?void 0:yr.popup)==null?void 0:W2.thinkDeeper}};function yhe(){return{type:"popup",title:ee("crossSelling.aggressivePromotion.popup.thumbsUpTitle"),subTitle:ee("crossSelling.aggressivePromotion.popup.thumbsUpSubTitle"),images:Cl["thumbs-up"].popupConfig}}function bhe(){return{type:"card",title:ee("crossSelling.aggressivePromotion.card.thumbsUpTitle"),subTitle:ee("crossSelling.aggressivePromotion.card.thumbsUpSubTitle"),images:Cl["thumbs-up"].cardConfig}}function Che(){return{type:"popup",title:ee("crossSelling.aggressivePromotion.popup.copiedTitle"),subTitle:ee("crossSelling.aggressivePromotion.popup.copiedSubTitle"),images:Cl.copied.popupConfig}}function She(){return{type:"popup",title:ee("crossSelling.aggressivePromotion.popup.engagingTitle"),subTitle:ee("crossSelling.aggressivePromotion.popup.engagingSubTitle"),images:Cl.engaging.popupConfig}}function Ehe(){return{type:"popup",title:ee("crossSelling.aggressivePromotion.popup.thinkDeeperTitle"),subTitle:ee("crossSelling.aggressivePromotion.popup.thinkDeeperSubTitle"),images:Cl["think-deeper"].popupConfig}}function _U(t){const n=rt().get(HI),r=n===!0?!1:n!==void 0,o=mn(OI),i=!jv(o,2*vg),s=mn(wg),a=oA(s,2);r&&Ihe(t)&&i&&a&&The(t)}let zN=!1;function whe(){const e=rt().get(wn);!zN&&(e==="reasoning"||e==="research")&&(_U("think-deeper"),zN=!0)}function Ihe(t){return $h(t)||AU(t)}function $h(t){const e=Cl[t];return et(e.popupFeature)&&e.popupConfig!==void 0}function AU(t){const e=Cl[t];return e.cardFeature!==void 0&&et(e.cardFeature)&&e.cardConfig!==void 0&&!dM()}function The(t){const e=rt();t==="thumbs-up"&&$h(t)?e.set(ds,yhe()):t==="thumbs-up"&&AU(t)?e.set(ds,bhe()):t==="copied"&&$h(t)?e.set(ds,Che()):t==="engaging"&&$h(t)?e.set(ds,She()):t==="think-deeper"&&$h(t)&&e.set(ds,Ehe())}const $S=M({counter:0,isActive:!0});function _he(){const t=rt(),e=t.get($S);if(!e.isActive)return;const n=e.counter+1;n===Xz?(_U("engaging"),t.set($S,{counter:n,isActive:!1})):t.set($S,{counter:n,isActive:e.isActive})}const Ahe="group/ai-message-item space-y-3 break-words",khe=new Map([["1c","1C:Enterprise"],["abnf","Augmented Backus-Naur Form"],["accesslog","Apache Access Log"],["actionscript","ActionScript"],["ada","Ada"],["ado","Stata"],["adoc","AsciiDoc"],["ahk","AutoHotkey"],["angelscript","AngelScript"],["apache","Apache config"],["apacheconf","Apache config"],["applescript","AppleScript"],["arcade","ArcGIS Arcade"],["arduino","Arduino"],["arm","ARM Assembly"],["armasm","ARM Assembly"],["as","ActionScript"],["asc","AngelScript"],["asciidoc","AsciiDoc"],["aspectj","AspectJ"],["atom","HTML, XML"],["autohotkey","AutoHotkey"],["autoit","AutoIt"],["avrasm","AVR Assembly"],["awk","Awk"],["axapta","X++"],["bash","Bash"],["basic","BASIC"],["bat","Batch file (DOS)"],["bf","Brainfuck"],["bind","DNS Zone"],["bnf","Backus–Naur Form"],["brainfuck","Brainfuck"],["c","C"],["c#","C#"],["c++","C++"],["cal","C/AL"],["capnp","Cap’n Proto"],["capnproto","Cap’n Proto"],["cc","C++"],["ceylon","Ceylon"],["cjs","JavaScript"],["clean","Clean"],["clj","Clojure"],["clojure","Clojure"],["clojure-repl","Clojure REPL"],["cls","Caché Object Script"],["cmake","CMake"],["cmake.in","CMake"],["cmd","Batch file (DOS)"],["coffee","CoffeeScript"],["coffeescript","CoffeeScript"],["console","Shell Session"],["coq","Coq"],["cos","Caché Object Script"],["cpp","C++"],["cr","Crystal"],["craftcms","Twig"],["crm","crmsh"],["crmsh","crmsh"],["crystal","Crystal"],["cs","C#"],["csharp","C#"],["cson","CoffeeScript"],["csp","CSP"],["css","CSS"],["cts","TypeScript"],["cxx","C++"],["d","D"],["dart","Dart"],["dcl","Clean"],["delphi","Delphi"],["dfm","Delphi"],["diff","Diff"],["django","Django"],["dns","DNS Zone"],["do","Stata"],["docker","Dockerfile"],["dockerfile","Dockerfile"],["dos","Batch file (DOS)"],["dpr","Delphi"],["dsconfig","dsconfig"],["dst","Dust"],["dts","Device Tree"],["dust","Dust"],["ebnf","Extended Backus-Naur Form"],["edn","Clojure"],["elixir","Elixir"],["elm","Elm"],["erb","ERB"],["erl","Erlang"],["erlang","Erlang"],["erlang-repl","Erlang REPL"],["ex","Elixir"],["excel","Excel formulae"],["exs","Elixir"],["f#","F#"],["f90","Fortran"],["f95","Fortran"],["feature","Gherkin"],["fix","FIX"],["flix","Flix"],["fortran","Fortran"],["fs","F#"],["fsharp","F#"],["gams","GAMS"],["gauss","GAUSS"],["gcode","G-code (ISO 6983)"],["gemspec","Ruby"],["gherkin","Gherkin"],["glsl","GLSL"],["gml","GML"],["gms","GAMS"],["go","Go"],["golang","Go"],["golo","Golo"],["gql","GraphQL"],["gradle","Gradle"],["graph","Roboconf"],["graphql","GraphQL"],["groovy","Groovy"],["gss","GAUSS"],["gyp","Python"],["h","C"],["h++","C++"],["haml","HAML"],["handlebars","Handlebars"],["haskell","Haskell"],["haxe","Haxe"],["hbs","Handlebars"],["hh","C++"],["hpp","C++"],["hs","Haskell"],["hsp","HSP"],["html","HTML, XML"],["html.handlebars","Handlebars"],["html.hbs","Handlebars"],["htmlbars","Handlebars"],["http","HTTP"],["https","HTTP"],["hx","Haxe"],["hxx","C++"],["hy","Hy"],["hylang","Hy"],["i7","Inform 7"],["iced","CoffeeScript"],["icl","Clean"],["inform7","Inform 7"],["ini","TOML, also INI"],["ino","Arduino"],["instances","Roboconf"],["ipython","Python"],["irb","Ruby"],["irpf90","IRPF90"],["isbl","ISBL"],["java","Java"],["javascript","JavaScript"],["jboss-cli","JBoss CLI"],["jinja","Django"],["jldoctest","Julia REPL"],["js","JavaScript"],["json","JSON"],["jsonc","JSON"],["jsp","Java"],["jsx","JavaScript"],["julia","Julia"],["julia-repl","Julia REPL"],["k","Q"],["kdb","Q"],["kotlin","Kotlin"],["kt","Kotlin"],["kts","Kotlin"],["lasso","Lasso"],["lassoscript","Lasso"],["latex","LaTeX"],["ldif","LDIF"],["leaf","Leaf"],["less","Less"],["lisp","Lisp"],["livecodeserver","LiveCode"],["livescript","LiveScript"],["llvm","LLVM IR"],["ls","Lasso"],["ls","LiveScript"],["lsl","LSL (Linden Scripting Language)"],["lua","Lua"],["m","Mercury"],["mak","Makefile"],["make","Makefile"],["makefile","Makefile"],["markdown","Markdown"],["mathematica","Mathematica"],["matlab","Matlab"],["maxima","Maxima"],["md","Markdown"],["mel","MEL"],["mercury","Mercury"],["mikrotik","MikroTik RouterOS script"],["mips","MIPS Assembly"],["mipsasm","MIPS Assembly"],["mizar","Mizar"],["mjs","JavaScript"],["mk","Makefile"],["mkd","Markdown"],["mkdown","Markdown"],["ml","OCaml"],["ml","SML (Standard ML)"],["mm","Objective-C"],["mma","Mathematica"],["mojolicious","Mojolicious"],["monkey","Monkey"],["moo","Mercury"],["moon","MoonScript"],["moonscript","MoonScript"],["mts","TypeScript"],["n1ql","N1QL"],["nc","G-code (ISO 6983)"],["nestedtext","Nested Text"],["nginx","Nginx config"],["nginxconf","Nginx config"],["nim","Nim"],["nix","Nix"],["nixos","Nix"],["node-repl","Node REPL"],["nsis","NSIS"],["nt","Nested Text"],["obj-c","Objective-C"],["obj-c++","Objective-C"],["objc","Objective-C"],["objective-c++","Objective-C"],["objectivec","Objective-C"],["ocaml","OCaml"],["openscad","OpenSCAD"],["osascript","AppleScript"],["oxygene","Oxygene"],["p21","STEP Part 21"],["parser3","Parser3"],["pas","Delphi"],["pascal","Delphi"],["patch","Diff"],["pb","PureBASIC"],["pbi","PureBASIC"],["pcmk","crmsh"],["pde","Processing"],["perl","Perl"],["pf","Packet Filter config"],["pf.conf","Packet Filter config"],["pgsql","PostgreSQL"],["php","php"],["php-template","PHP template"],["pl","Perl"],["plaintext","Plain text"],["plist","HTML, XML"],["pm","Perl"],["podspec","Ruby"],["pony","Pony"],["postgres","PostgreSQL"],["postgresql","PostgreSQL"],["powershell","PowerShell"],["pp","Puppet"],["processing","Processing"],["profile","Python profiler"],["prolog","Prolog"],["properties",".properties"],["proto","Protocol Buffers"],["protobuf","Protocol Buffers"],["ps","PowerShell"],["ps1","PowerShell"],["puppet","Puppet"],["purebasic","PureBASIC"],["pwsh","PowerShell"],["py","Python"],["pycon","python-repl"],["python","Python"],["python-repl","python-repl"],["q","Q"],["qml","QML"],["qt","QML"],["r","R"],["rb","Ruby"],["re","ReasonML"],["reasonml","ReasonML"],["rib","RenderMan RIB"],["roboconf","Roboconf"],["routeros","MikroTik RouterOS script"],["rs","Rust"],["rsl","RenderMan RSL"],["rss","HTML, XML"],["ruby","Ruby"],["ruleslanguage","Oracle Rules Language"],["rust","Rust"],["sas","SAS"],["scad","OpenSCAD"],["scala","Scala"],["scheme","Scheme"],["sci","Scilab"],["scilab","Scilab"],["scm","Scheme"],["scss","SCSS"],["sh","Bash"],["shell","Shell Session"],["shellsession","Shell Session"],["smali","Smali"],["smalltalk","Smalltalk"],["sml","SML (Standard ML)"],["sqf","SQF"],["sql","SQL"],["st","Smalltalk"],["stan","Stan"],["stanfuncs","Stan"],["stata","Stata"],["step","STEP Part 21"],["step21","STEP Part 21"],["stp","STEP Part 21"],["styl","Stylus"],["stylus","Stylus"],["subunit","SubUnit"],["sv","Verilog"],["svg","HTML, XML"],["svh","Verilog"],["swift","Swift"],["taggerscript","Tagger Script"],["tao","XL"],["tap","Test Anything Protocol"],["tcl","Tcl"],["tex","LaTeX"],["text","Plain text"],["thor","Ruby"],["thrift","Thrift"],["tk","Tcl"],["toml","TOML, also INI"],["tp","TP"],["ts","TypeScript"],["tsx","TypeScript"],["twig","Twig"],["txt","Plain text"],["typescript","TypeScript"],["v","Verilog"],["vala","Vala"],["vb","Visual Basic .NET"],["vbnet","Visual Basic .NET"],["vbs","VBScript"],["vbscript","VBScript"],["vbscript-html","VBScript in HTML"],["verilog","Verilog"],["vhdl","VHDL"],["vim","Vim Script"],["wasm","WebAssembly"],["wildfly-cli","JBoss CLI"],["wl","Mathematica"],["wren","Wren"],["wsf","HTML, XML"],["x++","X++"],["x86asm","Intel x86 Assembly"],["xhtml","HTML, XML"],["xjb","HTML, XML"],["xl","XL"],["xls","Excel formulae"],["xlsx","Excel formulae"],["xml","HTML, XML"],["xpath","XQuery"],["xq","XQuery"],["xqm","XQuery"],["xquery","XQuery"],["xsd","HTML, XML"],["xsl","HTML, XML"],["yaml","YAML"],["yml","YAML"],["zep","Zephir"],["zephir","Zephir"],["zone","DNS Zone"],["zsh","Bash"]]),Np="&#95;{{{CITATION{{{&#95;",Uv="{",xhe=Object.freeze(Object.defineProperty({__proto__:null,AI_MESSAGE_CONTAINER_CLASS:Ahe,ALIAS_TO_SUPPORTED_LANGUAGE:khe,CITATION_DIVIDER:Uv,CITATION_PREFIX:Np},Symbol.toStringTag,{value:"Module"}));function kU(t,e){return`[${Np}${t}${Uv}](${e})`}const Rhe=new RegExp(`\\[${Np}.*?\\)`,"g");function Nhe(t){return t.replace(Rhe,"")}const Phe=2500,Ohe=255,pb=ay(new Map),Dxe=M(null),Mhe=M(Hz),Lhe=M(Ohe),Dhe=M(Phe);function jhe(t,e,n){return`${t}_${e}_${n}`}function Uhe(t,e){rt().set(pb,r=>{const o=r.get(t)??[],i=[];for(const s of e.editTargets){const a={id:jhe(e.id,s.startIndex,s.endIndex),pageSuggestionId:e.id,startIndex:s.startIndex,endIndex:s.endIndex,text:e.text};i.push(a)}r.set(t,[...o,...i])})}function jxe(t,e){rt().set(pb,r=>{const o=r.get(t);o&&r.set(t,o.filter(i=>i.id!==e))})}function Uxe(t){rt().set(pb,n=>{n.delete(t)})}function Fhe(t,e,n){rt().set(pb,o=>{const i=o.get(t);if(i){const s=i.filter(a=>a.pageSuggestionId===e);for(const a of s)a.text===void 0&&(a.text=""),a.text+=n}})}function Bhe(t){const{card:e,messageId:n,conversationId:r}=t,o={eventName:"copilotImpression",eventInfo_impressionPage:"chat",eventInfo_impressionScenario:"answerCardReceived",eventInfo_answerCardType:e.type,eventInfo_messageId:n,eventInfo_conversationId:r};switch(e.type){case"image":o.eventInfo_answerCardContentLength=e.images.length;break;case"localEntity":o.eventInfo_answerCardContentLength=e.entities.length;break;case"financeChart":o.eventInfo_answerCardScenario=e.instrument.securityType;break}V.trackEvent({name:"system",data:o})}function Hhe(t){const{card:e,messageId:n,conversationId:r}=t,o=performance.now(),i=Ye(CM);if(!i)return;const s={eventName:"copilotAnswerCardReceived",eventInfo_messageId:n,eventInfo_conversationId:r,eventInfo_cardType:e.type,eventInfo_duration:o-i};V.trackEvent({name:"system",data:s})}function zhe(t){const{message:e,conversationId:n}=t;for(const r of e.content)switch(r.type){case"card":Bhe({card:r.card,messageId:e.id,conversationId:n}),Hhe({card:r.card,messageId:e.id,conversationId:n});break}}async function Vhe(t){V.setSettings({userConsentModelTraining:!t.optOutOfTraining,userConsentPersonalization:!t.optOutOfPersonalization,userSettingPhoneConnection:!t.optOutOfPhoneConnection,userSettingGenUI:!t.optInToGenerativeUI}),await Hr({path:"/user/settings",args:{options:{method:"PATCH"},body:{optOutOfTraining:t.optOutOfTraining,optOutOfPersonalization:t.optOutOfPersonalization,optInToVoiceTraining:t.optInToVoiceTraining,optOutOfPhoneConnection:t.optOutOfPhoneConnection,optInToGenerativeUI:t.optInToGenerativeUI,allowBiometricDataUse:t.allowBiometricDataUse,allowOneDriveAccess:t.allowOneDriveAccess,features:t.features}}})}async function $he(){var e,n;const t=await Gn("/user",wL,{parseOptions:{safe:!0},query:{"api-version":"2"}}).then(r=>r.data);rt().set(hT,((e=t.remainingCalls)==null?void 0:e.podcastGeneration)??null),rt().set(fT,((n=t.remainingCalls)==null?void 0:n.research)??null)}const Kt=rt();function VN(t){return{chatMode:"chat",timing:new Fde(t),citationCount:0,imageCount:0,chainOfThoughtCount:0,inputMethod:"text"}}class Ghe{constructor(e){J(this,"ws");J(this,"conversationMetadata",new Map);J(this,"conversationIdByMessageId",new Map);J(this,"messageIdByTaskId",new Map);J(this,"latestMessagePartIdentifier",null);J(this,"pendingSideBySideMessages",new Map);this.ws=e,this.send=this.send.bind(this),this.regenerate=this.regenerate.bind(this),this.sendChallengeResponse=this.sendChallengeResponse.bind(this),this.resetConversationState=this.resetConversationState.bind(this),this.resetConversationTiming=this.resetConversationTiming.bind(this),this.setConversationIdByMessageId=this.setConversationIdByMessageId.bind(this),this.setMessageIdByTaskId=this.setMessageIdByTaskId.bind(this),this.onSubmitMessageBlocked=this.onSubmitMessageBlocked.bind(this),this.callBeforeSendForConversation=this.callBeforeSendForConversation.bind(this),this.callOnSentForConversation=this.callOnSentForConversation.bind(this),this.setChatModeForConversation=this.setChatModeForConversation.bind(this),this.setInputMethodForConversation=this.setInputMethodForConversation.bind(this),this.setUserMessageForConversation=this.setUserMessageForConversation.bind(this),this.processEvent=this.processEvent.bind(this),this.sendMessagePreview=this.sendMessagePreview.bind(this)}getConversationState(e){return this.conversationMetadata.has(e)||this.conversationMetadata.set(e,VN(performance.now())),this.conversationMetadata.get(e)}get latestMessagePartId(){return this.latestMessagePartIdentifier}resetConversationState(e,n){this.conversationMetadata.set(e,VN(n))}resetConversationTiming(e,n){this.getConversationState(e).timing.resetStartTime(n)}setConversationIdByMessageId(e){const{messageId:n,conversationId:r}=e;this.conversationIdByMessageId.set(n,r)}setMessageIdByTaskId(e){const{taskId:n,messageId:r}=e;this.messageIdByTaskId.set(n,r)}onSubmitMessageBlocked(e){const{timing:n,chatMode:r,inputMethod:o}=this.getConversationState(e);n.onSubmitMessageBlocked(r,o,e)}callBeforeSendForConversation(e){this.getConversationState(e).timing.onBeforeSend()}callOnSentForConversation(e,n){this.getConversationState(e).timing.onSent(n)}setChatModeForConversation(e,n){const r=this.getConversationState(e);r.chatMode=n}setInputMethodForConversation(e,n){const r=this.getConversationState(e);r.inputMethod=n}setUserMessageForConversation(e,n){const r=this.getConversationState(e);r.lastUserMessage=n}send(e){const{content:n,conversationId:r,data:o,mode:i,context:s}=e,a={event:"send",conversationId:r,content:Array.isArray(n)?n:[n],mode:i,context:s,...o};this.ws.send(JSON.stringify(a))}sendChallengeResponse(e){this.ws.send(JSON.stringify({event:"challengeResponse",token:e.token,method:e.method}))}regenerate(e){const{messageId:n,mode:r}=e,o={event:"regenerate",messageId:n,mode:r};this.ws.send(JSON.stringify(o))}sendMessagePreview(e){const{content:n,conversationId:r,data:o,mode:i,context:s}=e,a={event:"messagePreview",conversationId:r,content:Array.isArray(n)?n:[n],mode:i,context:s,...o};this.ws.send(JSON.stringify(a))}processEvent(e){switch("id"in e&&(this.latestMessagePartIdentifier=e.id??null),e.event){case"received":this.handleReceived(e);break;case"connected":this.handleConnected(e);break;case"emojiReaction":this.handleEmojiReaction(e);break;case"startMessage":this.handleStartMessage(e);break;case"appendText":this.handleAppendText(e);break;case"replaceText":this.handleReplaceText(e);break;case"invokeAction":this.handleInvokeAction(e);break;case"chainOfThought":this.handleChainOfThought(e);break;case"citation":this.handleCitation(e);break;case"generatingImage":this.handleGeneratingImage(e);break;case"imageGenerated":this.handleImageGenerated(e);break;case"partialImageGenerated":this.handlePartialImageGenerated(e);break;case"imageGenerationFailed":this.handleImageGenerationFailed(e);break;case"generatingCard":this.handleGeneratingCard(e);break;case"cardGenerationFailed":this.handleCardGenerationFailed(e);break;case"page":this.handlePage(e);break;case"titleUpdate":this.handleTitleUpdate(e);break;case"challenge":this.handleChallenge();break;case"card":this.handleCard(e);break;case"taskStart":this.handleTaskStart(e);break;case"taskUpdate":this.handleTaskUpdate(e);break;case"error":this.handleError(e);break;case"banned":this.handleBanned(e);break;case"suggestedFollowups":this.handleSuggestedFollowups(e);break;case"done":this.handleDone(e);break;case"startSuggestion":this.handleStartSuggestion(e);break;case"appendSuggestion":this.handleAppendSuggestion(e);break;case"activityStart":this.handleActivityStart(e);break;case"activityUpdate":this.handleActivityUpdate(e);break;case"memorySignal":this.handleMemorySignal(e);break;case"sideBySideComparison":this.handleSideBySideComparison(e);break}}handleMemorySignal(e){if(Fi("kill-memory-edf-basic"))return;const{messageId:n,partId:r,text:o,signalType:i}=e,s=this.conversationIdByMessageId.get(n);if(!s)return;this.getConversationState(s).timing.onMemorySignalReceived({messageId:n,conversationId:s}),Wt(s,c=>{const u=Yn(c,n);u&&u.content.push({type:"memorySignal",partId:r,text:o,signalType:i})})}handleSideBySideComparison(e){if(!et("side-by-side-messages"))return;const{sideBySideComparisonId:n,conversationId:r,options:o,defaultMessageId:i}=e;Si(r,s=>{s.sideBySideComparisonId=n});for(const{messageId:s,position:a}of o)this.pendingSideBySideMessages.set(s,{position:a,isDefault:s===i})}clearAllStreamingStates(){const e=Kt.get(yn);for(const n of e.values())Si(n.id,r=>{r.streamingState="idle"})}handleReceived(e){const{messageId:n,conversationId:r}=e;this.conversationIdByMessageId.set(n,r);const o=this.getConversationState(r);o.timing.onReceived({messageId:n,conversationId:r,chatMode:o.chatMode}),bN([`humanMessage_${n}`,`conversation_${r}`]),Kt.set(Nc,i=>i&&!Pg()?i-1:i),Wt(r,i=>{const s=i.at(-1);(s==null?void 0:s.author)==="human"&&(s.id=n)}),_he()}handleConnected(e){uy.trackLatestChatConnectedAssignment(e)}handleEmojiReaction(e){const{messageId:n,emoji:r}=e,o=this.conversationIdByMessageId.get(n);o&&Wt(o,i=>{const s=dX(i,n);s&&(s.emojiReaction=r)})}handleStartMessage(e){const{messageId:n,conversationId:r,createdAt:o}=e;this.conversationIdByMessageId.set(n,r);const i=this.getConversationState(r),{chatMode:s}=i;i.citationCount=0,i.timing.onStartMessage({messageId:n,conversationId:r,chatMode:s}),et("multiplecharacters")&&Kt.set(vc,"responding"),bN([`aiMesssage_${n}`,`conversation_${r}`]);const a=this.pendingSideBySideMessages.get(n),c={id:n,createdAt:o,author:"ai",content:[],mode:s,sideBySideConfig:a};Si(r,u=>{u.streamingState="streaming"}),Wt(r,u=>{u.length===0&&rD(Kt.get(ri),r)||u.push(c)})}handleAppendText(e){const{text:n,messageId:r,partId:o}=e,i=this.conversationIdByMessageId.get(r);if(!i)return;const s=this.getConversationState(i);s.timing.onFirstToken(r,s.chatMode,i),Wt(i,a=>{const c=Yn(a,r);if(c){Jl(i,c.id);let u=ja(c.content,o);if(!u)u={type:"text",text:"",partId:o},c.content.push(u);else if(u.type!=="text"){console.error(`appendText event with partId that is not a text item. Item is of type ${u.type}`,e);return}u.text=u.text.concat(n),pX(c)}})}handleReplaceText(e){const{text:n,messageId:r,partId:o}=e,i=this.conversationIdByMessageId.get(r);i&&Wt(i,s=>{const a=Yn(s,r);if(a){Jl(i,a.id);let c=ja(a.content,o);if(!c)c={type:"text",text:"",partId:o},a.content.push(c);else if(c.type!=="text"){console.error("replaceText event with partId that is not a text item",e);return}c.text=n,c.citations=void 0}})}handleCitation(e){const{title:n,url:r,messageId:o,publisher:i,iconUrl:s}=e,a=this.conversationIdByMessageId.get(o);if(!a)return;const c=this.getConversationState(a);G$(r,a,o),Wt(a,u=>{const d=Yn(u,o);if(d){Jl(a,d.id);const f=hX(d.content);if(f){f.citations||(f.citations=[]);const p=f.citations.find(v=>v.url===r);let g;p?g=p.index:(c.citationCount+=1,g=`${c.citationCount}`,f.citations.push({index:g,url:r,iconUrl:s,title:n,publisher:i})),f.text=f.text.concat(kU(g,r))}}})}handleGeneratingImage(e){const{prompt:n,messageId:r,partId:o,progressionText:i}=e,s=this.conversationIdByMessageId.get(r);if(!s)return;const a=this.getConversationState(s);a.timing.onImageGenerationStart({messageId:r,conversationId:s,chatMode:a.chatMode}),Wt(s,c=>{const u=Yn(c,r);u&&u.content.push({type:"image",prompt:n,partId:o,partialGenerationStep:0,status:"generating",progressionText:i})})}handleImageGenerated(e){const{url:n,partId:r,messageId:o}=e,i=this.conversationIdByMessageId.get(o);if(!i)return;const s=this.getConversationState(i);s.imageCount+=1,s.timing.onImageReceived({messageId:o,conversationId:i,chatMode:s.chatMode}),Wt(i,a=>{const c=Yn(a,o);if(c){const u=ja(c.content,r);(u==null?void 0:u.type)==="image"&&(u.isPartiallyLoading=!1,u.url=n,u.partialGenerationStep=void 0,u.status="generated",u.progressionText=void 0)}})}handlePartialImageGenerated(e){const{content:n,messageId:r,partId:o}=e,i=this.conversationIdByMessageId.get(r);if(!i)return;const s=this.getConversationState(i);Wt(i,a=>{const c=Yn(a,r);if(c){const u=ja(c.content,o);if((u==null?void 0:u.type)==="image"){u.isPartiallyLoading=!0,u.url=`data:image/png;base64,${n}`;const d=(u.partialGenerationStep??0)+1;u.partialGenerationStep=d,u.status="generating",s.timing.onPartialImageReceived({messageId:r,conversationId:i,chatMode:s.chatMode,imageGenPhase:d})}}})}getImageGenerationErrorMessage(e){switch(e){case"not-signed-in":return ee("error.imageGenerationFailedSignedOut");case"throttled":return ee("error.imageGenerationFailedThrottled");case"blocked":return;default:return ee("error.imageGenerationFailed")}}handleImageGenerationFailed(e){const{messageId:n,partId:r,errorCode:o}=e,i=this.conversationIdByMessageId.get(n);if(!i)return;Wt(i,a=>{const c=Yn(a,n);c&&(c.content=c.content.filter(u=>u.type!=="image"||u.partId!==r))});const s=this.getImageGenerationErrorMessage(o);o==="not-signed-in"&&Kt.set(bl,{isOpen:!0,scenario:null,reason:"imageGeneration"}),s&&qp(s,i)}handleCardGenerationFailed(e){const n=Kt.get(jh);if(n&&this.isGeneratedCards(n)){Kt.set(jh,void 0);const r=this.conversationIdByMessageId.get(e.messageId);if(!r)return;n==="quiz"&&qp(ee("quizCard.generatedQuizFailed"),r)}}handleGeneratingCard(e){const{type:n}=e;this.isGeneratedCards(n)&&Kt.set(jh,n)}isGeneratedCards(e){return ML.safeParse(e).success}handleTitleUpdate(e){const{conversationId:n,title:r}=e;Kt.set(yn,o=>xo(o,i=>{const s=i.get(n);s&&(s.title=r)}))}handleCard(e){const{messageId:n,partId:r,card:o}=e,i=this.conversationIdByMessageId.get(n);if(!i)return;const s=this.getConversationState(i);if(o.type==="ads"){ihe({card:o,messageId:n,partId:r,conversationState:s,conversationId:i});return}Wt(i,a=>{const c=Yn(a,n);c&&c.content.push({type:"card",partId:r,card:o})})}handleBanned(e){const{expiresAt:n}=e,r=Y_(n);r&&Q_(r,"chat",n)}handlePage(e){const{messageId:n,page:r,partId:o}=e,i=this.conversationIdByMessageId.get(n);i&&(Wt(i,s=>{const a=Yn(s,n);a&&a.content.push({type:"page",partId:o,page:r})}),Pt.emit("pages:page-created",r))}handleStartSuggestion(e){const{pageId:n,suggestionId:r,editTargets:o}=e;Uhe(n,{id:r,text:void 0,editTargets:o})}handleAppendSuggestion(e){const{pageId:n,suggestionId:r,text:o}=e;Fhe(n,r,o)}handleActivityStart(e){if(!kg())return;const{messageId:n,partId:r,activity:o}=e,i=this.conversationIdByMessageId.get(n);i&&Wt(i,s=>{const a=Yn(s,n);a?(Jl(i,a.id),a.content.push({activity:o,type:"activity",partId:r})):ehe(n)})}handleActivityUpdate(e){if(!kg())return;const{messageId:n,partId:r,update:o}=e,i=this.conversationIdByMessageId.get(n);if(i)try{Wt(i,s=>{const a=Yn(s,n);if(!a)return;const c=ja(a.content,r);if(!c||c.type!=="activity"){the(n,r);return}fc(c.activity,o)})}catch(s){nhe(s)}}processInvokeAction(e){const n=Kt.get(ft);if(n)switch(e.actionName){case"phone_send_message":{Wt(n,r=>{const o=iD(r);o&&o.content.push({type:"card",partId:Math.random().toString(),card:{type:"phoneSendMessage",actionId:e.actionId,contactName:e.parameters.contactName,text:e.parameters.text,phoneNumber:e.parameters.phoneNumber}})});break}case"edge_get_page_content":{const r=e.parameters.map(o=>({tabId:o.tabId,windowId:o.windowId,pageUrl:o.pageUrl??""}));$le.run({actionId:e.actionId,tabs:r});break}}}handleInvokeAction(e){const{success:n,data:r}=ahe.safeParse(e);n?this.processInvokeAction(r):console.error("Invalid action data:",e)}handleTaskStart(e){const{messageId:n,task:r,partId:o}=e,i=this.conversationIdByMessageId.get(n);this.messageIdByTaskId.set(r.id,n);const s=new Date().toISOString();if(i){dhe([r],i,s),Kt.set(Au,!1),Wt(i,c=>{const u=Yn(c,n);if(u){const d=Bde(r,o,s);d&&u.content.push(d)}}),zle.run({task:r,action:"startTask"});const a=Kt.get(ft);r.type==="computerUse"&&i===a&&Zde(r.conversationId,i),(r.type==="podcast"||r.type==="research")&&$he()}}handleTaskUpdate(e){const{taskId:n,update:r}=e;if(qde(n,r))return;let o=!1;const i=this.messageIdByTaskId.get(n),s=i?this.conversationIdByMessageId.get(i):void 0;try{i&&s&&Wt(s,a=>{const c=et("multiple-research-tasks-in-conversation")&&JO,u=Yn(a,i,c);if(u){const d=cX(u.content),f=d==null?void 0:d.task;f&&f.type==="research"&&(fc(f,r),oD.includes(f.status)&&(fX("chat"),$de(f,s)))}}),bT(n,a=>{var c;if(a.type==="computerUse"&&fc(a,r),a.type==="podcast"){const u=((c=a.podcast)==null?void 0:c.id)??"";fc(a,r),a.podcast&&(a.podcast.id=u)}}),o=!0}catch(a){console.error("Error applying task update patch:",a)}if(o){const a=Kt.get(ri).get(n);switch(a==null?void 0:a.type){case"computerUse":Xde(n,r);break;case"podcast":Vde(a);break}}}handleSuggestedFollowups(e){const{disableMultiturn:n}=ye.instance().config();if(!n){const{suggestions:r,messageId:o}=e,i=this.conversationIdByMessageId.get(o);i&&Si(i,s=>{s.suggestedFollowup={messageId:o,suggestions:r}})}}handleError(e){const{errorCode:n}=e;if(n==="over-turn-limit")Kt.set(Nc,0);else if(n==="over-reasoning-quota"){!Kt.get(xd)&&Pg()&&ye.instance().config().thinkDeeperFreemiumEnabled&&(Kt.set(lG,"chat-over-reasoning-quota"),Kt.set(zr,"reasoning-mode-pro-subscription")),Kt.set(wn,"chat");for(const[o]of this.conversationMetadata.entries())qp(ee("chat.overCapacity"),o)}else if(n==="over-task-quota")Kt.set(zr,"over-task-quota");else if(n==="unknown-error")for(const[r]of this.conversationMetadata.entries())Si(r,o=>{o.streamingState="idle"});else if(n==="page-content-length-exceeded"||n==="page-count-exceeded"){Pt.emit("page:message-error",n);for(const[r]of this.conversationMetadata.entries())Si(r,o=>{o.streamingState="idle"})}else for(const[r]of this.conversationMetadata.entries())qp(ee("error.eventNotRecognized"),r);Kt.set(Au,!1)}handleChainOfThought(e){const{messageId:n,partId:r,text:o}=e,i=this.conversationIdByMessageId.get(n);i&&Wt(i,s=>{const a=Yn(s,n);if(a){Jl(i,a.id);let c=ja(a.content,r);const u=this.getConversationState(i);if(!c)c={type:"chainOfThought",text:"",partId:r},a.content.push(c),u.timing.onChainOfThoughtReceived({messageId:n,conversationId:i,chatMode:u.chatMode}),u.chainOfThoughtCount+=1;else if(c.type!=="chainOfThought"){console.error(`chainOfThought event with partId that is not a chainOfThought item. Item is of type ${c.type}`,e);return}c.text=c.text.concat(o)}})}handleChallenge(){if(!Fi("kill-cf-turnstile")){const e=Kt.get(ft);if(!e)return;const{lastUserMessage:n}=this.getConversationState(e);vhe(r=>{this.sendChallengeResponse({token:r,method:"cloudflare"}),n&&this.send(n)})}}handleDone(e){var u;et("multiplecharacters")&&Kt.get(vc)==="responding"&&Kt.set(vc,"idle");const{messageId:n}=e,r=this.conversationIdByMessageId.get(n);if(!r)return;const o=this.getConversationState(r);o.timing.onLastToken({messageId:n,conversationId:r,citationCount:o.citationCount,imageCount:o.imageCount,chainOfThoughtCount:o.chainOfThoughtCount,chatMode:o.chatMode,inputMethod:o.inputMethod});const s=((u=Kt.get(yn).get(r))==null?void 0:u.history)??[],a=Yn(s,n);Wt(r,d=>{if(!a)return;const f=Yn(d,a.id),p=a.content.find(g=>g.type==="image"&&g.partialGenerationStep!==void 0);if(f&&p){const g=ja(f.content,p.partId);g&&(g.partialGenerationStep===0?g.type="deleted":g.type==="image"&&(g.isPartiallyLoading=!1,g.partialGenerationStep=void 0,g.status="non-complete"))}}),this.pendingSideBySideMessages.get(n)&&this.pendingSideBySideMessages.delete(n),this.pendingSideBySideMessages.size===0&&Si(r,d=>{d.streamingState="idle"}),Kt.set(jh,void 0),Kt.set(Au,!1),window.setTimeout(()=>{Kt.set(DI,d=>{if(d.get(r)===n){const p=new Map(d);return p.delete(r),p}return d})},o.chatMode==="reasoning"?5e3:3e3),Kt.set(_M,!0),a&&zhe({message:a,conversationId:r}),Kle.run({conversationMessages:s})}}const Khe="eval/chat";function Whe(t,e){return t.addEventListener("change",e),()=>t.removeEventListener("change",e)}function iA(t){const e=typeof window<"u"?window.matchMedia(t):null,[n,r]=m.useState(e==null?void 0:e.matches);return m.useEffect(()=>{e&&Whe(e,o=>r(o.matches))},[t,e]),!!n}const xU={sm:"640",md:"768",lg:"1024",xl:"1280"};function pr(t){const{breakpoint:e}=t,n=xU[e];return!iA(`(min-width: ${n}px)`)}function sA(t){const{breakpoint:e}=t,r=`(min-width: ${xU[e]}px)`,o=typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia(r):null;return!(o!=null&&o.matches)}function qhe(){const t=et("weather-cards"),e=!Fi("kill-image-cards"),n=et("local-cards"),r=et("sports-cards"),o=!Fi("kill-video-cards"),i=et("shopping-card"),s=et("shopping-curated"),a=et("media-spotlight-card"),c=et("job-cards"),u=et("safetycards"),d=et("quiz-cards"),f=et("generateads"),p=et("generateadsint"),g=et("adsparity"),v=!Fi("kill-finance-cards"),b=et("adstags"),y=et("product-ads-dynamic-filter"),C=et("property-promotion-ads-dynamic-filter"),S=et("tour-activity-ads-dynamic-filter"),w=et("adsshowroom"),E=et("emoji-reactions"),I=et("imagegenv3");et("turn-telemetry");const T=et("recipe-card"),A=et("file-cards"),_=et("side-by-side-messages"),{adsEnabled:U,adsShowroomEnabled:k,disableAnswerCards:G,enforceAdsOptOutOfPersonalization:K,answerCardOverrides:ie}=ye.instance().config(),P=!!rt().get(xd),$=(f||p||g)&&U&&!P,Z=a&&(ie==null?void 0:ie.shouldEnableMediaSpotlightCard),x=[];G||(t&&x.push("weather"),n&&x.push("local"),e&&x.push("image"),r&&x.push("sports"),o&&x.push("video"),i&&x.push("shopping"),c&&x.push("job"),$&&x.push("ads"),u&&x.push("safetyHelpline"),d&&x.push("quiz"),v&&x.push("finance"),s&&x.push("shoppingCurated"),T&&x.push("recipe"),A&&x.push("file"),Z&&x.push("mediaSpotlight"));const L={supportedTypes:["text","product","multimedia","tourActivity","propertyPromotion"]};K&&(L.optOutOfPersonalization=!0),w&&U&&k&&L.supportedTypes.push("showroom"),(y||b)&&(L.product={tagsSupported:!0}),C&&(L.propertyPromotion={tagsSupported:!0}),S&&(L.tourActivity={tagsSupported:!0});const ne=[];E&&ne.push("emoji-reactions"),I&&ne.push("partial-generated-images");const se=!sA({breakpoint:"lg"});return _&&se&&ne.push("side-by-side-comparison"),{supportedFeatures:ne,supportedCards:x.length>0?x:void 0,ads:$?L:null}}const $N=1e3,Yhe=3e4,Qhe=5e3;class Jhe{constructor({autoReconnect:e=!1}={}){J(this,"connection");J(this,"autoReconnect");J(this,"reconnectInterval");J(this,"maxReconnectInterval");J(this,"reconnectTimeout");J(this,"sendQueue",[]);J(this,"connecting",!1);J(this,"state",null);J(this,"cachedSendData",null);J(this,"pongTimeout",null);J(this,"boundReconnectIfNeeded");J(this,"boundDisconnect");J(this,"boundVisibilityChange");J(this,"getUrl",null);J(this,"onopen");J(this,"onmessage");J(this,"onclose");J(this,"onerror");this.connection=null,this.autoReconnect=e,this.reconnectInterval=$N,this.maxReconnectInterval=e?Yhe:0,this.reconnectTimeout=null,this.onopen=null,this.onmessage=null,this.onclose=null,this.onerror=null,this.connect=this.connect.bind(this),this.reconnect=this.reconnect.bind(this),this.processSendQueue=this.processSendQueue.bind(this)}async initialize(){this.state=null,await this.connect(),this.autoReconnect&&(this.boundReconnectIfNeeded=this.reconnectIfNeeded.bind(this),this.boundDisconnect=this.disconnect.bind(this),this.boundVisibilityChange=()=>{document.visibilityState==="visible"&&this.reconnectIfNeeded()},window.addEventListener("online",this.boundReconnectIfNeeded),window.addEventListener("offline",this.boundDisconnect),document.addEventListener("visibilitychange",this.boundVisibilityChange))}async connect(){var n;if(((n=this.connection)==null?void 0:n.readyState)===WebSocket.CONNECTING||this.connecting||this.pongTimeout)return;if(!this.getUrl)throw new Error("getUrl function is not set");this.connecting=!0;const e=await this.getUrl();this.connection=new WebSocket(e),this.connecting=!1,this.connection.onopen=r=>{this.state=null,this.onopen&&this.onopen(r),this.processSendQueue(),this.reconnectInterval=$N,this.reconnectTimeout&&(window.clearTimeout(this.reconnectTimeout),this.reconnectTimeout=null)},this.connection.onmessage=r=>{if(this.state!=="destroyed")try{const o=JSON.parse(r.data);this.onmessage&&this.onmessage(o),o.event==="pong"&&(this.removePongTimeout(),this.processSendQueue())}catch{}},this.connection.onclose=r=>{this.connection&&this.connection.bufferedAmount>0&&this.cachedSendData&&(this.sendQueue.push(this.cachedSendData),this.cachedSendData=null),this.onclose&&this.onclose(r),this.autoReconnect&&this.state===null&&this.reconnect(),this.removePongTimeout()},this.connection.onerror=r=>{this.onerror&&this.onerror(r),this.connection&&this.connection.close(),this.removePongTimeout()}}reconnect(){this.reconnectTimeout&&window.clearTimeout(this.reconnectTimeout),this.reconnectTimeout=window.setTimeout(this.connect,this.reconnectInterval),this.reconnectInterval=Math.min(this.reconnectInterval*2,this.maxReconnectInterval)}processSendQueue(){if(this.sendQueue.length>0){const e=this.sendQueue;this.sendQueue=[];for(const n of e)this.send(n)}}reconnectIfNeeded(){if(this.state!=="destroyed"){if(!this.connection||this.connection.readyState!==WebSocket.OPEN){this.reconnect();return}this.pongTimeout===null&&(this.connection.send(JSON.stringify({event:"ping"})),this.pongTimeout=window.setTimeout(()=>{var e;this.pongTimeout=null,(e=this.connection)==null||e.close(),this.reconnect()},Qhe))}}removePongTimeout(){this.pongTimeout!==null&&(window.clearTimeout(this.pongTimeout),this.pongTimeout=null)}send(e){if(this.state!=="destroyed")if(this.connection&&this.connection.readyState===WebSocket.OPEN&&this.pongTimeout===null)try{this.cachedSendData=e,this.connection.send(e)}catch{this.sendQueue.push(e),this.connect()}else this.sendQueue.push(e),this.connect()}cleanup(){this.boundReconnectIfNeeded&&window.removeEventListener("online",this.boundReconnectIfNeeded),this.boundDisconnect&&window.removeEventListener("offline",this.boundDisconnect),this.boundVisibilityChange&&document.removeEventListener("visibilitychange",this.boundVisibilityChange)}disconnect(){this.connection&&(this.state="disconnected",this.connection.close())}destroy(){this.connection&&(this.state="destroyed",this.cleanup(),this.connection.close(),this.connection=null)}}async function Rs({useMockConnection:t}={}){const e=async({cursor:n})=>{const r=Hj()?Khe:"chat";return n?yN(r,{cursor:n}):yN(r)};return ng.get({getUrl:e})}async function Xhe({getUrl:t}){return typeof WebSocket>"u"?{destroy:()=>{},send:()=>{},regenerate:()=>{},sendContext:()=>{},sendAudioStart:()=>{},sendAudio:()=>{},sendAudioEnd:()=>{},setCallType:()=>{},stop:()=>{},setOnEvent:()=>()=>{},sendChallengeResponse:()=>{},sendActionResult:()=>{},sendMessagePreview:()=>{},selectSxSMessage:()=>{},resetConversationState:()=>{},resetConversationTiming:()=>{},setConversationIdByMessageId:()=>{},setMessageIdByTaskId:()=>{},setChatModeForConversation:()=>{},setInputMethodForConversation:()=>{},callBeforeSendForConversation:()=>{},callOnSentForConversation:()=>{},setUserMessageForConversation:()=>{},onSubmitMessageBlocked:()=>{}}:new Promise((e,n)=>{const r=Fi("kill-chat-auto-reconnect"),o=new Jhe({autoReconnect:!r}),i=new Ghe(o);o.getUrl=()=>t({cursor:i.latestMessagePartId}),o.onopen=()=>{const a={event:"setOptions",...qhe()};o.send(JSON.stringify(a)),o.onmessage=c=>{try{R1.parse(c)}catch(u){u instanceof dg&&kf(u,"/chat")}i.processEvent(c)},e({destroy:()=>{o.destroy(),i.clearAllStreamingStates()},stop:(c={})=>{const{conversationId:u,taskId:d}=c;o.send(JSON.stringify({event:"stop",conversationId:u})),d&&o.send(JSON.stringify({event:"send",conversationId:u,content:[{type:"command",command:{type:"cancelTask",taskId:d}}],mode:"research"})),u&&Si(u,f=>{f.streamingState="idle"})},send:i.send,regenerate:i.regenerate,sendContext:c=>{o.send(JSON.stringify({event:"sendContext",context:c}))},sendAudioStart:(c,u,d)=>{const f={event:"audioStart",conversationId:c,options:u,clientType:d};o.send(JSON.stringify(f))},sendAudio:c=>{const u={event:"audio",audio:c};o.send(JSON.stringify(u))},sendAudioEnd:()=>{const c={event:"audioEnd"};o.send(JSON.stringify(c))},setCallType:c=>{const u={event:"setCallType",callType:c};o.send(JSON.stringify(u))},sendChallengeResponse:i.sendChallengeResponse,setOnEvent:c=>{o.onmessage=u=>{try{R1.parse(u),i.processEvent(u)}catch(d){d instanceof dg&&kf(d,"/chat")}c(u)}},sendActionResult:c=>{o.send(JSON.stringify({event:"actionResult",actionId:c.actionId,result:c.result}))},selectSxSMessage:c=>{const{sideBySideComparisonId:u,selectedMessageId:d}=c,f={event:"selectMessage",sideBySideComparisonId:u,selectedMessageId:d};o.send(JSON.stringify(f))},resetConversationState:i.resetConversationState,resetConversationTiming:i.resetConversationTiming,setConversationIdByMessageId:i.setConversationIdByMessageId,setMessageIdByTaskId:i.setMessageIdByTaskId,setChatModeForConversation:i.setChatModeForConversation,setInputMethodForConversation:i.setInputMethodForConversation,callBeforeSendForConversation:i.callBeforeSendForConversation,callOnSentForConversation:i.callOnSentForConversation,setUserMessageForConversation:i.setUserMessageForConversation,onSubmitMessageBlocked:i.onSubmitMessageBlocked,sendMessagePreview:i.sendMessagePreview.bind(i)})},o.onclose=()=>{},o.onerror=s=>{const a=s instanceof ErrorEvent?s.message:"Unknown WebSocket error";V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ChatWebsocketError",eventInfo_errorMessage:a,eventInfo_details:JSON.stringify(s)}}),n(new Error(`WebSocket connection error: ${a}`))},o.initialize().catch(s=>{const a=s instanceof Error?s.message:"Unknown WebSocket error";V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"ChatWebsocketInitializationError",eventInfo_errorMessage:a,eventInfo_details:s instanceof Error?s.stack??"":""}}),n(new Error(`WebSocket initialization error: ${a}`))})})}async function RU(){if(ng.isInstantiated){const t=Ye(Lo),e=(t==null?void 0:t.streamingState)==="streaming",n=await ng.get();n.stop(),n.destroy(),n.stop({conversationId:t==null?void 0:t.id}),ng.reset();try{V.trackEvent({name:"system",data:{eventName:"chatClientReset",eventInfo_isMessageStreaming:e}})}catch{}}}const ng=new hl(t=>Xhe(t));function Zhe(t,e,n,r={text:"",atTimestamp:0,files:[]}){return n?e.length!==r.files.length?!0:!!!(t&&t.length>=n.minTextLength)||r.atTimestamp&&r.atTimestamp+n.debounceInMilliseconds>=Date.now()?!1:t&&r.text&&(t.includes(r.text)||r.text.includes(t))?Math.abs((t.length-r.text.length)/r.text.length)>=n.textDeltaPercent/100:!0:!1}const fa=M(null),NU=M(t=>{const e=t(fa);return(e==null?void 0:e.type)==="attachments"?e.uploadAttachments:[]},(t,e,n)=>{const r=t(fa),o=t(NU),i=typeof n=="function"?n(o):n;i.length===0&&(r==null?void 0:r.type)!=="attachments"||e(fa,{type:"attachments",uploadAttachments:i})}),md=M(t=>{const e=t(fa);return(e==null?void 0:e.type)==="tabs"?e.userAddedTabs:new Map},(t,e,n)=>{const r=t(fa),o=t(md),i=typeof n=="function"?n(o):n;i.size===0&&(r==null?void 0:r.type)!=="tabs"||e(fa,{type:"tabs",userAddedTabs:i})}),efe=M(t=>{const e=t(fa);return(e==null?void 0:e.type)==="attachments"&&e.uploadAttachments.length>0}),tfe=M(t=>{const e=t(fa);return(e==null?void 0:e.type)==="tabs"&&e.userAddedTabs.size>0});function nfe(){var e;const t=Ye(zL);if(t)return{character:{id:t.id,locationId:(e=t.location)==null?void 0:e.id}}}function PU(){const t=op(yn),e=_e(py);return m.useCallback((n,r)=>{t(o=>{const i=o.get(n);if(i){const{history:s}=i;r(s);const a=s.at(-1);if(a){const c=new Date(i.updatedAt),u=new Date(a.createdAt);c<u&&(i.updatedAt=a.createdAt)}s.length>2&&(i.isNew=!1,e(!0))}return o})},[t,e])}const rfe=rt();function OU(t,e){rt().set(yn,n=>xo(n,r=>{const o=r.get(t);if(o){const{history:i}=o;e(i);const s=i.at(-1);if(s){const a=new Date(o.updatedAt),c=new Date(s.createdAt);a<c&&(o.updatedAt=s.createdAt)}i.length>2&&(o.isNew=!1,rfe.set(py,!0))}}))}function ofe(){const t=me("bing-uet");m.useEffect(()=>{if(!t)return()=>{};const e=()=>{if(!window.UET)return;window.uetq=window.uetq??[];const r={ti:"355045625",enableAutoSpaTracking:!0};window.uetq=new window.UET(r),window.uetq.push("pageLoad")},n=document.createElement("script");return n.src="https://bat.bing.com/bat.js",n.async=!0,n.onload=e,document.head.appendChild(n),()=>{document.head.removeChild(n)}},[t])}let GN=!1;function ife(){GN||(GN=!0,window.uetq=window.uetq??[],window.uetq.push("event","outbound_click",{}))}function MU(){me("smart-mode-6e0b4c6f"),me("smart-mode-cd0c997b");const{titleKey:t,descriptionKey:e}=DU(),n=ee("composer.chatModes.smart.description");return{title:ee(t),description:ee(e),coachmarkDescription:n}}function LU(){et("smart-mode-6e0b4c6f"),et("smart-mode-cd0c997b");const{titleKey:t,descriptionKey:e}=DU();return{title:ee(t),description:ee(e)}}function DU(t,e){return{titleKey:"composer.chatModes.smart.title",descriptionKey:"composer.chatModes.smart.description"}}function jU(t){return t?t.startsWith("!"):!1}function qf(t){const e=LU();let n=ee(`composer.chatModes.${t}.title`);return t==="reasoning"?n=Jz:t==="smart"&&(n=e.title),n}function sfe(t){const e=LU();return t==="smart"?e.description:ee(`composer.chatModes.${t}.description`)}const KN={global:["https://ad.doubleclick.net/ddm/activity/src=8406097;type=ofco;cat=lrn_uni;u1={REGION};u2={LANG_LOCALE};u6=CMC;u50=submit_message;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1;num={CACHE_BUSTER}"],us:["https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/ChatSend","https://secure.adnxs.com/px?id=1869141&t=2","https://servedby.flashtalking.com/spot/1/5155;147512;16638/?spotName=USA_FY25H2_Copilot_Consumer_Chat_Send_button_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://alb.reddit.com/rp.gif?id=a2_gi5vc4m557wn&event=Custom&m.customEventName=COPChatSend&integration=noscript","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=START_CHECKOUT&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com/","https://tr.snapchat.com/cm/s?pnid=140","https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://insight.adsrvr.org/track/pxl/?adv=tq5ketp&ct=0:e8n8utj&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],gb:["https://secure.adnxs.com/px?id=1869542&t=2&seg=39793132&consent={CONSENT}","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/ChatSend","https://servedby.flashtalking.com/spot/1/3360;147492;16970/?spotName=GBR_FY25H2_Copilot_Consumer_Chat_Send_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}","https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=START_CHECKOUT&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com/","https://tr.snapchat.com/cm/s?pnid=140","https://insight.adsrvr.org/track/pxl/?adv=csnj4o5&ct=0:7s8ltxf&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],other:["https://www.facebook.com/tr?id=1770559986549030&ev=COPChatSend&noscript=1","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=SendMessage&event_id={CACHE_BUSTER}"]},rg={onPageLoad:{global:["https://ad.doubleclick.net/ddm/activity/src=8406097;type=ofco;cat=lp_uniq;u1={REGION};u2={LANG_LOCALE};u6=CMC;dc_lat=;dc_rdid=;tag_for_child_directed_treatment=;tfua=;npa=;ord=1;num={CACHE_BUSTER}"],us:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/custom-pageload","https://secure.adnxs.com/px?id=1869069&t=2","https://servedby.flashtalking.com/spot/1/5155;147507;16638/?spotName=USA_FY25H2_Copilot_Consumer_Page_Load_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://alb.reddit.com/rp.gif?id=a2_gi5vc4m557wn&event=PageVisit&integration=noscript","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=PAGE_VIEW&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com","https://tr.snapchat.com/cm/s?pnid=140","https://insight.adsrvr.org/track/pxl/?adv=tq5ketp&ct=0:tzodkxv&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],gb:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://px.ads.linkedin.com/collect/?fmt=gif&pid=7850&url=copilot.microsoft.com/custom-pageload","https://secure.adnxs.com/px?id=1869539&seg=39793125&t=2&consent={CONSENT}","https://servedby.flashtalking.com/spot/1/3360;147490;16970/?spotName=GBR_FY25H2_Copilot_Consumer_Page_Load_FT_2_7_25&cachebuster={CACHE_BUSTER}","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}","https://tr.snapchat.com/p?pid=68db1ef4-2290-4224-a91a-df01d273a994&ev=PAGE_VIEW&v=2.3&rand={CACHE_BUSTER}&pl=https://copilot.microsoft.com","https://tr.snapchat.com/cm/s?pnid=140","https://insight.adsrvr.org/track/pxl/?adv=csnj4o5&ct=0:2slc99p&fmt=3&td1={td1}&td2={td2}&td3={td3}&td4={td4}&td5={td5}&td6={td6}"],other:["https://www.facebook.com/tr?id=1770559986549030&ev=PageView&noscript=1","https://analytics.tiktok.com/api/v2/pixel_event_track?pixel_code=CUUELO3C77U6K9SI3QSG&event=ViewContent&event_id={CACHE_BUSTER}"]},onMessageSend:KN,onStartVoiceChat:KN,onSuggestionChipClicked:{global:[],us:[],gb:[],other:[]},onDiscoverCardClicked:{global:[],us:[],gb:[],other:[]},onQueryParamSubmit:{global:[],us:[],gb:[],other:[]}},afe={onPageLoad:{behavior:20,Content:{Id:"CMCChatLoaded",cN:"CMC Chat Loaded"}},onMessageSend:{behavior:63,Content:{Id:"ChatManualMessage",cN:"Chat Manual Message"}},onStartVoiceChat:{behavior:300,Content:{Id:"VoiceMessageClick",cN:"Voice Message Click"}},onSuggestionChipClicked:{behavior:60,Content:{Id:"SuggestionChipClicked",cN:"Suggestion Chip Clicked"}},onDiscoverCardClicked:{behavior:144,Content:{Id:"DiscoverCardClicked",cN:"Discover Card Clicked"}},onQueryParamSubmit:{behavior:141,Content:{Id:"QueryParamMessageSubmit",cN:"Query Param Message Submit"}}};function cfe(t,e){return e==="US"?rg[t].us:e==="GB"?rg[t].gb:e&&["AU","CA","DE","FR","JP"].includes(e)?rg[t].other:[]}function lfe(t){if(!et("ads-pixels"))return;const e=rt().get(Vr),n=Ot.language,r=Date.now().toString(),o=rg[t].global,i=cfe(t,e),{set:s}=rt();s(NM,a=>{for(const c of o.concat(i))a[c]||(a[c]={url:c.replace("{CACHE_BUSTER}",r).replace("{REGION}",e??"").replace("{LANG_LOCALE}",n).replace("{CONSENT}",hfe(e)).replace("{td1}",e??"").replace("{td2}",n).replace("{td3}","CMC").replace("{td4}","").replace("{td5}","").replace("{td6}",ffe(t)),isMounted:!0,timestamp:Date.now()});return{...a}})}function ufe(t){et("custom-1ds")&&(window.OneDsAzureAnalytics.capturePageAction(null,afe[t]),cM())}function bu(t){try{lfe(t),ufe(t)}catch{ii({feature:"sendIdeasTelemetry",customData:JSON.stringify({eventName:t})})}}function dfe(t){bu(t==="suggestion"?"onSuggestionChipClicked":t==="discover"?"onDiscoverCardClicked":t==="queryParam"?"onQueryParamSubmit":"onMessageSend")}function hfe(t){return(t&&cy.includes(t))===!0?sp().advertising?"1":"0":""}function ffe(t){switch(t){case"onPageLoad":return"page_load";case"onMessageSend":return"submit_message";case"onStartVoiceChat":return"voice_message";case"onSuggestionChipClicked":return"suggestion_chip";case"onDiscoverCardClicked":return"discover_card";case"onQueryParamSubmit":return"query_param_submit";default:return""}}const Gs=rt(),WN={};async function UU(t){const{text:e,filesWithAttachment:n=[],command:r}=t,o=Ye(wn),i=Ye(ft),{result:s}=await Wle.run({chatMode:o,message:e??""}),a=n.length===0||n.every(({error:f,attachment:p})=>!!f||!p);return{isSubmittable:!!i&&!(!e&&a&&!r),shouldDropAccordingToMiddleware:!!s}}async function FU(t,e=!1){const{text:n,filesWithAttachment:r=[],inputMethod:o,command:i,context:s,reference:a}=t,c=nfe(),u=Ye(wn),d=Ye(ft),f=Ye(ol),p=Ye(md);if(!d)throw new Error("No conversation ID found");let g=0,v=0;const b=[];for(const T of r)T.attachment&&(T.attachment.item.type==="image"?g+=1:T.attachment.item.type==="document"&&(T.attachment.item.partId=`${v}`,v+=1),b.push(T));const y=[],C={id:"",createdAt:new Date().toISOString(),author:"human",content:[],inputMethod:o};f&&f.conversationId===d&&(C.brand=f);for(const{attachment:T}of b)T&&(C.content.push(T.item),y.push(T.content));if(p.size>0&&C.content.push({type:"browserTabs",tabs:Array.from(p.values()).map(T=>({id:T.id,title:T.title,url:T.url,windowId:T.windowId,favIconUrl:T.favIconUrl}))}),n){C.content.push({type:"text",text:n});let T=n;p.size>0&&!T.startsWith("/")&&(T=`${ee("composer.multiTabs.multitabsprompt",{CountOfAddTabs:p.size})} ${T}`),y.push({type:"text",text:T})}i&&y.push({type:"command",command:i}),a&&y.push({type:"reference",reference:a}),!(i&&al.safeParse(i.type).success)&&!e&&OU(d,T=>{T.push(C)});const{sendData:w,additionalData:E}=await Ule.run(C);return{sendMessageParams:{content:y,conversationId:d,data:w,mode:u,context:{...c,...s,ads:f?{showroom:{brandId:f.brandId,brandName:f.brandLogo.businessName,adId:f.adId??void 0}}:void 0}},newMessage:C,filesToSubmit:b,additionalData:E,imagesUploaded:g,documentsUploaded:v}}async function pfe(t){var C,S,w,E;const{text:e,inputMethod:n,scenario:r,customData:o,entryPoint:i}=t,s=Ye(wn),a=Ye(ft),c=Ye(ol),u=Ye(md),d=et("multi-file-upload"),{isSubmittable:f,shouldDropAccordingToMiddleware:p}=await UU(t);if(p){s==="computerUse"&&Gs.set(wn,"chat");return}const g=performance.now();if(Gs.set(CM,g),Gs.set(Ap,"bottom"),!f||!a)return;await bde()&&(s==="computerUse"?(dt({source:"copilotActionsStartTask",customData:JSON.stringify({conversationId:a})}),Gs.set(Au,!0)):Gs.set(Au,!1));const v=await FU(t);Gs.set(yn,I=>xo(I,T=>{const A=T.get(a);A&&(A.suggestedFollowup=void 0)}));const b=await Rs({useMockConnection:jU(e)});u.size>0&&Gs.set(md,new Map),lD(a),b.send(v.sendMessageParams),b.resetConversationState(a,g),b.setChatModeForConversation(a,s),b.setInputMethodForConversation(a,n),b.callBeforeSendForConversation(a),b.callOnSentForConversation(a,v.additionalData),b.setUserMessageForConversation(a,v.sendMessageParams);const y={eventName:"copilotCompose",eventInfo_conversationId:a,eventInfo_inputMethod:n,eventInfo_numImagesUploaded:v.imagesUploaded,eventInfo_numDocumentsUploaded:v.documentsUploaded,eventInfo_mode:s,eventInfo_landingPage:V.getLandingPage(),...v.filesToSubmit.length>0?{eventInfo_uploadFileSize:((S=(C=v.filesToSubmit[0])==null?void 0:C.file)==null?void 0:S.size)??0,eventInfo_uploadFileType:(E=(w=v.filesToSubmit[0])==null?void 0:w.attachment)==null?void 0:E.type}:{}};d&&(y.eventInfo_uploadFilesInfo=JSON.stringify(v.filesToSubmit.map(({file:I,attachment:T,scenario:A})=>({scenario:A,type:(T==null?void 0:T.type)??"",size:(I==null?void 0:I.size)??""})))),v.additionalData&&(y.eventInfo_additionalData=v.additionalData),r&&(y.eventInfo_scenario=r),o&&(y.eventInfo_customData=o),c&&(y.eventInfo_adsContext=JSON.stringify({showroomBrandId:c.brandId,showroomBrandName:c.brandLogo.businessName})),i&&(y.eventInfo_entryPoint=i),V.trackEvent({name:"interaction",data:y}),ife(),dfe(n),whe(),s==="computerUse"&&Gs.set(wn,"chat")}async function mfe(){const t=Ye(ft);t&&(await Rs()).onSubmitMessageBlocked(t)}async function gfe(){var r,o;const t=await Rs(),e=Ye(ft),n=(o=(r=sD(e))==null?void 0:r.part.task)==null?void 0:o.id;lD(e??""),t.stop({conversationId:e,taskId:n})}async function vfe(t){const{messageId:e}=t,n=performance.now(),r=Ye(ft);if(!r)return;OU(r,i=>{const s=iD(i);s&&s.id===e&&i.pop()});const o=await Rs();o.regenerate(t),o.resetConversationTiming(r,n),o.setChatModeForConversation(r,Ye(wn)),o.callBeforeSendForConversation(r)}async function yfe(t){const{text:e,filesWithAttachment:n=[]}=t,r=Ye(ft),o=Ye(IM),{isSubmittable:i}=await UU(t);if(!i||!r)return;if(Zhe(e??"",n,o,WN[r])){const a=await Rs({useMockConnection:jU(e)}),c=await FU(t,!0);a.sendMessagePreview(c.sendMessageParams),WN[r]={text:e??"",atTimestamp:Date.now(),files:n}}}async function bfe(t){(await Rs()).selectSxSMessage(t)}const pc={submitMessage:pfe,stopMessage:gfe,onSubmitMessageBlocked:mfe,regenerateMessage:vfe,sendMessagePreview:yfe,selectSideBySideMessage:bfe};function Fxe(t,e){return t.find(n=>n.partId===e)}function BU(t){const{deferred:e=!1}=t??{},n=!!O(ft),r=O(Ey),[o,i]=lt(BI),s=_e(kp),a=_e(wn);m.useEffect(()=>{const d=Sde()==="ac"?null:S$();d&&(i(d),s({source:"queryInUrl",prompt:d}))},[a,s,i]);const c=m.useCallback(()=>{i(null)},[i]),u=m.useCallback(d=>{d&&(s({source:"queryInUrl",prompt:d}),(async()=>{if(n&&r&&d){const p=pc.submitMessage({text:d,inputMethod:"queryParam"});c(),await p}})().catch(console.error))},[s,n,r,c]);return m.useEffect(()=>{!e&&o&&u(o)},[e,u,o]),{prompt:o,handler:e?u:void 0,clear:c}}function HU(){const t=Cfe(),e=Sfe();return t.prompt?t:e}function Cfe(){const{t}=He(),{formCode:e,lengthVariant:n,treatment:r,passthroughType:o}=yde();if(e&&n&&r){const i=t(`promptsByFormCode.${e}.${r}.${n}`,"");return{passthroughType:o,prompt:i,source:i?{type:"formCode",formCode:e}:void 0}}return{passthroughType:null}}function Sfe(){const{prompt:t}=vU({deferred:!0}),{prompt:e}=BU({deferred:!0});let n=null,r;return t?(n="partial",r=t):e&&(n="full",r=e),{passthroughType:n,prompt:r,source:r?{type:"query"}:void 0}}function zU(){const t=O(BI),{passthroughType:e}=HU();return!!t&&e==="full"}function Efe(){var c,u;const t=$t(),e=O(Ar),n=O(zI),{isMediaViewerOpen:r}=Aa(),{disableMultiturn:o}=ye.instance().config(),i=((c=ye.instance().config().composer)==null?void 0:c.largeScreen)===!0&&((u=ye.instance().config().composer)==null?void 0:u.voiceOnly)===!0,s=["/pro/subscribe","/pro/ewallet/return","/referrals","/referrals/rules","/subscription/manage","/subscription/start"],a=zU();return!s.includes(t)&&!t.startsWith("/topic-selection")&&(!t.startsWith("/fang")||r)&&!t.startsWith("/login")&&!t.startsWith("/pro/redeem")&&!t.startsWith("/gaming")&&!t.startsWith("/labs")&&!t.startsWith("/memory/narrative")&&!t.startsWith("/conversations")&&!t.startsWith("/campaigns")&&!t.startsWith("/pages")&&!t.startsWith("/shares/pages")&&!t.startsWith("/gallery")&&e!=="detail-only"&&!n&&!i&&!o&&!a}function wfe(){var r,o;const t=$t(),e=fb();return((r=ye.instance().config().composer)==null?void 0:r.largeScreen)===!0&&((o=ye.instance().config().composer)==null?void 0:o.voiceOnly)===!0&&!t.startsWith("/login-dcf")&&!e}function Ife(t){const{showSettings:e,showSettingsRelyOnChatDetailLayout:n}=t,r=O(Ar);return m.useMemo(()=>n?e&&r!=="side-by-side"&&r!=="detail-only":e,[n,e,r])}function VU(){const t=Object.assign({"../../assets/lottie/chain-of-thought-dark.json":()=>z(()=>import("./chain-of-thought-dark-DAdrbVMG.js"),[]).then(e=>e.default),"../../assets/lottie/chain-of-thought-light.json":()=>z(()=>import("./chain-of-thought-light-Cr0oOWNN.js"),[]).then(e=>e.default),"../../assets/lottie/character-thinking-cloud-animation.json":()=>z(()=>import("./character-thinking-cloud-animation-BPHslFRh.js"),[]).then(e=>e.default),"../../assets/lottie/image-gen-dark.json":()=>z(()=>import("./image-gen-dark-Xe9QwJfO.js"),[]).then(e=>e.default),"../../assets/lottie/image-gen-light.json":()=>z(()=>import("./image-gen-light-CvTKvF-o.js"),[]).then(e=>e.default),"../../assets/lottie/loader-gradient.json":()=>z(()=>import("./loader-gradient-nOUtNO79.js"),[]).then(e=>e.default),"../../assets/lottie/loader-image-generating.json":()=>z(()=>import("./loader-image-generating-CXsAaCuT.js"),[]).then(e=>e.default),"../../assets/lottie/loader-reasoning-dark.json":()=>z(()=>import("./loader-reasoning-dark-BWb0u6bB.js"),[]).then(e=>e.default),"../../assets/lottie/loader-reasoning-light.json":()=>z(()=>import("./loader-reasoning-light-DeS5Bpum.js"),[]).then(e=>e.default),"../../assets/lottie/loader-spinner-dark.json":()=>z(()=>import("./loader-spinner-dark-OIzWyRIV.js"),[]).then(e=>e.default),"../../assets/lottie/loader-spinner-light.json":()=>z(()=>import("./loader-spinner-light-DwSZ3tXn.js"),[]).then(e=>e.default),"../../assets/lottie/loader-spinner-white.json":()=>z(()=>import("./loader-spinner-white-B1ATuHTQ.js"),[]).then(e=>e.default),"../../assets/lottie/pages-welcome-dark.json":()=>z(()=>import("./pages-welcome-dark-r64A2mUI.js"),[]).then(e=>e.default),"../../assets/lottie/pages-welcome-light.json":()=>z(()=>import("./pages-welcome-light-DDUDcHxX.js"),[]).then(e=>e.default),"../../assets/lottie/voicemail-dark.json":()=>z(()=>import("./voicemail-dark-BtARQIb1.js"),[]).then(e=>e.default),"../../assets/lottie/voicemail-light.json":()=>z(()=>import("./voicemail-light-DeMSWjpH.js"),[]).then(e=>e.default)});return{load:e=>{const n=t[e];return n?n():Promise.reject(new Error(`Lottie animation not found: ${e}`))},exists:e=>e in t,getPaths:()=>Object.keys(t)}}const Tfe=m.lazy(()=>z(()=>import("./index.es-xEQWo7JZ.js"),__vite__mapDeps([219,2,1]))),_fe=VU();function kt(t){const{type:e,className:n,rendererSettings:r,colorTheme:o}=t,i=O(ks),s=o??i,[a,c]=m.useState(null),d=`../../assets/lottie/${m.useMemo(()=>{switch(e){case"gradient":return"loader-gradient.json";case"reasoning":return s==="dark"?"loader-reasoning-dark.json":"loader-reasoning-light.json";case"chainOfThought":return s==="dark"?"chain-of-thought-dark.json":"chain-of-thought-light.json";case"spinnerWhite":return"loader-spinner-white.json";case"imageGen":return s==="dark"?"image-gen-dark.json":"image-gen-light.json";case"spinnerThemed":default:return s==="dark"?"loader-spinner-dark.json":"loader-spinner-light.json"}},[e,s])}`;return m.useEffect(()=>{_fe.load(d).then(c).catch(()=>c(null))},[d]),a?h.jsx(m.Suspense,{fallback:h.jsx("div",{}),children:h.jsx(Tfe,{animationData:a,loop:!0,className:n,rendererSettings:r})}):h.jsx("div",{})}const aA=Object.freeze(Object.defineProperty({__proto__:null,default:kt},Symbol.toStringTag,{value:"Module"})),Afe=16/9,kfe=48,$U=296,xfe=$U/Afe,Rfe=xfe+kfe;function Nfe(){return h.jsx("div",{className:"pointer-events-none absolute inset-0 mb-[calc(var(--composer-container-height)+20px)] me-4 ms-2 mt-[72px]",children:h.jsx("div",{className:"absolute bottom-0 end-4",style:{width:`${$U}px`,height:`${Rfe}px`},children:h.jsx("div",{className:W("relative flex h-full flex-col overflow-hidden rounded-4xl","bg-acrylic-default-fallback-light/[98] dark:bg-acrylic-default-fallback-dark/[98]"),style:{boxShadow:"0px 16px 24px -2px rgba(0, 0, 0, 0.12)"},children:h.jsx("div",{className:"flex h-full items-center justify-center",children:h.jsx(kt,{className:"size-12"})})})})})}let Cu=null;async function Pfe(t){return Cu||(Cu=(await z(async()=>{const{default:e}=await import("./katex-CfZphoad.js");return{default:e}},[])).default,t==null||t(),Cu)}function GU(t,e,n){return Cu?Cu.renderToString(t,{output:"mathml",displayMode:e,throwOnError:!1}):(Pfe(n),t)}var $a={},Ah={},Ga={},qN;function KU(){if(qN)return Ga;qN=1,Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.Node=Ga.NodeType=void 0;var t;(function(i){i[i.element=1]="element",i[i.text=3]="text"})(t||(Ga.NodeType=t={}));let e=class{constructor({nodeType:s,namespace:a,selfCloseTag:c,text:u,nodeName:d,childNodes:f,parentNode:p,attributes:g}){this.namespace=a||null,this.nodeType=s,this.isSelfCloseTag=!!c,this.text=u||null,this.nodeName=s===t.element?d:"#text",this.childNodes=f||[],this.parentNode=p,this.attributes=g||[]}get firstChild(){return this.childNodes[0]||null}get lastChild(){return this.childNodes[this.childNodes.length-1]||null}get innerHTML(){return this.childNodes.reduce((s,a)=>s+(a.nodeType===t.text?a.text:a.outerHTML),"")}get outerHTML(){if(this.nodeType===t.text)return this.textContent;const s=o(this.attributes),a=`<${this.nodeName}${s.length?" ":""}${s}${this.isSelfCloseTag?"/":""}>`;if(this.isSelfCloseTag)return a;const c=this.childNodes.map(d=>d.outerHTML).join(""),u=`</${this.nodeName}>`;return[a,c,u].join("")}get textContent(){return this.nodeType===t.text?this.text:this.childNodes.map(s=>s.textContent).join("").replace(/\x20+/g," ")}getAttribute(s){const a=this.attributes.find(c=>c.name===s);return a?a.value:null}getElementsByTagName(s){return n(this,a=>a.nodeName.toUpperCase()===s.toUpperCase())}getElementsByClassName(s){const a=new RegExp(`^(.*?\\s)?${s}(\\s.*?)?$`);return n(this,c=>!!(c.attributes.length&&a.test(c.getAttribute("class")||"")))}getElementsByName(s){return n(this,a=>!!(a.attributes.length&&a.getAttribute("name")===s))}getElementById(s){return r(this,a=>!!(a.attributes.length&&a.getAttribute("id")===s))}};Ga.Node=e,e.ELEMENT_NODE=t.element,e.TEXT_NODE=t.text;function n(i,s){return i.nodeType===t.text?[]:i.childNodes.reduce((a,c)=>c.nodeType!==t.text&&s(c)?[...a,c,...n(c,s)]:[...a,...n(c,s)],[])}function r(i,s){for(let a=0,c=i.childNodes.length;a<c;a++){const u=i.childNodes[a];if(s(u))return u;const d=r(u,s);if(d)return d}return null}function o(i){return i.map(s=>s.name+(s.value?`="${s.value}"`:"")).join(" ")}return Ga}var kh={},YN;function Ofe(){if(YN)return kh;YN=1,Object.defineProperty(kh,"__esModule",{value:!0}),kh.NodeAttribute=void 0;let t=class{constructor({name:n,value:r}){this.name=n,this.value=r}};return kh.NodeAttribute=t,kh}var QN;function JN(){if(QN)return Ah;QN=1,Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.Dom=void 0;const t=KU(),e=Ofe(),n=/(<\/?(?:[a-z][a-z0-9]*:)?[a-z][a-z0-9-_.]*?[a-z0-9]*\s*(?:\s+[a-z0-9-_:]+(?:=(?:(?:'[\s\S]*?')|(?:"[\s\S]*?")))?)*\s*\/?>)|([^<]|<(?![a-z/]))*/gi,r=/\s[a-z0-9-_:]+\b(\s*=\s*('|")[\s\S]*?\2)?/gi,o=/(\s[a-z0-9-_:]+\b\s*)(?:=(\s*('|")[\s\S]*?\3))?/gi,i=/^<[a-z]/,s=/\/>$/,a=/^<\//,c=/^[^<]/,u=/<\/?((?:([a-z][a-z0-9]*):)?(?:[a-z](?:[a-z0-9-_.]*[a-z0-9])?))/i,d=/^('|")|('|")$/g,f=/^(?:area|base|br|col|command|embed|hr|img|input|link|meta|param|source)/i;let p=class{constructor(T){this.rawHTML=T}find(T,A){const _=g(this.rawHTML,T,A);return A?_[0]||null:_}getElementsByClassName(T){const A=new RegExp(`^(.*?\\s)?${T}(\\s.*?)?$`);return this.find(_=>!!(_.attributes.length&&A.test(_.getAttribute("class")||"")))}getElementsByTagName(T){return this.find(A=>A.nodeName.toUpperCase()===T.toUpperCase())}getElementById(T){return this.find(A=>A.getAttribute("id")===T,!0)}getElementsByName(T){return this.find(A=>A.getAttribute("name")===T)}getElementsByAttribute(T,A){return this.find(_=>_.getAttribute(T)===A)}};Ah.Dom=p;function g(I,T,A=!1){const _=v(I),U=[];for(const k of _)if(k&&T(k)&&(U.push(k),A))return U;return U}function*v(I){const T=y(I);let A=null;for(let _=0,U=T.length;_<U;_++){const k=T[_];A=C(k,A)||A,b(A,k)&&(yield A,A=A.parentNode)}for(;A;)yield A,A=A.parentNode}function b(I,T){if(!T)return!1;const A=a.test(T),[,_]=T.match(u)||[];return A&&I.nodeName===_||I.isSelfCloseTag||I.nodeType===t.NodeType.text}function y(I){return I.match(n)||[]}function C(I,T){const A=c.test(I),_=i.test(I);return A?E(I,T):_?S(I,T):null}function S(I,T){var A;const[,_,U]=I.match(u)||[],k=s.test(I)||f.test(_),G=w(I),K=new t.Node({nodeType:t.NodeType.element,nodeName:_,namespace:U,attributes:G,childNodes:[],parentNode:T,selfCloseTag:k});return(A=T==null?void 0:T.childNodes)===null||A===void 0||A.push(K),K}function w(I){return(I.match(r)||[]).map(T=>{o.lastIndex=0;const A=o.exec(T)||[],[,_="",U=""]=A;return new e.NodeAttribute({name:_.trim(),value:U.trim().replace(d,"")})})}function E(I,T){var A;const _=new t.Node({nodeType:t.NodeType.text,nodeName:"#text",text:I,parentNode:T});return(A=T==null?void 0:T.childNodes)===null||A===void 0||A.push(_),_}return Ah}var XN;function Mfe(){return XN||(XN=1,function(t){var e=$a&&$a.__createBinding||(Object.create?function(i,s,a,c){c===void 0&&(c=a);var u=Object.getOwnPropertyDescriptor(s,a);(!u||("get"in u?!s.__esModule:u.writable||u.configurable))&&(u={enumerable:!0,get:function(){return s[a]}}),Object.defineProperty(i,c,u)}:function(i,s,a,c){c===void 0&&(c=a),i[c]=s[a]}),n=$a&&$a.__exportStar||function(i,s){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(s,a)&&e(s,i,a)};Object.defineProperty(t,"__esModule",{value:!0}),t.parseFromString=void 0;const r=JN();function o(i){return new r.Dom(i)}t.parseFromString=o,n(JN(),t),n(KU(),t)}($a)),$a}var ZN=Mfe();function cA(t){const e=[];let n="",r=!1;for(const o of t)o===" "||o===`
`?r=!0:r&&(e.push(n),n="",r=!1),n+=o;return n.length>0&&e.push(n),e}function Lfe(t){const n=ZN.parseFromString(`<html>${t}</html>`).getElementsByTagName("html")[0];let r=[];for(const o of n.childNodes)o.nodeType===ZN.NodeType.text?o.textContent&&(r=r.concat(cA(o.textContent))):r.push(o.outerHTML);return r}function Dfe(t){return t===" "||t===`
`||t==="	"}function Vxe(t,e,n={}){if(t.length<=e)return t;function r(a){const c=a.trim();return n.ellipsis?`${c}...`:c}const o=t.indexOf(`
`,0);if(o>=0&&o<e){const a=t.slice(0,o);return r(a)}let i=e;for(;i>0;){const a=t[i];if(a&&!Dfe(a))i-=1;else break}let s=t.slice(0,e);return i>0&&(s=t.slice(0,i)),r(s)}let Pi=null;function WU(t){return Pi||(z(()=>import("./core-BiIOkrJH.js"),__vite__mapDeps([220,2])).then(e=>e.default).then(e=>{Pi=e,t==null||t()}),null)}async function jfe(t){const[{ALIAS_TO_SUPPORTED_LANGUAGE:e},{loadLanguageModule:n}]=await Promise.all([z(()=>Promise.resolve().then(()=>xhe),void 0),z(()=>import("./language-loader-Dg2dKVYB.js"),__vite__mapDeps([221,1,2]))]),r=e.get(t);if(!r)return!1;const o=await n(r);return o?Pi?(Pi.registerLanguage(t,o),!0):(WU(()=>{Pi==null||Pi.registerLanguage(t,o)}),!1):!1}const Ufe={jsx:["xml"],tsx:["xml"]};async function Ffe(t){const e=t.map(async r=>Pi?Pi.getLanguage(r)?!1:jfe(r):!1);return(await Promise.allSettled(e)).some(r=>r.status==="fulfilled"&&r.value)}async function Bfe(t){const e=Ufe[t]??[];return Ffe([...e,t])}const au=.018;function $l({items:t,delay:e,isHtml:n,forceRender:r}){var i;const o=[];for(const s of t){if(s.type==="citation"){const p=e.getValue();e.queueUpdate(au),o.push({type:"citation",delay:p,...s.props});continue}if(s.type==="latex"){const p=GU(s.props.content,!1,r),g=e.getValue();e.queueUpdate(au),o.push({type:"word",word:p,delay:g,format:"latexAsHtml"});continue}if(s.props.link){const p=s.props.text,{url:g}=s.props.link,v=e.getValue();e.queueUpdate(au),o.push({type:"word",word:p,delay:v,url:g});continue}let a=null,c=null;if(s.props.annotations){for(const p of["italic","bold","strikethrough","code","sub","sup"])if(s.props.annotations[p]){const v={type:p,items:[]};(p==="code"||p==="sup"||p==="sub")&&(v.delay=e.getValue(),e.queueUpdate(au)),c?(c.items.push(v),c=v):(a=v,c=v)}}const u=[],d=(i=s.props.annotations)==null?void 0:i.code;let f;n?f=Lfe(s.props.text):f=cA(s.props.text);for(let p=0;p<f.length;p+=1)u.push({type:"word",word:f[p],delay:e.getValue(),format:d?"code":void 0}),e.queueUpdate(au);c&&a?(c.items.push(...u),o.push(a)):o.push(...u)}return o}function Fv(t,e,n){const r=[];for(const o of t)switch(o.type){case"paragraph":{r.push({type:"paragraph",items:$l({items:o.props.items,delay:e,forceRender:n})});continue}case"list":{r.push({type:"list",ordered:o.props.ordered,start:o.props.start,items:o.props.items.map(i=>({delay:e.getValue(),items:Fv(i,e,n)}))});continue}case"heading":{r.push({type:"heading",level:o.props.level,items:$l({items:o.props.items,delay:e})});continue}case"hr":{r.push({type:"hr",delay:e.getValue()}),e.queueUpdate(au);continue}case"code":{const{language:i,content:s}=o.props;if(s.type!=="text")continue;let a=s.props.text,c=!1;if(i){const d=WU(n);if(Bfe(i).then(f=>{f&&n()}),d!=null&&d.getLanguage(i)){const{value:f}=d.highlight(s.props.text,{language:i});f&&(a=f,c=!0)}}const u={...s,props:{...s.props,text:a}};r.push({type:"code",content:$l({items:[u],delay:e,isHtml:c}),original:s.props.text,language:i,delay:e.getValue(),dangerouslyUseHtml:c});continue}case"latex":{const{content:i}=o.props;if(i.type!=="text")continue;i.props.text=GU(i.props.text,!0,n),r.push({type:"latex",content:$l({items:[i],isHtml:!0,delay:e}),delay:e.getValue(),dangerouslyUseHtml:!0});continue}case"table":{r.push({type:"table",columns:o.props.columns.map(i=>$l({items:i,delay:e})),data:o.props.data.map(i=>i.map(s=>$l({items:s,delay:e})))});continue}case"blockquote":{r.push({type:"blockquote",delay:e.getValue(),items:Fv(o.props.items,e,n)});continue}default:{console.log(`Unhandled block type: ${o.type}`);continue}}return r}var Am;function qU(t){return Am=Am||document.createElement("textarea"),Am.innerHTML="&"+t+";",Am.value}var Hfe=Object.prototype.hasOwnProperty;function zfe(t,e){return t?Hfe.call(t,e):!1}function YU(t){var e=[].slice.call(arguments,1);return e.forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){t[r]=n[r]})}}),t}var Vfe=/\\([\\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function Yf(t){return t.indexOf("\\")<0?t:t.replace(Vfe,"$1")}function QU(t){return!(t>=55296&&t<=57343||t>=64976&&t<=65007||(t&65535)===65535||(t&65535)===65534||t>=0&&t<=8||t===11||t>=14&&t<=31||t>=127&&t<=159||t>1114111)}function Aw(t){if(t>65535){t-=65536;var e=55296+(t>>10),n=56320+(t&1023);return String.fromCharCode(e,n)}return String.fromCharCode(t)}var $fe=/&([a-z#][a-z0-9]{1,31});/gi,Gfe=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))/i;function Kfe(t,e){var n=0,r=qU(e);return e!==r?r:e.charCodeAt(0)===35&&Gfe.test(e)&&(n=e[1].toLowerCase()==="x"?parseInt(e.slice(2),16):parseInt(e.slice(1),10),QU(n))?Aw(n):t}function Jc(t){return t.indexOf("&")<0?t:t.replace($fe,Kfe)}var Wfe=/[&<>"]/,qfe=/[&<>"]/g,Yfe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function Qfe(t){return Yfe[t]}function Br(t){return Wfe.test(t)?t.replace(qfe,Qfe):t}var Qe={};Qe.blockquote_open=function(){return`<blockquote>
`};Qe.blockquote_close=function(t,e){return"</blockquote>"+Sl(t,e)};Qe.code=function(t,e){return t[e].block?"<pre><code>"+Br(t[e].content)+"</code></pre>"+Sl(t,e):"<code>"+Br(t[e].content)+"</code>"};Qe.fence=function(t,e,n,r,o){var i=t[e],s="",a=n.langPrefix,c="",u,d,f;if(i.params){if(u=i.params.split(/\s+/g),d=u.join(" "),zfe(o.rules.fence_custom,u[0]))return o.rules.fence_custom[u[0]](t,e,n,r,o);c=Br(Jc(Yf(d))),s=' class="'+a+c+'"'}return n.highlight?f=n.highlight.apply(n.highlight,[i.content].concat(u))||Br(i.content):f=Br(i.content),"<pre><code"+s+">"+f+"</code></pre>"+Sl(t,e)};Qe.fence_custom={};Qe.heading_open=function(t,e){return"<h"+t[e].hLevel+">"};Qe.heading_close=function(t,e){return"</h"+t[e].hLevel+`>
`};Qe.hr=function(t,e,n){return(n.xhtmlOut?"<hr />":"<hr>")+Sl(t,e)};Qe.bullet_list_open=function(){return`<ul>
`};Qe.bullet_list_close=function(t,e){return"</ul>"+Sl(t,e)};Qe.list_item_open=function(){return"<li>"};Qe.list_item_close=function(){return`</li>
`};Qe.ordered_list_open=function(t,e){var n=t[e],r=n.order>1?' start="'+n.order+'"':"";return"<ol"+r+`>
`};Qe.ordered_list_close=function(t,e){return"</ol>"+Sl(t,e)};Qe.paragraph_open=function(t,e){return t[e].tight?"":"<p>"};Qe.paragraph_close=function(t,e){var n=!(t[e].tight&&e&&t[e-1].type==="inline"&&!t[e-1].content);return(t[e].tight?"":"</p>")+(n?Sl(t,e):"")};Qe.link_open=function(t,e,n){var r=t[e].title?' title="'+Br(Jc(t[e].title))+'"':"",o=n.linkTarget?' target="'+n.linkTarget+'"':"";return'<a href="'+Br(t[e].href)+'"'+r+o+">"};Qe.link_close=function(){return"</a>"};Qe.image=function(t,e,n){var r=' src="'+Br(t[e].src)+'"',o=t[e].title?' title="'+Br(Jc(t[e].title))+'"':"",i=' alt="'+(t[e].alt?Br(Jc(Yf(t[e].alt))):"")+'"',s=n.xhtmlOut?" /":"";return"<img"+r+i+o+s+">"};Qe.table_open=function(){return`<table>
`};Qe.table_close=function(){return`</table>
`};Qe.thead_open=function(){return`<thead>
`};Qe.thead_close=function(){return`</thead>
`};Qe.tbody_open=function(){return`<tbody>
`};Qe.tbody_close=function(){return`</tbody>
`};Qe.tr_open=function(){return"<tr>"};Qe.tr_close=function(){return`</tr>
`};Qe.th_open=function(t,e){var n=t[e];return"<th"+(n.align?' style="text-align:'+n.align+'"':"")+">"};Qe.th_close=function(){return"</th>"};Qe.td_open=function(t,e){var n=t[e];return"<td"+(n.align?' style="text-align:'+n.align+'"':"")+">"};Qe.td_close=function(){return"</td>"};Qe.strong_open=function(){return"<strong>"};Qe.strong_close=function(){return"</strong>"};Qe.em_open=function(){return"<em>"};Qe.em_close=function(){return"</em>"};Qe.del_open=function(){return"<del>"};Qe.del_close=function(){return"</del>"};Qe.ins_open=function(){return"<ins>"};Qe.ins_close=function(){return"</ins>"};Qe.mark_open=function(){return"<mark>"};Qe.mark_close=function(){return"</mark>"};Qe.sub=function(t,e){return"<sub>"+Br(t[e].content)+"</sub>"};Qe.sup=function(t,e){return"<sup>"+Br(t[e].content)+"</sup>"};Qe.hardbreak=function(t,e,n){return n.xhtmlOut?`<br />
`:`<br>
`};Qe.softbreak=function(t,e,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Qe.text=function(t,e){return Br(t[e].content)};Qe.htmlblock=function(t,e){return t[e].content};Qe.htmltag=function(t,e){return t[e].content};Qe.abbr_open=function(t,e){return'<abbr title="'+Br(Jc(t[e].title))+'">'};Qe.abbr_close=function(){return"</abbr>"};Qe.footnote_ref=function(t,e){var n=Number(t[e].id+1).toString(),r="fnref"+n;return t[e].subId>0&&(r+=":"+t[e].subId),'<sup class="footnote-ref"><a href="#fn'+n+'" id="'+r+'">['+n+"]</a></sup>"};Qe.footnote_block_open=function(t,e,n){var r=n.xhtmlOut?`<hr class="footnotes-sep" />
`:`<hr class="footnotes-sep">
`;return r+`<section class="footnotes">
<ol class="footnotes-list">
`};Qe.footnote_block_close=function(){return`</ol>
</section>
`};Qe.footnote_open=function(t,e){var n=Number(t[e].id+1).toString();return'<li id="fn'+n+'"  class="footnote-item">'};Qe.footnote_close=function(){return`</li>
`};Qe.footnote_anchor=function(t,e){var n=Number(t[e].id+1).toString(),r="fnref"+n;return t[e].subId>0&&(r+=":"+t[e].subId),' <a href="#'+r+'" class="footnote-backref">↩</a>'};Qe.dl_open=function(){return`<dl>
`};Qe.dt_open=function(){return"<dt>"};Qe.dd_open=function(){return"<dd>"};Qe.dl_close=function(){return`</dl>
`};Qe.dt_close=function(){return`</dt>
`};Qe.dd_close=function(){return`</dd>
`};function JU(t,e){return++e>=t.length-2?e:t[e].type==="paragraph_open"&&t[e].tight&&t[e+1].type==="inline"&&t[e+1].content.length===0&&t[e+2].type==="paragraph_close"&&t[e+2].tight?JU(t,e+2):e}var Sl=Qe.getBreak=function(e,n){return n=JU(e,n),n<e.length&&e[n].type==="list_item_close"?"":`
`};function lA(){this.rules=YU({},Qe),this.getBreak=Qe.getBreak}lA.prototype.renderInline=function(t,e,n){for(var r=this.rules,o=t.length,i=0,s="";o--;)s+=r[t[i].type](t,i++,e,n,this);return s};lA.prototype.render=function(t,e,n){for(var r=this.rules,o=t.length,i=-1,s="";++i<o;)t[i].type==="inline"?s+=this.renderInline(t[i].children,e,n):s+=r[t[i].type](t,i,e,n,this);return s};function uo(){this.__rules__=[],this.__cache__=null}uo.prototype.__find__=function(t){for(var e=this.__rules__.length,n=-1;e--;)if(this.__rules__[++n].name===t)return n;return-1};uo.prototype.__compile__=function(){var t=this,e=[""];t.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){e.indexOf(r)<0&&e.push(r)})}),t.__cache__={},e.forEach(function(n){t.__cache__[n]=[],t.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||t.__cache__[n].push(r.fn))})})};uo.prototype.at=function(t,e,n){var r=this.__find__(t),o=n||{};if(r===-1)throw new Error("Parser rule not found: "+t);this.__rules__[r].fn=e,this.__rules__[r].alt=o.alt||[],this.__cache__=null};uo.prototype.before=function(t,e,n,r){var o=this.__find__(t),i=r||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};uo.prototype.after=function(t,e,n,r){var o=this.__find__(t),i=r||{};if(o===-1)throw new Error("Parser rule not found: "+t);this.__rules__.splice(o+1,0,{name:e,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};uo.prototype.push=function(t,e,n){var r=n||{};this.__rules__.push({name:t,enabled:!0,fn:e,alt:r.alt||[]}),this.__cache__=null};uo.prototype.enable=function(t,e){t=Array.isArray(t)?t:[t],e&&this.__rules__.forEach(function(n){n.enabled=!1}),t.forEach(function(n){var r=this.__find__(n);if(r<0)throw new Error("Rules manager: invalid rule name "+n);this.__rules__[r].enabled=!0},this),this.__cache__=null};uo.prototype.disable=function(t){t=Array.isArray(t)?t:[t],t.forEach(function(e){var n=this.__find__(e);if(n<0)throw new Error("Rules manager: invalid rule name "+e);this.__rules__[n].enabled=!1},this),this.__cache__=null};uo.prototype.getRules=function(t){return this.__cache__===null&&this.__compile__(),this.__cache__[t]||[]};function Jfe(t){t.inlineMode?t.tokens.push({type:"inline",content:t.src.replace(/\n/g," ").trim(),level:0,lines:[0,1],children:[]}):t.block.parse(t.src,t.options,t.env,t.tokens)}function El(t,e,n,r,o){this.src=t,this.env=r,this.options=n,this.parser=e,this.tokens=o,this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache=[],this.isInLabel=!1,this.linkLevel=0,this.linkContent="",this.labelUnmatchedScopes=0}El.prototype.pushPending=function(){this.tokens.push({type:"text",content:this.pending,level:this.pendingLevel}),this.pending=""};El.prototype.push=function(t){this.pending&&this.pushPending(),this.tokens.push(t),this.pendingLevel=this.level};El.prototype.cacheSet=function(t,e){for(var n=this.cache.length;n<=t;n++)this.cache.push(0);this.cache[t]=e};El.prototype.cacheGet=function(t){return t<this.cache.length?this.cache[t]:0};function Qf(t,e){var n,r,o,i=-1,s=t.posMax,a=t.pos,c=t.isInLabel;if(t.isInLabel)return-1;if(t.labelUnmatchedScopes)return t.labelUnmatchedScopes--,-1;for(t.pos=e+1,t.isInLabel=!0,n=1;t.pos<s;){if(o=t.src.charCodeAt(t.pos),o===91)n++;else if(o===93&&(n--,n===0)){r=!0;break}t.parser.skipToken(t)}return r?(i=t.pos,t.labelUnmatchedScopes=0):t.labelUnmatchedScopes=n-1,t.pos=a,t.isInLabel=c,i}function Xfe(t,e,n,r){var o,i,s,a,c,u;if(t.charCodeAt(0)!==42||t.charCodeAt(1)!==91||t.indexOf("]:")===-1||(o=new El(t,e,n,r,[]),i=Qf(o,1),i<0||t.charCodeAt(i+1)!==58))return-1;for(a=o.posMax,s=i+2;s<a&&o.src.charCodeAt(s)!==10;s++);return c=t.slice(2,i),u=t.slice(i+2,s).trim(),u.length===0?-1:(r.abbreviations||(r.abbreviations={}),typeof r.abbreviations[":"+c]>"u"&&(r.abbreviations[":"+c]=u),s)}function Zfe(t){var e=t.tokens,n,r,o,i;if(!t.inlineMode){for(n=1,r=e.length-1;n<r;n++)if(e[n-1].type==="paragraph_open"&&e[n].type==="inline"&&e[n+1].type==="paragraph_close"){for(o=e[n].content;o.length&&(i=Xfe(o,t.inline,t.options,t.env),!(i<0));)o=o.slice(i).trim();e[n].content=o,o.length||(e[n-1].tight=!0,e[n+1].tight=!0)}}}function kw(t){var e=Jc(t);try{e=decodeURI(e)}catch{}return encodeURI(e)}function XU(t,e){var n,r,o,i=e,s=t.posMax;if(t.src.charCodeAt(e)===60){for(e++;e<s;){if(n=t.src.charCodeAt(e),n===10)return!1;if(n===62)return o=kw(Yf(t.src.slice(i+1,e))),t.parser.validateLink(o)?(t.pos=e+1,t.linkContent=o,!0):!1;if(n===92&&e+1<s){e+=2;continue}e++}return!1}for(r=0;e<s&&(n=t.src.charCodeAt(e),!(n===32||n<32||n===127));){if(n===92&&e+1<s){e+=2;continue}if(n===40&&(r++,r>1)||n===41&&(r--,r<0))break;e++}return i===e||(o=Yf(t.src.slice(i,e)),!t.parser.validateLink(o))?!1:(t.linkContent=o,t.pos=e,!0)}function ZU(t,e){var n,r=e,o=t.posMax,i=t.src.charCodeAt(e);if(i!==34&&i!==39&&i!==40)return!1;for(e++,i===40&&(i=41);e<o;){if(n=t.src.charCodeAt(e),n===i)return t.pos=e+1,t.linkContent=Yf(t.src.slice(r+1,e)),!0;if(n===92&&e+1<o){e+=2;continue}e++}return!1}function e6(t){return t.trim().replace(/\s+/g," ").toUpperCase()}function epe(t,e,n,r){var o,i,s,a,c,u,d,f,p;if(t.charCodeAt(0)!==91||t.indexOf("]:")===-1||(o=new El(t,e,n,r,[]),i=Qf(o,0),i<0||t.charCodeAt(i+1)!==58))return-1;for(a=o.posMax,s=i+2;s<a&&(c=o.src.charCodeAt(s),!(c!==32&&c!==10));s++);if(!XU(o,s))return-1;for(d=o.linkContent,s=o.pos,u=s,s=s+1;s<a&&(c=o.src.charCodeAt(s),!(c!==32&&c!==10));s++);for(s<a&&u!==s&&ZU(o,s)?(f=o.linkContent,s=o.pos):(f="",s=u);s<a&&o.src.charCodeAt(s)===32;)s++;return s<a&&o.src.charCodeAt(s)!==10?-1:(p=e6(t.slice(1,i)),typeof r.references[p]>"u"&&(r.references[p]={title:f,href:d}),s)}function tpe(t){var e=t.tokens,n,r,o,i;if(t.env.references=t.env.references||{},!t.inlineMode){for(n=1,r=e.length-1;n<r;n++)if(e[n].type==="inline"&&e[n-1].type==="paragraph_open"&&e[n+1].type==="paragraph_close"){for(o=e[n].content;o.length&&(i=epe(o,t.inline,t.options,t.env),!(i<0));)o=o.slice(i).trim();e[n].content=o,o.length||(e[n-1].tight=!0,e[n+1].tight=!0)}}}function npe(t){var e=t.tokens,n,r,o;for(r=0,o=e.length;r<o;r++)n=e[r],n.type==="inline"&&t.inline.parse(n.content,t.options,t.env,n.children)}function rpe(t){var e,n,r,o,i,s,a,c,u,d=0,f=!1,p={};if(t.env.footnotes&&(t.tokens=t.tokens.filter(function(g){return g.type==="footnote_reference_open"?(f=!0,c=[],u=g.label,!1):g.type==="footnote_reference_close"?(f=!1,p[":"+u]=c,!1):(f&&c.push(g),!f)}),!!t.env.footnotes.list)){for(s=t.env.footnotes.list,t.tokens.push({type:"footnote_block_open",level:d++}),e=0,n=s.length;e<n;e++){for(t.tokens.push({type:"footnote_open",id:e,level:d++}),s[e].tokens?(a=[],a.push({type:"paragraph_open",tight:!1,level:d++}),a.push({type:"inline",content:"",level:d,children:s[e].tokens}),a.push({type:"paragraph_close",tight:!1,level:--d})):s[e].label&&(a=p[":"+s[e].label]),t.tokens=t.tokens.concat(a),t.tokens[t.tokens.length-1].type==="paragraph_close"?i=t.tokens.pop():i=null,o=s[e].count>0?s[e].count:1,r=0;r<o;r++)t.tokens.push({type:"footnote_anchor",id:e,subId:r,level:d});i&&t.tokens.push(i),t.tokens.push({type:"footnote_close",level:--d})}t.tokens.push({type:"footnote_block_close",level:--d})}}var eP=` 
()[]'".,!?-`;function GS(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1")}function ope(t){var e,n,r,o,i,s,a,c,u,d,f,p,g=t.tokens;if(t.env.abbreviations){for(t.env.abbrRegExp||(p="(^|["+eP.split("").map(GS).join("")+"])("+Object.keys(t.env.abbreviations).map(function(v){return v.substr(1)}).sort(function(v,b){return b.length-v.length}).map(GS).join("|")+")($|["+eP.split("").map(GS).join("")+"])",t.env.abbrRegExp=new RegExp(p,"g")),d=t.env.abbrRegExp,n=0,r=g.length;n<r;n++)if(g[n].type==="inline"){for(o=g[n].children,e=o.length-1;e>=0;e--)if(i=o[e],i.type==="text"){for(c=0,s=i.content,d.lastIndex=0,u=i.level,a=[];f=d.exec(s);)d.lastIndex>c&&a.push({type:"text",content:s.slice(c,f.index+f[1].length),level:u}),a.push({type:"abbr_open",title:t.env.abbreviations[":"+f[2]],level:u++}),a.push({type:"text",content:f[2],level:u}),a.push({type:"abbr_close",level:--u}),c=d.lastIndex-f[3].length;a.length&&(c<s.length&&a.push({type:"text",content:s.slice(c),level:u}),g[n].children=o=[].concat(o.slice(0,e),a,o.slice(e+1)))}}}}var ipe=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,spe=/\((c|tm|r|p)\)/ig,ape={c:"©",r:"®",p:"§",tm:"™"};function cpe(t){return t.indexOf("(")<0?t:t.replace(spe,function(e,n){return ape[n.toLowerCase()]})}function lpe(t){var e,n,r,o,i;if(t.options.typographer){for(i=t.tokens.length-1;i>=0;i--)if(t.tokens[i].type==="inline")for(o=t.tokens[i].children,e=o.length-1;e>=0;e--)n=o[e],n.type==="text"&&(r=n.content,r=cpe(r),ipe.test(r)&&(r=r.replace(/\+-/g,"±").replace(/\.{2,}/g,"…").replace(/([?!])…/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---([^-]|$)/mg,"$1—$2").replace(/(^|\s)--(\s|$)/mg,"$1–$2").replace(/(^|[^-\s])--([^-\s]|$)/mg,"$1–$2")),n.content=r)}}var upe=/['"]/,tP=/['"]/g,dpe=/[-\s()\[\]]/,nP="’";function rP(t,e){return e<0||e>=t.length?!1:!dpe.test(t[e])}function Gl(t,e,n){return t.substr(0,e)+n+t.substr(e+1)}function hpe(t){var e,n,r,o,i,s,a,c,u,d,f,p,g,v,b,y,C;if(t.options.typographer){for(C=[],b=t.tokens.length-1;b>=0;b--)if(t.tokens[b].type==="inline"){for(y=t.tokens[b].children,C.length=0,e=0;e<y.length;e++)if(n=y[e],!(n.type!=="text"||upe.test(n.text))){for(a=y[e].level,g=C.length-1;g>=0&&!(C[g].level<=a);g--);C.length=g+1,r=n.content,i=0,s=r.length;e:for(;i<s&&(tP.lastIndex=i,o=tP.exec(r),!!o);){if(c=!rP(r,o.index-1),i=o.index+1,v=o[0]==="'",u=!rP(r,i),!u&&!c){v&&(n.content=Gl(n.content,o.index,nP));continue}if(f=!u,p=!c,p){for(g=C.length-1;g>=0&&(d=C[g],!(C[g].level<a));g--)if(d.single===v&&C[g].level===a){d=C[g],v?(y[d.token].content=Gl(y[d.token].content,d.pos,t.options.quotes[2]),n.content=Gl(n.content,o.index,t.options.quotes[3])):(y[d.token].content=Gl(y[d.token].content,d.pos,t.options.quotes[0]),n.content=Gl(n.content,o.index,t.options.quotes[1])),C.length=g;continue e}}f?C.push({token:e,pos:o.index,single:v,level:a}):p&&v&&(n.content=Gl(n.content,o.index,nP))}}}}}var KS=[["block",Jfe],["abbr",Zfe],["references",tpe],["inline",npe],["footnote_tail",rpe],["abbr2",ope],["replacements",lpe],["smartquotes",hpe]];function t6(){this.options={},this.ruler=new uo;for(var t=0;t<KS.length;t++)this.ruler.push(KS[t][0],KS[t][1])}t6.prototype.process=function(t){var e,n,r;for(r=this.ruler.getRules(""),e=0,n=r.length;e<n;e++)r[e](t)};function wl(t,e,n,r,o){var i,s,a,c,u,d,f;for(this.src=t,this.parser=e,this.options=n,this.env=r,this.tokens=o,this.bMarks=[],this.eMarks=[],this.tShift=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.parentType="root",this.ddIndent=-1,this.level=0,this.result="",s=this.src,d=0,f=!1,a=c=d=0,u=s.length;c<u;c++){if(i=s.charCodeAt(c),!f)if(i===32){d++;continue}else f=!0;(i===10||c===u-1)&&(i!==10&&c++,this.bMarks.push(a),this.eMarks.push(c),this.tShift.push(d),f=!1,d=0,a=c+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.lineMax=this.bMarks.length-1}wl.prototype.isEmpty=function(e){return this.bMarks[e]+this.tShift[e]>=this.eMarks[e]};wl.prototype.skipEmptyLines=function(e){for(var n=this.lineMax;e<n&&!(this.bMarks[e]+this.tShift[e]<this.eMarks[e]);e++);return e};wl.prototype.skipSpaces=function(e){for(var n=this.src.length;e<n&&this.src.charCodeAt(e)===32;e++);return e};wl.prototype.skipChars=function(e,n){for(var r=this.src.length;e<r&&this.src.charCodeAt(e)===n;e++);return e};wl.prototype.skipCharsBack=function(e,n,r){if(e<=r)return e;for(;e>r;)if(n!==this.src.charCodeAt(--e))return e+1;return e};wl.prototype.getLines=function(e,n,r,o){var i,s,a,c,u,d=e;if(e>=n)return"";if(d+1===n)return s=this.bMarks[d]+Math.min(this.tShift[d],r),a=o?this.eMarks[d]+1:this.eMarks[d],this.src.slice(s,a);for(c=new Array(n-e),i=0;d<n;d++,i++)u=this.tShift[d],u>r&&(u=r),u<0&&(u=0),s=this.bMarks[d]+u,d+1<n||o?a=this.eMarks[d]+1:a=this.eMarks[d],c[i]=this.src.slice(s,a);return c.join("")};function fpe(t,e,n){var r,o;if(t.tShift[e]-t.blkIndent<4)return!1;for(o=r=e+1;r<n;){if(t.isEmpty(r)){r++;continue}if(t.tShift[r]-t.blkIndent>=4){r++,o=r;continue}break}return t.line=r,t.tokens.push({type:"code",content:t.getLines(e,o,4+t.blkIndent,!0),block:!0,lines:[e,t.line],level:t.level}),!0}function ppe(t,e,n,r){var o,i,s,a,c,u=!1,d=t.bMarks[e]+t.tShift[e],f=t.eMarks[e];if(d+3>f||(o=t.src.charCodeAt(d),o!==126&&o!==96)||(c=d,d=t.skipChars(d,o),i=d-c,i<3)||(s=t.src.slice(d,f).trim(),s.indexOf("`")>=0))return!1;if(r)return!0;for(a=e;a++,!(a>=n||(d=c=t.bMarks[a]+t.tShift[a],f=t.eMarks[a],d<f&&t.tShift[a]<t.blkIndent));)if(t.src.charCodeAt(d)===o&&!(t.tShift[a]-t.blkIndent>=4)&&(d=t.skipChars(d,o),!(d-c<i)&&(d=t.skipSpaces(d),!(d<f)))){u=!0;break}return i=t.tShift[e],t.line=a+(u?1:0),t.tokens.push({type:"fence",params:s,content:t.getLines(e+1,a,i,!0),lines:[e,t.line],level:t.level}),!0}function mpe(t,e,n,r){var o,i,s,a,c,u,d,f,p,g,v,b=t.bMarks[e]+t.tShift[e],y=t.eMarks[e];if(b>y||t.src.charCodeAt(b++)!==62||t.level>=t.options.maxNesting)return!1;if(r)return!0;for(t.src.charCodeAt(b)===32&&b++,c=t.blkIndent,t.blkIndent=0,a=[t.bMarks[e]],t.bMarks[e]=b,b=b<y?t.skipSpaces(b):b,i=b>=y,s=[t.tShift[e]],t.tShift[e]=b-t.bMarks[e],f=t.parser.ruler.getRules("blockquote"),o=e+1;o<n&&(b=t.bMarks[o]+t.tShift[o],y=t.eMarks[o],!(b>=y));o++){if(t.src.charCodeAt(b++)===62){t.src.charCodeAt(b)===32&&b++,a.push(t.bMarks[o]),t.bMarks[o]=b,b=b<y?t.skipSpaces(b):b,i=b>=y,s.push(t.tShift[o]),t.tShift[o]=b-t.bMarks[o];continue}if(i)break;for(v=!1,p=0,g=f.length;p<g;p++)if(f[p](t,o,n,!0)){v=!0;break}if(v)break;a.push(t.bMarks[o]),s.push(t.tShift[o]),t.tShift[o]=-1337}for(u=t.parentType,t.parentType="blockquote",t.tokens.push({type:"blockquote_open",lines:d=[e,0],level:t.level++}),t.parser.tokenize(t,e,o),t.tokens.push({type:"blockquote_close",level:--t.level}),t.parentType=u,d[1]=t.line,p=0;p<s.length;p++)t.bMarks[p+e]=a[p],t.tShift[p+e]=s[p];return t.blkIndent=c,!0}function gpe(t,e,n,r){var o,i,s,a=t.bMarks[e],c=t.eMarks[e];if(a+=t.tShift[e],a>c||(o=t.src.charCodeAt(a++),o!==42&&o!==45&&o!==95))return!1;for(i=1;a<c;){if(s=t.src.charCodeAt(a++),s!==o&&s!==32)return!1;s===o&&i++}return i<3?!1:(r||(t.line=e+1,t.tokens.push({type:"hr",lines:[e,t.line],level:t.level})),!0)}function oP(t,e){var n,r,o;return r=t.bMarks[e]+t.tShift[e],o=t.eMarks[e],r>=o||(n=t.src.charCodeAt(r++),n!==42&&n!==45&&n!==43)||r<o&&t.src.charCodeAt(r)!==32?-1:r}function iP(t,e){var n,r=t.bMarks[e]+t.tShift[e],o=t.eMarks[e];if(r+1>=o||(n=t.src.charCodeAt(r++),n<48||n>57))return-1;for(;;){if(r>=o)return-1;if(n=t.src.charCodeAt(r++),!(n>=48&&n<=57)){if(n===41||n===46)break;return-1}}return r<o&&t.src.charCodeAt(r)!==32?-1:r}function vpe(t,e){var n,r,o=t.level+2;for(n=e+2,r=t.tokens.length-2;n<r;n++)t.tokens[n].level===o&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].tight=!0,t.tokens[n].tight=!0,n+=2)}function ype(t,e,n,r){var o,i,s,a,c,u,d,f,p,g,v,b,y,C,S,w,E,I,T=!0,A,_,U,k;if((f=iP(t,e))>=0)y=!0;else if((f=oP(t,e))>=0)y=!1;else return!1;if(t.level>=t.options.maxNesting)return!1;if(b=t.src.charCodeAt(f-1),r)return!0;for(S=t.tokens.length,y?(d=t.bMarks[e]+t.tShift[e],v=Number(t.src.substr(d,f-d-1)),t.tokens.push({type:"ordered_list_open",order:v,lines:E=[e,0],level:t.level++})):t.tokens.push({type:"bullet_list_open",lines:E=[e,0],level:t.level++}),o=e,w=!1,A=t.parser.ruler.getRules("list");o<n&&(C=t.skipSpaces(f),p=t.eMarks[o],C>=p?g=1:g=C-f,g>4&&(g=1),g<1&&(g=1),i=f-t.bMarks[o]+g,t.tokens.push({type:"list_item_open",lines:I=[e,0],level:t.level++}),a=t.blkIndent,c=t.tight,s=t.tShift[e],u=t.parentType,t.tShift[e]=C-t.bMarks[e],t.blkIndent=i,t.tight=!0,t.parentType="list",t.parser.tokenize(t,e,n,!0),(!t.tight||w)&&(T=!1),w=t.line-e>1&&t.isEmpty(t.line-1),t.blkIndent=a,t.tShift[e]=s,t.tight=c,t.parentType=u,t.tokens.push({type:"list_item_close",level:--t.level}),o=e=t.line,I[1]=o,C=t.bMarks[e],!(o>=n||t.isEmpty(o)||t.tShift[o]<t.blkIndent));){for(k=!1,_=0,U=A.length;_<U;_++)if(A[_](t,o,n,!0)){k=!0;break}if(k)break;if(y){if(f=iP(t,o),f<0)break}else if(f=oP(t,o),f<0)break;if(b!==t.src.charCodeAt(f-1))break}return t.tokens.push({type:y?"ordered_list_close":"bullet_list_close",level:--t.level}),E[1]=o,t.line=o,T&&vpe(t,S),!0}function bpe(t,e,n,r){var o,i,s,a,c,u=t.bMarks[e]+t.tShift[e],d=t.eMarks[e];if(u+4>d||t.src.charCodeAt(u)!==91||t.src.charCodeAt(u+1)!==94||t.level>=t.options.maxNesting)return!1;for(a=u+2;a<d;a++){if(t.src.charCodeAt(a)===32)return!1;if(t.src.charCodeAt(a)===93)break}return a===u+2||a+1>=d||t.src.charCodeAt(++a)!==58?!1:(r||(a++,t.env.footnotes||(t.env.footnotes={}),t.env.footnotes.refs||(t.env.footnotes.refs={}),c=t.src.slice(u+2,a-2),t.env.footnotes.refs[":"+c]=-1,t.tokens.push({type:"footnote_reference_open",label:c,level:t.level++}),o=t.bMarks[e],i=t.tShift[e],s=t.parentType,t.tShift[e]=t.skipSpaces(a)-a,t.bMarks[e]=a,t.blkIndent+=4,t.parentType="footnote",t.tShift[e]<t.blkIndent&&(t.tShift[e]+=t.blkIndent,t.bMarks[e]-=t.blkIndent),t.parser.tokenize(t,e,n,!0),t.parentType=s,t.blkIndent-=4,t.tShift[e]=i,t.bMarks[e]=o,t.tokens.push({type:"footnote_reference_close",level:--t.level})),!0)}function Cpe(t,e,n,r){var o,i,s,a=t.bMarks[e]+t.tShift[e],c=t.eMarks[e];if(a>=c||(o=t.src.charCodeAt(a),o!==35||a>=c))return!1;for(i=1,o=t.src.charCodeAt(++a);o===35&&a<c&&i<=6;)i++,o=t.src.charCodeAt(++a);return i>6||a<c&&o!==32?!1:(r||(c=t.skipCharsBack(c,32,a),s=t.skipCharsBack(c,35,a),s>a&&t.src.charCodeAt(s-1)===32&&(c=s),t.line=e+1,t.tokens.push({type:"heading_open",hLevel:i,lines:[e,t.line],level:t.level}),a<c&&t.tokens.push({type:"inline",content:t.src.slice(a,c).trim(),level:t.level+1,lines:[e,t.line],children:[]}),t.tokens.push({type:"heading_close",hLevel:i,level:t.level})),!0)}function Spe(t,e,n){var r,o,i,s=e+1;return s>=n||t.tShift[s]<t.blkIndent||t.tShift[s]-t.blkIndent>3||(o=t.bMarks[s]+t.tShift[s],i=t.eMarks[s],o>=i)||(r=t.src.charCodeAt(o),r!==45&&r!==61)||(o=t.skipChars(o,r),o=t.skipSpaces(o),o<i)?!1:(o=t.bMarks[e]+t.tShift[e],t.line=s+1,t.tokens.push({type:"heading_open",hLevel:r===61?1:2,lines:[e,t.line],level:t.level}),t.tokens.push({type:"inline",content:t.src.slice(o,t.eMarks[e]).trim(),level:t.level+1,lines:[e,t.line-1],children:[]}),t.tokens.push({type:"heading_close",hLevel:r===61?1:2,level:t.level}),!0)}var n6={};["article","aside","button","blockquote","body","canvas","caption","col","colgroup","dd","div","dl","dt","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","iframe","li","map","object","ol","output","p","pre","progress","script","section","style","table","tbody","td","textarea","tfoot","th","tr","thead","ul","video"].forEach(function(t){n6[t]=!0});var Epe=/^<([a-zA-Z]{1,15})[\s\/>]/,wpe=/^<\/([a-zA-Z]{1,15})[\s>]/;function Ipe(t){var e=t|32;return e>=97&&e<=122}function Tpe(t,e,n,r){var o,i,s,a=t.bMarks[e],c=t.eMarks[e],u=t.tShift[e];if(a+=u,!t.options.html||u>3||a+2>=c||t.src.charCodeAt(a)!==60)return!1;if(o=t.src.charCodeAt(a+1),o===33||o===63){if(r)return!0}else if(o===47||Ipe(o)){if(o===47){if(i=t.src.slice(a,c).match(wpe),!i)return!1}else if(i=t.src.slice(a,c).match(Epe),!i)return!1;if(n6[i[1].toLowerCase()]!==!0)return!1;if(r)return!0}else return!1;for(s=e+1;s<t.lineMax&&!t.isEmpty(s);)s++;return t.line=s,t.tokens.push({type:"htmlblock",level:t.level,lines:[e,t.line],content:t.getLines(e,s,0,!0)}),!0}function WS(t,e){var n=t.bMarks[e]+t.blkIndent,r=t.eMarks[e];return t.src.substr(n,r-n)}function _pe(t,e,n,r){var o,i,s,a,c,u,d,f,p,g,v;if(e+2>n||(c=e+1,t.tShift[c]<t.blkIndent)||(s=t.bMarks[c]+t.tShift[c],s>=t.eMarks[c])||(o=t.src.charCodeAt(s),o!==124&&o!==45&&o!==58)||(i=WS(t,e+1),!/^[-:| ]+$/.test(i))||(u=i.split("|"),u<=2))return!1;for(f=[],a=0;a<u.length;a++){if(p=u[a].trim(),!p){if(a===0||a===u.length-1)continue;return!1}if(!/^:?-+:?$/.test(p))return!1;p.charCodeAt(p.length-1)===58?f.push(p.charCodeAt(0)===58?"center":"right"):p.charCodeAt(0)===58?f.push("left"):f.push("")}if(i=WS(t,e).trim(),i.indexOf("|")===-1||(u=i.replace(/^\||\|$/g,"").split("|"),f.length!==u.length))return!1;if(r)return!0;for(t.tokens.push({type:"table_open",lines:g=[e,0],level:t.level++}),t.tokens.push({type:"thead_open",lines:[e,e+1],level:t.level++}),t.tokens.push({type:"tr_open",lines:[e,e+1],level:t.level++}),a=0;a<u.length;a++)t.tokens.push({type:"th_open",align:f[a],lines:[e,e+1],level:t.level++}),t.tokens.push({type:"inline",content:u[a].trim(),lines:[e,e+1],level:t.level,children:[]}),t.tokens.push({type:"th_close",level:--t.level});for(t.tokens.push({type:"tr_close",level:--t.level}),t.tokens.push({type:"thead_close",level:--t.level}),t.tokens.push({type:"tbody_open",lines:v=[e+2,0],level:t.level++}),c=e+2;c<n&&!(t.tShift[c]<t.blkIndent||(i=WS(t,c).trim(),i.indexOf("|")===-1));c++){for(u=i.replace(/^\||\|$/g,"").split("|"),t.tokens.push({type:"tr_open",level:t.level++}),a=0;a<u.length;a++)t.tokens.push({type:"td_open",align:f[a],level:t.level++}),d=u[a].substring(u[a].charCodeAt(0)===124?1:0,u[a].charCodeAt(u[a].length-1)===124?u[a].length-1:u[a].length).trim(),t.tokens.push({type:"inline",content:d,level:t.level,children:[]}),t.tokens.push({type:"td_close",level:--t.level});t.tokens.push({type:"tr_close",level:--t.level})}return t.tokens.push({type:"tbody_close",level:--t.level}),t.tokens.push({type:"table_close",level:--t.level}),g[1]=v[1]=c,t.line=c,!0}function km(t,e){var n,r,o=t.bMarks[e]+t.tShift[e],i=t.eMarks[e];return o>=i||(r=t.src.charCodeAt(o++),r!==126&&r!==58)||(n=t.skipSpaces(o),o===n)||n>=i?-1:n}function Ape(t,e){var n,r,o=t.level+2;for(n=e+2,r=t.tokens.length-2;n<r;n++)t.tokens[n].level===o&&t.tokens[n].type==="paragraph_open"&&(t.tokens[n+2].tight=!0,t.tokens[n].tight=!0,n+=2)}function kpe(t,e,n,r){var o,i,s,a,c,u,d,f,p,g,v,b,y,C;if(r)return t.ddIndent<0?!1:km(t,e)>=0;if(d=e+1,t.isEmpty(d)&&++d>n||t.tShift[d]<t.blkIndent||(o=km(t,d),o<0)||t.level>=t.options.maxNesting)return!1;u=t.tokens.length,t.tokens.push({type:"dl_open",lines:c=[e,0],level:t.level++}),s=e,i=d;e:for(;;){for(C=!0,y=!1,t.tokens.push({type:"dt_open",lines:[s,s],level:t.level++}),t.tokens.push({type:"inline",content:t.getLines(s,s+1,t.blkIndent,!1).trim(),level:t.level+1,lines:[s,s],children:[]}),t.tokens.push({type:"dt_close",level:--t.level});;){if(t.tokens.push({type:"dd_open",lines:a=[d,0],level:t.level++}),b=t.tight,p=t.ddIndent,f=t.blkIndent,v=t.tShift[i],g=t.parentType,t.blkIndent=t.ddIndent=t.tShift[i]+2,t.tShift[i]=o-t.bMarks[i],t.tight=!0,t.parentType="deflist",t.parser.tokenize(t,i,n,!0),(!t.tight||y)&&(C=!1),y=t.line-i>1&&t.isEmpty(t.line-1),t.tShift[i]=v,t.tight=b,t.parentType=g,t.blkIndent=f,t.ddIndent=p,t.tokens.push({type:"dd_close",level:--t.level}),a[1]=d=t.line,d>=n||t.tShift[d]<t.blkIndent)break e;if(o=km(t,d),o<0)break;i=d}if(d>=n||(s=d,t.isEmpty(s))||t.tShift[s]<t.blkIndent||(i=s+1,i>=n)||(t.isEmpty(i)&&i++,i>=n)||t.tShift[i]<t.blkIndent||(o=km(t,i),o<0))break}return t.tokens.push({type:"dl_close",level:--t.level}),c[1]=d,t.line=d,C&&Ape(t,u),!0}function xpe(t,e){var n,r,o,i,s,a=e+1,c;if(n=t.lineMax,a<n&&!t.isEmpty(a)){for(c=t.parser.ruler.getRules("paragraph");a<n&&!t.isEmpty(a);a++)if(!(t.tShift[a]-t.blkIndent>3)){for(o=!1,i=0,s=c.length;i<s;i++)if(c[i](t,a,n,!0)){o=!0;break}if(o)break}}return r=t.getLines(e,a,t.blkIndent,!1).trim(),t.line=a,r.length&&(t.tokens.push({type:"paragraph_open",tight:!1,lines:[e,t.line],level:t.level}),t.tokens.push({type:"inline",content:r,level:t.level+1,lines:[e,t.line],children:[]}),t.tokens.push({type:"paragraph_close",tight:!1,level:t.level})),!0}var xm=[["code",fpe],["fences",ppe,["paragraph","blockquote","list"]],["blockquote",mpe,["paragraph","blockquote","list"]],["hr",gpe,["paragraph","blockquote","list"]],["list",ype,["paragraph","blockquote"]],["footnote",bpe,["paragraph"]],["heading",Cpe,["paragraph","blockquote"]],["lheading",Spe],["htmlblock",Tpe,["paragraph","blockquote"]],["table",_pe,["paragraph"]],["deflist",kpe,["paragraph"]],["paragraph",xpe]];function uA(){this.ruler=new uo;for(var t=0;t<xm.length;t++)this.ruler.push(xm[t][0],xm[t][1],{alt:(xm[t][2]||[]).slice()})}uA.prototype.tokenize=function(t,e,n){for(var r=this.ruler.getRules(""),o=r.length,i=e,s=!1,a,c;i<n&&(t.line=i=t.skipEmptyLines(i),!(i>=n||t.tShift[i]<t.blkIndent));){for(c=0;c<o&&(a=r[c](t,i,n,!1),!a);c++);if(t.tight=!s,t.isEmpty(t.line-1)&&(s=!0),i=t.line,i<n&&t.isEmpty(i)){if(s=!0,i++,i<n&&t.parentType==="list"&&t.isEmpty(i))break;t.line=i}}};var Rpe=/[\n\t]/g,Npe=/\r[\n\u0085]|[\u2424\u2028\u0085]/g,Ppe=/\u00a0/g;uA.prototype.parse=function(t,e,n,r){var o,i=0,s=0;if(!t)return[];t=t.replace(Ppe," "),t=t.replace(Npe,`
`),t.indexOf("	")>=0&&(t=t.replace(Rpe,function(a,c){var u;return t.charCodeAt(c)===10?(i=c+1,s=0,a):(u="    ".slice((c-i-s)%4),s=c-i+1,u)})),o=new wl(t,this,e,n,r),this.tokenize(o,o.line,o.lineMax)};function Ope(t){switch(t){case 10:case 92:case 96:case 42:case 95:case 94:case 91:case 93:case 33:case 38:case 60:case 62:case 123:case 125:case 36:case 37:case 64:case 126:case 43:case 61:case 58:return!0;default:return!1}}function Mpe(t,e){for(var n=t.pos;n<t.posMax&&!Ope(t.src.charCodeAt(n));)n++;return n===t.pos?!1:(e||(t.pending+=t.src.slice(t.pos,n)),t.pos=n,!0)}function Lpe(t,e){var n,r,o=t.pos;if(t.src.charCodeAt(o)!==10)return!1;if(n=t.pending.length-1,r=t.posMax,!e)if(n>=0&&t.pending.charCodeAt(n)===32)if(n>=1&&t.pending.charCodeAt(n-1)===32){for(var i=n-2;i>=0;i--)if(t.pending.charCodeAt(i)!==32){t.pending=t.pending.substring(0,i+1);break}t.push({type:"hardbreak",level:t.level})}else t.pending=t.pending.slice(0,-1),t.push({type:"softbreak",level:t.level});else t.push({type:"softbreak",level:t.level});for(o++;o<r&&t.src.charCodeAt(o)===32;)o++;return t.pos=o,!0}var dA=[];for(var sP=0;sP<256;sP++)dA.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(t){dA[t.charCodeAt(0)]=1});function Dpe(t,e){var n,r=t.pos,o=t.posMax;if(t.src.charCodeAt(r)!==92)return!1;if(r++,r<o){if(n=t.src.charCodeAt(r),n<256&&dA[n]!==0)return e||(t.pending+=t.src[r]),t.pos+=2,!0;if(n===10){for(e||t.push({type:"hardbreak",level:t.level}),r++;r<o&&t.src.charCodeAt(r)===32;)r++;return t.pos=r,!0}}return e||(t.pending+="\\"),t.pos++,!0}function jpe(t,e){var n,r,o,i,s,a=t.pos,c=t.src.charCodeAt(a);if(c!==96)return!1;for(n=a,a++,r=t.posMax;a<r&&t.src.charCodeAt(a)===96;)a++;for(o=t.src.slice(n,a),i=s=a;(i=t.src.indexOf("`",s))!==-1;){for(s=i+1;s<r&&t.src.charCodeAt(s)===96;)s++;if(s-i===o.length)return e||t.push({type:"code",content:t.src.slice(a,i).replace(/[ \n]+/g," ").trim(),block:!1,level:t.level}),t.pos=s,!0}return e||(t.pending+=o),t.pos+=o.length,!0}function Upe(t,e){var n,r,o,i=t.posMax,s=t.pos,a,c;if(t.src.charCodeAt(s)!==126||e||s+4>=i||t.src.charCodeAt(s+1)!==126||t.level>=t.options.maxNesting||(a=s>0?t.src.charCodeAt(s-1):-1,c=t.src.charCodeAt(s+2),a===126)||c===126||c===32||c===10)return!1;for(r=s+2;r<i&&t.src.charCodeAt(r)===126;)r++;if(r>s+3)return t.pos+=r-s,e||(t.pending+=t.src.slice(s,r)),!0;for(t.pos=s+2,o=1;t.pos+1<i;){if(t.src.charCodeAt(t.pos)===126&&t.src.charCodeAt(t.pos+1)===126&&(a=t.src.charCodeAt(t.pos-1),c=t.pos+2<i?t.src.charCodeAt(t.pos+2):-1,c!==126&&a!==126&&(a!==32&&a!==10?o--:c!==32&&c!==10&&o++,o<=0))){n=!0;break}t.parser.skipToken(t)}return n?(t.posMax=t.pos,t.pos=s+2,e||(t.push({type:"del_open",level:t.level++}),t.parser.tokenize(t),t.push({type:"del_close",level:--t.level})),t.pos=t.posMax+2,t.posMax=i,!0):(t.pos=s,!1)}function Fpe(t,e){var n,r,o,i=t.posMax,s=t.pos,a,c;if(t.src.charCodeAt(s)!==43||e||s+4>=i||t.src.charCodeAt(s+1)!==43||t.level>=t.options.maxNesting||(a=s>0?t.src.charCodeAt(s-1):-1,c=t.src.charCodeAt(s+2),a===43)||c===43||c===32||c===10)return!1;for(r=s+2;r<i&&t.src.charCodeAt(r)===43;)r++;if(r!==s+2)return t.pos+=r-s,e||(t.pending+=t.src.slice(s,r)),!0;for(t.pos=s+2,o=1;t.pos+1<i;){if(t.src.charCodeAt(t.pos)===43&&t.src.charCodeAt(t.pos+1)===43&&(a=t.src.charCodeAt(t.pos-1),c=t.pos+2<i?t.src.charCodeAt(t.pos+2):-1,c!==43&&a!==43&&(a!==32&&a!==10?o--:c!==32&&c!==10&&o++,o<=0))){n=!0;break}t.parser.skipToken(t)}return n?(t.posMax=t.pos,t.pos=s+2,e||(t.push({type:"ins_open",level:t.level++}),t.parser.tokenize(t),t.push({type:"ins_close",level:--t.level})),t.pos=t.posMax+2,t.posMax=i,!0):(t.pos=s,!1)}function Bpe(t,e){var n,r,o,i=t.posMax,s=t.pos,a,c;if(t.src.charCodeAt(s)!==61||e||s+4>=i||t.src.charCodeAt(s+1)!==61||t.level>=t.options.maxNesting||(a=s>0?t.src.charCodeAt(s-1):-1,c=t.src.charCodeAt(s+2),a===61)||c===61||c===32||c===10)return!1;for(r=s+2;r<i&&t.src.charCodeAt(r)===61;)r++;if(r!==s+2)return t.pos+=r-s,e||(t.pending+=t.src.slice(s,r)),!0;for(t.pos=s+2,o=1;t.pos+1<i;){if(t.src.charCodeAt(t.pos)===61&&t.src.charCodeAt(t.pos+1)===61&&(a=t.src.charCodeAt(t.pos-1),c=t.pos+2<i?t.src.charCodeAt(t.pos+2):-1,c!==61&&a!==61&&(a!==32&&a!==10?o--:c!==32&&c!==10&&o++,o<=0))){n=!0;break}t.parser.skipToken(t)}return n?(t.posMax=t.pos,t.pos=s+2,e||(t.push({type:"mark_open",level:t.level++}),t.parser.tokenize(t),t.push({type:"mark_close",level:--t.level})),t.pos=t.posMax+2,t.posMax=i,!0):(t.pos=s,!1)}function aP(t){return t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122}function cP(t,e){var n=e,r,o,i,s=!0,a=!0,c=t.posMax,u=t.src.charCodeAt(e);for(r=e>0?t.src.charCodeAt(e-1):-1;n<c&&t.src.charCodeAt(n)===u;)n++;return n>=c&&(s=!1),i=n-e,i>=4?s=a=!1:(o=n<c?t.src.charCodeAt(n):-1,(o===32||o===10)&&(s=!1),(r===32||r===10)&&(a=!1),u===95&&(aP(r)&&(s=!1),aP(o)&&(a=!1))),{can_open:s,can_close:a,delims:i}}function Hpe(t,e){var n,r,o,i,s,a,c,u=t.posMax,d=t.pos,f=t.src.charCodeAt(d);if(f!==95&&f!==42||e)return!1;if(c=cP(t,d),n=c.delims,!c.can_open)return t.pos+=n,e||(t.pending+=t.src.slice(d,t.pos)),!0;if(t.level>=t.options.maxNesting)return!1;for(t.pos=d+n,a=[n];t.pos<u;){if(t.src.charCodeAt(t.pos)===f){if(c=cP(t,t.pos),r=c.delims,c.can_close){for(i=a.pop(),s=r;i!==s;){if(s<i){a.push(i-s);break}if(s-=i,a.length===0)break;t.pos+=i,i=a.pop()}if(a.length===0){n=i,o=!0;break}t.pos+=r;continue}c.can_open&&a.push(r),t.pos+=r;continue}t.parser.skipToken(t)}return o?(t.posMax=t.pos,t.pos=d+n,e||((n===2||n===3)&&t.push({type:"strong_open",level:t.level++}),(n===1||n===3)&&t.push({type:"em_open",level:t.level++}),t.parser.tokenize(t),(n===1||n===3)&&t.push({type:"em_close",level:--t.level}),(n===2||n===3)&&t.push({type:"strong_close",level:--t.level})),t.pos=t.posMax+n,t.posMax=u,!0):(t.pos=d,!1)}var zpe=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function Vpe(t,e){var n,r,o=t.posMax,i=t.pos;if(t.src.charCodeAt(i)!==126||e||i+2>=o||t.level>=t.options.maxNesting)return!1;for(t.pos=i+1;t.pos<o;){if(t.src.charCodeAt(t.pos)===126){n=!0;break}t.parser.skipToken(t)}return!n||i+1===t.pos||(r=t.src.slice(i+1,t.pos),r.match(/(^|[^\\])(\\\\)*\s/))?(t.pos=i,!1):(t.posMax=t.pos,t.pos=i+1,e||t.push({type:"sub",level:t.level,content:r.replace(zpe,"$1")}),t.pos=t.posMax+1,t.posMax=o,!0)}var $pe=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g;function Gpe(t,e){var n,r,o=t.posMax,i=t.pos;if(t.src.charCodeAt(i)!==94||e||i+2>=o||t.level>=t.options.maxNesting)return!1;for(t.pos=i+1;t.pos<o;){if(t.src.charCodeAt(t.pos)===94){n=!0;break}t.parser.skipToken(t)}return!n||i+1===t.pos||(r=t.src.slice(i+1,t.pos),r.match(/(^|[^\\])(\\\\)*\s/))?(t.pos=i,!1):(t.posMax=t.pos,t.pos=i+1,e||t.push({type:"sup",level:t.level,content:r.replace($pe,"$1")}),t.pos=t.posMax+1,t.posMax=o,!0)}function Kpe(t,e){var n,r,o,i,s,a,c,u,d=!1,f=t.pos,p=t.posMax,g=t.pos,v=t.src.charCodeAt(g);if(v===33&&(d=!0,v=t.src.charCodeAt(++g)),v!==91||t.level>=t.options.maxNesting||(n=g+1,r=Qf(t,g),r<0))return!1;if(a=r+1,a<p&&t.src.charCodeAt(a)===40){for(a++;a<p&&(u=t.src.charCodeAt(a),!(u!==32&&u!==10));a++);if(a>=p)return!1;for(g=a,XU(t,a)?(i=t.linkContent,a=t.pos):i="",g=a;a<p&&(u=t.src.charCodeAt(a),!(u!==32&&u!==10));a++);if(a<p&&g!==a&&ZU(t,a))for(s=t.linkContent,a=t.pos;a<p&&(u=t.src.charCodeAt(a),!(u!==32&&u!==10));a++);else s="";if(a>=p||t.src.charCodeAt(a)!==41)return t.pos=f,!1;a++}else{if(t.linkLevel>0)return!1;for(;a<p&&(u=t.src.charCodeAt(a),!(u!==32&&u!==10));a++);if(a<p&&t.src.charCodeAt(a)===91&&(g=a+1,a=Qf(t,a),a>=0?o=t.src.slice(g,a++):a=g-1),o||(typeof o>"u"&&(a=r+1),o=t.src.slice(n,r)),c=t.env.references[e6(o)],!c)return t.pos=f,!1;i=c.href,s=c.title}return e||(t.pos=n,t.posMax=r,d?t.push({type:"image",src:i,title:s,alt:t.src.substr(n,r-n),level:t.level}):(t.push({type:"link_open",href:i,title:s,level:t.level++}),t.linkLevel++,t.parser.tokenize(t),t.linkLevel--,t.push({type:"link_close",level:--t.level}))),t.pos=a,t.posMax=p,!0}function Wpe(t,e){var n,r,o,i,s=t.posMax,a=t.pos;return a+2>=s||t.src.charCodeAt(a)!==94||t.src.charCodeAt(a+1)!==91||t.level>=t.options.maxNesting||(n=a+2,r=Qf(t,a+1),r<0)?!1:(e||(t.env.footnotes||(t.env.footnotes={}),t.env.footnotes.list||(t.env.footnotes.list=[]),o=t.env.footnotes.list.length,t.pos=n,t.posMax=r,t.push({type:"footnote_ref",id:o,level:t.level}),t.linkLevel++,i=t.tokens.length,t.parser.tokenize(t),t.env.footnotes.list[o]={tokens:t.tokens.splice(i)},t.linkLevel--),t.pos=r+1,t.posMax=s,!0)}function qpe(t,e){var n,r,o,i,s=t.posMax,a=t.pos;if(a+3>s||!t.env.footnotes||!t.env.footnotes.refs||t.src.charCodeAt(a)!==91||t.src.charCodeAt(a+1)!==94||t.level>=t.options.maxNesting)return!1;for(r=a+2;r<s;r++){if(t.src.charCodeAt(r)===32||t.src.charCodeAt(r)===10)return!1;if(t.src.charCodeAt(r)===93)break}return r===a+2||r>=s||(r++,n=t.src.slice(a+2,r-1),typeof t.env.footnotes.refs[":"+n]>"u")?!1:(e||(t.env.footnotes.list||(t.env.footnotes.list=[]),t.env.footnotes.refs[":"+n]<0?(o=t.env.footnotes.list.length,t.env.footnotes.list[o]={label:n,count:0},t.env.footnotes.refs[":"+n]=o):o=t.env.footnotes.refs[":"+n],i=t.env.footnotes.list[o].count,t.env.footnotes.list[o].count++,t.push({type:"footnote_ref",id:o,subId:i,level:t.level})),t.pos=r,t.posMax=s,!0)}var Ype=["coap","doi","javascript","aaa","aaas","about","acap","cap","cid","crid","data","dav","dict","dns","file","ftp","geo","go","gopher","h323","http","https","iax","icap","im","imap","info","ipp","iris","iris.beep","iris.xpc","iris.xpcs","iris.lwz","ldap","mailto","mid","msrp","msrps","mtqp","mupdate","news","nfs","ni","nih","nntp","opaquelocktoken","pop","pres","rtsp","service","session","shttp","sieve","sip","sips","sms","snmp","soap.beep","soap.beeps","tag","tel","telnet","tftp","thismessage","tn3270","tip","tv","urn","vemmi","ws","wss","xcon","xcon-userid","xmlrpc.beep","xmlrpc.beeps","xmpp","z39.50r","z39.50s","adiumxtra","afp","afs","aim","apt","attachment","aw","beshare","bitcoin","bolo","callto","chrome","chrome-extension","com-eventbrite-attendee","content","cvs","dlna-playsingle","dlna-playcontainer","dtn","dvb","ed2k","facetime","feed","finger","fish","gg","git","gizmoproject","gtalk","hcp","icon","ipn","irc","irc6","ircs","itms","jar","jms","keyparc","lastfm","ldaps","magnet","maps","market","message","mms","ms-help","msnim","mumble","mvn","notes","oid","palm","paparazzi","platform","proxy","psyc","query","res","resource","rmi","rsync","rtmp","secondlife","sftp","sgn","skype","smb","soldat","spotify","ssh","steam","svn","teamspeak","things","udp","unreal","ut2004","ventrilo","view-source","webcal","wtai","wyciwyg","xfire","xri","ymsgr"],Qpe=/^<([a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)>/,Jpe=/^<([a-zA-Z.\-]{1,25}):([^<>\x00-\x20]*)>/;function Xpe(t,e){var n,r,o,i,s,a=t.pos;return t.src.charCodeAt(a)!==60||(n=t.src.slice(a),n.indexOf(">")<0)?!1:(r=n.match(Jpe),r?Ype.indexOf(r[1].toLowerCase())<0||(i=r[0].slice(1,-1),s=kw(i),!t.parser.validateLink(i))?!1:(e||(t.push({type:"link_open",href:s,level:t.level}),t.push({type:"text",content:i,level:t.level+1}),t.push({type:"link_close",level:t.level})),t.pos+=r[0].length,!0):(o=n.match(Qpe),o?(i=o[0].slice(1,-1),s=kw("mailto:"+i),t.parser.validateLink(s)?(e||(t.push({type:"link_open",href:s,level:t.level}),t.push({type:"text",content:i,level:t.level+1}),t.push({type:"link_close",level:t.level})),t.pos+=o[0].length,!0):!1):!1))}function mb(t,e){return t=t.source,e=e||"",function n(r,o){return r?(o=o.source||o,t=t.replace(r,o),n):new RegExp(t,e)}}var Zpe=/[a-zA-Z_:][a-zA-Z0-9:._-]*/,eme=/[^"'=<>`\x00-\x20]+/,tme=/'[^']*'/,nme=/"[^"]*"/,rme=mb(/(?:unquoted|single_quoted|double_quoted)/)("unquoted",eme)("single_quoted",tme)("double_quoted",nme)(),ome=mb(/(?:\s+attr_name(?:\s*=\s*attr_value)?)/)("attr_name",Zpe)("attr_value",rme)(),ime=mb(/<[A-Za-z][A-Za-z0-9]*attribute*\s*\/?>/)("attribute",ome)(),sme=/<\/[A-Za-z][A-Za-z0-9]*\s*>/,ame=/<!---->|<!--(?:-?[^>-])(?:-?[^-])*-->/,cme=/<[?].*?[?]>/,lme=/<![A-Z]+\s+[^>]*>/,ume=/<!\[CDATA\[[\s\S]*?\]\]>/,dme=mb(/^(?:open_tag|close_tag|comment|processing|declaration|cdata)/)("open_tag",ime)("close_tag",sme)("comment",ame)("processing",cme)("declaration",lme)("cdata",ume)();function hme(t){var e=t|32;return e>=97&&e<=122}function fme(t,e){var n,r,o,i=t.pos;return!t.options.html||(o=t.posMax,t.src.charCodeAt(i)!==60||i+2>=o)||(n=t.src.charCodeAt(i+1),n!==33&&n!==63&&n!==47&&!hme(n))||(r=t.src.slice(i).match(dme),!r)?!1:(e||t.push({type:"htmltag",content:t.src.slice(i,i+r[0].length),level:t.level}),t.pos+=r[0].length,!0)}var pme=/^&#((?:x[a-f0-9]{1,8}|[0-9]{1,8}));/i,mme=/^&([a-z][a-z0-9]{1,31});/i;function gme(t,e){var n,r,o,i=t.pos,s=t.posMax;if(t.src.charCodeAt(i)!==38)return!1;if(i+1<s){if(n=t.src.charCodeAt(i+1),n===35){if(o=t.src.slice(i).match(pme),o)return e||(r=o[1][0].toLowerCase()==="x"?parseInt(o[1].slice(1),16):parseInt(o[1],10),t.pending+=QU(r)?Aw(r):Aw(65533)),t.pos+=o[0].length,!0}else if(o=t.src.slice(i).match(mme),o){var a=qU(o[1]);if(o[1]!==a)return e||(t.pending+=a),t.pos+=o[0].length,!0}}return e||(t.pending+="&"),t.pos++,!0}var qS=[["text",Mpe],["newline",Lpe],["escape",Dpe],["backticks",jpe],["del",Upe],["ins",Fpe],["mark",Bpe],["emphasis",Hpe],["sub",Vpe],["sup",Gpe],["links",Kpe],["footnote_inline",Wpe],["footnote_ref",qpe],["autolink",Xpe],["htmltag",fme],["entity",gme]];function gb(){this.ruler=new uo;for(var t=0;t<qS.length;t++)this.ruler.push(qS[t][0],qS[t][1]);this.validateLink=vme}gb.prototype.skipToken=function(t){var e=this.ruler.getRules(""),n=e.length,r=t.pos,o,i;if((i=t.cacheGet(r))>0){t.pos=i;return}for(o=0;o<n;o++)if(e[o](t,!0)){t.cacheSet(r,t.pos);return}t.pos++,t.cacheSet(r,t.pos)};gb.prototype.tokenize=function(t){for(var e=this.ruler.getRules(""),n=e.length,r=t.posMax,o,i;t.pos<r;){for(i=0;i<n&&(o=e[i](t,!1),!o);i++);if(o){if(t.pos>=r)break;continue}t.pending+=t.src[t.pos++]}t.pending&&t.pushPending()};gb.prototype.parse=function(t,e,n,r){var o=new El(t,this,e,n,r);this.tokenize(o)};function vme(t){var e=["vbscript","javascript","file","data"],n=t.trim().toLowerCase();return n=Jc(n),!(n.indexOf(":")!==-1&&e.indexOf(n.split(":")[0])!==-1)}var yme={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","replacements","smartquotes","references","abbr2","footnote_tail"]},block:{rules:["blockquote","code","fences","footnote","heading","hr","htmlblock","lheading","list","paragraph","table"]},inline:{rules:["autolink","backticks","del","emphasis","entity","escape","footnote_ref","htmltag","links","newline","text"]}}},bme={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{},block:{},inline:{}}},Cme={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkTarget:"",typographer:!1,quotes:"“”‘’",highlight:null,maxNesting:20},components:{core:{rules:["block","inline","references","abbr2"]},block:{rules:["blockquote","code","fences","heading","hr","htmlblock","lheading","list","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","htmltag","links","newline","text"]}}},Sme={default:yme,full:bme,commonmark:Cme};function r6(t,e,n){this.src=e,this.env=n,this.options=t.options,this.tokens=[],this.inlineMode=!1,this.inline=t.inline,this.block=t.block,this.renderer=t.renderer,this.typographer=t.typographer}function ka(t,e){typeof t!="string"&&(e=t,t="default"),e&&e.linkify!=null&&console.warn(`linkify option is removed. Use linkify plugin instead:

import Remarkable from 'remarkable';
import linkify from 'remarkable/linkify';
new Remarkable().use(linkify)
`),this.inline=new gb,this.block=new uA,this.core=new t6,this.renderer=new lA,this.ruler=new uo,this.options={},this.configure(Sme[t]),this.set(e||{})}ka.prototype.set=function(t){YU(this.options,t)};ka.prototype.configure=function(t){var e=this;if(!t)throw new Error("Wrong `remarkable` preset, check name/content");t.options&&e.set(t.options),t.components&&Object.keys(t.components).forEach(function(n){t.components[n].rules&&e[n].ruler.enable(t.components[n].rules,!0)})};ka.prototype.use=function(t,e){return t(this,e),this};ka.prototype.parse=function(t,e){var n=new r6(this,t,e);return this.core.process(n),n.tokens};ka.prototype.render=function(t,e){return e=e||{},this.renderer.render(this.parse(t,e),this.options,e)};ka.prototype.parseInline=function(t,e){var n=new r6(this,t,e);return n.inlineMode=!0,this.core.process(n),n.tokens};ka.prototype.renderInline=function(t,e){return e=e||{},this.renderer.render(this.parseInline(t,e),this.options,e)};function Eme(t){const e="\\(",n="\\)";function r(a,c){const u=a.pos,d=a.posMax;let f=u;if(a.src.charAt(f)!==e[0]||a.src.charAt(f+1)!==e[1])return!1;f+=e.length;const p=a.src.slice(u,f);if(p.length>2)return!1;const g=f;let v=0;for(;f<d;){const b=a.src.charAt(f),y=b===n[0]&&a.src.charAt(f+1)===n[1];if(b==="{"&&(f===0||a.src.charAt(f-1)!=="\\"))v+=1;else if(b==="}"&&(f===0||a.src.charAt(f-1)!=="\\")){if(v-=1,v<0)return!1}else if(y&&v===0){const C=f,S=f+n.length;if(S-C===p.length){if(!c){const w=a.src.slice(g,C).replace(/[ \n]+/g," ").trim();a.push({type:"latex",content:w,block:!1,level:a.level})}return a.pos=S,!0}}f+=1}return c||(a.pending+=p),a.pos+=p.length,!0}const o={start:"$$",end:"$$"},i={start:"\\[",end:"\\]"};function s(a,c,u,d){const f=a.tShift[c],p=a.bMarks[c]+f;let g=a.src.slice(p,a.eMarks[c]),v=null;if(g.startsWith(o.start)?v=o:g.startsWith(i.start)&&(v=i),!v)return!1;let b=c,y=!1;for(;b<=u;){const S=a.tShift[b],w=a.bMarks[b]+S;if(g=a.src.slice(w,a.eMarks[b]),g.endsWith(v.end)&&(b>c||g!==v.end)){y=!0;break}b+=1}if(!y)return!1;if(d)return!0;const C=a.src.slice(p+v.start.length,a.eMarks[b]-v.end.length);return a.tokens.push({type:"latex_block",content:C.trim(),lines:[c,b],level:a.level}),a.line=b+1,!0}t.inline.ruler.push("latex",r,{}),t.block.ruler.after("fences","latex_block",s,{})}function wme(t){return t.replaceAll(/(\n\n\$\$.*?\$\$) *(\n\n)/g,"$1$2")}function Ime(t){return[Tme,Fi("kill-post-process-latex-double-dollar")?null:wme].filter(n=>n!==null).reduce((n,r)=>r(n),t)}const YS="\\[",lP="\\]";function Tme(t){return t.includes(YS)?t.replaceAll(YS,`

${YS}`).replaceAll(lP,`${lP}

`):t}const Pp=new ka;Pp.use(Eme);Pp.inline.ruler.enable(["text","emphasis","links","backticks","sup","sub","latex","del"],!0);Pp.block.ruler.enable(["list","paragraph","heading","hr","fences","table","blockquote","latex_block"],!0);Pp.core.ruler.enable(["block","inline","references"],!0);function _me(t){const[e="",...n]=t.replace(Np,"").split(Uv);return{index:e,title:n.join(Uv)}}function o6(t,e={}){const n=[];let r=null,o=!1,i=!1,s=!1;for(const a of t)switch(a.type){case"text":case"sup":case"sub":if("content"in a&&a.content){const c={},u=a.content.startsWith(Np)?{type:"citation",props:{index:"",title:"",url:"",iconUrl:null,publisher:null}}:{type:"text",props:{text:a.content}};if(u.type==="text"&&(r&&(u.props.link=r),o&&(c.bold=!0),i&&(c.italic=!0),s&&(c.strikethrough=!0),a.type==="text"&&(u.props.text=u.props.text.replaceAll("\\$","$")),a.type==="sup"&&(c.sup=!0),a.type==="sub"&&(c.sub=!0),Object.keys(c).length>0&&(u.props.annotations=c)),u.type==="citation"&&r){const{citations:d}=e,{index:f,title:p}=_me(a.content),g=d==null?void 0:d.find(v=>v.index===f);u.props={index:f,title:(g==null?void 0:g.title)??p,url:r.url,iconUrl:null,publisher:null}}n.push(u)}break;case"code":"content"in a&&n.push({type:"text",props:{text:a.content,annotations:{code:!0}}});break;case"latex":"content"in a&&n.push({type:"latex",props:{content:a.content}});break;case"strong_open":o=!0;break;case"strong_close":o=!1;break;case"em_open":i=!0;break;case"em_close":i=!1;break;case"del_open":s=!0;break;case"del_close":s=!1;break;case"link_open":r="href"in a?{url:sa(a.href)}:null;break;case"link_close":r=null;break}return n}function Rm(t,e){return t!==void 0&&t.type==="inline"&&"children"in t?o6(Array.isArray(t.children)?t.children:[],e):null}function Ame(t,e){let n=0;function r(){var s;let i=t[n];if(!i)return null;if(i.type==="hr")return n+=1,i=t[n],{type:"hr"};if(i.type==="latex_block")return n+=1,"content"in i?{type:"latex",props:{content:{type:"text",props:{text:i.content}}}}:null;if(i.type==="paragraph_open"){n+=1,i=t[n],n+=1;const a=Rm(i,e);return a?{type:"paragraph",props:{items:a}}:null}if(i.type==="blockquote_open"){const a={type:"blockquote",props:{items:[]}};for(n+=1,i=t[n];(i==null?void 0:i.type)!=="blockquote_close";){const c=r();c&&"type"in c&&a.props.items.push(c),i=t[n]}return n+=1,a}if(i.type==="ordered_list_open"||i.type==="bullet_list_open"){const a={type:"list",props:{items:[],ordered:i.type==="ordered_list_open"}};"order"in i&&(a.props.start=i.order);const c=i.type==="ordered_list_open"?"ordered_list_close":"bullet_list_close";for(n+=1,i=t[n];(i==null?void 0:i.type)!==c;){const u=r(),d=[];if(u&&Array.isArray(u)){for(const f of u)(f.type==="paragraph"||f.type==="list"||f.type==="code"||f.type==="heading")&&d.push(f);a.props.items.push(d)}i=t[n]}return n+=1,a}if(i.type==="list_item_open"){const a=[];for(n+=1,i=t[n];(i==null?void 0:i.type)!=="list_item_close";){const c=r();if(c)for(const u of[c].flat())(u.type==="paragraph"||u.type==="list"||u.type==="code"||u.type==="heading")&&a.push(u);i=t[n]}return n+=1,a}if(i.type==="heading_open"){const a="hLevel"in i?i.hLevel:1;n+=1,i=t[n],n+=1;const c=Rm(i,e);return c?{type:"heading",props:{level:a,items:c}}:null}if(i.type==="fence"&&"content"in i){const a={type:"code",props:{content:{type:"text",props:{text:Nhe(i.content)}},language:"params"in i?i.params:void 0}};return n+=1,a}if(i.type==="table_open"){const a=[],c=[];for(;(i==null?void 0:i.type)!=="table_close";){if((i==null?void 0:i.type)==="th_open"){n+=1,i=t[n];const u=Rm(i,e);u&&a.push(u)}if((i==null?void 0:i.type)==="tr_open"&&!i.lines&&c.push([]),(i==null?void 0:i.type)==="td_open"){n+=1,i=t[n];const u=Rm(i,e);u&&((s=c[c.length-1])==null||s.push(u))}n+=1,i=t[n]}return{type:"table",props:{columns:a,data:c}}}return i.type==="inline"&&"children"in i?(n+=1,o6(i.children??[])):(n+=1,null)}const o=[];for(;n<t.length;){const i=r();i&&!Array.isArray(i)&&o.push(i)}return o}function i6(t,e={}){const n=Pp.parse(Ime(t),{});return Ame(n,e)}function xw(t){V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"DownloadFileError",eventInfo_details:"Error downloading file.",eventInfo_errorMessage:t}})}const hA=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M18.2498 20.5009C18.664 20.5008 19 20.8365 19 21.2507C19 21.6649 18.6644 22.0008 18.2502 22.0009L5.25022 22.0047C4.836 22.0048 4.5 21.6691 4.5 21.2549C4.5 20.8407 4.83557 20.5048 5.24978 20.5047L18.2498 20.5009ZM11.6482 2.01271L11.75 2.00586C12.1297 2.00586 12.4435 2.28801 12.4932 2.65409L12.5 2.75586L12.499 16.4409L16.2208 12.7205C16.4871 12.4543 16.9038 12.4301 17.1974 12.648L17.2815 12.7206C17.5477 12.9869 17.5719 13.4036 17.354 13.6972L17.2814 13.7813L12.2837 18.7779C12.0176 19.044 11.6012 19.0683 11.3076 18.8507L11.2235 18.7782L6.22003 13.7816C5.92694 13.4889 5.92661 13.014 6.21931 12.7209C6.48539 12.4545 6.90204 12.43 7.1958 12.6477L7.27997 12.7202L10.999 16.4339L11 2.75586C11 2.37616 11.2822 2.06237 11.6482 2.01271L11.75 2.00586L11.6482 2.01271Z",fill:"currentColor"})),$xe=Object.freeze(Object.defineProperty({__proto__:null,default:hA},Symbol.toStringTag,{value:"Module"})),kme=10*1024*1024,xme=5*1024*1024,Rme=50*1024*1024,Rw=3,Nme={"image/png":["png"],"image/jpeg":["jpg","jpeg"]},vb={"application/pdf":["pdf"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/json":["json"],"text/csv":["csv"],"text/markdown":["md"],"text/plain":["txt"]},wa={...Nme,...vb};function Op(t){return t in vb}function s6(t,e={supportedMimeTypes:wa}){if(!t)return!1;const n=_s(t);return n===""?!1:n in e.supportedMimeTypes}const Gxe=Object.keys(wa).map(t=>{const e=wa[t].map(n=>`.${n}`);return[t,...e]}).flat();function Pme(t){return Object.values(t).flat().map(e=>`.${e}`)}const Ome=Object.values(vb).flat().map(t=>`.${t}`);function a6(){return{documentMaxSize:et("fileasyncprocessing")?Rme:xme,imageMaxSize:kme}}function fA(t){var r;const e=(r=t.split(".").pop())==null?void 0:r.toLowerCase(),n=Object.entries(wa).find(([,o])=>o.includes(e??""));return n?n[0]:""}function _s(t){return t?t.type!==""?t.type:fA(t.name):""}function Mme(t,e={supportedMimeTypes:wa}){let n,r=null;const o=et("multi-file-upload"),i=a6();if(!s6(t,e))n={title:ee("composer.errors.unsupportedAttachmentTypeV2.title"),message:ee("composer.errors.unsupportedAttachmentTypeV2.message")},r="fileType";else if(!c6(t)){const s=_s(t);n=o?{title:ee("composer.errors.multi.attachmentTooLarge.title"),message:ee("composer.errors.multi.attachmentTooLarge.message",{limit:Op(s)?i.documentMaxSize/1024/1024:i.imageMaxSize/1024/1024})}:{title:ee("composer.errors.attachmentTooLargeV2.title"),message:ee("composer.errors.attachmentTooLargeV2.message")},r="fileSize"}return V.trackEvent({name:"system",data:{eventName:"clientFileValidation",eventInfo_errorType:r,eventInfo_fileType:_s(t),eventInfo_fileSize:t.size}}),n}function Lme(t){return t.type==="text/x-markdown"?new File([t],t.name,{type:"text/markdown"}):t}function c6(t){const e=a6(),n=_s(t),r=Op(n)?e.documentMaxSize:e.imageMaxSize;return t.size<=r}function Dme(t){var n;const e=(n=t.clipboardData)==null?void 0:n.items;if(e)for(let r=0;r<e.length;r+=1){const o=e[r];if((o==null?void 0:o.kind)==="file"){const i=o.getAsFile();if(!s6(i))continue;const s=_s(i);if(i!==null)return c6(i)?{file:i,error:void 0}:(V.trackEvent({name:"system",data:{eventName:"clientFileValidation",eventInfo_errorType:"fileType",eventInfo_fileSize:i.size,eventInfo_fileType:s,eventInfo_errorMessage:"File size too large in paste"}}),{file:void 0,error:{title:ee("composer.errors.attachmentTooLargeV2.title"),message:ee("composer.errors.attachmentTooLargeV2.message")}})}}return{file:void 0,error:void 0}}function l6(t){switch(t){case"unsupported-content-type":return{title:ee("composer.errors.unsupportedAttachmentTypeV2.title"),message:ee("composer.errors.unsupportedAttachmentTypeV2.message")};case"attachment-too-large":return{title:ee("composer.errors.attachmentTooLargeV2.title"),message:ee("composer.errors.attachmentTooLargeV2.message")};case"empty-attachment":return{title:ee("composer.errors.emptyAttachmentV2.title"),message:ee("composer.errors.emptyAttachmentV2.message")};case"content-blocked":return{title:ee("composer.errors.attachmentContentBlockedV2.title"),message:ee("composer.errors.attachmentContentBlockedV2.message")};case"rate-limit-exceeded":return{title:ee("composer.errors.attachmentRateLimitExceededV2.title"),message:ee("composer.errors.attachmentRateLimitExceededV2.message")};default:return{title:ee("composer.errors.attachmentDefault.title"),message:ee("composer.errors.attachmentDefault.message")}}}function u6(t,e){const n=window.URL.createObjectURL(t),r=document.createElement("a");r.style.display="none",r.href=n,r.download=e,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(n),r.remove()}function Kxe(t,e,n){const r=new Blob([n],{type:e});u6(r,t)}async function d6(t){const{url:e,fileName:n,args:r}=t,o=bO(e)?await fetch(e,r==null?void 0:r.options):await Qc(e,r);if(!o.ok)throw new Error(`Failed to fetch file: ${n} from ${e} (status: ${o.status})`);const i=await o.blob();u6(i,n)}function jme({name:t,size:e,message:n,kind:r}){V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:n,eventInfo_details:`Error uploading ${r} attachment`,eventInfo_uploadFileSize:e,eventInfo_uploadFileType:t,eventInfo_numDocumentsUploaded:1}})}const Ume=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"none",...t},m.createElement("path",{d:"M10 6.5V2H5.5C4.67157 2 4 2.67157 4 3.5V16.5C4 17.3284 4.67157 18 5.5 18H14.5C15.3284 18 16 17.3284 16 16.5V8H11.5C10.6716 8 10 7.32843 10 6.5ZM6.5 10H13.5C13.7761 10 14 10.2239 14 10.5C14 10.7761 13.7761 11 13.5 11H6.5C6.22386 11 6 10.7761 6 10.5C6 10.2239 6.22386 10 6.5 10ZM6.5 12H13.5C13.7761 12 14 12.2239 14 12.5C14 12.7761 13.7761 13 13.5 13H6.5C6.22386 13 6 12.7761 6 12.5C6 12.2239 6.22386 12 6.5 12ZM6.5 14H13.5C13.7761 14 14 14.2239 14 14.5C14 14.7761 13.7761 15 13.5 15H6.5C6.22386 15 6 14.7761 6 14.5C6 14.2239 6.22386 14 6.5 14ZM11 6.5V2.25L15.75 7H11.5C11.2239 7 11 6.77614 11 6.5Z",fill:"currentColor"})),Fme=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",...t},m.createElement("path",{d:"M12 2V8C12 9.10457 12.8954 10 14 10H20V20C20 21.1046 19.1046 22 18 22H6C4.89543 22 4 21.1046 4 20V4C4 2.89543 4.89543 2 6 2H12ZM13.5 2.5V8C13.5 8.27614 13.7239 8.5 14 8.5H19.5L13.5 2.5Z",fill:"currentColor"})),Bme="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/pdf-DuUY2RJ0.svg",Hme=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"none",...t},m.createElement("path",{d:"M3 2.5C3 2.22386 3.22386 2 3.5 2H11.5C11.7761 2 12 2.22386 12 2.5V4.5C12 4.77614 11.7761 5 11.5 5C11.2238 5 11 4.77614 11 4.5V3H7.99997L7.99998 13H9C9.27614 13 9.5 13.2239 9.5 13.5C9.5 13.7761 9.27614 14 9 14H6C5.72386 14 5.5 13.7761 5.5 13.5C5.5 13.2239 5.72386 13 6 13H6.99998L6.99997 3H4V4.5C4 4.77614 3.77614 5 3.5 5C3.22386 5 3 4.77614 3 4.5V2.5Z",fill:"currentColor"}));function or(t){const{url:e,className:n}=t;return h.jsx("div",{className:at("bg-current forced-color-adjust-none",n),style:{WebkitMaskImage:`url(${e})`,maskImage:`url(${e})`,WebkitMaskRepeat:"no-repeat",maskRepeat:"no-repeat",WebkitMaskPosition:"center",maskPosition:"center",WebkitMaskSize:"contain",maskSize:"contain"}})}function zme(t){const{fileType:e,className:n}=t;switch(e){case"application/pdf":return h.jsx(or,{url:Bme,className:n});case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return h.jsx(Ume,{className:n});case"text/plain":return h.jsx(Hme,{className:n});case"application/json":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":case"text/csv":case"text/markdown":default:return h.jsx(Fme,{className:n})}}function Vme(t){switch(t){case"application/pdf":return"bg-system-red-350";case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return"bg-midnight-300";case"text/plain":return"bg-spot-blue-300";case"application/json":case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":case"text/csv":case"text/markdown":default:return"bg-neutral-300"}}function $me(t){const{t:e}=He();switch(t){case"application/pdf":return e("fileUpload.fileTypeDisplayPdf");case"application/vnd.openxmlformats-officedocument.wordprocessingml.document":case"application/msword":return e("fileUpload.fileTypeDisplayDoc");case"text/plain":return e("fileUpload.fileTypeDisplayTxt");case"application/json":return e("fileUpload.fileTypeDisplayJson");case"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":case"application/vnd.ms-excel":return e("fileUpload.fileTypeDisplayXlsx");case"application/vnd.openxmlformats-officedocument.presentationml.presentation":case"application/vnd.ms-powerpoint":return e("fileUpload.fileTypeDisplayPptx");case"text/csv":return e("fileUpload.fileTypeDisplayCsv");case"text/markdown":return e("fileUpload.fileTypeDisplayMarkdown");default:return e("fileUpload.fileTypeDisplayDefault")}}const Gme=100,Bv=M([]);function Kme(){const t=O(Bv),[e,n]=m.useState(!1),r=e?t:[];return h.jsxs("div",{className:"sr-only",ref:()=>setTimeout(()=>n(!0),Gme),children:[h.jsx(uP,{messages:r.filter(o=>o.type==="polite"),type:"polite"}),h.jsx(uP,{messages:r.filter(o=>o.type==="assertive"),type:"assertive"})]})}function uP({messages:t,type:e}){return h.jsx("div",{"aria-live":e,"aria-atomic":"true",children:t.map(n=>h.jsx("div",{"aria-label":n.msg,children:n.msg},n.id))})}function Nw(){return typeof crypto<"u"&&typeof crypto.randomUUID=="function"?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.floor(Math.random()*16);return(t==="x"?e:Math.floor(Math.random()*4+8)).toString(16)})}const h6=7e3;function gd(t={}){return Wme(t),null}function Wme(t={}){const{msg:e,id:n,type:r="polite",timeout:o=h6}=t,i=_e(Bv),s=m.useRef(n??Nw());m.useEffect(()=>{e&&i(a=>{if(a.some(u=>u.id===s.current&&u.msg===e&&u.type===r))return a;s.current=n??Nw();const c={msg:e,id:s.current,type:r};return window.setTimeout(()=>{i(u=>u.filter(d=>d.id!==c.id))},o),[...a,c]})},[n,e,r,i,o])}function pA(t){const{msg:e,id:n,type:r="polite",timeout:o=h6}=t;if(!e)return;const i=rt();i.set(Bv,s=>{const a={msg:e,id:n??Nw(),type:r};return window.setTimeout(()=>{i.set(Bv,c=>c.filter(u=>u.id!==a.id))},o),[...s,a]})}const qme=m.lazy(()=>z(()=>Promise.resolve().then(()=>aA),void 0));function mA(t){var u;const{onRemove:e,filename:n,fileType:r,isUploading:o}=t,{t:i}=He(),s=Vme(r),a=$me(r),c=(u=ye.instance().config().composer)==null?void 0:u.smallAttachmentCard;return h.jsxs(xe.div,{className:W("relative flex justify-center gap-2 overflow-hidden rounded-xl border border-black/8 bg-acrylic-thin-fallback-light/60 p-3 dark:border-white/8 dark:bg-midnight-800/80 sm:w-56",{"mx-1 mt-2 h-[58px] w-auto flex-row":c,"h-32 w-44 flex-col":!c}),layout:"position",initial:ct,animate:Lt,exit:ct,children:[h.jsx("div",{className:W("grid aspect-square size-8 place-items-center self-start rounded-full text-black",s),children:h.jsx(zme,{fileType:r,className:"size-5"})}),h.jsxs("div",{className:W({"min-w-0 flex-1":c}),children:[h.jsx("p",{className:W("font-ligatures-none truncate text-xs",{"overflow-hidden whitespace-nowrap":c}),children:n}),h.jsx("p",{className:"text-foreground-600 text-2xs",children:a})]}),e&&!o&&h.jsx("button",{type:"button",title:i("fileUpload.removeFile"),"aria-label":i("fileUpload.removeFile"),onClick:e,className:"absolute end-0.5 top-0.5 m-1 rounded-full border border-black/20 p-1 text-foreground-850 dark:border-white/20",children:h.jsx(ko,{className:"size-3"})}),h.jsx(Ln,{className:"absolute inset-0 grid place-items-center bg-white/80 dark:bg-white/45",children:o?h.jsxs(h.Fragment,{children:[h.jsx(m.Suspense,{fallback:h.jsx("div",{"aria-hidden":!0}),children:h.jsx(qme,{type:"spinnerThemed",className:"size-11"})}),h.jsx(gd,{msg:i("fileUpload.uploadingFile"),type:"polite"})]}):null})]})}function Yme(t){const{contentType:e,name:n,url:r}=t,{t:o}=He(),i=_e(Gd),s=m.useCallback(()=>{d6({url:r,fileName:n}).catch(a=>{const c=a instanceof Error?a.message:"unknown file card error";xw(c),i({title:o("common.downloadFailed"),subtitle:o("common.downloadFailedDetails",{fileName:n}),dismissAfter:3e3})})},[r,n,o,i]);return r?h.jsxs("div",{className:"flex w-fit max-w-full items-center gap-4 md:max-w-96",children:[h.jsx(mA,{filename:n,fileType:e}),h.jsx(Ue,{title:o("common.download"),size:"36-sm",variant:"circle",color:"subtle-dimmed-inverted",onClick:s,"aria-label":o("common.download"),className:"shrink-0 border border-stroke-350",children:h.jsx(hA,{className:"size-5"})})]}):(xw("No URL provided"),null)}const f6=1.2;function xa(t={},e={}){return{start:{...t,opacity:0},end:n=>({...e,opacity:1,transition:{delay:n,ease:"easeInOut",duration:f6}})}}const Qme=xa();function Jme(t){const{items:e,shouldAnimate:n,BlockRenderer:r,delay:o}=t;return h.jsx(xe.blockquote,{className:"flex flex-col gap-3 border-s-2 border-foreground-300 ps-3",variants:Qme,initial:n?"start":"end",animate:"end",custom:o,children:h.jsx(r,{blocks:e,shouldAnimate:n})})}function Il(t){m.useEffect(()=>(window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}),[t])}function Xme(t){const e=O(li),{openMediaViewer:n}=Aa(),r=m.useCallback(()=>{if(!t)return[];const s=e.find(c=>c.id===t);if(!s||s.author!=="ai")return[];const a=[];for(const c of s.content)if(c.type==="card"){if(c.card.type==="image"){const u=c.card;a.push(...u.images)}else if(c.card.type==="video"){const u=c.card;a.push(...u.videos)}}return a},[e,t]),o=m.useCallback(s=>r().some(c=>c.source.url===s),[r]),i=m.useCallback(s=>{const a=r(),c=a.findIndex(d=>d.source.url===s);if(c===-1)return;const u=a.map(d=>"image"in d?{type:"image",url:d.image.url,thumbnailUrl:d.image.thumbnailUrl,altText:d.image.altText,initLoading:!0,source:{title:d.source.title,url:d.source.url,iconUrl:d.source.iconUrl??void 0}}:{type:"video",url:d.video.url,isShort:d.video.isShort,bestMomentIndex:d.bestMomentIndex,moments:d.moments,source:{title:d.video.title,url:d.source.url,iconUrl:d.source.iconUrl??void 0}});n({currentMediaIndex:c,media:u})},[r,n]);return{checkMediaLink:o,openMediaLink:i}}function Xc({onOutsideEvent:t,elements:e,shouldAttachListeners:n=!0,includeScroll:r=!0,invokeOnce:o=!0,includeFocus:i=!0}){m.useEffect(()=>{const s=a=>{const c=a.target,u=e.some(f=>{var p;return(p=f.current)==null?void 0:p.contains(c)}),d=c instanceof Element&&c.closest("[data-outside-events-ignore]")!==null;!u&&!d&&t()};return n&&(document.addEventListener("mousedown",s,{once:o}),r&&document.addEventListener("scroll",s,!0),i&&document.addEventListener("focusin",s,!0)),()=>{document.removeEventListener("mousedown",s),r&&document.removeEventListener("scroll",s,!0),i&&document.removeEventListener("focusin",s,!0)}},[n,r,e,o,i,t])}const gA=m.createContext(void 0),Zme=xa();function ege(t){const{url:e,title:n,index:r,shouldAnimate:o,delay:i}=t,s=m.useContext(gA),a=me("citation-media-open"),c=m.useId(),u=m.useId(),{checkMediaLink:d,openMediaLink:f}=Xme(s??null),p=Jv("html"),g=O(ft),[v,b]=m.useState(!1),[y,C]=m.useState(null),{refs:S,floatingStyles:w}=eO({placement:"top",elements:{reference:y},middleware:[Cd(8),np(),Sd()]});Xc({onOutsideEvent:()=>b(!1),elements:[S.floating],includeScroll:!0,invokeOnce:!0}),Il(A=>{(A.key==="Escape"||A.key==="Control")&&b(_=>(_&&y instanceof HTMLElement&&y.focus(),!1))});const E=()=>{if(a&&d(e)){f(e);return}b(!0)},I=()=>{En({source:"citationLink",conversationId:g,messageId:s,destination:yf(e)}),b(!1)},T=w0(e);return h.jsxs(xe.span,{initial:o?"start":"end",animate:"end",variants:Zme,custom:i,className:"mx-0.5 inline-block h-5 w-4 pb-1 align-middle","data-copy":"false",children:[h.jsx("button",{id:u,"aria-expanded":v,"aria-controls":c,"aria-label":ee("chat.citationPopoverButtonLabel",{citationNumber:r}),ref:C,type:"button",className:W("mx-px flex size-full items-center justify-center rounded-md bg-accent-200 pt-px text-foreground-800 text-3xs hover:bg-accent-250 focus:bg-accent-250 dark:bg-slate-700 hover:dark:bg-background-400 focus:dark:bg-background-400",v&&"pointer-events-none"),onClick:E,children:r}),v&&h.jsx("span",{id:c,role:"dialog","aria-labelledby":u,className:W("absolute w-screen px-4 max-sm:mb-2 sm:w-[350px] sm:px-0",Zt.citations),style:w,ref:S.setFloating,children:h.jsx(xe.span,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{scale:{duration:.2},opacity:{duration:.15}},className:"origin-top-left",style:TI,children:h.jsx("a",{onClick:I,className:"flex w-full rounded-2xl border border-stroke-100 bg-background-100 p-3 shadow-lg dark:bg-background-250",href:yf(e),target:"_blank",rel:p,children:h.jsxs("span",{className:"w-full flex-1 space-y-0.5",children:[h.jsx("span",{className:"line-clamp-1 text-xs-strong",children:n}),h.jsx("span",{className:"line-clamp-1 flex items-center gap-1.5 text-foreground-600 text-2xs",children:T})]})})})})]},"citation")}const tge="https://#timestamp-",nge="https://#settings:privacy";function p6(t){return t?t.startsWith(tge)?"VideoCitation":t.startsWith(nge)?"PrivacySettings":"Unknown":"Unknown"}function rge(t){return p6(t)!=="Unknown"}function oge(t){if(!/^\d{2}:\d{2}:\d{2}$/.test(t))return t;const[n,r,o]=t.split(":");return n==="00"?(r==null?void 0:r.charAt(0))==="0"?`${r.substring(1)}:${o}`:`${r}:${o}`:(n==null?void 0:n.charAt(0))==="0"?`${n.substring(1)}:${r}:${o}`:t}const ige=xa(),dP="font-bold text-accent-550 dark:text-accent-600 hover:underline text-start align-top";function sge(t){const{url:e,text:n,shouldAnimate:r,delay:o}=t,i=m.useContext(gA),s=O(ft),a=p6(e),c=async()=>{switch(a){case"VideoCitation":await Vle.run({url:e});break;case"PrivacySettings":await Gle.run({url:e});break}V.trackEvent({name:"interaction",data:{eventName:"localCitationClick",eventInfo_messageId:i??"",eventInfo_conversationId:s??"",eventInfo_citationType:a}})};m.useEffect(()=>{V.trackEvent({name:"interaction",data:{eventName:"localCitationImpression",eventInfo_messageId:i??"",eventInfo_conversationId:s??"",eventInfo_citationType:a}})},[i,s,a]);const u=oge(n);return r?h.jsx(xe.button,{className:dP,onClick:c,"data-url":e,initial:"start",animate:"end",variants:ige,custom:o,children:u}):h.jsx("button",{type:"button",className:dP,onClick:c,"data-url":e,children:u})}const hP=xa(),fP="font-bold text-accent-550 dark:text-accent-600 hover:underline text-start align-top";function Xi(t){const{items:e,shouldAnimate:n,dangerouslyUseHtml:r,shouldTestForUrl:o=!0}=t,i=_e(Qj),s=_e(zr);return h.jsx(h.Fragment,{children:e.map((a,c)=>{var y;if(a.type==="citation"){const{title:C,url:S,index:w,delay:E}=a;return h.jsx(ege,{title:C,url:S,index:w,shouldAnimate:n,delay:E},c)}if(a.type==="italic"||a.type==="bold"||a.type==="strikethrough"||a.type==="sup"||a.type==="sub"||a.type==="code"){const C=h.jsx(Xi,{items:a.items,shouldAnimate:n,dangerouslyUseHtml:r});return a.type==="italic"?h.jsx("em",{children:C},c):a.type==="bold"?h.jsx("strong",{children:C},c):a.type==="strikethrough"?h.jsx("del",{children:C},c):a.type==="sup"?h.jsx("sup",{children:C},c):a.type==="sub"?h.jsx("sub",{children:C},c):h.jsx(xe.code,{className:"font-ligatures-none mx-0.5 rounded-[4px] border border-stroke-300 bg-accent-200/60 px-1 py-px font-mono text-foreground-800 text-sm dark:bg-accent-200",initial:n?"start":"end",animate:"end",variants:hP,custom:a.delay,children:C},c)}if(a.type!=="word")return null;const{word:u,url:d,delay:f,format:p}=a,v=age({word:u,url:d,testForUrl:!p&&o}),b={initial:"start",animate:"end",variants:hP,custom:f,...r===!0||p==="latexAsHtml"?{dangerouslySetInnerHTML:{__html:((y=window.copilotTrustedTypesPolicy)==null?void 0:y.createHTML(u))??""}}:{children:u}};if(v.url){if(rge(v.url))return h.jsx(sge,{url:v.url,text:v.word,shouldAnimate:n,delay:f},c);const C=()=>{i(v.url),s("confirm-link-navigation")};return h.jsxs(m.Fragment,{children:[n?h.jsx(xe.button,{className:fP,onClick:C,"data-url":v.url,...b}):h.jsx("button",{type:"button",className:fP,onClick:C,"data-url":v.url,...b}),v.suffix&&v.suffix]},c)}return n?h.jsx(xe.span,{...b},c):r===!0||p==="latexAsHtml"?h.jsx("span",{...b},c):h.jsx(m.Fragment,{children:u},c)})})}function age({word:t,url:e,testForUrl:n}){return e?{url:e,word:t}:n?OB(t):{word:t}}function Yi(t){var e,n;return(n=(e=ye.instance().config().styleOverrides)==null?void 0:e.typography)==null?void 0:n[t]}function Jf(t){var e,n;return(n=(e=ye.instance().config().styleOverrides)==null?void 0:e.padding)==null?void 0:n[t]}function cge(t){const{shouldAnimate:e,items:n}=t;return h.jsx("h1",{className:W(Yi("h1")??"text-2xl-medium","[&:not(:first-child)]:pt-6"),children:h.jsx(Xi,{shouldAnimate:e,items:n})})}function lge(t){const{shouldAnimate:e,items:n}=t;return h.jsx("h2",{className:W(Yi("h2")??"text-xl-medium","[&:not(:first-child)]:pt-3.5","pb-1"),children:h.jsx(Xi,{shouldAnimate:e,items:n})})}function uge(t){const{shouldAnimate:e,items:n}=t;return h.jsx("h3",{className:W(Yi("h3")??"text-lg-medium","pb-1","[&:not(:first-child)]:pt-3.5"),children:h.jsx(Xi,{shouldAnimate:e,items:n})})}function dge(t){const{shouldAnimate:e,items:n}=t;return h.jsx("h4",{className:W(Yi("h4")??"text-md-medium"),children:h.jsx(Xi,{shouldAnimate:e,items:n})})}function hge(t){const{shouldAnimate:e,items:n}=t;return h.jsx("h5",{className:W(Yi("h5")??"text-base-medium"),children:h.jsx(Xi,{shouldAnimate:e,items:n})})}function fge(t){const{shouldAnimate:e,items:n}=t;return h.jsx("h6",{className:W(Yi("h6")??"text-base"),children:h.jsx(Xi,{shouldAnimate:e,items:n})})}const pge=[cge,lge,uge,dge,hge,fge];function mge(t){const{shouldAnimate:e,items:n,level:r}=t,o=pge[r-1];return o?h.jsx(o,{shouldAnimate:e,items:n}):null}const gge=xa(),pP="relative pb-6 w-full after:border-b after:border-stroke-300 after:w-full after:absolute after:mt-3";function vge(t){const{delay:e,shouldAnimate:n}=t;return n?h.jsx(xe.div,{className:pP,initial:"start",animate:"end",variants:gge,custom:e}):h.jsx("div",{className:pP})}const yge=xa();function bge(t){const{content:e,shouldAnimate:n,delay:r,dangerouslyUseHtml:o}=t;return h.jsx(xe.div,{initial:n?"start":"end",animate:"end",custom:r,variants:yge,children:h.jsx("div",{className:"horizontal-scrollbar overflow-x-auto whitespace-pre pb-3 pt-4 text-center",children:h.jsx(Xi,{items:e,shouldAnimate:n,dangerouslyUseHtml:o})})})}const mP="relative list-outside marker:text-foreground-750 dark:marker:text-foreground-600 flex flex-col",Cge=xa();function Sge(t){const{items:e,ordered:n,start:r,shouldAnimate:o,BlockRenderer:i}=t,s=e.map(({items:a,delay:c},u)=>h.jsx(xe.li,{initial:o?"start":"end",animate:"end",variants:Cge,custom:c,className:"ps-2",children:h.jsx(i,{blocks:a,shouldAnimate:o})},u));return n?h.jsx("ol",{start:r,className:W(mP,"ms-5 marker:normal-nums marker:text-sm-strong"),children:s}):h.jsx("ul",{className:W(mP,"ms-4 px-1"),children:s})}function Ege(t){const{items:e,shouldAnimate:n}=t;return h.jsx("p",{children:h.jsx("span",{className:W("font-ligatures-none",Yi("aiMessageDefault")),children:h.jsx(Xi,{items:e,shouldAnimate:n})})})}const wge=xa();function Ige(t){const{columns:e,data:n,shouldAnimate:r}=t;return h.jsxs("div",{className:"relative max-w-full",children:[h.jsx("div",{className:"my-6 max-w-full overflow-x-auto rounded-lg bg-white/25 dark:bg-black/25",children:h.jsxs("table",{className:"t-table",style:{borderSpacing:0},children:[h.jsx("thead",{children:h.jsx("tr",{children:e.map((o,i)=>h.jsx(gP,{type:"head",items:o,shouldAnimate:r},i))})}),h.jsx("tbody",{children:n.map((o,i)=>h.jsx("tr",{children:o.map((s,a)=>h.jsx(gP,{type:"data",items:s,shouldAnimate:r},a))},i))})]})}),h.jsx("div",{className:"pointer-events-none absolute inset-0 rounded-lg border border-stroke-300 dark:border-stroke-450"})]})}function gP(t){var i;const{type:e,items:n,shouldAnimate:r}=t,o=e==="head"?xe.th:xe.td;return h.jsx(o,{variants:wge,initial:r?"start":"end",animate:"end",custom:((i=n[0])==null?void 0:i.delay)??0,children:h.jsx(Xi,{shouldAnimate:r,items:n})})}const Tge=m.lazy(()=>z(()=>import("./code-BX0RYvBe.js"),__vite__mapDeps([222,1,2,223])));function Hv(t){const{blocks:e,shouldAnimate:n}=t;return h.jsx(h.Fragment,{children:e.map((r,o)=>{const i=`${r.type}-${o}`;switch(r.type){case"paragraph":return h.jsx(Ege,{items:r.items,shouldAnimate:n},i);case"list":return h.jsx(Sge,{ordered:r.ordered,start:r.start,items:r.items,BlockRenderer:Hv,shouldAnimate:n},i);case"heading":return h.jsx(mge,{items:r.items,level:r.level,shouldAnimate:n},i);case"code":return h.jsx(Tge,{content:r.content,original:r.original,delay:r.delay,shouldAnimate:n,language:r.language,dangerouslyUseHtml:r.dangerouslyUseHtml},i);case"latex":return h.jsx(bge,{content:r.content,delay:r.delay,shouldAnimate:n,dangerouslyUseHtml:r.dangerouslyUseHtml},i);case"table":return h.jsx(Ige,{columns:r.columns,data:r.data,shouldAnimate:n},i);case"blockquote":return h.jsx(Jme,{items:r.items,delay:r.delay,shouldAnimate:n,BlockRenderer:Hv},i);case"hr":return h.jsx(vge,{delay:r.delay,shouldAnimate:n},i);default:return null}})})}const _ge={getValue:()=>0,queueUpdate:()=>{}},Age=()=>{};function kge(t){const{artifact:e}=t;switch(e.type){case"code":{const{language:n,content:r}=e,o=`\`\`\`${n}
${r}
\`\`\``,i=i6(o),s=Fv(i,_ge,Age);return h.jsx(Hv,{blocks:s,shouldAnimate:!1})}case"file":{const{contentType:n,name:r,url:o}=e;return h.jsx(Yme,{name:r,contentType:n,url:o})}default:return null}}function xge(t){const{activities:e}=t;return h.jsx("div",{className:"flex flex-col gap-4 overflow-y-auto",children:e.map((n,r)=>h.jsxs("div",{className:"flex flex-col gap-4 pt-3",children:[h.jsx("h3",{children:n.title}),n.artifacts.map((o,i)=>h.jsx(kge,{artifact:o},i))]},r))})}const Rge=M(void 0);function Nge(){const[t,e]=lt(Rge),n=!!t,r=()=>{e(void 0)};return!t||t.length===0?null:h.jsx(Ea,{className:"w-96 p-4 pb-6",isOpen:n,variant:"drawer",onClose:r,children:h.jsx(xge,{activities:t})})}function Kd(t){const e=m.useRef(null),{isOpen:n,headerText:r,fullBleed:o,children:i,onClose:s,className:a,closeButtonTestId:c,variant:u="modal"}=t,d=m.useRef(null),{t:f}=He(),p=m.useId();Xc({onOutsideEvent:n&&s!==void 0?s:()=>{},elements:[d],includeScroll:!1,includeFocus:!1});const{modalAttributes:g}=J2({trapFocus:!0,legacyTrapFocus:!0,alwaysFocusable:!0});return m.useEffect(()=>{var v,b,y;n?u==="non-modal"?(v=e.current)==null||v.show():(b=e.current)==null||b.showModal():(y=e.current)==null||y.close()},[n,u]),m.useEffect(()=>{const v=e.current;if(!v)return()=>{};const b=()=>{s==null||s()};return v.addEventListener("cancel",b),()=>{v.removeEventListener("cancel",b)}},[s]),h.jsx(xe.dialog,{className:"fixed inset-0 m-auto rounded-4xl border border-white/10 bg-background-150 text-foreground-800 shadow-xl backdrop:bg-stone-850/30 dark:bg-background-250 dark:backdrop:bg-midnight-850/70",animate:n?"animate":"initial",initial:"initial",exit:"exit",variants:{initial:ct,animate:Lt},transition:{duration:Ro.default,ease:"easeInOut"},ref:e,role:"dialog","aria-modal":"true","aria-labelledby":r?p:void 0,...n?g:{},children:n&&h.jsxs("div",{"data-modal-overlay":"true",className:W("flex min-h-[150px] flex-col gap-3",!o&&"p-6",a),ref:d,children:[!o&&h.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r&&h.jsx("h2",{id:p,className:"text-foreground-800 text-md-strong",children:r}),s&&h.jsx(Ue,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:f("common.closeText"),"aria-label":f("common.closeText"),onClick:s,testId:c,children:h.jsx(ko,{className:"size-5"})})]}),i]})})}const Pge="XF86Back",Wxe="XF86BTVoice",Oge=461;function Mge(t){return t.key===Pge||t.keyCode===Oge}function Lge(t){const{className:e,children:n}=t;return h.jsx("span",{className:W("inline-block h-4 min-w-4 rounded-md bg-accent-200 px-1 pt-px text-center leading-4 text-foreground-800 text-3xs dark:bg-accent-200",e),children:n})}const Dge={default:"border-black/10 dark:border-white/10",accent:"border-stroke-300"};function vA(t){const{horizontalMargin:e=!0,verticalMargin:n=!0,color:r="default",className:o}=t;return h.jsx("div",{className:W("border-t-[1px]",e&&"mx-2",n&&"my-2",Dge[r],o)})}const jge=m.lazy(()=>z(()=>import("./index-BbM94OpA.js").then(t=>t.i),__vite__mapDeps([224,2,225,1]))),Uge="focus-within:bg-neutral-50/5 before:pointer-events-none before:absolute before:inset-0 before:rounded-3xl before:border before:border-transparent focus-within:before:border-[1px] focus-within:before:border-[rgba(255,255,255,0.1)]";function Fge(){var d,f;const t=O(cG),[e,n]=lt(kM),r=m.useContext(gA),o=O(ft),i=Jv("html"),s=((d=ye.instance().config().composer)==null?void 0:d.largeScreen)===!0&&((f=ye.instance().config().composer)==null?void 0:f.voiceOnly)===!0,a=()=>{n(null),dt({source:"citationOverflowModal",scenario:"close"})},{focusable:c}=Ed({isFocusBoundary:!0});Il(p=>{Mge(p)&&(p.stopPropagation(),a())});const u=m.useMemo(()=>new Map((e??[]).map((p,g)=>[g,m.createRef()])),[e]);return h.jsx(Kd,{isOpen:t,onClose:s?void 0:a,headerText:`${e==null?void 0:e.length} ${ee("chat.references")}`,className:W(s?"max-h-[40vh]":"max-h-[80vh]",s?"w-[480px]":"w-[440px]","mx-4 px-2"),children:h.jsx(aI.Provider,{value:c.focusKey??"",children:h.jsx("div",{className:W("flex flex-col gap-2 overflow-y-auto",s?"no-scrollbar":"t-custom-scrollbar"),children:e==null?void 0:e.map((p,g)=>h.jsx(m6,{ref:u.get(g),index:g,citation:p,currentConversationId:o,messageId:r,isLargeScreenVoiceComposer:s,citationsModalData:e,rel:i},g))})})})}const m6=m.forwardRef(({index:t,citation:e,currentConversationId:n,messageId:r,citationsModalData:o,isLargeScreenVoiceComposer:i=!1,rel:s},a)=>{const{title:c,url:u,publisher:d}=e,{refCallback:f,focusable:p}=Ed({autoRestoreFocus:!0,forceFocus:!0,scrollIntoViewOnFocus:!0},a);return h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:W(i&&Uge,"group relative flex flex-row items-center gap-2 rounded-3xl p-2"),children:[h.jsxs("a",{rel:s,ref:f,className:"flex flex-1 flex-col items-start gap-2 py-1","data-spatial-navigation-autofocus":!0,href:u,"data-spatial-focus-key":p.focusKey,target:"_blank",onClick:g=>{if(i){g.preventDefault();return}dt({source:"citationModalLink",customData:JSON.stringify({destination:yf(u),conversationId:n,messageId:r})})},children:[h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx(Lge,{children:e.index}),h.jsx("div",{className:"text-foreground-550 text-xs",children:d??w0(u)})]}),h.jsx("div",{children:c}),h.jsx("div",{className:"text-foreground-550 text-xs",children:w0(u)})]}),i&&h.jsx(m.Suspense,{fallback:h.jsx("span",{}),children:h.jsx("div",{className:"flex size-28 items-center justify-center rounded-2xl bg-white opacity-0 group-focus-within:opacity-100",children:h.jsx(jge,{value:u,size:86})})})]}),t<o.length-1&&h.jsx(vA,{horizontalMargin:!1,verticalMargin:!1,className:"my-4"})]})});m6.displayName="CitationItem";const Bge=m.lazy(()=>z(()=>Promise.resolve().then(()=>aA),void 0));async function Hge(t){await Hr({path:t,args:{options:{method:"DELETE"}}})}function zge(){const{t}=He(),e=_e(xM),{trigger:n,isMutating:r}=EI("/conversations/history",Hge),o=async()=>{await n(),e(null)},i=()=>{e(null)};return h.jsxs(Kd,{isOpen:!0,onClose:i,headerText:t("settings.clearHistory.header"),className:"min-h-[328px] w-full max-w-[400px]",children:[h.jsx("p",{className:"text-start",children:t("settings.clearHistory.description")}),h.jsx(Ue,{title:t("settings.clearHistory.confirm"),color:"default",size:"56-xl",variant:"rect",className:"mt-3 w-full text-system-red-550 dark:text-system-red-350",onClick:o,disabled:r,children:r?h.jsx(Bge,{type:"spinnerThemed",className:"size-6"}):t("settings.clearHistory.confirm")}),h.jsx(Ue,{title:t("common.cancel"),color:"strong",size:"56-xl",variant:"rect",className:"mt-3 w-full",onClick:i,children:t("common.cancel")})]})}const g6=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M17.7545 14.0002C18.9966 14.0002 20.0034 15.007 20.0034 16.2491V16.8245C20.0034 17.7188 19.6838 18.5836 19.1023 19.263C17.5329 21.0965 15.1457 22.0013 12.0004 22.0013C8.8545 22.0013 6.46849 21.0962 4.90219 19.2619C4.32242 18.583 4.00391 17.7195 4.00391 16.8267V16.2491C4.00391 15.007 5.01076 14.0002 6.25278 14.0002H17.7545ZM17.7545 15.5002H6.25278C5.83919 15.5002 5.50391 15.8355 5.50391 16.2491V16.8267C5.50391 17.3624 5.69502 17.8805 6.04287 18.2878C7.29618 19.7555 9.26206 20.5013 12.0004 20.5013C14.7387 20.5013 16.7063 19.7555 17.9627 18.2876C18.3117 17.8799 18.5034 17.361 18.5034 16.8245V16.2491C18.5034 15.8355 18.1681 15.5002 17.7545 15.5002ZM12.0004 2.00488C14.7618 2.00488 17.0004 4.24346 17.0004 7.00488C17.0004 9.76631 14.7618 12.0049 12.0004 12.0049C9.23894 12.0049 7.00036 9.76631 7.00036 7.00488C7.00036 4.24346 9.23894 2.00488 12.0004 2.00488ZM12.0004 3.50488C10.0674 3.50488 8.50036 5.07189 8.50036 7.00488C8.50036 8.93788 10.0674 10.5049 12.0004 10.5049C13.9334 10.5049 15.5004 8.93788 15.5004 7.00488C15.5004 5.07189 13.9334 3.50488 12.0004 3.50488Z"})),qxe=Object.freeze(Object.defineProperty({__proto__:null,default:g6},Symbol.toStringTag,{value:"Module"})),QS="relative size-full rounded-full aspect-square",vP="flex items-center justify-center uppercase",JS="after:absolute after:-inset-px after:rounded-full after:border-[0.5px] after:border-black/10 dark:after:border-white/20";function Vge(t){const{firstName:e,imgSrc:n,nameSizeClass:r,altText:o}=t;return n?h.jsx("img",{className:W("overflow-hidden object-cover",QS,JS),src:n,alt:o??ee("common.profileImage")}):e?h.jsx("div",{className:W(QS,vP,JS,r??"text-md"),children:h.jsx("div",{children:e[0]})}):h.jsx("div",{className:W(QS,vP,JS),children:h.jsx(g6,{className:"size-6 fill-foreground-800","alt-text":o??ee("common.profileImage")})})}const Mp=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 120 120",fill:"none",...t},m.createElement("defs",null,m.createElement("radialGradient",{id:"a",cx:0,cy:0,r:1,gradientTransform:"matrix(-27.40125 -33.47302 31.47539 -25.76598 95.512 51.286)",gradientUnits:"userSpaceOnUse"},m.createElement("stop",{offset:.096,stopColor:"#00AEFF"}),m.createElement("stop",{offset:.773,stopColor:"#2253CE"}),m.createElement("stop",{offset:1,stopColor:"#0736C4"})),m.createElement("radialGradient",{id:"b",cx:0,cy:0,r:1,gradientTransform:"rotate(51.84 -70.254 70.14)scale(39.9779 38.7796)",gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#FFB657"}),m.createElement("stop",{offset:.634,stopColor:"#FF5F3D"}),m.createElement("stop",{offset:.923,stopColor:"#C02B3C"})),m.createElement("radialGradient",{id:"e",cx:0,cy:0,r:1,gradientTransform:"matrix(-31.67773 90.58917 -108.5232 -37.949 103.796 30.703)",gradientUnits:"userSpaceOnUse"},m.createElement("stop",{offset:.066,stopColor:"#8C48FF"}),m.createElement("stop",{offset:.5,stopColor:"#F2598A"}),m.createElement("stop",{offset:.896,stopColor:"#FFB152"})),m.createElement("linearGradient",{id:"c",x1:31.75,x2:37.471,y1:18.75,y2:84.938,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{offset:.156,stopColor:"#0D91E1"}),m.createElement("stop",{offset:.487,stopColor:"#52B471"}),m.createElement("stop",{offset:.652,stopColor:"#98BD42"}),m.createElement("stop",{offset:.937,stopColor:"#FFC800"})),m.createElement("linearGradient",{id:"d",x1:36.75,x2:39.874,y1:10,y2:82.213,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#3DCBFF"}),m.createElement("stop",{offset:.247,stopColor:"#0588F7",stopOpacity:0})),m.createElement("linearGradient",{id:"f",x1:106.964,x2:106.923,y1:33.365,y2:53.037,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{offset:.058,stopColor:"#F8ADFA"}),m.createElement("stop",{offset:.708,stopColor:"#A86EDD",stopOpacity:0}))),m.createElement("path",{fill:"url(#a)",d:"M85.855 18.313A11.574 11.574 0 0 0 74.75 10h-3.379a11.574 11.574 0 0 0-11.384 9.485L54.2 51.018l1.436-4.913a11.574 11.574 0 0 1 11.11-8.327H86.38l8.235 3.207 7.937-3.207h-2.316a11.574 11.574 0 0 1-11.105-8.313z"}),m.createElement("path",{fill:"url(#b)",d:"M36.326 101.64A11.574 11.574 0 0 0 47.445 110h7.176c6.276 0 11.409-5.002 11.57-11.277l.781-30.405-1.634 5.583a11.574 11.574 0 0 1-11.108 8.321H34.432l-7.058-3.829-7.641 3.83h2.278c5.154 0 9.687 3.408 11.119 8.36z"}),m.createElement("path",{fill:"url(#c)",d:"M74.248 10H34.15c-11.457 0-18.33 15.142-22.913 30.283-5.43 17.939-12.534 41.93 8.02 41.93H36.57c5.174 0 9.716-3.421 11.138-8.396 3.01-10.531 8.286-28.903 12.43-42.889 2.105-7.107 3.86-13.211 6.551-17.012C68.2 11.785 70.715 10 74.248 10"}),m.createElement("path",{fill:"url(#d)",d:"M74.248 10H34.15c-11.457 0-18.33 15.142-22.913 30.283-5.43 17.939-12.534 41.93 8.02 41.93H36.57c5.174 0 9.716-3.421 11.138-8.396 3.01-10.531 8.286-28.903 12.43-42.889 2.105-7.107 3.86-13.211 6.551-17.012C68.2 11.785 70.715 10 74.248 10"}),m.createElement("path",{fill:"url(#e)",d:"M46.744 110h40.099c11.456 0 18.33-15.144 22.913-30.288 5.429-17.942 12.533-41.937-8.02-41.937H84.422a11.576 11.576 0 0 0-11.138 8.396c-3.01 10.533-8.286 28.909-12.43 42.897-2.106 7.109-3.86 13.214-6.552 17.016-1.51 2.131-4.025 3.916-7.558 3.916"}),m.createElement("path",{fill:"url(#f)",d:"M46.744 110h40.099c11.456 0 18.33-15.144 22.913-30.288 5.429-17.942 12.533-41.937-8.02-41.937H84.422a11.576 11.576 0 0 0-11.138 8.396c-3.01 10.533-8.286 28.909-12.43 42.897-2.106 7.109-3.86 13.214-6.552 17.016-1.51 2.131-4.025 3.916-7.558 3.916"})),Yxe=Object.freeze(Object.defineProperty({__proto__:null,default:Mp},Symbol.toStringTag,{value:"Module"}));function $ge(){const t=me("aad-student"),e=O(jJ),{t:n}=He(),r=t&&e,o=O(AD),i=O(dl),s=t&&e===void 0&&o&&i,a=n(r?"entraRedirect.guestTitle":"entraRedirect.workTitle"),c=n(r?"entraRedirect.guestDescription":"entraRedirect.workDescription");return{isStudentEnabled:r,isLoadingEnabled:s,workTitle:a,workDescription:c,titleGapClass:r?"mb-6 sm:mb-10":"mb-8 sm:mb-14",eventInfoScenario:r?"Student":"Enterprise",getPageTitle:()=>n(r?"aadStudent.title":"entraRedirect.pageTitle"),getPageSubTitle:v=>r?n("aadStudent.subtitle",{email:v}):void 0,getWorkButtonText:v=>r?n("aadStudent.continueAsGuestButtonText"):n("entraRedirect.goToWorkButton",{redirectUrl:v})}}function Gge(){var $;const t=O(AD),e=O(dl),n=O(gr),r=nl(),o=ui(),{isStudentEnabled:i,isLoadingEnabled:s,workTitle:a,workDescription:c,titleGapClass:u,eventInfoScenario:d,getPageTitle:f,getPageSubTitle:p,getWorkButtonText:g}=$ge(),v=!i&&(n==null?void 0:n.email);m.useEffect(()=>{t&&sr(Sg,JSON.stringify(t))},[t]);let b=!1;try{b=JSON.parse(mn(Sg)??"false")}catch(Z){console.error("Failed to parse authentication status:",Z),b=!1}const y=t?e:!b&&!!(($=window.cwcRedirect)!=null&&$.cwcRedirectUrl),[C,S]=m.useState(y),[w,E]=m.useState(),{t:I}=He(),{login:T,logout:A}=Vd(),_=(Z,x,L)=>sa(`${Z}?fromCode=cmcv2&redirectId=${x}${L?`&login_hint=${L}`:""}`),U=async()=>{let Z=crypto.randomUUID().replace(/-/g,"").toUpperCase(),x=lC,L="AadUnknown";if(e){const se=await vN();x=_(lC,Z,se==null?void 0:se.username)}else window.cwcRedirect&&(x=window.cwcRedirect.cwcRedirectUrl,Z=window.cwcRedirect.redirectId,L=window.cwcRedirect.chatEligibility);ye.instance().config().entraRedirectModalBehaviour==="new-tab"?window.open(sa(x),"_blank","noopener,noreferrer"):xp(sa(x)),V.trackEvent({name:"interaction",data:{eventName:"copilotEnterpriseRedirect",...w,eventInfo_traceId:Z,eventInfo_redirectUrl:x,eventInfo_chatEligibility:L}})},k=async()=>{V.trackEvent({name:"interaction",data:{eventName:"copilotStudentRedirectSignOut",...w}}),await A()},G=async()=>{V.trackEvent({name:"interaction",data:{eventName:"copilotEnterpriseRedirectSwitchAccount",eventInfo_scenario:d,...w}}),S(!1),r?(await A(!1),await o({from:"/",to:"/login"})):await T({provider:"microsoft"})},K=async()=>{V.trackEvent({name:"interaction",data:{eventName:t?"copilotEnterpriseRedirectSignOut":"copilotEnterpriseRedirectContinueSignedOut",...w}}),t?await A():S(!1)};if(m.useEffect(()=>{S(y),y&&(async()=>{var L;let x={};if(e){const ne=await vN();x={userAadId:(L=ne==null?void 0:ne.idTokenClaims)==null?void 0:L.oid,userAadTenantId:ne==null?void 0:ne.tenantId}}else window.cwcRedirect&&(x={userAadId:window.cwcRedirect.userId,userAadTenantId:window.cwcRedirect.tenantId});V.trackEvent({name:"system",data:{eventName:"copilotEnterpriseRedirectImpression",eventInfo_redirectReason:e?"AAD":"CWC",eventInfo_scenario:d,...x}}),E(x)})().catch(console.error)},[e,y,d]),!C)return null;const ie=!b&&window.cwcRedirect?new URL(window.cwcRedirect.cwcRedirectUrl).hostname:lC,P=p(n==null?void 0:n.email);return h.jsxs(Ln,{id:String(C),duration:0,mode:"sync",className:W("fixed inset-0",Zt.modal),children:[h.jsx(yl,{forceGradient:!0}),h.jsx("main",{className:"relative m-auto flex size-full max-w-chat flex-col items-center justify-center overflow-y-auto p-4 pb-8 pt-20 sm:py-4",children:s?h.jsx(kt,{className:"size-8"}):h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"mb-9",children:h.jsx(Mp,{className:"size-12"})}),h.jsx("h1",{className:W("mb-8 w-full whitespace-pre-wrap break-words px-4 text-center text-3xl sm:mb-14",u),children:f()}),i&&P&&h.jsx("p",{className:"mb-10 w-full whitespace-pre-wrap break-words px-4 text-center text-base sm:mb-16",children:P}),h.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 md:gap-16",children:[h.jsx(yP,{title:a,description:c,onClick:i?k:U,children:h.jsxs("div",{className:"space-y-1",children:[h.jsx("p",{children:g(ie)}),v&&h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsx("div",{className:"relative size-5",children:h.jsx(Vge,{firstName:n.firstName??n.givenName??void 0,imgSrc:n.imgSrc,nameSizeClass:"text-xs"})}),h.jsx("p",{className:"text-xs",children:n.email})]})]})}),h.jsx(yP,{title:I("entraRedirect.personalTitle"),description:I("entraRedirect.personalDescription"),onClick:G,children:h.jsx("p",{className:"text-xs",children:I("entraRedirect.switchToPersonalButton")})})]}),!i&&h.jsx("div",{className:"mt-8 sm:mt-12",children:h.jsx($o,{i18nKey:t?"entraRedirect.signOut":"entraRedirect.continueSignedOut",components:{[t?"entraSignOut":"entraContinue"]:h.jsx("button",{type:"button",className:"underline",onClick:K,children:I(t?"entraRedirect.signOut":"entraRedirect.continueSignedOut")})}})})]})})]})}function yP({title:t,onClick:e,description:n,children:r}){return h.jsxs("div",{className:"flex flex-col justify-between rounded-4xl bg-white/70 p-4 dark:bg-midnight-700/70 md:p-6 md:pb-8",children:[h.jsxs("div",{children:[h.jsx("div",{className:"mb-2.5 text-lg",children:t}),h.jsx("p",{className:"mb-6 text-sm",children:n})]}),h.jsx(Ue,{color:"default",variant:"rect",title:t,onClick:e,children:r})]})}function yb(t,e=!0,n=!1){m.useEffect(()=>{var r;e&&((r=t.current)==null||r.focus({preventScroll:n}))},[t,e,n])}const Kge=m.lazy(()=>z(()=>import("./index-BbM94OpA.js").then(t=>t.i),__vite__mapDeps([224,2,225,1])));function Wge(t){const{onClose:e,interceptedLink:n}=t,{t:r}=He(),o=m.useRef(null);return yb(o),Il(i=>{(i.key==="Escape"||i.key==="Control")&&e()}),h.jsxs("div",{className:"flex w-[400px] max-w-[80vw] flex-col items-center p-4 text-center",children:[h.jsx("div",{className:"bg-white p-2",children:h.jsx(m.Suspense,{fallback:h.jsx("span",{}),children:h.jsx(Kge,{value:n,size:96,"aria-label":r("composer.interceptedLink.qrcode_alt_text")})})}),h.jsx("h1",{className:"py-3 text-lg",children:r("composer.interceptedLink.title")}),h.jsx("p",{className:"w-full pb-7",children:h.jsx($o,{i18nKey:"composer.interceptedLink.description",components:{span:h.jsx("span",{className:"break-words underline"})},values:{link:n}})}),h.jsx(Ue,{ref:o,onClick:e,title:"close",variant:"pill",size:"48-lg",className:"w-full",children:r("common.closeText")})]})}const bP={translateY:"100%"},qge={translateY:0};function Yge(t){const{children:e,id:n,onClose:r,className:o}=t,i=m.useRef(null);return Il(s=>{const{current:a}=i;!a||!a.contains(document.activeElement)||s.key==="Escape"&&r()}),h.jsxs(h.Fragment,{children:[h.jsx(xe.div,{initial:ct,animate:Lt,exit:ct,transition:Cw,className:"fixed inset-0 bg-black/50"}),h.jsx(xe.div,{id:n,initial:bP,animate:qge,exit:bP,transition:Cw,className:W("absolute bottom-0 max-h-expanded-section w-full overflow-y-hidden rounded-4xl",Zt.modal,o),ref:i,children:h.jsx("div",{className:"flex h-full flex-col items-start gap-4 overflow-y-auto bg-background-100 p-6",children:e})})]})}function Qge(t){return["/login","/fang","/referrals","/referrals/rules","/memory/narrative"].includes(t)}function ho(){const t=$t();return(ye.instance().config().sidebarNavigation??!1)&&!Qge(t)}function Jge(t){var a;const{children:e,id:n,onClose:r,className:o}=t,i=ho(),s=(a=ye.instance().config().uiOverrides)==null?void 0:a.disableConversationsModalWrapper;return i||s?h.jsx("div",{className:"flex max-w-96 flex-col items-start gap-4 p-2",children:e}):h.jsx(Yge,{id:n,onClose:r,className:o,children:e})}function Xge(){const[t,e]=m.useState(!1),n=op(yn),{createConversation:r}=_p(),o=m.useCallback(async i=>{if(!i)return;const s=IU(i);En({source:"deleteConversation",conversationId:i,scenario:s?"actions":void 0}),e(!0),s?await Qc(`/tasks/${s}`,{options:{method:"DELETE"},analytics:{anonymousPath:"/tasks/*"}}):await Qc(`/conversations/${i}`,{options:{method:"DELETE"},analytics:{anonymousPath:"/conversations/*"}}),Ye(ft)===i&&await r({shouldNavigateToChat:!1}),e(!1),n(a=>{a.delete(i)})},[n,r]);return{loading:t,deleteConversation:o}}const yA=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...t},m.createElement("path",{fill:"currentColor",d:"M 20.292969 5.2929688 L 9 16.585938 L 4.7070312 12.292969 L 3.2929688 13.707031 L 9 19.414062 L 21.707031 6.7070312 L 20.292969 5.2929688 z"})),Qxe=Object.freeze(Object.defineProperty({__proto__:null,default:yA},Symbol.toStringTag,{value:"Module"}));function v6(t){const{disabled:e,checked:n,label:r,className:o,labelClassName:i,setChecked:s,"aria-label":a}=t,c=m.useId();return h.jsxs("label",{"aria-label":a,className:W("relative flex cursor-pointer items-center",o),htmlFor:c,children:[h.jsx("input",{checked:n,type:"checkbox",id:c,className:"peer sr-only",onChange:u=>s(u.target.checked),disabled:e}),h.jsx("span",{className:W("flex aspect-square size-5 items-center justify-center rounded-full border transition-colors duration-200 peer-focus:ring-1 peer-focus:ring-black peer-focus:ring-offset-2 peer-disabled:pointer-events-none peer-disabled:opacity-40 dark:peer-focus:ring-white","contrast-more:peer-focus:outline contrast-more:peer-focus:outline-2 contrast-more:peer-focus:outline-offset-2",n&&"bg-black contrast-more:bg-white dark:bg-white"),children:h.jsx(yA,{className:W("size-3 text-white transition-opacity duration-200 contrast-more:text-current dark:text-black contrast-more:dark:text-current",n?"opacity-100":"opacity-0")})}),h.jsx("span",{className:W("mt-px ps-4 peer-disabled:pointer-events-none peer-disabled:opacity-40",i),children:r})]})}function Zge(t){var v;const{conversationId:e,onClose:n}=t,r=m.useId(),{t:o}=He(),[i,s]=m.useState(!1),{loading:a,deleteConversation:c}=Xge(),u=()=>{i&&sr(P$,"true"),n()},d=async()=>{await c(e),u(),Pt.emit("composer:focus-input")},f=ho(),g=!((v=ye.instance().config().uiOverrides)==null?void 0:v.disableDeleteConfirmationCheckbox)&&!f;return h.jsxs(Jge,{id:r,onClose:n,className:"h-96",children:[h.jsx("h2",{className:"text-lg",children:o("composer.deleteConversation.header")}),h.jsx("p",{children:o("composer.deleteConversation.description")}),g&&h.jsx(v6,{disabled:a,checked:i,label:o("composer.deleteConversation.dontRemindMeCheck"),setChecked:s,className:"flex-1"}),h.jsx(Ue,{title:o("common.delete"),color:"default",size:"56-xl",variant:"rect",className:"mt-auto w-full text-system-red-550 dark:text-system-red-350",disabled:a,onClick:d,children:a?h.jsx(kt,{className:"size-8"}):o("common.delete")}),h.jsx(Ue,{title:o("common.keep"),color:"strong",size:"56-xl",variant:"rect",className:"w-full",disabled:a,onClick:u,children:o("common.keep")})]})}const eve=M(void 0);async function CP(t){try{return await navigator.clipboard.writeText(t),!0}catch(e){return V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CopyError",eventInfo_details:"Error copying shared conversation url.",eventInfo_errorMessage:e instanceof Error?e.message:""}}),!1}}function tve({url:t,disableAutoCopy:e=!1}){const{t:n}=He(),r=n("share.copied"),o=n("share.copy"),[i,s]=m.useState(""),a=m.useRef(null),c=m.useCallback(()=>{a.current=window.setTimeout(()=>{s(o)},qO)},[o]),u=m.useCallback(()=>{a.current&&clearTimeout(a.current)},[]);m.useEffect(()=>e?(s(o),u):(CP(t).then(f=>{s(f?r:o),f&&c()}),u),[c,u,t,r,o,e]);const d=async()=>{await CP(t),s(r),u(),c()};return h.jsx(Ue,{title:i,color:"strong",size:"56-xl",className:"w-full",onClick:d,"aria-live":"polite","aria-label":i,children:i})}function nve(t){const{t:e}=He(),{value:n,onCopy:r,onError:o,children:i,title:s=e("share.copy"),disabled:a,copyOnRender:c=!1,...u}=t,[d,f]=m.useState(!1),p=m.useCallback(async()=>{try{await navigator.clipboard.writeText(n),f(!0),r&&r(),setTimeout(()=>f(!1),qO)}catch(g){o&&o(g),V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"CopyError",eventInfo_details:"Error on copying value to clipboard.",eventInfo_errorMessage:g instanceof Error?g.message:""}})}},[n,r,o]);return m.useEffect(()=>{c&&p()},[c,p]),h.jsx(Ue,{onClick:p,title:s,disabled:a,...u,children:i??e(d?"share.copied":"share.copy")})}function rve(t){const{onClose:e,shareUrl:n,imagePath:r,title:o}=t,[i,s]=m.useState(!0),{t:a}=He(),c=()=>{e(!1)};return h.jsxs(Kd,{isOpen:!0,onClose:c,headerText:a("podcasts.share"),className:"w-full max-w-[640px]",children:[h.jsxs("div",{className:"mt-3 flex flex-col gap-6",children:[h.jsxs("div",{className:"mx-2 flex flex-col items-center gap-4",children:[h.jsxs("div",{className:"relative",children:[h.jsx(EU,{alt:a("podcasts.share"),path:r,onLoad:()=>s(!1),className:"rounded-2xl"}),h.jsx("div",{className:"absolute inset-0 rounded-2xl bg-gradient-podcast-share-modal-light dark:bg-gradient-podcast-share-modal-dark"}),!i&&h.jsx("h1",{className:"absolute bottom-8 mx-8 inline text-foreground-800 text-xl",children:o})]}),i&&h.jsx("div",{className:"flex h-[328px] items-center justify-center",children:h.jsx(kt,{type:"spinnerThemed",className:"size-6"})})]}),h.jsx("div",{className:"py-4",children:h.jsx(tve,{url:n,disableAutoCopy:!0})})]}),h.jsx("div",{className:"m-auto mb-3 max-w-[484px] text-center text-foreground-600 text-2xs",children:a("podcasts.sharePodcastsDisclaimer")})]})}const ove=m.lazy(()=>z(()=>import("./sender-share-conversation-modal-mViRbgQ-.js"),__vite__mapDeps([226,1,2,227,228])).then(t=>({default:t.ShareConversationModal})));function ive(){const[t,e]=lt(eve),{t:n}=He(),r=()=>{var o;e(void 0),(t==null?void 0:t.action)==="share"&&((o=t.onClose)==null||o.call(t))};switch(t==null?void 0:t.action){case"delete":return h.jsx(Ea,{isOpen:!0,className:"w-3/4 max-w-fit",children:h.jsx(Zge,{onClose:r,conversationId:t.conversationId})});case"share":return h.jsx(Ea,{trapFocus:!0,isOpen:!!t.conversationId,disableCloseOutside:!0,onClose:r,headerText:t.messageId?n("share.shareModalHeaderOneTurn"):n("share.shareModalHeader"),headerTextClassName:"text-lg",className:"relative max-h-full w-3/4 max-w-[640px] overflow-y-auto",children:h.jsx(m.Suspense,{fallback:h.jsx(Ue,{color:"strong",size:"56-xl",className:"w-full",title:n("common.loading"),disabled:!0,children:h.jsx(kt,{className:"size-8"})}),children:h.jsx(ove,{conversationId:t.conversationId,scenario:t.scenario,messageId:t.messageId})})});case"share-podcast":return h.jsx(rve,{onClose:r,shareUrl:t.shareUrl,imagePath:t.imagePath,title:t.title});default:return null}}const sve="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/turn-limit-dark-CEuF11Ih.jpg",ave="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/turn-limit-light-BSlP2HSn.jpg";function y6(t){const{dismiss:e,source:n,beforeContinue:r}=t,{t:o}=He(),{login:i}=Vd(),s=o("logIn.proUpsellHeader"),a=o("logIn.proUpsellDescription"),c=o("common.notNow"),u=o("signInPrompt.continueWithMicrosoft"),d=O(ks),f=$t();m.useEffect(()=>{Pd({page:f,scenario:`UpsellProForAuth0AccountFrom${n}`})},[f,n]);const p=()=>{dt({source:`UpsellProForAuth0AccountFrom${n}`,scenario:"ProUpsellForAuth0AccountLinkWithMSA",destination:"MicrosoftLoginPage"}),r==null||r(),sessionStorage.setItem(_0,`${new Date().getTime().toString()}-link`),i({provider:"microsoft"})},g=()=>{dt({source:`UpsellProForAuth0AccountFrom${n}`,scenario:"dismissProUpsellForAuth0Account",destination:f}),e()};return h.jsxs("div",{className:"flex flex-col items-center p-4 text-center",children:[h.jsx("img",{src:d==="dark"?sve:ave,alt:o("images.birds"),className:"h-44 w-full rounded-xl object-cover"}),h.jsx("h1",{className:"pb-3 pt-6 text-lg",children:s}),h.jsx("p",{className:"max-w-[95%] break-words pb-7",children:a}),h.jsxs(Ue,{onClick:p,title:u,variant:"pill",size:"48-lg",className:"w-full",color:"strong",testId:"prompt-sign-in-msft-composer-action",children:[h.jsx(Zv,{className:"size-6"}),u]}),h.jsx(Ue,{onClick:g,title:c,variant:"pill",size:"48-lg",color:"overlay-bright",className:"mt-3 w-full",testId:"not-now-button-composer-action",children:c})]})}const cve=Object.freeze(Object.defineProperty({__proto__:null,default:y6},Symbol.toStringTag,{value:"Module"}));function lve(){const t=me("ceo-thinkdeeper"),e=me("ceo-smart-mode"),n=me("ceo"),r=me("webretrieval");return t||e||n||r}function b6(){const[t,e]=lt(rl);return m.useEffect(()=>{e(n=>n||w$())},[e]),t}function uve(){const t=b6(),e=lve(),n=O(qo),r=O(xM),[o,i]=lt(gy),[s,a]=lt(fG),c=ye.instance().config().entraRedirectModalBehaviour!=="skip";return h.jsxs(h.Fragment,{children:[n&&h.jsx(dU,{accountActionRequired:n}),t&&o&&h.jsx(Ea,{isOpen:!0,children:h.jsx(Wge,{interceptedLink:o,onClose:()=>{i(void 0)}})}),h.jsx(ive,{}),r&&h.jsx(zge,{}),s&&h.jsx(Ea,{isOpen:!0,className:"min-h-[328px] max-w-[528px]",children:h.jsx(y6,{dismiss:()=>a(null),source:"ProSubPage"})}),c&&h.jsx(Gge,{}),h.jsx(mhe,{}),h.jsx(Fge,{}),e&&h.jsx(Nge,{})]})}const C6=t=>m.createElement("svg",{width:96,height:93,viewBox:"0 0 96 93",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("mask",{id:"mask0_140_39981",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:96,height:93},m.createElement("mask",{id:"path-1-outside-1_140_39981",maskUnits:"userSpaceOnUse",x:0,y:0,width:96,height:93,fill:"black"},m.createElement("rect",{fill:"white",width:96,height:93}),m.createElement("path",{d:"M4 46.5C4 23.0279 23.0279 4 46.5 4H49.5C72.9721 4 92 23.0279 92 46.5V46.5C92 69.9721 72.9721 89 49.5 89H46.5C23.0279 89 4 69.9721 4 46.5V46.5Z"})),m.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",fill:"url(#paint0_linear_140_39981)",fillOpacity:.8,mask:"url(#path-1-outside-1_140_39981)"}),m.createElement("g",{clipPath:"url(#paint1_angular_140_39981_clip_path)","data-figma-skip-parse":"true",mask:"url(#path-1-outside-1_140_39981)"},m.createElement("g",{transform:"matrix(0 -0.0425 0.0556447 0 48 46.5)"},m.createElement("foreignObject",{x:-1094.12,y:-1094.12,width:2188.24,height:2188.24},m.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{background:"conic-gradient(from 90deg,rgba(214, 147, 237, 1) 0deg,rgba(250, 176, 198, 1) 60.2401deg,rgba(244, 185, 234, 1) 85.1532deg,rgba(141, 152, 255, 1) 126.663deg,rgba(170, 110, 238, 1) 209.329deg,rgba(255, 103, 119, 1) 250.911deg,rgba(255, 186, 113, 1) 291.415deg,rgba(198, 134, 255, 1) 332.659deg,rgba(214, 147, 237, 1) 360deg)",height:"100%",width:"100%",opacity:1}})))),m.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",mask:"url(#path-1-outside-1_140_39981)"})),m.createElement("g",{mask:"url(#mask0_140_39981)"},m.createElement("g",{clipPath:"url(#paint2_angular_140_39981_clip_path)","data-figma-skip-parse":"true"},m.createElement("g",{transform:"matrix(0 -0.071 0.0897903 0 48 47.0001)"},m.createElement("foreignObject",{x:-1014.09,y:-1014.09,width:2028.17,height:2028.17},m.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",style:{background:"conic-gradient(from 90deg,rgba(0, 0, 0, 1) 0deg,rgba(255, 255, 255, 1) 52.2deg,rgba(197, 197, 197, 1) 122.4deg,rgba(0, 0, 0, 1) 147.6deg,rgba(255, 255, 255, 1) 171deg,rgba(174, 174, 174, 1) 235.8deg,rgba(0, 0, 0, 1) 250.911deg,rgba(217, 238, 247, 1) 266.4deg,rgba(255, 255, 255, 1) 332.659deg,rgba(0, 0, 0, 1) 360deg)",height:"100%",width:"100%",opacity:1}})))),m.createElement("rect",{x:-23,y:-24,width:142,height:142})),m.createElement("defs",null,m.createElement("clipPath",{id:"paint1_angular_140_39981_clip_path"},m.createElement("path",{d:"M46.5 4V8H49.5V4V0H46.5V4ZM49.5 89V85H46.5V89V93H49.5V89ZM46.5 89V85C25.237 85 8 67.763 8 46.5H4H0C0 72.1812 20.8188 93 46.5 93V89ZM92 46.5H88C88 67.763 70.763 85 49.5 85V89V93C75.1812 93 96 72.1812 96 46.5H92ZM49.5 4V8C70.763 8 88 25.237 88 46.5H92H96C96 20.8188 75.1812 0 49.5 0V4ZM46.5 4V0C20.8188 0 0 20.8188 0 46.5H4H8C8 25.237 25.237 8 46.5 8V4Z",mask:"url(#path-1-outside-1_140_39981)"})),m.createElement("clipPath",{id:"paint2_angular_140_39981_clip_path"},m.createElement("rect",{x:-23,y:-24,width:142,height:142})),m.createElement("linearGradient",{id:"paint0_linear_140_39981",x1:4,y1:89,x2:101.93,y2:75.3765,gradientUnits:"userSpaceOnUse"},m.createElement("stop",{stopColor:"#FFAB4E"}),m.createElement("stop",{offset:1,stopColor:"#FF7791"})))),Jxe=Object.freeze(Object.defineProperty({__proto__:null,default:C6},Symbol.toStringTag,{value:"Module"})),S6=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M20.2899 16.4358C20.6074 15.5282 20.78 14.5526 20.78 13.5366V9.5241C20.78 9.10859 20.4432 8.77175 20.0277 8.77175C19.6122 8.77175 19.2753 9.10859 19.2753 9.5241V13.5366C19.2753 14.1176 19.2072 14.6827 19.0785 15.2244L20.2899 16.4358Z",fill:"currentColor"}),m.createElement("path",{d:"M15.263 11.1575V6.51431C15.263 4.71377 13.8034 3.25414 12.0028 3.25414C10.7464 3.25414 9.65599 3.96485 9.11167 5.00618L8.01336 3.90787C8.86428 2.60809 10.3333 1.74944 12.0028 1.74944C14.6344 1.74944 16.7677 3.88274 16.7677 6.51431V12.6622L15.263 11.1575Z",fill:"currentColor"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.0026 20.8093C7.986 20.8093 4.7299 17.5532 4.7299 13.5366L4.7299 9.5241C4.7299 9.10859 4.39306 8.77175 3.97755 8.77175C3.56204 8.77175 3.2252 9.10859 3.2252 9.5241L3.2252 13.5366C3.2252 18.3843 7.15498 22.314 12.0026 22.314C14.6664 22.314 17.053 21.1274 18.6628 19.2539L21.0006 21.5917C21.2944 21.8855 21.7707 21.8855 22.0645 21.5917C22.3584 21.2979 22.3584 20.8215 22.0645 20.5277L3.00504 1.46823C2.71123 1.17442 2.23487 1.17442 1.94106 1.46823C1.64725 1.76204 1.64725 2.2384 1.94106 2.53221L7.23793 7.82908V13.5362C7.23793 16.1678 9.37124 18.3011 12.0028 18.3011C13.5589 18.3011 14.9407 17.5552 15.8103 16.4015L17.5951 18.1862C16.261 19.7891 14.251 20.8093 12.0026 20.8093ZM8.74263 13.5362C8.74263 15.3368 10.2023 16.7964 12.0028 16.7964C13.1441 16.7964 14.1484 16.21 14.7308 15.322L8.74263 9.33378L8.74263 13.5362Z",fill:"currentColor"})),Xxe=Object.freeze(Object.defineProperty({__proto__:null,default:S6},Symbol.toStringTag,{value:"Module"})),bA=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.7673 6.54284C16.7673 3.91128 14.634 1.77799 12.0024 1.77799C9.37089 1.77799 7.2376 3.91129 7.2376 6.54284L7.2376 13.5647C7.2376 16.1963 9.37089 18.3296 12.0024 18.3296C14.634 18.3296 16.7673 16.1963 16.7673 13.5647L16.7673 6.54284ZM12.0024 3.28268C13.803 3.28268 15.2626 4.7423 15.2626 6.54284L15.2626 13.5647C15.2626 15.3652 13.803 16.8249 12.0024 16.8249C10.2019 16.8249 8.74229 15.3652 8.74229 13.5647L8.74229 6.54284C8.74229 4.7423 10.2019 3.28268 12.0024 3.28268Z",fill:"currentColor"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.0274 8.79987C19.6119 8.79987 19.2751 9.1367 19.2751 9.55221V13.5647C19.2751 17.5813 16.019 20.8374 12.0024 20.8374C7.98587 20.8374 4.72979 17.5813 4.72979 13.5647L4.72979 9.55221C4.72979 9.1367 4.39295 8.79987 3.97744 8.79987C3.56193 8.79987 3.2251 9.1367 3.2251 9.55221L3.2251 13.5647C3.2251 18.4123 7.15485 22.3421 12.0024 22.3421C16.85 22.3421 20.7798 18.4123 20.7798 13.5647V9.55221C20.7798 9.1367 20.443 8.79987 20.0274 8.79987Z",fill:"currentColor"})),Zxe=Object.freeze(Object.defineProperty({__proto__:null,default:bA},Symbol.toStringTag,{value:"Module"})),E6=t=>m.createElement("svg",{width:63,height:73,viewBox:"0 0 63 73",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("g",{filter:"url(#filter0_d_3118_29179)"},m.createElement("path",{d:"M39.7952 28.3892L42.2422 41.8194C43.061 46.313 43.4704 48.5598 42.1865 49.4826C40.9025 50.4053 38.9035 49.3009 34.9054 47.0922L22.9563 40.491C16.2962 36.8117 12.9661 34.972 13.4372 33.1039C13.9083 31.2359 17.7474 31.1951 25.4255 31.1136C27.1365 31.0955 27.992 31.0864 28.6339 30.625C29.2759 30.1637 29.5572 29.3557 30.12 27.7398C32.6452 20.4884 33.9078 16.8627 35.8285 17.0117C37.7493 17.1608 38.4313 20.9036 39.7952 28.3892Z",fill:"white",fillOpacity:.8,shapeRendering:"crispEdges"}),m.createElement("path",{d:"M39.7952 28.3892L42.2422 41.8194C43.061 46.313 43.4704 48.5598 42.1865 49.4826C40.9025 50.4053 38.9035 49.3009 34.9054 47.0922L22.9563 40.491C16.2962 36.8117 12.9661 34.972 13.4372 33.1039C13.9083 31.2359 17.7474 31.1951 25.4255 31.1136C27.1365 31.0955 27.992 31.0864 28.6339 30.625C29.2759 30.1637 29.5572 29.3557 30.12 27.7398C32.6452 20.4884 33.9078 16.8627 35.8285 17.0117C37.7493 17.1608 38.4313 20.9036 39.7952 28.3892Z",stroke:"white",strokeWidth:1.5,shapeRendering:"crispEdges"})),m.createElement("path",{d:"M43.06 50.7014C44.3479 49.7757 44.5485 48.2871 44.5004 46.9375L44.469 46.4069C44.397 45.4896 44.2259 44.4068 44.0083 43.1722L43.7279 41.6191L43.7271 41.6113L43.7263 41.6119L41.2578 28.06L40.7794 25.455C40.3207 22.9993 39.9105 20.9984 39.4527 19.5092L39.3346 19.1407C39.0928 18.4125 38.8119 17.7441 38.4599 17.1874L38.2786 16.9184C37.7807 16.2335 37.0781 15.6722 36.1346 15.5382L35.9428 15.5173C35.0273 15.4462 34.264 15.7987 33.6613 16.3187L33.4134 16.551C32.8862 17.0835 32.4355 17.7951 32.024 18.597L31.8493 18.9462C31.1633 20.3587 30.4435 22.2885 29.6039 24.6656L28.7214 27.1892L28.7014 27.2468C28.4821 27.8767 28.3253 28.323 28.1864 28.662L28.0522 28.9689C27.8919 29.3038 27.7981 29.3776 27.7565 29.4075C27.7254 29.4298 27.6614 29.4719 27.4758 29.5106L27.2465 29.5479C27.0436 29.5728 26.806 29.587 26.5081 29.5964L25.4073 29.6142L25.3455 29.6153C22.0505 29.6503 19.3668 29.6775 17.3562 29.8624L16.5355 29.9519C15.6246 30.0688 14.7765 30.2424 14.0635 30.5367L13.7674 30.6702C13.0061 31.0434 12.328 31.6403 12.0348 32.5515L11.9812 32.738C11.7577 33.624 11.971 34.4332 12.3786 35.1149L12.5645 35.3986C13.059 36.0947 13.7998 36.7301 14.6458 37.3375L15.3198 37.8019C16.9879 38.9103 19.3175 40.1961 22.1748 41.7746L34.238 48.4394L35.6206 49.2003C36.9417 49.9202 38.0776 50.5066 39.0333 50.8666L39.516 51.0344C40.6626 51.3952 41.933 51.5114 43.06 50.7014Z",stroke:"black",strokeWidth:1.5}),m.createElement("defs",null,m.createElement("filter",{id:"filter0_d_3118_29179",x:2.64307,y:6.25732,width:51.1152,height:66.3022,filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},m.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),m.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),m.createElement("feMorphology",{radius:2,operator:"erode",in:"SourceAlpha",result:"effect1_dropShadow_3118_29179"}),m.createElement("feOffset",{dy:16}),m.createElement("feGaussianBlur",{stdDeviation:4}),m.createElement("feComposite",{in2:"hardAlpha",operator:"out"}),m.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.12 0"}),m.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_3118_29179"}),m.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_3118_29179",result:"shape"})))),eRe=Object.freeze(Object.defineProperty({__proto__:null,default:E6},Symbol.toStringTag,{value:"Module"}));function CA({defaultValue:t,controlledValue:e,onChange:n}){const r=e!==void 0,[o,i]=m.useState(t);return m.useEffect(()=>{r&&i(e)},[e,r]),{state:r?e:o,setState:c=>{r||i(c),n==null||n(c)}}}function dve(t){const{renderFocusedElement:e,children:n,className:r,options:o={},isOpen:i}=t,{offset:s=1,placement:a="bottom-end",adjustArrowPosition:c=S=>S}=o,u=m.useRef(null),{state:d,setState:f}=CA({controlledValue:i,defaultValue:!1}),{y:p=0}=c({x:0,y:0})??{},{refs:g,context:v,floatingStyles:b,middlewareData:y}=tp({open:d,placement:a,onOpenChange:f,middleware:[Cd(s),Sd(),tO({element:u,padding:{right:-38,bottom:p}})],whileElementsMounted:bd}),C=c(y.arrow);return h.jsxs(h.Fragment,{children:[e==null?void 0:e({ref:g.setReference},d),d&&h.jsx(Yv,{children:h.jsx(Qv,{context:v,modal:!1,children:h.jsxs("div",{ref:g.setFloating,style:b,className:at("flex outline-none",Zt.composerCoachmark),children:[h.jsx("div",{className:at("start-0 flex rounded-ee-md rounded-es-3xl rounded-se-3xl rounded-ss-3xl border border-background-200 border-white shadow-sm",r),children:n}),h.jsx("div",{ref:u,style:{position:"absolute",left:C==null?void 0:C.x,top:(C==null?void 0:C.y)??p},className:"pointer-events-none",children:h.jsx(E6,{className:"my-5 size-14"})})]})})})]})}const Nm="absolute inset-0 rounded-full",SP="relative size-6 transition-colors",EP=2,hve=50,fve=20,w6=.6,pve=3,mve=.55,gve=1,vve={opacity:0,scale:w6},yve={opacity:1,scale:1,transition:{...cU,delay:uU}};function bve(t){const{t:e}=He(),{isMuted:n,inputVolume:r,isOutputPlaying:o,className:i,coachUserUnmute:s=!1,onClick:a}=t,c=!o&&!n,[u,d]=m.useState(!1),f=pr({breakpoint:"sm"});m.useEffect(()=>{let C;return s&&(C=setTimeout(()=>d(!0),600)),()=>clearTimeout(C)},[s]);const p=nO(r,aU),g=Wu(p,[EP,hve],[w6,pve]),v=Wu(p,[EP,fve],[mve,gve]),{focusable:b,refCallback:y}=Ed({autoRestoreFocus:!0,forceFocus:!0});return h.jsx(dve,{className:"max-w-72 border-white bg-black/90 p-2 dark:bg-white",isOpen:u,options:{placement:"top-end",offset:f?{mainAxis:27,crossAxis:10}:{mainAxis:15,crossAxis:-55},adjustArrowPosition:C=>f?{x:C!=null&&C.x?C.x-20:void 0,y:12}:C},renderFocusedElement:C=>h.jsxs(h.Fragment,{children:[u?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"absolute start-1/2 -my-4 size-fit -translate-x-1/2",children:h.jsx(Ln,{duration:.6,exitDelay:4.5,exitDuration:.5,children:h.jsx(xe.div,{animate:{rotate:360},transition:{duration:2.5,repeat:1,ease:"linear"},children:h.jsx(C6,{className:"size-20"})})})}),h.jsx("div",{className:"absolute start-1/2 -my-4 size-fit -translate-x-1/2",children:h.jsx(xe.div,{className:"size-[80px] rounded-full border-4 border-solid border-black/80 shadow-sm dark:border-white",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,delay:4.5,ease:"linear"}})})]}):null,h.jsx(xe.button,{...C,title:e(n?"composer.unmuteMicrophone":"composer.muteMicrophone"),className:W("size-12 rounded-full",bf,Xv,i),layout:!s,initial:"initial",animate:"enter",variants:{initial:vve,enter:yve},onClick:a,ref:S=>{C.ref(S),y(S)},"data-spatial-focus-key":b.focusKey,children:h.jsxs(xe.span,{className:W("flex items-center justify-center overflow-hidden border",n?"border-transparent bg-black/8 dark:bg-white/5":"border-white bg-white/50 hover:bg-white/80 dark:border-white/12 dark:bg-black/40",c&&"text-spot-blue-450 dark:text-midnight-300",Nm),layout:!s,children:[h.jsx(xn,{children:c&&h.jsx(xe.div,{className:W("flex items-center justify-center overflow-hidden rounded-full blur-[6px]",Nm),layout:!0,initial:ct,animate:Lt,exit:ct,style:{scale:g},children:h.jsx(xe.div,{className:W(Nm),layout:!0,style:{opacity:v},children:h.jsx(xe.div,{className:W("animate-spin-slow bg-gradient-audio-input-light dark:bg-gradient-audio-input-dark",Nm)})})})}),n?h.jsx(S6,{className:SP,"aria-hidden":!0}):h.jsx(bA,{className:SP,"aria-hidden":!0})]})})]}),children:h.jsx("div",{className:"flex p-0 px-3 text-white text-sm dark:text-foreground-300",children:e("voice.v2.waitingInteractionUnmuteSubheader")})})}function bb(t,e={},n){const{initialize:r=!1}=e,o=m.useRef(null);return m.useEffect(()=>{const i=n??o.current,s=new ResizeObserver(([a])=>{a&&t(a.contentRect)});return i&&(s.observe(i),r&&t(i.getBoundingClientRect())),()=>s.disconnect()},[t,r,n]),o}const I6=24e3,Xf=24e3;function Cve(t){const e=atob(t),n=e.length,r=new Uint8Array(n);for(let o=0;o<n;o+=1)r[o]=e.charCodeAt(o);return r.buffer}function Sve(t){let e="";const n=new Uint8Array(t),r=n.byteLength;for(let o=0;o<r;o+=1){const i=n[o];typeof i=="number"&&(e+=String.fromCharCode(i))}return btoa(e)}function T6(t){const e=Cve(t),n=new Int16Array(e),r=new Float32Array(n.length);for(let o=0;o<n.length;o+=1)r[o]=n[o]/32768;return r}function Eve(t){const e=t<0?t*32768:t*32767;return Math.max(-32768,Math.min(32767,e))}const Pw=hF(0);function wve(t){let e=0;for(const n of t){const r=n-128;e+=r*r}return Math.sqrt(e/t.length)}function SA(t){return t/ly}function tRe(t){return`${SA(t)}x`}function nRe(){const t=rt().get(BL);return SA(t)}const wP=48,IP=50;function TP(t){const{isNested:e}=t,[n,r]=m.useState(1),[o,i]=m.useState(1),s=m.useRef(void 0),a=m.useRef(void 0),c=bb(p=>{s.current=p.width,a.current=p.height,r((s.current+wP)/s.current),i((a.current+wP)/a.current)},{initialize:!0}),u=nO(Pw,aU),d=Wu(u,[0,IP],[1,n]),f=Wu(u,[0,IP],[1,o]);return h.jsx(xe.div,{className:"absolute inset-0",ref:c,initial:ct,animate:{...Lt,transition:{delay:uU}},exit:ct,children:h.jsx(xe.div,{className:W("absolute inset-0 flex items-center justify-center overflow-hidden rounded-6xl",e?"-scale-x-100 rounded-5xl blur-lg":"bg-stone-100/30 bg-blend-luminosity backdrop-blur-xl after:absolute after:inset-px after:rounded-6xl after:border after:border-transparent dark:bg-midnight-800/30"),layout:!0,style:{scaleX:d,scaleY:f},children:h.jsx(xe.div,{className:W("absolute -inset-16 aspect-square bg-gradient-audio-output-light bg-blend-saturation saturate-150 dark:bg-gradient-audio-output-dark dark:saturate-100",e?"animate-spin-slower opacity-20 dark:opacity-30":"animate-spin-slow opacity-40 dark:opacity-50")})})})}function Ive(t){const{dynamicHeight:e}=t;return h.jsx(xe.div,{className:W("t-bottom-fade absolute bottom-0 mx-4 box-content w-bottom-fade rounded-lg pt-bottom-fade",e?"h-bottom-fade":"h-composer"),initial:ct,animate:Lt,exit:ct,transition:db,children:h.jsx(yl,{isBottomFade:!0})})}function Tve(t,e){const{children:n,className:r,margins:o,data:i,size:s="regular"}=t,a=i.isDisabled?"":i.title,c=s==="small";return h.jsx(xe.div,{className:at("relative shrink-0",o??"my-1",c?"h-9":"h-10",i.isVisible&&!c&&"size-10",i.isVisible&&c&&"size-9",!i.isVisible&&"overflow-hidden"),layout:!0,initial:!1,ref:e,children:h.jsx(xe.button,{type:"button",className:at("absolute flex items-center justify-center rounded-xl fill-foreground-750",c?"size-9 p-1":"size-10 p-2",Ac["subtle-dimmed"],"disabled:active:bg-transparent disabled:active:bg-none",r),layout:"position",disabled:!i.isVisible||i.isDisabled,"aria-hidden":!i.isVisible,"aria-label":a,title:a,onClick:i.onClick,"data-testid":i.testId,"aria-expanded":typeof i.ariaExpanded=="boolean"?i.ariaExpanded:void 0,children:n})})}const Wo=m.forwardRef(Tve);function _ve(){return O(FI).map(e=>e.id)}function _6(t){if(t.length===0)throw new Error("Array must have at least one element");return Math.floor(Math.random()*t.length)}function rRe(t,e){if(t.length===1)throw new Error("Array must have at least two elements");let n;do n=_6(t);while(n===e);return n}function Ave(t){if(t.length!==0)return t[_6(t)]}function kve(t){const e=[...t];for(let n=t.length-1;n>0;n-=1){const r=Math.floor(Math.random()*(n+1)),o=e[n];o&&e[r]&&(e[n]=e[r],e[r]=o)}return e}function oRe(t,e){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((o,i)=>o===r[i])}const xve=m.lazy(()=>z(()=>import("./character-BvPQJS6D.js"),__vite__mapDeps([229,1,2,230])).then(t=>({default:t.Character})));function Rve(){const[t,e]=lt(pp),{createConversation:n}=_p(),[r,o]=m.useState(!1),i=_e(EM),s=_e(vc),a=_ve(),c=m.useRef(null),u=O(li);m.useEffect(()=>{if(c.current===null){const b=Ave(a);b&&(c.current=b)}},[a]);const{t:d}=He();m.useEffect(()=>{r&&c.current&&V.trackEvent({name:"system",data:{eventName:"characterPromotionShown",eventInfo_characterId:c.current}})},[r]),m.useEffect(()=>{const b=localStorage.getItem(M$);o(!b&&u.length>=10&&u.length<14)},[t,u.length]);function f(b){switch(b){case"mica":return"mica-head";case"aqua":return"aqua-head";case"erin":return"erin-head";default:return"mica-head"}}async function p(){c.current&&(s("clicking"),V.trackEvent({name:"interaction",data:{eventName:"characterPromotionClicked",eventInfo_characterId:c.current}}),i(!0),SZ({settingName:"characterId",oldValue:"",newValue:c.current}),V.setSettings({userSettingCharacterId:c.current}),await Promise.all([Hr({path:"/user/settings",args:{options:{method:"PATCH"},body:{preferredCharacter:c.current}}})]))}const g=m.useCallback(async()=>{o(!1)},[]),v=m.useCallback(async()=>{c.current&&(o(!1),i(!0),e(c.current),await n())},[i,e,n]);return r?h.jsx("div",{className:"pointer-events-auto absolute -top-40 end-4 size-56 pb-2",onClick:p,onKeyDown:async b=>{b.key==="Enter"&&await p()},role:"button",tabIndex:0,"aria-label":d("characterAnimation.characterOptInAriaLabelText"),children:h.jsx(xve,{className:"outline-none",characterId:f(c.current),onCharacterDismissed:g,onCharacterClicked:v})}):null}const A6="0px 0px 0px 1px rgb(255, 255, 255) inset",k6="0px 0px 0px 1px rgba(255, 255, 255, 0.08) inset",Nve="0px 10px 24px 0px rgba(0, 0, 0, 0.18)",Pve="0px 42px 30px 0px rgba(0, 0, 0, 0.06)",Ove="0px 16px 48px -2px rgba(244, 190, 146, 0.18)",Mve="0px 16px 48px -2px rgba(0, 0, 0, 0.25)",Lve="0px 16px 24px -2px rgba(0, 0, 0, 0.1)",Dve="0px 16px 24px -2px rgba(0, 0, 0, 0.25)",jve=28,Uve=32,Fve=24,Bve=26,Hve="relative flex grow flex-col overflow-hidden before:absolute before:inset-0 before:rounded-3xl before:border-2 before:border-stroke-350",iRe="bg-white/90 shadow-composer-input dark:bg-midnight-900/80 dark:shadow-none",zve="w-auto rounded-3xl contrast-more:border-2",Vve="bg-gradient-to-b from-white/90 to-white/0 dark:from-black/30 dark:to-midnight-800/10",$ve="bg-white/90 dark:bg-midnight-850/60";function EA(t){const{title:e,onClick:n,appearDelay:r=Vz,appearDuration:o=Ro.audio.unavailable,className:i}=t;return h.jsx(xe.div,{layout:"position",initial:"initial",animate:"animate",className:"relative flex h-12 shrink-0 items-center",variants:{initial:{...ct,scale:.9},animate:{...Lt,scale:1,transition:{...cU,delay:r,duration:o}}},children:h.jsx("button",{type:"button",onClick:n,title:e,className:W("min-w-44",bf,Ac.strong,uI["40-base"],dI["40-base"],Xv,"rounded-2xl before:rounded-2xl",i),children:e})})}function Pm(t){const{children:e,className:n}=t;return h.jsx(xe.div,{className:n,initial:ct,animate:Lt,exit:ct,transition:{delay:lU},children:e})}const Gve={initial:ct,animate:Lt};function Kve(t){const{titleKey:e,textKey:n,buttonTextKey:r,button:o,cancelButton:i,onClick:s,closeDialogCallback:a}=t,{t:c}=He(),u=c(e),d=c(o.textKey);return h.jsxs(h.Fragment,{children:[h.jsx(xe.div,{layout:!0,variants:Gve,initial:"initial",animate:"animate",role:"dialog","aria-label":u,tabIndex:-1,children:h.jsxs("div",{className:"m-3 text-center text-foreground-800",children:[h.jsx("p",{className:"py-3",children:u}),h.jsx("p",{className:"text-xs",children:c(n)}),r&&h.jsx("div",{className:"mx-auto flex w-full max-w-xs justify-around px-5 py-3 text-accent-600",children:h.jsx("button",{onClick:s,type:"button",className:"text-xs",children:c(r)})})]})}),h.jsxs(xe.div,{className:"relative mx-0.5 my-1 flex w-full items-center justify-center gap-2 px-2 align-middle",onClick:a,children:[i&&h.jsx(Ue,{variant:"rect",title:c(i.textKey),className:"relative my-3 flex h-10 max-w-40 items-center justify-center py-3 dark:bg-black/40 dark:hover:bg-black/40",onClick:i.onClick,children:c(i.textKey)}),h.jsx(Ue,{variant:"rect",title:d,className:"relative my-3 flex h-10 max-w-40 items-center justify-center py-3 dark:bg-black/40 dark:hover:bg-black/40",onClick:o.onClick,children:d})]})]})}function wA(){const t=me("composer-creation-button");return!ci("kill-composer-creation-button")&&t}function _P({config:t}){const{t:e}=He(),n=wA();if(t)switch(t.mode){case"stop":return h.jsx(Ue,{testId:"stop-button",color:"accent",variant:"circle",size:n?"36-sm":"40-base",className:n?"":"my-1","aria-label":e("composer.stopButton"),title:e("composer.stopButton"),onClick:()=>t.onClick(),children:h.jsx("div",{className:"size-3.5 rounded bg-accent-550 contrast-more:border-2 dark:bg-accent-150"})});case"submit":return h.jsx(Ue,{testId:"submit-button",color:"strong",variant:"square",size:n?"36-sm":"40-base",className:at(n?"rounded-2xl":"my-1 rounded-submitButton"),"aria-label":e("userInput.submitButtonText"),title:e("userInput.submitButtonText"),onClick:()=>t.onClick(),disabled:t.disabled,children:h.jsx(Rp,{className:"size-6"})});case"microphone":return h.jsx(Wo,{data:{title:e("composer.startAudioCall"),testId:"audio-call-button",onClick:()=>t.onClick(),isVisible:!0},className:Ac["subtle-dimmed-inverted"],size:n?"small":"regular",margins:n?"my-0":"my-1",children:h.jsx(bA,{className:"size-6","aria-hidden":!0})});default:return}}function og(t){const{children:e,color:n="neutral",className:r}=t;return h.jsx("div",{className:at("flex h-4 items-center rounded px-1.5 text-3xs",n==="neutral"?"bg-black/8 text-foreground-550 dark:bg-white/8 dark:text-foreground-650":"bg-accent-350/30 text-accent-650 dark:bg-accent-450/30",r),children:e})}function Wve(t){var i;const{item:e,onClick:n}=t,r=O(ft),o=m.useRef(void 0);return m.useEffect(()=>{r&&o.current!==r&&e.onImpression&&(o.current=r,e.onImpression(r))},[r,e]),h.jsxs(Ue,{title:e.title,"aria-label":e.title,variant:"rect",color:"subtle-dimmed-inverted",onClick:n,size:"40-base",alignment:"start",className:"min-w-[230px] px-3 py-2",testId:e.testId,children:[h.jsx("div",{className:"size-6 min-w-6",children:e.icon}),h.jsxs("div",{className:"grow text-left",children:[h.jsxs("div",{className:"line-clamp-1 inline-flex gap-1.5 text-xs",children:[e.title,(i=e.tags)==null?void 0:i.map(s=>h.jsx("div",{className:"flex items-center",children:h.jsx(og,{color:s.color,children:h.jsx("span",{className:"leading-4",children:s.label})},s.label)},s.label))]}),h.jsx("p",{className:"line-clamp-1 leading-4 text-foreground-600 text-2xs dark:text-foreground-700",children:e.description})]})]},e.key)}const qve="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/dismiss-BcarQlxK.svg";function Yve(t){const{renderTrigger:e,renderSurface:n,containerClassNames:r,color:o="default",onOutsideEvent:i,placement:s="bottom",floatingOffset:a=10}=t,[c,u]=m.useState(!1),d=m.useRef(null),f=m.useRef(null),{refs:p,floatingStyles:g,context:v}=tp({placement:s,strategy:"fixed",middleware:[Cd(a),np(),Sd()],whileElementsMounted:bd,open:c,onOpenChange:u}),b=m.useCallback(C=>{C.stopPropagation(),C.preventDefault(),u(S=>!S)},[]),y=m.useCallback(()=>{u(!1),i==null||i()},[i]);return Xc({onOutsideEvent:y,elements:[p.floating,d],includeScroll:!0,invokeOnce:!0}),Il(C=>{C.key==="Escape"&&c&&y()}),h.jsxs("div",{ref:p.setReference,className:W("relative",r==null?void 0:r.trigger),children:[e({openPopover:b,isOpen:c,ref:d}),Z2.createPortal(h.jsx(xn,{children:c&&h.jsx(Qv,{context:v,modal:!0,returnFocus:!0,initialFocus:f,children:h.jsx(xe.div,{ref:p.setFloating,className:at("rounded-2xl p-3 shadow-lg",o==="thin"?ra:Qi,r==null?void 0:r.surface,Zt.modal),style:{...g,...TI},role:"dialog",tabIndex:-1,initial:"initial",animate:"animate",exit:"exit",variants:{initial:ct,animate:Lt,exit:{...ct,transition:{duration:Ro.default}}},transition:{duration:Ro.default,ease:"easeInOut"},children:h.jsx("div",{className:W("pointer-events-auto relative max-h-expanded-section overflow-visible",Zt.modal),children:n({closePopover:y,isOpen:c,focusRef:f})})})})}),document.getElementById("popoverPortal")??document.body)]})}const IA=m.forwardRef((t,e)=>{const{items:n,defaultSelectedItemIndex:r,onSelect:o,onReset:i,onMenuClick:s,disabled:a,showDefaultItemInDropdown:c=!1}=t,u=O(ft),d=m.useRef(void 0),f=m.useMemo(()=>!r||r<0||r>=n.length?0:r,[r,n]),[p,g]=m.useState(f);m.useImperativeHandle(e,()=>({setSelectedItemIndex:C=>g(C)}),[]);const{selectedItem:v,dropdownItems:b,selectedNonDefault:y}=m.useMemo(()=>({selectedItem:n[p]??void 0,dropdownItems:c?n:n.filter((C,S)=>S!==p),selectedNonDefault:p!==f}),[n,p,f,c]);return m.useEffect(()=>{u&&d.current!==u&&v&&v.onImpression&&(d.current=u,v.onImpression(u))},[u,v]),h.jsx(Yve,{color:"default",renderTrigger:({openPopover:C})=>v&&h.jsxs(Ue,{title:v.key,"aria-label":v.title,variant:"rect",size:"36-sm",disabled:a,color:y?"composer-selected":"subtle-dimmed",className:at("h-9 select-none gap-x-1 rounded-2xl border border-black/8 dark:border-white/8",v.isIconEnabledInButton?"pe-3 ps-2":"px-3"),onClick:S=>{var w;s==null||s(),(w=v.beforeClick)==null||w.call(v,u??""),y?(g(f),i==null||i()):C(S)},testId:v.testId,children:[y?h.jsx(or,{url:qve,className:"size-4"}):v.isIconEnabledInButton&&v.icon,h.jsx("span",{className:"text-xs",children:v.buttonTitle??v.title}),!y&&v.isChevronEnabledInButton&&h.jsx($d,{className:"size-4 rotate-90"})]}),renderSurface:({closePopover:C})=>h.jsx("div",{className:"flex flex-col",children:b.map(S=>h.jsx(Wve,{item:S,onClick:w=>{var I;(I=S.beforeClick)==null||I.call(S,u??"");const E=n.findIndex(T=>T.key===S.key);g(E),o(E),C(w)}},S.key))}),containerClassNames:{surface:"p-1 border-white/25 dark:border-slate-600/25 shadow-composer-tinted-light dark:shadow-composer-tinted-dark"},placement:"bottom-start",floatingOffset:4})});IA.displayName="ComposerDropdownButton";const AP=l.object({lastShown:l.string().datetime()});function Qve(t){const e=m.useCallback(()=>{Oi(t,AP,{lastShown:new Date().toISOString()})},[t]),n=m.useCallback(()=>!!lo(t,AP),[t]),[r,o]=m.useState(()=>!n()),i=m.useCallback(()=>{o(!1),e()},[o,e]);return{showCoachmark:r,dismissCoachmark:i}}function Jve(t){const{renderReferenceElement:e,children:n,className:r,placement:o,offset:i,isOpen:s=!0,portalId:a,withArrow:c=!1,arrowClassName:u="dark:fill-black fill-white",animation:d="none",onOutsideEvent:f}=t,p=m.useRef(null),{refs:g,x:v,y:b,strategy:y,context:C,placement:S}=tp({open:s,placement:o??"right",middleware:[Cd(i??1),np({fallbackAxisSideDirection:"end"}),Sd(),tO({element:p})],whileElementsMounted:bd});Xc({onOutsideEvent:()=>{f==null||f()},invokeOnce:!0,elements:[g.floating]});const w=tI(C),E=nI(C),I=rI(C),{getReferenceProps:T,getFloatingProps:A}=oI([w,E,I]),_=O(ks),U=Xve(d,S);return h.jsxs(h.Fragment,{children:[e==null?void 0:e({ref:g.setReference,...T()},s),s&&h.jsx(Yv,{id:a,children:h.jsxs(xe.div,{ref:g.setFloating,style:{position:y,top:`${b}px`,insetInlineStart:`${v}px`,boxShadow:_==="dark"?"0px 0px 0px 1px rgba(255, 255, 255, 0.08) inset":void 0},...U,...A({}),className:W("start-0 flex rounded-2xl p-4 shadow-xl",Zt.modal,SH,c&&"!overflow-visible",r),children:[n,c?h.jsx(fF,{ref:p,context:C,tipRadius:3,strokeWidth:2,className:u}):null]})})]})}function Xve(t,e){switch(t){case"bounce":return Zve(e);case"none":return{};default:return{}}}function Zve(t){const n=t.startsWith("top")||t.startsWith("bottom"),r=t.startsWith("top")||t.startsWith("left")?-1:1;return n?{animate:{y:`${r*10}px`,transition:_N}}:{animate:{x:`${r*10}px`,transition:_N}}}function eye({triggerComponent:t,offset:e=10}){const{t:n}=He(),{showCoachmark:r,dismissCoachmark:o}=Qve(F$),i=MU();return h.jsx(Jve,{className:"max-w-48 bg-black dark:bg-midnight-150",arrowClassName:"dark:fill-midnight-150 fill-black",isOpen:r,placement:"right",offset:e,withArrow:!0,renderReferenceElement:s=>h.jsx(xe.div,{ref:s.ref,className:"relative",children:t}),portalId:"composer-container",onOutsideEvent:o,children:h.jsxs("div",{className:"flex flex-col gap-0.5 bg-black text-white dark:bg-midnight-150 dark:text-black",children:[h.jsx("div",{className:"text-2xs-strong",children:n("composer.chatModes.smart.coachmarkTitle")}),h.jsx("div",{className:"text-2xs",children:i.coachmarkDescription})]})})}const x6="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/quick-pVrRG7df.svg",tye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/smart-rYPQLFDN.svg",nye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/think-DxNkOoJG.svg";function rye(t,e){V.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerCreateButton",eventInfo_impressionScenario:t??"off",eventInfo_conversationId:e}})}function oye(t,e){V.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerThinkButton",eventInfo_impressionScenario:t?"thinkDeeperOn":"thinkDeeperOff",eventInfo_conversationId:e}})}function iye(t){V.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionElement:"composerScreenshotButton",eventInfo_conversationId:t}})}function sye(t,e){V.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerCreateButton",eventInfo_clickScenario:aye(t),eventInfo_conversationId:e}})}function aye(t){if(!t)return"showDrawer";switch(t){case"actions":return"exitActions";case"image":return"exitImage";case"podcast":return"exitPodcast";case"researchReport":return"exitResearchReport";case"quiz":return"exitQuiz";default:return"showDrawer"}}function cye(t,e){V.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerThinkButton",eventInfo_clickScenario:t?"disableThinkDeeper":"enableThinkDeeper",eventInfo_conversationId:e}})}function lye(t){V.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"composerScreenshotButton",eventInfo_conversationId:t}})}const R6=["smart-mode-6e0b4c6f","smart-mode-cd0c997b","smart-mode"];function Cb(){return xD(R6,"any"),kI}function uye(){return ET(R6,"any"),kI}function dye(t){const{disabled:e=!1}=t,n=hye(),r=Cb(),[o,i]=lt(wn),[s,a]=m.useState(!1),c=m.useRef(null),u=m.useCallback(f=>{const p=n[f];((p==null?void 0:p.key)==="chat"||(p==null?void 0:p.key)==="smart"||(p==null?void 0:p.key)==="reasoning")&&(a(!0),i(p.key))},[n,i]);m.useEffect(()=>{var f;if(s)a(!1);else{const p=n.findIndex(g=>g.key===o);(f=c.current)==null||f.setSelectedItemIndex(p)}},[n,o,s,a]);const d=h.jsx(IA,{ref:c,items:n,onSelect:u,defaultSelectedItemIndex:0,showDefaultItemInDropdown:!0,onReset:()=>{i("chat")},disabled:e,onMenuClick:()=>dt({source:"composerChatModeDropdownButton",pageName:"chatPage",customData:JSON.stringify({currentMode:o})})});return r?h.jsx(eye,{triggerComponent:d,offset:10}):d}function kP(t){return e=>oye(t,e)}function xP(t){return e=>cye(t,e)}function hye(){const{t}=He("translation");Cb(),MU();const e={key:"chat",title:t("composer.chatModes.chat.title"),buttonTitle:t("composer.chatModes.chat.buttonTitle"),icon:h.jsx(or,{url:x6,className:"size-5"}),description:t("composer.chatModes.chat.description"),testId:"composer-chat-mode-quick-button",onImpression:kP(!1),beforeClick:xP(!1),tags:[{label:t("composer.chatModes.chat.latency"),color:"neutral"}],isChevronEnabledInButton:!0,isIconEnabledInButton:!1},n={key:"reasoning",title:t("composer.chatModes.reasoning.title"),icon:h.jsx(or,{url:nye,className:"size-6"}),description:t("composer.chatModes.reasoning.description"),testId:"composer-chat-mode-reasoning-button",onImpression:kP(!0),beforeClick:xP(!0),tags:[{label:t("composer.chatModes.reasoning.latency"),color:"neutral"}]};return[e,n]}const fye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/research-DamIycj6.svg",pye="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/think-deeper-C6Ziv8bd.svg",N6="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/checklist-BDS7QRqm.svg";function P6(){const t=me("deep-research"),e=me("deep-research-nano"),n=Pr(),r=O(xd);return t&&(r||!1||!r&&n&&e)&&!ye.instance().config().disableDeepResearch}const mye=["chat","reasoning"];function gye(){const[t,e]=lt(wn),n=tA(),{t:r}=He(),o=a=>{dt({source:"composerChatModeMenu",customData:JSON.stringify({currentMode:t,newMode:a})}),e(a),pA({msg:r("actions.screenReaderSwitchPrefix",{chatMode:qf(a)})})},i=P6();Cb();const s=mye.concat(i?["research"]:[],n?["computerUse"]:[],[]);return h.jsx("div",{className:"pointer-events-auto relative flex flex-col gap-1 rounded-2xl text-xs contrast-more:border-2","data-testid":"composer-mode-menu",role:"radiogroup",children:s.map((a,c)=>h.jsx(yye,{chatMode:a,isSelected:t===a,onSelect:o,focusOnMount:c===0},a))})}const vye={chat:h.jsx(or,{url:x6,className:"size-5"}),reasoning:h.jsx(or,{url:pye,className:"size-5"}),research:h.jsx(or,{url:fye,className:"size-5"}),computerUse:h.jsx(or,{url:N6,className:"size-5"}),smart:h.jsx(or,{url:tye,className:"size-5"})};function yye(t){const{chatMode:e,isSelected:n,focusOnMount:r,onSelect:o}=t,{t:i}=He(),s=m.useRef(null);yb(s,r);const a=e==="research"||e==="smart",c=e!=="smart";return h.jsxs("button",{type:"button",ref:s,title:qf(e),onClick:()=>o(e),className:W("flex items-center justify-between gap-4 rounded-xl px-4 py-2",Ac["subtle-dimmed"]),"data-testid":`${e}-mode-option`,role:"radio","aria-checked":n,children:[h.jsxs("div",{className:"flex items-center gap-4",children:[vye[e],h.jsxs("div",{className:"pe-4 text-left",children:[h.jsxs("div",{className:"flex items-center gap-1.5",children:[h.jsxs("div",{children:[" ",qf(e)," "]}),a&&h.jsx(og,{color:"accent",children:h.jsx("span",{children:i("common.new")})}),e==="computerUse"&&h.jsx(og,{color:"accent",children:h.jsx("span",{children:i("settings.labs.title")})}),c&&h.jsx(og,{children:h.jsx("span",{children:i(`composer.chatModes.${e}.latency`)})})]}),h.jsx("div",{className:"text-foreground-600 text-2xs dark:text-foreground-700",children:sfe(e)})]})]}),h.jsx(bye,{isSelected:n})]})}function bye(t){const{isSelected:e}=t;return h.jsx("div",{className:W("flex size-5 items-center justify-center rounded-full border-2",e?"border-foreground-800":"border-foreground-450"),children:e&&h.jsx("div",{className:"size-2.5 rounded-full bg-foreground-800 contrast-more:border-2"})})}function Cye(t){const{isChatModeMenuOpen:e,onRef:n,onClick:r,disableChatModeSwitcher:o}=t,{t:i}=He(),s=O(wn),a=c=>{dt({source:"composerChatModeSwitcher",customData:JSON.stringify({currentMode:s,isOpen:e})}),r(c)};return h.jsx(xe.div,{layout:"position",initial:!1,children:h.jsxs(Ue,{testId:"chat-mode-switcher",title:i(e?"composer.chatModes.closeModeMenu":"composer.chatModes.openModeMenu"),onClick:a,color:"subtle-dimmed",ref:n,className:"my-1 border border-black/8",disabled:!o,children:[h.jsx("span",{className:"text-xs",children:qf(s)}),h.jsx($d,{className:W("size-4",e?"-rotate-90":"rotate-90")})]})})}function Sye(){const t=m.useRef(null);return{captureFocus:()=>{document.activeElement instanceof HTMLElement&&(t.current=document.activeElement)},restoreFocus:()=>{t.current&&t.current.focus()}}}function TA(t){const{renderTrigger:e,triggerClick:n,children:r,className:o,options:i,isOpen:s,onIsOpenChange:a}=t,{state:c,setState:u}=CA({controlledValue:s,defaultValue:!1,onChange:a}),{disableFocusManager:d=!1}=i??{},f=hb(),{refs:p,x:g,y:v,strategy:b,context:y}=tp({open:c,placement:(i==null?void 0:i.placement)??"bottom-end",onOpenChange:u,middleware:[Cd((i==null?void 0:i.offset)??1),np({fallbackAxisSideDirection:"end"}),Sd()],whileElementsMounted:bd}),C=tI(y),S=nI(y),w=rI(y,{role:(i==null?void 0:i.roleType)??"dialog"}),{getReferenceProps:E,getFloatingProps:I}=oI([C,S,w]),T=A=>{i!=null&&i.stopReferencePropagation&&A.stopPropagation(),n==null||n(A)};return h.jsxs(h.Fragment,{children:[e==null?void 0:e({ref:p.setReference,...E({onClick:T})},c),c&&h.jsx(Yv,{children:h.jsx(Qv,{context:y,modal:!1,disabled:d,returnFocus:(i==null?void 0:i.returnFocus)??!0,children:h.jsx("div",{ref:p.setFloating,style:{position:b,top:`${v}px`,[f?"insetInlineEnd":"insetInlineStart"]:`${g}px`},...I({onClick:A=>{i!=null&&i.stopFloatingPropagation&&A.stopPropagation(),i!=null&&i.hideOnMenuClick&&u(!1)}}),className:W("flex rounded-2xl p-1.5 shadow-xl",Zt.modal,o),children:r})})})]})}function Eye({disableChatModeSwitcher:t}){const[e,n]=lt(cb);Cb();const{captureFocus:r,restoreFocus:o}=Sye();return h.jsx(TA,{isOpen:e==="chatMode",onIsOpenChange:i=>n(s=>i?(r(),"chatMode"):s==="chatMode"?(setTimeout(()=>{o()},0),null):s),renderTrigger:(i,s)=>h.jsx(Cye,{isChatModeMenuOpen:s,onRef:i.ref,onClick:i.onClick,disableChatModeSwitcher:t}),options:{placement:"top-start",offset:{mainAxis:10,crossAxis:-12},hideOnMenuClick:!0},className:at(Qi,"p-2"),children:h.jsx(gye,{})})}function wye({state:t}){const{t:e}=He(),n=$t(),r=ui(),o=_e(zr),i=_e(Id),s=_e(vy),a=wA();return h.jsx(Wo,{data:{title:e("composer.goToHome"),testId:"home-button",onClick:async()=>{o(null),i(!1),s(void 0),En({source:"homeButton"}),await r({to:"/",from:n})},isVisible:t!=="hidden",isDisabled:t==="disabled"},size:a?"small":"regular",children:h.jsx(Mp,{className:"size-6","aria-hidden":!0})})}const pf=20,Iye={id:-1,title:"",added:!1,isAppear:!0,specialTabType:"all-tabs",active:!1,highlighted:!1,pinned:!1,selected:!1,incognito:!1,autoDiscardable:!0,discarded:!1,index:-1,windowId:-1,groupId:-1};function _A(t){return t.specialTabType==="all-tabs"}function Tye(t,e){const{t:n}=He(),r=m.useMemo(()=>{const s=t.filter(c=>c.isAppear&&!_A(c)),a=s.length>=pf?pf:s.length;return e&&a>1?[{...Iye,title:n("composer.multiTabs.allTabs",{count:a}),isAppear:!0},...s]:s},[t,n,e]),o=e?r.length-1:r.length,i=m.useCallback(()=>t.map(s=>({...s,added:r.slice(1,pf+1).some(a=>a.id===s.id)})),[r,t]);return{appearedTabs:r,appearedTabsCount:o,getUpdatedTabsBySpecialTab:i}}const O6=t=>m.createElement("svg",{viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M6.5 2C4.01472 2 2 4.01472 2 6.5V11.5002C1.39278 11.0441 1 10.3179 1 9.5V6.5C1 3.46243 3.46243 1 6.5 1H9.5C10.3179 1 11.0441 1.39278 11.5002 2H6.5ZM4.06095 6.3954C4.34069 5.02835 5.55025 4 7 4H13.5002C13.0441 3.39278 12.3179 3 11.5 3H7C4.79086 3 3 4.79086 3 7V11.5C3 12.3179 3.39278 13.0441 4 13.5002V7C4 6.79289 4.02099 6.59069 4.06095 6.3954ZM5 7.5C5 6.11929 6.11929 5 7.5 5H12.5C13.8807 5 15 6.11929 15 7.5V12.5C15 13.8807 13.8807 15 12.5 15H7.5C6.11929 15 5 13.8807 5 12.5V7.5ZM7.5 6C6.67157 6 6 6.67157 6 7.5V12.5C6 13.3284 6.67157 14 7.5 14H12.5C13.3284 14 14 13.3284 14 12.5V7.5C14 6.67157 13.3284 6 12.5 6H7.5Z"})),sRe=Object.freeze(Object.defineProperty({__proto__:null,default:O6},Symbol.toStringTag,{value:"Module"})),M6=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 24",fill:"currentColor",...t},m.createElement("path",{d:"M12.5 2C18.0228 2 22.5 6.47715 22.5 12C22.5 17.5228 18.0228 22 12.5 22C6.97715 22 2.5 17.5228 2.5 12C2.5 6.47715 6.97715 2 12.5 2ZM12.5 3.5C7.80558 3.5 4 7.30558 4 12C4 16.6944 7.80558 20.5 12.5 20.5C17.1944 20.5 21 16.6944 21 12C21 7.30558 17.1944 3.5 12.5 3.5ZM12.5 7C12.9142 7 13.25 7.33579 13.25 7.75V11.25H16.75C17.1642 11.25 17.5 11.5858 17.5 12C17.5 12.4142 17.1642 12.75 16.75 12.75H13.25V16.25C13.25 16.6642 12.9142 17 12.5 17C12.0858 17 11.75 16.6642 11.75 16.25V12.75H8.25C7.83579 12.75 7.5 12.4142 7.5 12C7.5 11.5858 7.83579 11.25 8.25 11.25H11.75V7.75C11.75 7.33579 12.0858 7 12.5 7Z"})),aRe=Object.freeze(Object.defineProperty({__proto__:null,default:M6},Symbol.toStringTag,{value:"Module"})),AA=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t},m.createElement("path",{d:"M17.75 3A3.25 3.25 0 0 1 21 6.25v11.5A3.25 3.25 0 0 1 17.75 21H6.25A3.25 3.25 0 0 1 3 17.75V6.25A3.25 3.25 0 0 1 6.25 3h11.5Zm.58 16.401-5.805-5.686a.75.75 0 0 0-.966-.071l-.084.07-5.807 5.687c.182.064.378.099.582.099h11.5c.203 0 .399-.035.58-.099l-5.805-5.686L18.33 19.4ZM17.75 4.5H6.25A1.75 1.75 0 0 0 4.5 6.25v11.5c0 .208.036.408.103.594l5.823-5.701a2.25 2.25 0 0 1 3.02-.116l.128.116 5.822 5.702c.067-.186.104-.386.104-.595V6.25a1.75 1.75 0 0 0-1.75-1.75Zm-2.498 2a2.252 2.252 0 1 1 0 4.504 2.252 2.252 0 0 1 0-4.504Zm0 1.5a.752.752 0 1 0 0 1.504.752.752 0 0 0 0-1.504Z"})),cRe=Object.freeze(Object.defineProperty({__proto__:null,default:AA},Symbol.toStringTag,{value:"Module"})),L6=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 24",fill:"currentColor",...t},m.createElement("path",{d:"M12.5 2C18.0228 2 22.5 6.47715 22.5 12C22.5 17.5228 18.0228 22 12.5 22C6.97715 22 2.5 17.5228 2.5 12C2.5 6.47715 6.97715 2 12.5 2ZM15.7197 8.96967L11.25 13.4393L9.28033 11.4697C8.98744 11.1768 8.51256 11.1768 8.21967 11.4697C7.92678 11.7626 7.92678 12.2374 8.21967 12.5303L10.7197 15.0303C11.0126 15.3232 11.4874 15.3232 11.7803 15.0303L16.7803 10.0303C17.0732 9.73744 17.0732 9.26256 16.7803 8.96967C16.4874 8.67678 16.0126 8.67678 15.7197 8.96967Z"})),lRe=Object.freeze(Object.defineProperty({__proto__:null,default:L6},Symbol.toStringTag,{value:"Module"}));function D6(t){return m.useCallback(e=>{if(e.key==="Enter"&&!e.shiftKey||e.key===" "){e.preventDefault();try{const n=t(e);n instanceof Promise&&n.catch(console.error)}catch(n){console.error("Error in useEnterOrSpaceKeyDown:",n)}}},[t])}function _ye(t){const e=t.children[0];return e instanceof HTMLElement?e:null}function Aye(t,e=!0){m.useEffect(()=>{if(e&&t.current){const n=_ye(t.current);n&&n.focus()}},[t,e])}const Tl=t=>h.jsx(xye,{...t});Tl.Motion=m.forwardRef(kye);function kye(t,e){const{children:n,axis:r="vertical",circular:o=!0,tabbable:i,autoFocus:s=!1,...a}=t,c=rO({axis:r,circular:o,tabbable:i}),u=m.useRef(null);return m.useImperativeHandle(e,()=>u.current,[]),yb(u,s),me("a11y-keyboard-navigation")?h.jsx(xe.div,{ref:u,...c,...a,children:n}):h.jsx(xe.div,{ref:u,...a,children:n})}function xye(t){const{children:e,axis:n="vertical",circular:r,tabbable:o,autoFocus:i=!1,...s}=t,a=rO({axis:n,circular:r,tabbable:o}),c=m.useRef(null);return Aye(c,i),me("a11y-keyboard-navigation")?h.jsx("div",{ref:c,...a,...s,children:e}):h.jsx("div",{ref:c,...s,children:e})}const RP="ms-auto me-[2px] size-6 flex-none";function Rye(t,e){const{tab:n,onClick:r,showHighlight:o,showActionIcon:i=!0,onFocus:s,className:a,totalTabsCount:c,maxSelectedTabsLimit:u}=t,[d,f]=m.useState(!1),{t:p}=He(),g=m.useCallback(()=>{r==null||r({...n,added:n.specialTabType!=="all-tabs"?!n.added:n.added})},[r,n]),v=D6(g),b=_A(n),y=d||!n.favIconUrl||b,C=b?O6:AA,S=b&&c&&c>=u;return h.jsxs(Tl.Motion,{className:at(" box-border flex w-full cursor-pointer flex-row items-center rounded-lg p-1.5 active:bg-black/3 safe-hover:bg-black/5 dark:active:bg-white/5 dark:safe-hover:bg-black/30",o&&"bg-black/5 dark:bg-white/8","forced-colors:focus:outline forced-colors:focus:outline-2 forced-colors:focus:outline-black dark:forced-colors:focus:outline-white","contrast-more:focus:outline contrast-more:focus:outline-2 contrast-more:focus:outline-black dark:contrast-more:focus:outline-white",a),onClick:g,tabIndex:0,onKeyDown:v,ref:e,onFocus:s,tabbable:!0,"aria-label":n.title,children:[h.jsx("div",{className:"relative flex size-4 flex-none flex-row items-center rounded-lg bg-black/5",children:y?h.jsx(C,{className:"size-full"}):h.jsx("img",{src:n.favIconUrl,alt:p("composer.multiTabs.tabFavIconAltText"),className:"size-full rounded-[1px] object-cover",onError:()=>{f(!0)}})}),h.jsxs("span",{className:"font-ligatures-none me-7 ms-2 max-h-full truncate text-foreground-850 text-xs",children:[n.title,S&&h.jsx("span",{className:"ms-1 text-foreground-650 text-2xs",children:p("composer.multiTabs.browserTabMenuMentionLimitText",{limit:u})}),h.jsx("span",{})]}),i&&n.specialTabType!=="all-tabs"&&(n.added?h.jsx(L6,{className:RP}):h.jsx(M6,{className:RP}))]})}const Nye=m.forwardRef(Rye),j6=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t},m.createElement("path",{d:"M4.5 10a5.5 5.5 0 1 1 11 0 5.5 5.5 0 0 1-11 0ZM10 3a7 7 0 1 0 4.391 12.452l5.329 5.328a.75.75 0 1 0 1.06-1.06l-5.328-5.329A7 7 0 0 0 10 3Z"})),uRe=Object.freeze(Object.defineProperty({__proto__:null,default:j6},Symbol.toStringTag,{value:"Module"})),NP="";function Pye(t){const{onChange:e,defaultValue:n}=t,{t:r}=He(),[o,i]=m.useState(n??NP),s=()=>{i(NP)},a=D6(s),c=m.useCallback(u=>{i(u.target.value)},[]);return m.useEffect(()=>{e==null||e(o)},[e,o]),h.jsxs("div",{className:"mt-3 flex h-8 w-full flex-row items-center rounded-3xl bg-white/60 dark:bg-black/60",children:[h.jsx(j6,{className:"mx-2 size-4"}),h.jsx("input",{type:"text",id:"browser-tab-search",autoComplete:"off",spellCheck:!1,autoCorrect:"off",className:"w-full rounded-lg bg-transparent py-2 text-sm focus:outline-none",placeholder:r("composer.multiTabs.browserTabMenuSearchPlaceholder"),"aria-label":r("composer.multiTabs.browserTabMenuSearchPlaceholder"),onChange:c,value:o,maxLength:100}),o&&h.jsx("div",{role:"button",tabIndex:0,className:"me-1 ms-auto h-6 cursor-pointer rounded-xl border border-midnight-250 bg-midnight-200 px-3 py-1 text-foreground-800 text-2xs dark:border-white/50 dark:bg-white/5",onKeyDown:a,onClick:s,"aria-label":r("composer.multiTabs.browserTabMenuSearchClear"),children:r("composer.multiTabs.browserTabMenuSearchClear")})]})}function Oye(t,e){let n=null;return(...r)=>{n!==null&&window.clearTimeout(n),n=window.setTimeout(()=>t(...r),e)}}const Mye=300,dRe=2e3;function Lye(t,e=1e3){const n=m.useRef();return n.current=t,m.useMemo(()=>Oye((...i)=>{var s;(s=n.current)==null||s.call(n,...i)},e),[e])}function Dye(t){const e=m.useRef(0),n=m.useCallback(async()=>{const r=window.innerHeight;r!==e.current&&(e.current=r,await t(r))},[t]);bb(n,{initialize:!0},document.documentElement)}const jye="edge://discover-chat-v2",hRe="Edge.Context.Pref",fRe="Edge.Context.OnPref",pRe="browser.underside_chat_consent",mRe="browser.underside_video_transcript_consent",Uye="Edge.IsFeatureEnabled",Fye="Edge.OnIsFeatureEnabled",gRe="isShowCopilotButtonSupported";class zv{constructor(){J(this,"resolve",null);J(this,"isCancelled");J(this,"token");this.token=new Promise(e=>{this.resolve=e}),this.isCancelled=!1}static cancelled(){const e=new zv;return e.cancel(),e}static create(e){const n=new zv;return e&&e.then(()=>n.cancel()),n}static delay(e){return this.create(new Promise(n=>{setTimeout(()=>n(null),e)}))}cancelled(){return this.isCancelled}cancel(){return!this.isCancelled&&this.resolve&&this.resolve(this),this.isCancelled=!0,this.isCancelled}dispose(){this.cancel()}}function Bye(t){window.parent.postMessage(t,jye)}class kA{constructor(e,n="",r,o){J(this,"listenerKey",kA.name);J(this,"result",null);J(this,"priority","Normal");J(this,"createdDate",new Date);J(this,"id");J(this,"resolveListener");J(this,"eventName");J(this,"canResolve");this.eventName=e,this.id=n,r==null||r.then(()=>this.cancel()),this.canResolve=o}init(e){e!==void 0?this.resolveListener=e:this.result=new Promise(n=>{this.resolveListener=n})}maybeHandleEvent(e){if(!this.resolveListener)throw new Error("PostMessageListener is not initialized");const{eventName:n,requestId:r}=e;return r!==this.id?!1:n===this.eventName?this.canResolve&&!this.canResolve(e)?!1:(this.resolveListener(e),!0):!1}cancel(){if(!this.resolveListener)throw new Error("PostMessageListener is not initialized");return this.result&&this.resolveListener(null),!0}}const sc=class sc{constructor(){J(this,"activeListeners",[])}static instance(){return sc.singleton||(sc.singleton=new sc),sc.singleton}push(e,n,r){return e.init(r),this.activeListeners.push(e),n&&n(),e.result===null?Promise.resolve(null):e.result.then(o=>(this.pop(e),o)).catch(()=>(this.pop(e),null))}pop(e){const n=this.activeListeners.indexOf(e);n>-1&&this.activeListeners.splice(n,1)}findAndHandleListener(e){for(const n of[...this.activeListeners].sort((r,o)=>r.createdDate<o.createdDate?-1:1))if(n.maybeHandleEvent(e))break}};J(sc,"singleton",null);let Ow=sc;class Hye{constructor(){J(this,"isFeatureAvailableApiSupported");J(this,"enabledFeatures",new Map);this.isFeatureAvailableApiSupported=this.getFeatureAvailableApiSupported()}async isFeatureEnabled(e){return this.enabledFeatures.has(e)||await this.retrieveEnabledFeatures([e]),this.enabledFeatures.get(e)??!1}async retrieveEnabledFeatures(e){if(!this.isFeatureAvailableApiSupported)return;await this.waitForNativeBridgeConnected();const n=1e3,r={eventName:Uye,requestId:crypto.randomUUID(),isOutgoing:!0,args:{featureNames:e}},o=await Ow.instance().push(new kA(Fye,r.requestId,zv.delay(n).token),()=>{Bye(r)});if(o){const i=o.args;for(const s of e){const a=i.featureNames.includes(s);this.enabledFeatures.set(s,a)}}}getFeatureAvailableApiSupported(){for(const n of navigator.userAgent.split(" "))if(n.startsWith("Edg/")){const r=n.split("/")[1];if(r!==void 0){const o=r.split(".")[0];if(o!==void 0)return parseInt(o,10)>=132}}return!1}waitForNativeBridgeConnected(){const e=rt();return e.get(Qh)?Promise.resolve():new Promise(n=>{const r=e.sub(Qh,()=>{e.get(Qh)&&(r(),n())})})}}const vRe=new Hye;function zye(t){return t!=null&&typeof t=="object"&&"id"in t&&typeof t.id=="number"&&"windowId"in t&&typeof t.windowId=="number"&&"url"in t&&typeof t.url=="string"}function U6(t){return Array.isArray(t)&&t.every(e=>zye(e))}const Vye=.2,$ye=.2,Gye=594,Kye=46,Wye=360,qye=240;function Yye(t,e){const n=new Set(t.map(o=>o.id)),r=new Set(e.map(o=>o.id));if(n.size!==r.size)return!0;for(const o of n)if(!r.has(o))return!0;return!1}function Qye(){Pt.emit("edge:try-grow-content-height",Gye)}function Jye(t){const e=new Map;for(const n of t)n.id&&n.added&&e.set(n.id,n);return e}function Xye(t){const{styles:e,onRef:n,onSave:r,onClose:o=()=>{},outsideClickElements:i=[],originElement:s,mode:a="add"}=t,[c,u]=lt(md),d=m.useRef(new Map(c)),f=m.useRef(null),[p,g]=m.useState([]),[v,b]=m.useState(0),y=m.useRef(null),{t:C}=He(),S=m.useDeferredValue([...p]),w=O(Xj),{appearedTabs:E,appearedTabsCount:I,getUpdatedTabsBySpecialTab:T}=Tye(S,w),[A,_]=m.useState(!1),U=d.current,[k,G]=m.useState(0),[K,ie]=m.useState(!1),P=m.useCallback(()=>{if(f.current&&s&&s.current){const Re=s.current.getBoundingClientRect();G(Re.top-Kye)}},[G,s]);Dye(()=>{Qye(),P()}),m.useEffect(()=>{ie(!1);async function Re(){const{tabs:Ve}=await qle.run({});if(U6(Ve)){const he=[];for(const B of Ve)B.id&&he.push({...B,added:U.has(B.id),isAppear:!0});g(he)}}Re().catch(console.error).finally(()=>{ie(!0)})},[U]),m.useLayoutEffect(()=>{f.current&&K&&P()},[P,K]);const $=m.useMemo(()=>p.filter(Re=>Re.added),[p]),Z=m.useMemo(()=>$.length>pf,[$]),x=m.useCallback(Re=>{n==null||n(Re),f.current=Re},[n]),L=m.useCallback(Re=>{const Ve=Jye(Re);u(Ve);const he=Array.from(Ve.values()),B=Yye(he,[...U.values()]);r==null||r(he,B)},[U,r,u]),ne=m.useCallback(()=>{Z||L(p)},[Z,L,p]),se=m.useCallback(Re=>{g(Ve=>Ve.map(B=>B.id===Re.id?Re:B))},[]),fe=Lye(m.useCallback(Re=>{g(Ve=>Ve.map(he=>({...he,isAppear:he.title?he.title.toLowerCase().includes(Re.toLowerCase().trim()):!0})))},[]),Mye),X=m.useCallback(Re=>{b(Ve=>Re==="up"?Ve>0?Ve-1:E.length-1:Ve<E.length-1?Ve+1:0)},[b,E]);m.useEffect(()=>{y.current&&v>=0&&y.current.scrollIntoView({block:"nearest"})},[v,y]);const ge=m.useCallback(Re=>{let Ve=[];_A(Re)?Ve=T():Ve=p.map(he=>he.id===Re.id?{...Re,added:!0}:he),g(Ve),L(Ve)},[T,L,p]),Oe=m.useCallback(Re=>{var Ve;if(["ArrowUp","ArrowDown"].includes(Re.code))Re.preventDefault(),X(Re.code==="ArrowUp"?"up":"down");else if(Re.code==="Enter"){Re.preventDefault();const he=E[v];he&&ge({...he,added:!0})}else Re.code==="Tab"&&((Ve=f.current)==null||Ve.focus())},[X,v,E,ge]);m.useEffect(()=>(Pt.on("multi-tabs:search",fe),Pt.on("multi-tabs:key-down",Oe),()=>{Pt.off("multi-tabs:search",fe),Pt.off("multi-tabs:key-down",Oe)}),[Oe,fe]),Xc({onOutsideEvent:o,elements:[f,...i],invokeOnce:!1,shouldAttachListeners:A}),m.useEffect(()=>{_(!0)},[]);const Se=m.useMemo(()=>w?qye:Wye,[w]),Fe=m.useMemo(()=>({maxHeight:`${k>Se?Se:k}px`,...e}),[k,Se,e]);return h.jsxs(Tl.Motion,{className:at(Zt.modal,"pointer-events-auto relative z-40 box-border flex max-h-[400px] w-full flex-col rounded-b-6xl rounded-t-4xl border border-white p-4 shadow-lg backdrop-blur-2xl backdrop-saturate-150 contrast-more:border-2 dark:border-white/10","bg-gradient-composer-tabs-menu-light dark:bg-gradient-composer-tabs-menu-dark","bg-blend-normal","forced-colors:bg-stroke-150 dark:forced-colors:bg-midnight-850","contrast-more:bg-stroke-150 dark:contrast-more:bg-midnight-850",w?"px-4 pb-1.5 pt-4":"p-4"),style:Fe,tabbable:!0,tabIndex:0,ref:x,"data-testid":"composer-multi-tabs-menu",initial:"start",animate:"end",variants:{start:ct,end:{...Lt,transition:{duration:Vye,delay:$ye}}},children:[h.jsxs("div",{className:"flex w-full flex-row items-center justify-between pt-2",children:[h.jsx("span",{className:"font-[500] text-foreground-900 text-xs",children:C(a==="add"?"composer.multiTabs.browserTabMenuTitle":"composer.multiTabs.browserTabMenuTitleForUpdate")}),!w&&h.jsx(Ue,{color:"subtle-dimmed",title:C("common.closeText"),size:"32-xs",onClick:o,"aria-label":C("common.closeText"),children:h.jsx(ko,{className:"size-5 cursor-pointer"})})]}),!w&&h.jsx(Pye,{onChange:fe}),h.jsxs("div",{className:at("relative flex w-full overflow-hidden",w?"mb-0 mt-3":"my-3"),children:[h.jsx("div",{className:at("t-custom-scrollbar flex w-full flex-col gap-y-1 overflow-y-auto overflow-x-hidden px-0.5"),children:E.length>0?E.map((Re,Ve)=>h.jsx(Nye,{tab:Re,onClick:w?ge:se,showHighlight:Ve===v,ref:Ve===v?y:null,onFocus:()=>{b(Ve)},showActionIcon:!w,className:at(!w&&"py-2"),totalTabsCount:I,maxSelectedTabsLimit:pf},Re.id)):h.jsx("span",{className:"-ms-0.5 h-8 leading-8 text-foreground-850 text-xs",role:"status",children:p.length===0?C("composer.multiTabs.noTabsOpen"):C("composer.multiTabs.noTabsFound")})}),E.length>=4&&w&&h.jsx("div",{className:at("pointer-events-none absolute inset-x-0 bottom-0 h-8 rounded-b-lg px-4","bg-gradient-composer-tabs-menu-mask-light dark:bg-gradient-composer-tabs-menu-mask-dark")})]}),!w&&h.jsx(Ue,{title:C("composer.multiTabs.browserTabMenuShareButton"),className:"mx-auto mt-auto w-full flex-none",disabled:Z,onClick:ne,color:"strong",size:"48-lg","aria-label":C("composer.multiTabs.browserTabMenuShareButton"),children:C(a==="add"?"composer.multiTabs.browserTabMenuShareButton":"composer.multiTabs.browserTabMenuShareButtonForUpdate")})]})}const F6=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{id:"Shape",d:"M2 6.25C2 4.45507 3.45507 3 5.25 3H18.75C20.5449 3 22 4.45507 22 6.25V12H20.5V6.25C20.5 5.2835 19.7165 4.5 18.75 4.5H5.25C4.2835 4.5 3.5 5.2835 3.5 6.25V15.75C3.5 16.7165 4.2835 17.5 5.25 17.5H11V19H5.25C3.45507 19 2 17.5449 2 15.75V6.25ZM14 13C12.8954 13 12 13.8954 12 15V20C12 21.1046 12.8954 22 14 22H21C22.1046 22 23 21.1046 23 20V15C23 13.8954 22.1046 13 21 13H14Z",fill:"currentColor"})),yRe=Object.freeze(Object.defineProperty({__proto__:null,default:F6},Symbol.toStringTag,{value:"Module"}));function Zye(t){const{onClick:e}=t,{t:n}=He();return h.jsx(Wo,{data:{title:n("videoCard.pictureInPicture.miniPlayer"),testId:"trigger-picture-in-picture",isVisible:!0,onClick:e},children:h.jsx(F6,{className:"size-6","aria-hidden":!0})})}function xA(){return O(Vr)==="US"&&ye.instance().config().proSubscription.enabled}function ebe(t){const{title:e,onClick:n,appearDelay:r,appearDuration:o,voiceAvailabilityStatus:i,payflowSkuType:s}=t,a=xA(),c=O(In);return m.useEffect(()=>{c!=null&&c.accountType&&V.trackEvent({name:"interaction",data:{eventName:"payflowEntryImpression",eventInfo_loginProvider:c.accountType,eventInfo_actionButton:"GetCopilotPro",eventInfo_payflowEntryPoint:"VoiceLimit",eventInfo_payflowType:a?"ProSubPaywall":"UniPux",eventInfo_payflowSkuType:s,eventInfo_upsellReason:i,eventInfo_upsellEntryStyle:"Button"}})},[i,s,a,c==null?void 0:c.accountType]),h.jsx(EA,{className:"mx-2",title:e,onClick:n,appearDelay:r,appearDuration:o})}const tbe="https://content.lifecycle.office.net/dime/v1/dime.js";function nbe(){return new Promise((t,e)=>{const n=document.createElement("script");n.src=tbe,n.type="text/javascript",n.async=!0,n.onload=()=>{t()},n.onerror=()=>{e(new Error("Failed to load Dime script"))},document.head.appendChild(n)})}const PP=new hl(nbe);async function rbe({language:t,market:e,sessionId:n}){var r;try{const[o]=await Promise.all([Yle(),PP.get()]);return new window.Dime({language:t,market:e,sessionId:n,partnerId:"cmc",authHint:o==null?void 0:o.username,userInfo:{puid:(r=o==null?void 0:o.idTokenClaims)==null?void 0:r.puid}})}catch(o){return PP.reset(),console.log("Failed to load Dime script",o),null}}const XS=new hl(t=>rbe(t));var Fu,ep;class obe{constructor(){sn(this,Fu,ni("pfcid")??crypto.randomUUID());sn(this,ep);J(this,"ensureDime",async({language:e,market:n})=>(e!==pe(this,ep)&&XS.reset(),Ut(this,ep,e),XS.get({language:e,market:n,sessionId:pe(this,Fu)})));J(this,"overrideSessionId",e=>{XS.reset(),Ut(this,Fu,e)})}get sessionId(){return pe(this,Fu)}}Fu=new WeakMap,ep=new WeakMap;const ZS=new obe;function e0(t){return t instanceof Error?{errorCode:t.toString(),errorDetails:t.message}:{errorCode:"unknown",errorDetails:String(t)}}function Wd(t,e,n){const r={eventInfo_payflowEntryPoint:e.payflowEntryPoint,eventInfo_upsellReason:e.upsellReason,eventInfo_loginProvider:e.loginProvider,eventInfo_payflowType:"DIME",eventInfo_payflowInstanceId:e.payflowInstanceId,eventInfo_curatedSubscription:e.curatedSubscription,eventInfo_correlationId:e.correlationId,eventInfo_dimeMarket:e.dimeMarket,eventInfo_campaignId:e.campaignId};let o;switch(t){case"payflowEnter":o={eventName:"payflowEnter",...r,eventInfo_upsellEntryStyle:(n==null?void 0:n.eventInfo_upsellEntryStyle)||"Banner"};break;case"payflowLoginClick":o={eventName:"payflowLoginClick",...r};break;case"dimeCheckoutRendering":o={eventName:"dimeCheckoutRendering",...r};break;case"dimeCheckoutSuccess":o={eventName:"dimeCheckoutSuccess",...r};break;case"dimeCheckoutClosed":o={eventName:"dimeCheckoutClosed",...r};break;case"dimeCheckoutError":o={eventName:"dimeCheckoutError",eventInfo_errorCode:(n==null?void 0:n.eventInfo_errorCode)??"",eventInfo_errorDetails:(n==null?void 0:n.eventInfo_errorDetails)??"",...r};break;default:o={eventName:"unknown",...r};break}V.trackEvent({name:"interaction",data:o})}function ibe(t){Wd("payflowEnter",t,{eventInfo_upsellEntryStyle:"Banner"})}function bRe(t){Wd("payflowLoginClick",t)}function sbe(t){Wd("dimeCheckoutRendering",t)}function abe(t){Wd("dimeCheckoutSuccess",t)}function cbe(t){Wd("dimeCheckoutClosed",t)}function CRe(t){V.trackEvent({name:"interaction",data:{eventName:"manageSubPageActionClick",eventInfo_loginProvider:t.loginProvider,eventInfo_curatedSubscription:t.curatedSubscription,eventInfo_actionTarget:t.actionTarget}})}function SRe(t){V.trackEvent({name:"interaction",data:{eventName:"manageSubFREShown",eventInfo_loginProvider:t.loginProvider,eventInfo_curatedSubscription:t.curatedSubscription}})}function ERe(t){V.trackEvent({name:"interaction",data:{eventName:"manageSubPageLoaded",eventInfo_loginProvider:t.loginProvider,eventInfo_curatedSubscription:t.curatedSubscription,eventInfo_willShowFre:t.willShowFre,eventInfo_willShowProDeprecation:t.willShowProDeprecation,eventInfo_upgradeButtonShown:t.upgradeButtonShown,eventInfo_upgradeButtonTarget:t.upgradeButtonTarget,eventInfo_manageButtonShown:t.manageButtonShown,eventInfo_manageButtonTarget:t.manageButtonTarget,eventInfo_cancelButtonShown:t.cancelButtonShown,eventInfo_cancelButtonTarget:t.cancelButtonTarget,eventInfo_proAutoRenewOn:t.proAutoRenewOn}})}function wRe(t){V.trackEvent({name:"interaction",data:{eventName:"manageSubProDeprecationShown",eventInfo_loginProvider:t.loginProvider,eventInfo_curatedSubscription:"None",eventInfo_proAutoRenewOn:t.proAutoRenewOn,eventInfo_sectionType:t.sectionType}})}function IRe(t){V.trackEvent({name:"interaction",data:{eventName:"manageSubProDeprecationActionClick",eventInfo_loginProvider:t.loginProvider,eventInfo_curatedSubscription:t.curatedSubscription,eventInfo_actionTarget:t.actionTarget,eventInfo_proAutoRenewOn:t.proAutoRenewOn,eventInfo_sectionType:t.sectionType}})}function t0(t){Wd("dimeCheckoutError",t,{eventInfo_errorCode:t.errorCode,eventInfo_errorDetails:t.errorDetails})}const B6="https://go.microsoft.com/fwlink/?linkid=2281226&client=cmc&ocid=cmme6wdx8nv",lbe="sapphire://payment",H6="cmme6wdx8nv",z6="cmmjacjzqcs";function V6(t){const{urlParams:e}=ye.instance().config().proSubscription;if(!e)return B6;const{client:n}=e,{linkid:r,ocid:o,language:i,market:s}=t,a=new URL("https://go.microsoft.com/fwlink/");return a.searchParams.append("linkid",r),a.searchParams.append("client",n),a.searchParams.append("ocid",o),s&&a.searchParams.append("market",s),i&&a.searchParams.append("language",i),a.toString()}function OP(t,e,n,r){var u,d,f;const{urlParams:o}=ye.instance().config().proSubscription;if(!o)return B6;const{ocids:i}=o,s=e?(u=i[t])==null?void 0:u.freeTrial:(d=i[t])==null?void 0:d.buy,a=r??((f=i[t])==null?void 0:f.market);return V6({linkid:e?"2243582":"2281226",ocid:s??H6,language:n,market:a})}function ube(t,e,n){return V6({linkid:"2281226",ocid:t??z6,language:e,market:n})}const dbe="https://account.microsoft.com/services/copilot/details",hbe="https://account.microsoft.com/services/microsoft365/details",TRe="https://account.microsoft.com/";function _Re({entryPoint:t,isPro:e}){const{manageRefId:n}=ye.instance().config().proSubscription,r=`copilot.${n}.${t}`,o=new URL(e?dbe:hbe);return o.searchParams.append("ref",r),o.hash="billing",o.toString()}function MP(t){ye.instance().config().subscribeInNewWindow?window.open(t):xp(t)}function Vv(t){const{payflowEntryPoint:e,skuType:n,upsellReason:r,beforeNavigate:o,entryStyle:i,preferPremium:s=!1,enableDimePreload:a=!1}=t,c=$t(),u=ui(),d=me("pro-sub-dime"),f=me("cmc-m365-sku"),p=d||f,g=xA(),v=ye.instance().config().proSubscription.enabled,b=O(wy),y=O(Vr),{i18n:{resolvedLanguage:C}}=He(),S=O(In),w=_e(zr),E=O(ks),I=O(YL),T=O(zJ),A=m.useMemo(()=>f?vG(I,s):"gopremium",[f,s,I]);m.useEffect(()=>{p&&a&&A&&(async()=>{if((await vw.get()).supportsPwBBroker()){const x=await ZS.ensureDime({language:C??"en-US",market:y});return x==null?void 0:x.preload({experiences:[A]})}return Promise.resolve()})()},[C,y,A,p,a]);const _=d?z6:H6,U=m.useCallback(()=>{switch(e){case"VoiceLimit":return lM()?lbe:v?OP(e,b,"",y):"";default:return OP(e,b,"",y)}},[v,b,e,y]),k=m.useCallback(async()=>{const $=crypto.randomUUID();if(V.trackEvent({name:"interaction",data:{eventName:"payflowEnter",eventInfo_payflowCorrelationId:$,eventInfo_loginProvider:(S==null?void 0:S.accountType)??"unknown",eventInfo_payflowEntryPoint:e,eventInfo_payflowType:g?"ProSubPaywall":"UniPux",eventInfo_payflowSkuType:n,eventInfo_upsellReason:r,eventInfo_upsellEntryStyle:i}}),g)o&&typeof o=="function"&&o(),await u({to:`/pro/subscribe?payflow-correlationId=${$}&entry-point=${e}`,from:c});else{const Z=U();MP(Z)}},[i,g,c,e,n,r,S==null?void 0:S.accountType,o,U,u]),G=m.useCallback(()=>{const $=ube(_,"",y);MP($)},[_,y]),K=m.useMemo(()=>({payflowEntryPoint:e,upsellReason:r??"unknown",loginProvider:(S==null?void 0:S.accountType)??"unknown",curatedSubscription:(T==null?void 0:T.tier)??"unknown",campaignId:_,dimeMarket:y??"unknown",correlationId:ZS.sessionId}),[e,r,S==null?void 0:S.accountType,T==null?void 0:T.tier,_,y]),ie=m.useCallback(async $=>{const Z={...K,payflowInstanceId:$};ibe({...Z});const x=await ZS.ensureDime({language:C??"en-US",market:y});if(!A)throw new Error("No dime experience available");if(x)try{sbe({...Z}),(await x.launch({experience:A,theme:E??"light",campaignId:_},()=>{abe({...Z})})).status==="Success"?ub():cbe({...Z})}catch(L){t0({...Z,...e0(L)}),G()}else t0({...Z,...e0(new Error("Dime not a valid instance"))}),G()},[C,y,E,A,_,K,G]);return{handleProSubscription:m.useCallback(async()=>{if((!g||p)&&(S==null?void 0:S.provider)==="auth0"){w("upsell-microsoft-account-for-pro-subscription");return}const $=await vw.get();if(p&&$.supportsPwBBroker()){const Z=crypto.randomUUID();try{await ie(Z)}catch(x){t0({...K,...e0(x),payflowInstanceId:Z}),G()}}else k()},[p,ie,S==null?void 0:S.provider,g,k,w,K,G])}}function $6(t){const{provider:e="microsoft",scenario:n,from:r}=t,o=nl(),i=ui(),{login:s}=Vd();return m.useCallback(async()=>{if(n&&En({source:"signin",scenario:n}),o){await i({from:r,to:"/login"});return}await s({provider:e})},[r,i,o,s,e,n])}function fbe(){const{t}=He(),e=O(qh),n=Pr(),r=O(Iy),o=ye.instance().config().proSubscription.enabled,i=O(wy),s=o&&i&&!r,a=nl(),c=O(In),u=_e(zr),d=$6({scenario:"voice",from:"/"}),{handleProSubscription:f}=Vv({payflowEntryPoint:"VoiceLimit",skuType:s?"FreeTrial":"1Mo-Paid",upsellReason:e,entryStyle:"Button"});if(m.useEffect(()=>{r&&(c!=null&&c.accountType)&&V.trackEvent({name:"interaction",data:{eventName:"payflowHiddenEntryImpressionForTeenUser",eventInfo_loginProvider:c.accountType,eventInfo_actionButton:"GetCopilotPro",eventInfo_payflowEntryPoint:"VoiceLimit",eventInfo_payflowType:"UniPux",eventInfo_payflowSkuType:s?"FreeTrial":"1Mo-Paid",eventInfo_upsellReason:e}})},[e,r,n,s,c==null?void 0:c.accountType]),!r)return n?h.jsx(ebe,{voiceAvailabilityStatus:e,payflowSkuType:s?"FreeTrial":"1Mo-Paid",title:t(s?"voice.freeTrialToPro":"voice.v2.subscribeToPro"),onClick:async()=>{if(a&&(c==null?void 0:c.provider)==="auth0"){u("upsell-microsoft-account-for-pro-subscription");return}En({source:"subscribeCopilotPro",scenario:"voice"}),await f()}}):h.jsx(EA,{className:"mx-2",title:t("voice.signUpOrLogin"),onClick:d})}const pbe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/settings-B9ohU3kQ.svg",G6=t=>m.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M6.74707 3.99954H10.2113C10.6255 3.99954 10.9613 4.33533 10.9613 4.74954C10.9613 5.12924 10.6791 5.44303 10.313 5.49269L10.2113 5.49954H6.74707C5.55621 5.49954 4.58143 6.4247 4.50226 7.59549L4.49707 7.74954V17.2495C4.49707 18.4404 5.42223 19.4152 6.59302 19.4944L6.74707 19.4995H16.2478C17.4387 19.4995 18.4134 18.5744 18.4926 17.4036L18.4978 17.2495V16.7518C18.4978 16.3375 18.8336 16.0018 19.2478 16.0018C19.6275 16.0018 19.9413 16.2839 19.991 16.65L19.9978 16.7518V17.2495C19.9978 19.2538 18.4254 20.8908 16.447 20.9943L16.2478 20.9995H6.74707C4.74281 20.9995 3.1058 19.4272 3.00227 17.4487L2.99707 17.2495V7.74954C2.99707 5.74528 4.56943 4.10827 6.54791 4.00474L6.74707 3.99954H10.2113H6.74707ZM14.5011 6.5194V3.74954C14.5011 3.12557 15.2078 2.78949 15.688 3.13934L15.7702 3.20828L21.7648 8.95828C22.0446 9.22663 22.0701 9.65765 21.8412 9.95561L21.7649 10.0407L15.7703 15.7926C15.32 16.2246 14.5881 15.9472 14.5082 15.3584L14.5011 15.2514V12.5261L14.1576 12.5562C11.7579 12.8065 9.45784 13.8874 7.24302 15.8169C6.72391 16.2691 5.92078 15.8415 6.00616 15.1584C6.67094 9.83884 9.45282 6.90684 14.2017 6.53904L14.5011 6.5194V3.74954V6.5194ZM16.0011 5.50818V7.24954C16.0011 7.66375 15.6653 7.99954 15.2511 7.99954C11.3777 7.99954 8.97704 9.67567 7.9398 13.1567L7.86074 13.4353L8.21293 13.1985C10.4494 11.7367 12.7988 10.9995 15.2511 10.9995C15.6308 10.9995 15.9446 11.2817 15.9942 11.6478L16.0011 11.7495V13.4924L20.1623 9.49963L16.0011 5.50818Z",fill:"currentColor"})),ARe=Object.freeze(Object.defineProperty({__proto__:null,default:G6},Symbol.toStringTag,{value:"Module"}));function K6(){const t=O(due),e=me("edge-multi-tabs-manual");return t&&e}function mbe(){const t=K6(),[e,n]=m.useState("add"),[r,o]=m.useState(!1),[i,s]=m.useState(!1),[a,c]=lt(Xj),{refs:u,floatingStyles:d}=eO({placement:"top-start",strategy:"absolute",whileElementsMounted:bd,middleware:[Cd(()=>({mainAxis:6,crossAxis:0})),Sd({padding:12}),X2({apply({rects:y,elements:C}){Object.assign(C.floating.style,{width:`${y.reference.width}px`})}})]}),f=m.useCallback(async y=>{const{isTrigger:C,keyword:S}=y;c(C),C&&(Pt.emit("multi-tabs:search",S),n("add")),o(C)},[c,o]),p=m.useCallback(()=>{c(!1),o(!1)},[c]),g=m.useCallback(()=>{a&&(Pt.emit("mention:cancel"),c(!1)),o(!1),s(!0),Pt.emit("edge:maybe-fetch-page-context","onSaveMultiTabs")},[a,c]),v=m.useCallback(y=>t&&r&&a?(Pt.emit("multi-tabs:key-down",y),!0):!1,[a,t,r]);return{isMultiTabsMenuExpanded:r,floatingStyles:d,edgeTabMenuRefs:u,setIsMultiTabsMenuExpanded:o,isShowMultiTabsPreviewCard:i,setIsShowMultiTabsPreviewCard:s,handleMentionEvent:f,isMentionTriggered:a,handleMultiTabsMenuSaveBtnEvent:g,handleMultiTabsMenuCloseBtnEvent:p,handleUserInputEnterEvent:()=>a&&r&&t,handleUserInputKeydownEvent:v,multiTabsMenuMode:e,setMultiTabsMenuMode:n}}const gbe=rt();function W6(t){gbe.set(vc,t)}function vbe(){const t=me("multiplecharacters"),e=O(HL),[n,r]=lt(pp);m.useEffect(()=>{t&&!n&&r(e)},[t,e,n,r])}function Sb(){const t=$t();return t.startsWith("/podcasts")||t.startsWith("/shares/podcasts")}const q6=M(0),Y6=M(),Q6=M(),kRe=M({}),xRe=M({lastPosition:0,wasPlaying:!1});function J6(t){const{url:e,podcastId:n,schema:r,includeTranscripts:o=!1}=t;return Gn(e,r,{query:{podcastId:n,includeTranscripts:String(o)}}).then(i=>i.data)}function ybe(t,e,n,r,o){return r&&n?{url:`/sharing/podcasts/${n}`,schema:Ag}:t?e?{url:`/podcasts/${e}/${t}`,schema:Ag}:{url:"/daily-briefing",podcastId:t,includeTranscripts:o,schema:EL}:null}function bbe(){const{podcastId:t,podcastType:e,shareId:n}=eI({strict:!1}),r=O(Y6),o=t??r,i=Sb(),s=!!t||i,a=me("db-transcript"),c=_e(Q6),{data:u,isLoading:d,error:f}=vl(ybe(o,e,n,s,a),J6);if(m.useEffect(()=>{if(u&&s){const g=Ag.parse(u);c(g.podcastId)}},[u,s,c]),u&&s){const g=Ag.parse(u),{isAvailable:v,podcastId:b,chapters:y,playback:{positionInSeconds:C,chapterId:S}}=g,w=n?`/sharing/podcasts/${n}/Files`:`/podcasts/${e}/${b}/Files`,E=y.map(({id:A,title:_,image:U,audio:k})=>({id:A,title:_,image:{landscape:{...U.landscape,url:`${w}/${U.landscape.name}`},portrait:{...U.portrait,url:`${w}/${U.portrait.name}`}},audio:k})),I={isAvailable:v,podcastId:b,chapters:E.map(A=>({...A,audio:{default:{url:`${w}/${A.audio.name}`,duration:A.audio.duration,transcript:null}},transitionMusic:null,sources:[]})),playback:{position:C,chapterId:S}},T={...g,chapters:E};return{data:I,podcastData:T,isPodcast:s,isLoading:d,error:f}}return{data:!s&&u?EL.parse(u):void 0,isPodcast:s,isLoading:d,error:f}}function RRe(){const{data:t}=vl({url:"/daily-briefing/topics",schema:SL},J6);return{data:t}}async function NRe(t,e){await Hr({path:"/daily-briefing/topics/unfollow",args:{body:{ids:e}}}),await Hr({path:"/daily-briefing/topics/follow",args:{body:{ids:t}}})}function Cbe(){const t=ui(),e=_e(zr),n=_e(Y6),[r,o]=lt(q6),i=m.useCallback(async()=>{await t({from:"/daily",to:"/"}),n(void 0),e(null)},[n,e,t]),s=m.useCallback(async u=>{n(u),o(0),e("daily-briefing-player"),await t({from:"/",to:"/daily"})},[e,o,n,t]),a=m.useCallback(async()=>{o(r),await t({from:"/daily",to:"/topic-selection"}),e(null)},[e,o,r,t]),c=m.useCallback(async()=>{o(r),e("daily-briefing-player"),await t({from:"/topic-selection",to:"/daily"})},[r,o,e,t]);return{navigateToDailyBriefing:s,navigateToTopicSelection:a,exitDailyBriefing:i,returnToDailyBriefing:c,currentChapterIndex:r}}function Sbe({media:t,thresholds:e,key:n}){const r=m.useRef(0),o=m.useRef([]),i=m.useRef(new Set);return m.useEffect(()=>{o.current=(e==null?void 0:e.sort((s,a)=>s.seconds-a.seconds))??[]},[e]),m.useEffect(()=>{r.current=0,i.current=new Set;let s=null;if(!t)return()=>{};function a(){s=performance.now()}function c(p){if(s!==null){const g=(performance.now()-s)/1e3;r.current+=g,s=p?performance.now():null,f()}}function u(){c(!1)}function d(){c(!0)}const f=()=>{for(let p=0;p<o.current.length;p+=1){const g=o.current[p];g&&r.current>=g.seconds&&!i.current.has(p)&&(i.current.add(p),g.callback())}};return t.addEventListener("playing",a),t.addEventListener("pause",u),t.addEventListener("ended",u),t.addEventListener("timeupdate",d),()=>{t.removeEventListener("playing",a),t.removeEventListener("pause",u),t.removeEventListener("ended",u),t.removeEventListener("timeupdate",d)}},[t,n]),{totalTimePlayedRef:r}}const Ebe=M(!1),wbe=M(null),Mw=M(!1),n0=M(!1),Lw=M(0),Dw=M(0),xh=M(null),Ibe=M(!0),Tbe=M(-1),qd="daily";function PRe(){V.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"personalizeButton",eventInfo_clickScenario:"",eventInfo_pageName:qd}})}function ORe(t){V.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Select",eventInfo_clickScenario:t,eventInfo_pageName:qd}})}function MRe(t){V.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_UnSelect",eventInfo_clickScenario:t,eventInfo_pageName:qd}})}function LRe(t){V.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Save",eventInfo_clickScenario:t.join(","),eventInfo_pageName:qd}})}function DRe(){V.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"TopicSettings_Later",eventInfo_clickScenario:"",eventInfo_pageName:qd}})}const jw={Podcast:"podcastPlayer",DailyBriefing:"dailyBriefingPlayer"},$v={Daily:qd,Podcast:"podcast"},Ks={Skip:"skip",Rewind:"rewind",Play:"play",Pause:"pause",Next:"next",Previous:"previous",Playback:"playback",Mute:"mute",Unmute:"unmute"};function Ka(t,e,n){dt({source:t,pageName:t===jw.Podcast?$v.Podcast:$v.Daily,scenario:e,customData:n})}function X6(t,e,n){return{DailyBriefing:`${e}|${n}`,Podcast:e}[t]}function LP(t,e,n){const r=X6(t,e,n);r&&Hr({path:`/media/${t}/${r}/playback/completed`,args:{}}).catch(o=>{gM(o)})}function _be(t,e,n,r){const o=X6(t,n,r);o&&Hr({path:`/media/${t}/${o}/playback`,args:{options:{method:"PATCH"},body:{positionInSeconds:e}}}).catch(i=>{gM(i)})}function r0(t,e){const n=Object.keys(e);if(n.length!==0)return typeof t<"u"&&n.includes(t)?e[t]:Object.values(e)[0]}const Abe=5,kbe=5e3;function Z6(){var te,Ce;const{exitDailyBriefing:t}=Cbe(),{data:e,isPodcast:n}=bbe(),r=n?jw.Podcast:jw.DailyBriefing,o=O(Q6),i=O(fp),s=m.useMemo(()=>e?n?e.chapters.map(D=>{var Ie;return[((Ie=D.audio.default)==null?void 0:Ie.duration)??0]}):e.chapters.map(D=>{var Ie;const Y=[((Ie=r0(i,D.audio))==null?void 0:Ie.duration)??0];return D.transitionMusic&&Y.push(D.transitionMusic.duration),Y}):[],[e,n,i]),[a,c]=lt(q6),u=m.useRef(null),[d,f]=m.useState(!1),[p,g]=m.useState(!1),v=a<s.length-1,b=a>0,y=m.useRef(performance.now()),C=m.useRef(performance.now()),S=m.useMemo(()=>{var D;return(D=e==null?void 0:e.chapters[a])!=null&&D.id?e.chapters[a].id:o&&o.split(",")[a]},[e==null?void 0:e.chapters,a,o]),w=m.useMemo(()=>e?n?e.chapters.map(D=>{var Y;return[((Y=D.audio.default)==null?void 0:Y.url)??""]}):e.chapters.map(D=>{var Ie;const Y=[((Ie=r0(i,D.audio))==null?void 0:Ie.url)??""];return D.transitionMusic&&Y.push(D.transitionMusic.url),Y}):[],[e,i,n]),[E,I]=m.useState(0),[T,A]=m.useState([]),[_,U]=m.useState(null),k=JSON.stringify({podcastId:o,eventInfo_chapterId:(te=e==null?void 0:e.chapters[a])==null?void 0:te.id,eventInfo_chapterPlayDuration:performance.now()-y.current}),[G,K]=lt(Ibe),ie=m.useCallback(()=>{K(D=>{const Y=!D,Ie=Y?Ks.Mute:Ks.Unmute;return Ka(r,Ie,k),Y})},[k,r,K]);Sbe({media:_,key:S,thresholds:[{seconds:Abe,callback:()=>{if(S&&!T.includes(S)){try{Hr({path:`/daily-briefing/${S}/viewed`,args:{analytics:{anonymousPath:"/daily-briefing/*/viewed"}}})}catch{}A([...T,S])}}}]}),m.useEffect(()=>{if(!_||!d)return;const D=setInterval(()=>{const Y=_.currentTime;_be("DailyBriefing",Y,o,S)},kbe);return()=>{clearInterval(D)}},[_,d,S,o]);function P(){var D;f(!0),(D=u.current)==null||D.playAnimation(),_==null||_.play(),Ka(r,Ks.Play,k)}function $(){var D;f(!1),(D=u.current)==null||D.pauseAnimation(),_==null||_.pause(),Ka(r,Ks.Pause,k)}function Z(D){if(_){const Y=Math.min(_.currentTime+D,_.duration);_.currentTime=Y,Ka(r,Ks.Skip,JSON.stringify({seconds:D}))}}function x(D){if(_){const Y=Math.max(_.currentTime-D,0);_.currentTime=Y,Ka(r,Ks.Rewind,JSON.stringify({seconds:D}))}}function L(){var D,Y,Ie;LP("DailyBriefing",o,S),e!=null&&e.chapters&&V.trackEvent({name:"system",data:{eventName:"chapterPlayDuration",eventInfo_podcastId:o,eventInfo_chapterIndex:a,eventInfo_isCompleted:a===e.chapters.length-1,eventInfo_publisherName:(Y=(D=e.chapters[a])==null?void 0:D.sources)==null?void 0:Y.map(Je=>Je.publisherName).join(","),eventInfo_impressionElement:$v.Daily,eventInfo_customData:JSON.stringify({eventInfo_chapterId:(Ie=e.chapters[a])==null?void 0:Ie.id,eventInfo_chapterPlayDuration:performance.now()-y.current})}})}function ne(){LP("Podcast",o),V.trackEvent({name:"system",data:{eventName:"podcastPlayDuration",eventInfo_isCompleted:!0,eventInfo_podcastId:o,eventInfo_podcastPlayDuration:performance.now()-C.current,eventInfo_impressionElement:$v.Podcast}})}function se(){_&&(_.currentTime=0)}function fe(D){L(),y.current=performance.now(),se(),I(0),c(D)}function X(){v&&(fe(a+1),Ka(r,Ks.Next,k))}function ge(){b&&(fe(a-1),Ka(r,Ks.Previous,k))}function Oe(D){_&&(_.playbackRate=D/100)}function Se(D){const Ie=(uC.indexOf(D)+1)%uC.length;return uC[Ie]??ly}function Fe(){f(!0);const D=w[a]??[];E<D.length-1?I(Y=>Y+1):D.length-1===E&&v?X():(he(),t())}function Re(D){D==="open"&&g(d),D==="close"&&p&&P()}function Ve(){y.current=performance.now(),C.current=performance.now()}function he(){n?ne():L()}const B=me("db-transcript"),Pe=m.useMemo(()=>{if(!B)return[];const D=e==null?void 0:e.chapters[a];if(!D)return[];const Y=r0(i,D.audio);return(Y==null?void 0:Y.transcript)??[]},[B,i,e==null?void 0:e.chapters,a]),Q=m.useMemo(()=>s[a]??[],[s,a]),oe=_e(Tbe),we=m.useCallback((D,Y)=>{if(D.length===0||Y===0)return-1;let Ie=0,Je=D.length-1,it=0;for(;Ie<=Je;){const st=Math.floor((Ie+Je)/2),Be=D[st];if(!Be)break;Be.startTime<=Y?(it=st,Ie=st+1):Je=st-1}return it},[]),N=m.useCallback(D=>{const Y=D.currentTarget;let{currentTime:Ie}=Y;for(let it=0;it<E;it+=1){const st=Q[it];st&&(Ie+=st)}if(Ie===0)return;const Je=we(Pe,Ie);oe(Je)},[Q,E,Pe,we,oe]);return m.useEffect(()=>{if(!(!B||!_))return _.addEventListener("timeupdate",N),()=>{_.removeEventListener("timeupdate",N)}},[_,N,B]),{isPlaying:d,currentChapterId:S,currentChapterIndex:a,chapterDurations:s,currentChapterPartIndex:E,audioElement:_,setAudioElement:U,audioChaptersProgressBarRef:u,currentChapterAudioSrc:((Ce=w[a])==null?void 0:Ce[E])??"",isPlayerMuted:G,currentChapterTranscript:Pe,play:e?P:void 0,pause:e?$:void 0,skipForward:e?D=>Z(D):()=>{},skipBack:e?D=>x(D):()=>{},goToNextChapter:v?X:void 0,goToPreviousChapter:b?ge:void 0,getNextPlaybackSpeed:e?D=>Se(D):void 0,applyPlaybackRate:e?D=>Oe(D):()=>{},onChapterEnded:Fe,onToggleVoiceSettings:Re,resetAllTimers:Ve,trackPlayerEndEvents:he,togglePlayerMuted:ie}}function xbe(){const{currentChapterId:t}=Z6();return m.useMemo(()=>{if(t)return{type:"dailyBriefing",chapterId:t}},[t])}function Rbe(t){const[e,n]=m.useState(0);return m.useEffect(()=>{if(!t)return()=>{};const r=a=>{a.preventDefault(),n(c=>c+1)},o=a=>{a.preventDefault(),n(c=>Math.max(0,c-1))},i=a=>{a.preventDefault(),n(0)},s=()=>{document.hidden&&n(0)};return window.addEventListener("dragenter",r,!0),window.addEventListener("dragleave",o,!0),window.addEventListener("drop",i,!0),document.addEventListener("visibilitychange",s),()=>{window.removeEventListener("dragenter",r,!0),window.removeEventListener("dragleave",o,!0),window.removeEventListener("drop",i,!0),document.removeEventListener("visibilitychange",s)}},[t]),e>0}async function Nbe(t,e){try{const n=await t.arrayBuffer(),r=new Uint8Array(n),o=await Gn("/attachments",mQ,{options:{method:"POST",headers:{"Content-Type":_s(t)},body:new Blob([r]),signal:e}}).then(i=>i.data);if("errorCode"in o)throw new Error(o.errorCode);return o.url}catch(n){throw console.error("Error uploading image",n),n}}async function Pbe(t,e){try{const n=new FormData;t.type!==""?n.append("file",t):n.append("file",new File([t],t.name,{type:_s(t)}),t.name);const r=await Gn("/attachments",TL,{options:{method:"POST",body:n,signal:e}}).then(o=>o.data);if("errorCode"in r)throw new Error(r.errorCode);return r.id}catch(n){throw console.error("Error uploading document",n),n}}async function Obe(t,e){try{const n=await Gn("/attachments/onedrive",TL,{options:{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t.id}),signal:e}}).then(r=>r.data);if("errorCode"in n)throw new Error(n.errorCode);return n.id}catch(n){throw console.error("Error uploading OneDrive file",n),n}}async function Mbe(t,e){switch(t.kind){case"local-file":return Pbe(t.file,e);case"onedrive":return Obe(t.item,e);default:{const n=t;throw new Error(`Unhandled upload kind: ${n}`)}}}async function Lbe(t){const{uploadTasks:e,signal:n,onSuccess:r,onError:o,onFinish:i,scenario:s}=t,a=e.map(async c=>{const u=c.upload;try{if(c.type==="document"){const f={content:{type:"document",attachmentId:await Mbe(c.upload,n)},item:{type:"document",partId:c.partId,fileName:c.metadata.name,contentType:c.metadata.contentType},size:c.metadata.size,type:c.metadata.contentType},p={id:c.id,file:c.upload.file,scenario:s,processing:!1,attachment:f};r(p)}else{const d=await Nbe(u.file,n),f={content:{type:"image",url:d},item:{type:"image",url:d},size:c.metadata.size,type:c.metadata.contentType},p={id:c.id,file:u.file,scenario:s,processing:!1,attachment:f};r(p)}}catch(d){o&&o(d,c)}finally{i()}return null});return Promise.all(a)}function DP(t){switch(t.kind){case"local-file":{const{file:e}=t;return{name:e.name,contentType:_s(e),size:e.size}}case"onedrive":{const{item:e}=t;return{name:e.name,contentType:fA(e.name),size:e.size}}default:{const e=t;throw new Error(`Unhandled upload kind: ${e}`)}}}function Dbe(){const[t,e]=lt(NU),n=m.useRef(new Set),r=m.useRef(0),o=_e(bl),i=m.useCallback(()=>{for(const f of n.current)f.abort();n.current.clear()},[]);m.useEffect(()=>()=>{i()},[i]);const s=m.useCallback((f,p)=>{o({isOpen:!0,scenario:p??null,reason:f})},[o]),a=m.useCallback(()=>{s("fileUpload")},[s]),c=m.useCallback(()=>{e([]),r.current=0,i()},[i,e]),u=m.useCallback(async f=>{const{uploads:p,scenario:g,onError:v,replaceExisting:b=!1,shouldUploadImageAsDocument:y}=f;b&&c();const C=[],S=[];for(const E of p){const I=DP(E),T=Op(I.contentType),A=`file-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;if(T||y){const _=String(r.current);r.current+=1,C.push({id:A,upload:E,partId:_,metadata:I,type:"document"}),S.push({id:A,file:E.file,scenario:g,processing:!0})}else C.push({id:A,upload:E,metadata:I,type:"image"}),S.push({id:A,file:E.file,scenario:g,processing:!0})}e(E=>[...E,...S]);const w=new AbortController;n.current.add(w),await Lbe({signal:w.signal,uploadTasks:C,onSuccess:E=>{e(I=>I.map(T=>T.id===E.id?E:T))},onError:(E,I)=>{if(E instanceof Error&&E.message==="not-signed-in")throw c(),a(),E;const T={id:I.id,file:I.upload.file,scenario:g,processing:!1,error:E};e(A=>A.map(_=>_.id===I.id?T:_)),v&&v(E,I.upload)},onFinish:()=>{n.current.delete(w)}})},[c,a,e]),d=m.useCallback(f=>{e(p=>{const g=[...p];return g.splice(f,1),g})},[e]);return{uploadedAttachments:t,isUploadingAttachments:t.some(f=>f.processing===!0),clearAttachments:c,uploadAttachments:u,getUploadMetadata:DP,removeAttachmentByIndex:d}}function jbe(t,e,n,r){const{t:o}=He(),{clearAttachments:i,uploadAttachments:s,getUploadMetadata:a,isUploadingAttachments:c,uploadedAttachments:u,removeAttachmentByIndex:d}=Dbe(),f=m.useCallback(async b=>{const{uploads:y,scenario:C,replaceExisting:S=!0,supportedMimeTypes:w=wa}=b,E=u.filter(({error:I})=>!I).length;if(!S&&E+y.length>Rw){e({title:o("composer.errors.multi.tooManyFiles.title",{maxFiles:Rw}),message:o("composer.errors.multi.tooManyFiles.message")});return}for(const I of y){const T=Mme(I.file,{supportedMimeTypes:w});if(T){e(T),n();return}}t();try{await s({uploads:y,scenario:C,replaceExisting:S,onError:(I,T)=>{if(I instanceof Error){e(l6(I.message));const{name:A,size:_}=a(T);jme({name:A,size:_,message:I.message,kind:T.kind})}else e({title:o("composer.errors.default.title"),message:o("composer.errors.default.message")})}})}catch(I){I instanceof Error&&I.message==="not-signed-in"?r():e({title:o("composer.errors.default.title"),message:o("composer.errors.default.message")})}},[u,t,e,o,n,s,a,r]),p=m.useCallback(async b=>{const{rawFiles:y,scenario:C,replaceExisting:S=!0,supportedMimeTypes:w=wa}=b;if(y.length===0)return;const E=[];for(const I of y)E.push({file:Lme(I),kind:"local-file"});await f({uploads:E,scenario:C,replaceExisting:S,supportedMimeTypes:w})},[f]),g=m.useCallback(()=>{i(),n()},[i,n]),v=m.useCallback(b=>{u.length===1?g():d(b)},[d,u,g]);return{processUploadedFiles:f,processUploadedLocalFiles:p,isUploadingAttachments:c,uploadedAttachments:u,resetFileUpload:g,removeAttachment:v}}function RA(){const t=pr({breakpoint:"sm"});return(ye.instance().config().responsiveFullWidthSidebarEnabled??!1)&&t}function Eb(){var r;const t=O(Ar)==="side-by-side",e=pr({breakpoint:"sm"}),n=!!((r=ye.instance().config().actions)!=null&&r.alwaysLayoutChatDetailsOverChat);return t&&(e||n)}function e9(){const t=$t();return Ube(t)}function Ube(t){return/^\/shares\/[a-zA-Z0-9_-]+$/.test(t)}function t9(t){return t.map(e=>{if(e.author==="human"||!e.content.find(a=>a.type==="citation"))return e;const r=e.content.find(a=>a.type==="text");if(!r)return e;const o=e.content.filter(a=>a.type==="citation").sort((a,c)=>a.position-c.position),{text:i,citationMetadata:s}=Fbe(r.text,o);return r.text=i,r.citations=s,e})}function Fbe(t,e){if(!e)return{text:t,citationMetadata:[]};let n=t;const r=[];let o=0;const i=new Map;for(const a of e){const c=a.url;if(!i.has(c)){o+=1;const u=`${o}`;i.set(c,u),r.push({index:u,title:a.title,url:a.url,iconUrl:a.iconUrl??null,publisher:a.publisher??null})}}const s=e.map((a,c)=>({citation:a,originalIndex:c})).sort((a,c)=>{const u=c.citation.position-a.citation.position;return u!==0?u:c.originalIndex-a.originalIndex}).map(a=>a.citation);for(const a of s){const c=a.url,u=i.get(c);u!==void 0&&(n=aB(n,kU(u,a.url),a.position))}return{text:n,citationMetadata:r}}function Bbe(){const t=e9(),{conversationId:e}=eI({strict:!1}),{data:n,error:r,isLoading:o}=pF({queryKey:["sharePage",e],queryFn:()=>Hbe(`/conversations/shares/${e}`),staleTime:1/0,enabled:t&&!!e});return{data:n,error:r,isLoading:o}}async function Hbe(t){const{data:e,response:n}=await Gn(t,cJ,{parseOptions:{safe:!0},analytics:{anonymousPath:"/conversations/shares/*"}});if(n.status>=400&&n.status<500)throw new zbe(n.status.toString());return{...e,messages:t9(e.messages.reverse())}}class zbe extends Error{}function Vbe(){const t=e9(),{isMediaViewerOpen:e}=Aa(),n=O(zr),r=me("share-continue-v2"),{error:o}=Bbe();return t?o?!1:r||e||!!n:!0}function NA(){return iA("(hover: hover) and (pointer: fine)")}const $be={h550:"550",h600:"600",h760:"760"};function Gv(t){const{breakpoint:e}=t,n=$be[e];return!iA(`(min-height: ${n}px)`)}function Lp(){const t=Ye(li),e=Ye(Lo);return t.length===0&&!!(e!=null&&e.isNew)}function Gbe(){try{return _l.latestLocation.pathname}catch{return typeof window<"u"&&window.location.pathname?window.location.pathname:"/"}}function Yd(){const t=Gbe(),e=t.endsWith("/talk"),n=t.startsWith("/chats")&&!e,r=t.endsWith("/landing");return n||r}function wb(){return!Ye(jI)}function Kbe(){var s;const t=wb(),e=Ye(gT),n=Ye(Ap),r=Lp(),o=Yd(),i=!!((s=ye.instance().config().landingPage)!=null&&s.enableCentralComposer);return t&&!e&&n==="center"&&o&&r&&i}function Wbe(){var o;const t=wb(),e=Lp(),n=Yd(),r=!!((o=ye.instance().config().landingPage)!=null&&o.enableStarterPrompts);return t&&n&&e&&r}function n9(){var i;const t=wb(),e=Lp(),n=Yd(),r=Ye(GJ),o=!!((i=ye.instance().config().landingPage)!=null&&i.enableWidgets);return t&&r&&n&&e&&o}function qbe(){const t=wb(),e=Lp(),n=Yd(),r=n9(),o=et("appr-home");return t&&n&&e&&o&&!r}function r9(){var s;const t=et("autosuggest"),e=et("edge-autosuggest"),n=Lp(),r=Yd(),o=t||e,i=!!((s=ye.instance().config().landingPage)!=null&&s.enableAutoSuggest);return o&&i&&r&&n}function Dp(){return{isCompatibleLandingRoute:Yd(),isAutoSuggestEnabled:r9(),isCentralComposerEnabled:Kbe(),isStarterPromptsEnabled:Wbe(),isWidgetSectionEnabled:n9(),isAppearanceOnHomeEnabled:qbe()}}function Ybe(){var r;const t=$t(),e=me("cmc-landing"),n=!!((r=ye.instance().config().landingPage)!=null&&r.enableLandingRoute);return e&&n&&t.endsWith("/landing")}const Qbe=M(),Jbe=/\/(?:.*\/)?(ar|vi|gm)-([a-zA-Z0-9]{6,10})/,Xbe="gemSnapshotKey";function Zbe(){const t=O(Qbe),{contentPageType:e}=Aa();return m.useMemo(()=>{if(!(!t||!e))try{const n=t.pathname.match(Jbe),r=(n==null?void 0:n[2])??null;if(!r)return;switch(e){case"newsGem":{const o=t.searchParams.get(Xbe);return o?{type:"newsGem",gemId:r,snapshotKey:o}:void 0}case"newsArticle":return{type:"news",articleId:r};default:return}}catch{return}},[t,e])}function eCe(){const t=ui(),e=qv();return m.useCallback(async()=>{await t({to:"/agents",params:{},from:e.state.location.pathname})},[t,e.state.location.pathname])}function tCe(){var d,f,p;const t=me("cross-promo-popup"),e=(p=(f=(d=ye.instance().config().crossPromotion)==null?void 0:d.aggressive)==null?void 0:f.popup)==null?void 0:p.secondDay,n=mn(B0),r=!jv(n,vg),o=mn(OI),i=!jv(o,2*vg),s=mn(wg),a=oA(s,2),c=O(HI);return m.useMemo(()=>!!(r&&t&&i&&a&&e&&(c===!0?!1:c!==void 0)),[e,t,i,a,r,c])}function Su(t){const{name:e,status:n,eventName:r,source:o,isMobile:i}=t;V.trackEvent({name:e,data:{eventName:r,eventInfo_source:o,eventInfo_isMobilePlatform:i,eventInfo_status:n}})}function o9(){const[t,e]=lt(ds),n=me("cross-promo-popup"),r=me("top-banner-cross-promo-desktop");let o="setting";(n||(t==null?void 0:t.type)==="popup")&&(o="popup"),r&&(o="topBanner"),(t==null?void 0:t.type)==="card"&&(o="bottomRightCard");const i=_e(zr);return m.useCallback(()=>{const s=Date.now().toString();sr(OI,s);const a=mn(wg);sr(wg,(parseInt(a??"0",10)+1).toString()),Su({name:"interaction",status:"Dismissed",eventName:"crossPromotionStripCard",source:o}),i(null),e(null)},[o,i,e])}function i9(t){m.useEffect(()=>{const e=()=>{t()};return Ot.on("languageChanged",e),()=>{Ot.off("languageChanged",e)}},[t])}function s9(t){const{onStartComplete:e}=t;m.useEffect(()=>{const n=()=>{e(),Pt.off("app:start-complete",n)};return Pt.on("app:start-complete",n),()=>{Pt.off("app:start-complete",n)}},[e])}const PA=1e3*60*60,nCe={revalidateOnFocus:!1,refreshInterval:PA};async function rCe(t,e,n){return Gn(t,vJ,{query:{"api-version":"2",supportedWidgets:e.join(","),...n?{intent:n}:{}},options:{method:"GET",headers:{"Content-Type":"application/json"}},analytics:{anonymousPath:t}}).then(r=>r.data)}function oCe(t){return t?["conversation-starter"]:["conversation-starter","feature-discovery","kickstarter","image-generation","conversation-starter-prompted-greeting"]}function iCe(t){var e;if(t.length>0){if(((e=t[0])==null?void 0:e.type)==="textAndGreeting")return t;const n=t[0];if(n)return[n]}}function sCe(t){const e=t.toLowerCase();return e==="imagegeneration"||e==="f1"}function aCe(){var f;const t=_e(QL),[e,n]=m.useState(!1),r=m.useMemo(()=>{const p=k$();if(p&&sCe(p))return p},[]),o=_e(Ty),i=ci("kill-landing-widgets"),s=!!((f=ye.instance().config().landingPage)!=null&&f.shouldFetchWidgetsData);s9({onStartComplete:()=>{n(!0)}});const{data:a,isLoading:c,error:u,mutate:d}=vl(e&&s?"/activation/widgets":null,p=>rCe(p,oCe(i),r),nCe);o(c),i9(d),m.useEffect(()=>{if(a!=null&&a.widgets){const p=iCe(a.widgets);t(p)}},[a,t]),m.useEffect(()=>{u&&(V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"widgets",eventInfo_errorMessage:`${u}`,eventInfo_details:"Widget API error"}}),o(!1),t(void 0))},[u,t,o])}function cCe(){const t=O(mT),e=mp(),{isCompatibleLandingRoute:n}=Dp(),r=t&&e&&n;return m.useMemo(()=>{if(r)return{type:"greeting",greetingMessage:t}},[t,r])}function lCe(){const t=Ye(Vr);return J_(Ot.resolvedLanguage,t)}function jRe(){const{i18n:t}=He(),e=O(Vr);return J_(t.resolvedLanguage,e)}const uCe=100,dCe=70,hCe=4,Zc=rt(),Uw=M(null),a9=M("");let o0=null;function fCe(t){Zc.set(a9,t)}function jP(){return Zc.get(a9)}function Eu(t){Zc.set(G_,t)}function c9(){const t=Zc.get(Uw);t&&(t.abort(),Zc.set(Uw,null))}function pCe(){c9();const t=new AbortController;return Zc.set(Uw,t),t}function mCe(t,e,n){const r=new URL("https://www.bing.com/AS/Suggestions/V2?pt=page.chat"),[o,i]=n.split("-");return r.searchParams.set("lang",(o==null?void 0:o.toLowerCase())??"en"),r.searchParams.set("cc",(i==null?void 0:i.toLowerCase())??"us"),r.searchParams.set("qry",t.toLowerCase()),r.searchParams.set("cvid",e),et("encacsc")&&r.searchParams.set("ascopilot1","1"),et("enblsuggrndmzn")&&r.searchParams.set("ascopilot2","1"),et("encpsrchdata")&&r.searchParams.set("ascopilot3","1"),r.toString()}async function gCe(t){const{query:e,conversationId:n,market:r,abortController:o}=t,i=mCe(e,n,r);return fetch(i,{signal:o.signal}).then(s=>s.json())}function vCe(t,e){const n=t.toLowerCase().split(/\s+/),r=e.st.toLowerCase().split(/\s+/);let o=0;for(let c=0;c<Math.min(n.length,r.length)&&n[c]===r[c];c+=1)o+=1;const i=e.st.split(/\s+/),s=i.slice(0,o).join(" "),a=i.slice(o).join(" ");return{original:e.st,sliced:a,prefill:s+(s?" ":"")}}async function yCe(t){var n;const e=Ye(ft);if(e)try{const r=pCe(),o=lCe(),i=performance.now(),s=await gCe({query:t,conversationId:e,market:o,abortController:r});if(t===jP()){if(!s.s.length){Eu(null),ii({feature:"fetchChatAutoComplete",errorType:"NoSuggestions",customData:JSON.stringify({conversationId:e})});return}const a=s.s.map(c=>vCe(s.qc.q,c));if(!a.length){Eu(null),ii({feature:"fetchChatAutoComplete",errorType:"NoSuggestions",customData:JSON.stringify({conversationId:e})});return}Eu({prefill:((n=a[0])==null?void 0:n.prefill)??t,conversationId:e,type:"BCT",suggestions:a.slice(0,hCe)}),Pc({feature:"fetchChatAutoComplete",duration:performance.now()-i})}}catch(r){r instanceof DOMException&&r.name==="AbortError"||V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"autosuggest",eventInfo_errorMessage:`${r}`,eventInfo_details:"Autosuggest API error"}}),t===jP()&&Eu(null)}}function bCe(t){o0&&clearTimeout(o0),o0=setTimeout(()=>{yCe(t)},uCe)}function l9(t){var o;const e=(o=ye.instance().config().landingPage)==null?void 0:o.regexForAutoSuggest,n=et("autosuggest")||et("edge-autosuggest"),r=Ye(ft);if(!n||!e||!e.test(t)||t.length>=dCe){Eu(null);return}fCe(t),!t||!r?Eu(null):bCe(t)}function Gh(){c9(),Zc.set(G_,null)}function Fw(){return Fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fw.apply(null,arguments)}function CCe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var SCe=m.useLayoutEffect,ECe=function(e){var n=m.useRef(e);return SCe(function(){n.current=e}),n},UP=function(e,n){if(typeof e=="function"){e(n);return}e.current=n},wCe=function(e,n){var r=m.useRef();return m.useCallback(function(o){e.current=o,r.current&&UP(r.current,null),r.current=n,n&&UP(n,o)},[n])},FP={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},ICe=function(e){Object.keys(FP).forEach(function(n){e.style.setProperty(n,FP[n],"important")})},BP=ICe,br=null,HP=function(e,n){var r=e.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function TCe(t,e,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),br||(br=document.createElement("textarea"),br.setAttribute("tabindex","-1"),br.setAttribute("aria-hidden","true"),BP(br)),br.parentNode===null&&document.body.appendChild(br);var o=t.paddingSize,i=t.borderSize,s=t.sizingStyle,a=s.boxSizing;Object.keys(s).forEach(function(p){var g=p;br.style[g]=s[g]}),BP(br),br.value=e;var c=HP(br,t);br.value=e,c=HP(br,t),br.value="x";var u=br.scrollHeight-o,d=u*n;a==="border-box"&&(d=d+o+i),c=Math.max(d,c);var f=u*r;return a==="border-box"&&(f=f+o+i),c=Math.min(f,c),[c,u]}var zP=function(){},_Ce=function(e,n){return e.reduce(function(r,o){return r[o]=n[o],r},{})},ACe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],kCe=!!document.documentElement.currentStyle,xCe=function(e){var n=window.getComputedStyle(e);if(n===null)return null;var r=_Ce(ACe,n),o=r.boxSizing;if(o==="")return null;kCe&&o==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var i=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),s=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:i,borderSize:s}},RCe=xCe;function u9(t,e,n){var r=ECe(n);m.useLayoutEffect(function(){var o=function(s){return r.current(s)};if(t)return t.addEventListener(e,o),function(){return t.removeEventListener(e,o)}},[])}var NCe=function(e){u9(window,"resize",e)},PCe=function(e){u9(document.fonts,"loadingdone",e)},OCe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],MCe=function(e,n){var r=e.cacheMeasurements,o=e.maxRows,i=e.minRows,s=e.onChange,a=s===void 0?zP:s,c=e.onHeightChange,u=c===void 0?zP:c,d=CCe(e,OCe),f=d.value!==void 0,p=m.useRef(null),g=wCe(p,n),v=m.useRef(0),b=m.useRef(),y=function(){var w=p.current,E=r&&b.current?b.current:RCe(w);if(E){b.current=E;var I=TCe(E,w.value||w.placeholder||"x",i,o),T=I[0],A=I[1];v.current!==T&&(v.current=T,w.style.setProperty("height",T+"px","important"),u(T,{rowHeight:A}))}},C=function(w){f||y(),a(w)};return m.useLayoutEffect(y),NCe(y),PCe(y),m.createElement("textarea",Fw({},d,{onChange:C,ref:g}))},LCe=m.forwardRef(MCe);const DCe=/@([^@]*)/g;function jCe(t,e){return[...t.slice(0,e).matchAll(DCe)].map(r=>({keyword:r[1],start:r.index,end:r.index+r[0].length}))}function UCe(t,e){const n=jCe(t,e);if(n.length===0)return;const r=n[n.length-1];return(r==null?void 0:r.end)===e?r:void 0}function FCe(t){const{className:e,textAreaRef:n,onMentionChange:r,textAreaValue:o,onCancelMention:i}=t,[s,a]=m.useState(void 0),{t:c}=He(),u=m.useRef(!1),d=m.useRef(r),f=m.useRef(null);m.useEffect(()=>{d.current=r},[r]);const p=m.useCallback(()=>{const b=n==null?void 0:n.current;if(!b)return;const y=b.selectionStart,C=b.selectionEnd;if(y===C){const S=UCe(o,y);S?(f.current=S,a(w=>w!==S.keyword?S.keyword:w)):(a(void 0),f.current=null)}},[n,o]),g=m.useCallback(()=>{var w;const b=f.current;if(!b)return;const y=o.slice(0,b.start),C=o.slice(b.end),S=y+C;f.current=null,(w=d.current)==null||w.call(d,{isTrigger:!1}),i==null||i(S)},[i,o]);m.useEffect(()=>{o===""?(a(void 0),f.current=null):p()},[p,o,a]),m.useEffect(()=>{var b,y;if(!u.current){u.current=!0;return}s!==void 0?(b=d.current)==null||b.call(d,{isTrigger:!0,keyword:s}):(y=d.current)==null||y.call(d,{isTrigger:!1})},[s,d]),m.useEffect(()=>(Pt.on("mention:cancel",g),()=>{Pt.off("mention:cancel",g)}),[g]);const v=s==="";return h.jsxs("div",{className:W("pointer-events-none absolute z-0 overflow-auto",e),"aria-hidden":"true",children:[h.jsx("span",{className:"invisible select-none whitespace-pre-wrap break-words",children:o}),v&&h.jsx("span",{className:"text-foreground-550 dark:text-foreground-600",children:c("userInput.mentionPlaceholderText")})]})}function BCe(t,e){const n=m.useCallback(async r=>{r.key==="Enter"&&!r.shiftKey&&!e&&await t(r)},[t,e]);Il(n)}function HCe(t,e,n){const r=m.useRef(!1),o=m.useCallback(()=>{r.current=!0},[]),i=m.useCallback(()=>{setTimeout(()=>{r.current=!1},100)},[]);return BCe(async s=>{var a;(a=t.current)!=null&&a.contains(document.activeElement)&&!r.current&&(s.preventDefault(),await e())},n),{handleCompositionStart:o,handleCompositionEnd:i}}const zCe="pointer-events-none cursor-not-allowed select-none shadow-none",VCe="opacity-40",$Ce=.25,OA="userInput",MA=m.forwardRef((t,e)=>{var X;const{t:n}=He(),{inputValue:r,errorMessage:o,className:i,characterLimit:s,characterLimitErrorMessage:a,disabled:c,placeholder:u=n("userInput.placeholderText"),autoFocus:d=!0,testId:f,setInput:p,setError:g,onBlur:v,onChange:b,onFocus:y,onClick:C,onEnter:S,onKeyDown:w,onMentionIfEnabled:E,rightButtons:I,isMultiLines:T,"aria-autocomplete":A,"aria-controls":_,disabledClassName:U}=t,k=$t(),{isCentralComposerEnabled:G}=Dp(),K=m.useRef(null),ie=m.useRef(null),P=NA()||ye.instance().config().enterKeyButtonEnabled,$=n("userInput.characterLimitText",{maxCharacters:s.toString()});m.useEffect(()=>{var ge;P&&((ge=ie.current)==null||ge.focus())},[k,P]);const Z=m.useCallback(ge=>{const{value:Oe}=ge.target;p(Oe),b&&b(Oe),Oe.length>s?g(a??$):g(null)},[p,b,s,g,a,$]);m.useImperativeHandle(e,()=>({updateInputValue:ge=>{const Oe=ge(r);p(Oe)},focus:()=>{var ge;(ge=ie.current)==null||ge.focus()},blur:()=>{var ge;(ge=ie.current)==null||ge.blur()},contains:ge=>{var Oe;return((Oe=ie.current)==null?void 0:Oe.contains(ge))??!1},updateSelectionRange:(ge,Oe)=>{var Se;(Se=ie.current)==null||Se.setSelectionRange(ge,Oe)},getTextAreaRef(){return ie}}),[r,p]),Il(ge=>{var Oe,Se;ge.key==="Escape"&&((Oe=K.current)!=null&&Oe.contains(document.activeElement))&&((Se=ie.current)==null||Se.blur()),w==null||w(ge)});const x=m.useCallback(ge=>{(ge.clipboardData.getData("text/plain")||"").length>0&&ge.stopPropagation()},[]),{handleCompositionStart:L,handleCompositionEnd:ne}=HCe(K,S,!P),se=(X=ye.instance().config().composer)==null?void 0:X.reducedUserInputHeight,fe=c?U??VCe:"";return h.jsxs(xe.div,{className:at("flex grow items-end",c&&zCe,fe,i),onClick:()=>{var ge;C==null||C(),(ge=ie.current)==null||ge.focus()},ref:K,onBlur:ge=>v==null?void 0:v(ge),layout:"preserve-aspect",children:[h.jsx(xe.div,{className:"relative grow overflow-hidden",layout:!0,children:h.jsx(xe.div,{className:"relative flex size-full cursor-text overflow-hidden text-black dark:text-white",layout:!0,children:h.jsxs(xe.div,{className:"flex grow flex-col gap-4 py-user-input",layout:!0,transition:{duration:0},children:[h.jsx("div",{className:at("overflow-y-auto px-4",{"max-h-[15dvh]":se,"max-h-[25dvh]":G&&!se,"max-h-dvh-0.5":!G&&!se},ye.instance().config().showScrollbarOnHover?"scrollbar-container":""),children:h.jsxs("div",{className:"relative",children:[h.jsx("label",{className:at(["invisible block h-0",{"whitespace-nowrap":!T}]),htmlFor:"userInput",children:u}),h.jsx(LCe,{className:at("font-ligatures-none inline-block min-h-user-input w-full resize-none overflow-y-hidden whitespace-pre-wrap bg-transparent align-top text-black outline-none placeholder:text-foreground-450 dark:text-white dark:placeholder:text-foreground-600",Yi("composer")??"text-base",Jf("composerVertical")),disabled:c,placeholder:u,ref:ie,id:OA,role:"textbox","aria-autocomplete":A,"aria-controls":_,spellCheck:!1,value:r,enterKeyHint:"enter",onChange:Z,onFocus:()=>y==null?void 0:y(r),onCompositionStart:L,onCompositionEnd:ne,onPaste:x,autoFocus:d,"data-testid":f}),E&&h.jsx(FCe,{className:at("font-ligatures-none inline-block min-h-user-input w-full resize-none overflow-y-hidden whitespace-pre-wrap bg-transparent align-top text-black outline-none placeholder:text-foreground-450 dark:text-white dark:placeholder:text-foreground-600",Yi("composer")??"text-base",Jf("composerVertical"),"inset-0"),textAreaRef:ie,textAreaValue:r,onMentionChange:E,onCancelMention:ge=>{p(ge),g(null)}})]})}),o&&h.jsx("div",{className:"flex min-h-6 select-none items-center px-4 text-foreground-600 text-xs",children:o})]})})}),h.jsx(xe.div,{className:at("relative bottom-0 my-1.5 flex h-9 items-center",I!=null&&I.length?"mx-1.5 w-auto gap-1":"w-0"),children:I==null?void 0:I.map((ge,Oe)=>h.jsx(xn,{children:h.jsx(xe.div,{initial:ct,animate:{...Lt,transition:{delay:$Ce}},transition:{duration:Ro.default},children:ge})},Oe))})]})});MA.displayName="UserInput";const Qd=rt(),Ib=M(""),d9=M("starter-prompts"),h9=M(!0);function Bw(t){Qd.set(Ib,t)}function Hw(){Qd.set(Ib,"")}function ig(t){Qd.set(d9,t)}function Ja(t){Qd.set(h9,t)}function f9(t){Qd.set(Id,t)}function LA(){return O(Ib)}function GCe(){return O(d9)}function KCe(){return O(h9)}function p9(t,e){const n=Ye(Ib),r=et("multiplecharacters"),o=sA({breakpoint:"sm"}),i=Ye(wn),s=Ye(zr);Fi("kill-chat-message-preview");const a=i==="computerUse",u=r9()&&!s&&!a;t||ig("starter-prompts"),Ja(n.length<=0||t.length===0),f9(!1),Qd.set(vy,void 0),r&&W6("typing"),o&&tX(),u&&l9(t),uye()}function Om(t){const{prompt:e}=t,n=document.querySelector(`#${OA}`);n&&(Gh(),Bw(e),p9(e),setTimeout(()=>{n.focus(),n.setSelectionRange(e.length,e.length)},0))}const WCe=(t,e)=>{var n,r,o,i;if(t==="light"){const s=(r=(n=ye.instance().config().composer)==null?void 0:n.shadowBoxStyleOverride)==null?void 0:r.outerLargeBoxShadowLight;if(s)return s;if(e)return Ove}else if(t==="dark"){const s=(i=(o=ye.instance().config().composer)==null?void 0:o.shadowBoxStyleOverride)==null?void 0:i.outerLargeBoxShadowDark;if(s)return s;if(e)return Mve}return Nve},qCe=(t,e)=>{var n,r,o,i;if(t==="light"){const s=(r=(n=ye.instance().config().composer)==null?void 0:n.shadowBoxStyleOverride)==null?void 0:r.outerSmallBoxShadowLight;if(s)return s;if(e)return Lve}else if(t==="dark"){const s=(i=(o=ye.instance().config().composer)==null?void 0:o.shadowBoxStyleOverride)==null?void 0:i.outerSmallBoxShadowDark;if(s)return s;if(e)return Dve}return Pve},YCe=t=>t==="dark"?k6:A6,QCe=rt();function Xs(t){t&&QCe.set(Gd,{title:t.title,subtitle:t.message,dismissable:!0,dismissAfter:10*1e3})}function URe(t,e){dt({source:"shareMenu",scenario:t,sectionName:e})}function FRe(t){const{conversationId:e,messageId:n}=t;V.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"sharePreview",eventInfo_impressionElement:"shareBlockedBanner",eventInfo_conversationId:e,eventInfo_messageId:n}})}function BRe(t){const{scenario:e,uploadedfileType:n,shareId:r,conversationId:o,messageIds:i}=t;V.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"shareButton",eventInfo_clickScenario:e,eventInfo_uploadFileType:n,eventInfo_customData:JSON.stringify({eventInfo_shareId:r,eventInfo_oneTurn_messageId:i?i.join(","):""}),eventInfo_conversationId:o}})}function HRe(t){V.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"receivePreview",eventInfo_impressionScenario:"shareAsLink",eventInfo_customData:JSON.stringify({eventInfo_shareId:t})}})}function zRe(){V.trackEvent({name:"interaction",data:{eventName:"copilotClick",eventInfo_clickSource:"talkToCopilot"}})}function VRe(t){const{cardType:e,messageId:n,conversationId:r,scenario:o}=t;En({source:"shareMenu",scenario:o,messageId:n,conversationId:r,cardType:e})}function $Re(t){const{conversationId:e,messageId:n,errorName:r,errorMessage:o,errorStack:i}=t;V.trackEvent({name:"system",data:{eventName:"shareMessagesFailed",eventInfo_conversationId:e,eventInfo_messageId:n??"",eventInfo_error:r,eventInfo_errorMessage:o,eventInfo_errorStack:i}})}function JCe(){dt({source:"continueClicked"})}function XCe(t){const{shareId:e,error:n}=t;ii({feature:"share",scenario:"continueClickFailed",errorType:n==null?void 0:n.name,errorMessage:n==null?void 0:n.message,customData:JSON.stringify({eventInfo_shareId:e})})}function ZCe(t,e,n){const r=rt();return new Promise((o,i)=>{let s=null;e(r.get(t))&&o(r.get(t));const a=r.sub(t,()=>{const u=r.get(t);e(u)&&(a(),o(u))}),c=()=>{a(),s&&clearTimeout(s)};s=setTimeout(()=>{c(),i(new Error("Timeout waiting for atom to be ready"))},n)})}function eSe(t){return t.some(e=>e.author==="human"&&e.content.some(n=>n.type==="image"||n.type==="document"))}function GRe(t){var n,r;const e=t.filter(o=>o.author==="human");if(e.length===1){const o=(r=(n=e[0])==null?void 0:n.content.find(i=>i.type==="image"||i.type==="document"))==null?void 0:r.type;return o==="image"?"image":o==="document"?"file":void 0}return eSe(t)?"image|file":void 0}function tSe(t){const n=new URL(t).pathname.split("/").filter(Boolean);return n[n.length-1]??null}async function VP(){JCe();const t=rt(),e=tSe(window.location.href);t.set(yw,!0);try{const n=await nSe(`/conversations/shares/${e}/continue`),{id:r,title:o}=n.conversation,i=new Date().toISOString(),s={id:r,updatedAt:i,isNew:!1,title:o,history:[],streamingState:"idle",continuedAt:i};t.set(yn,a=>{const c=new Map(a);return c.set(r,s),c}),t.set(ft,r),await oSe(r)}catch(n){throw Xs({title:Ot.t("composer.errors.continue.title"),message:Ot.t("composer.errors.continue.message")}),XCe({shareId:e??"",error:n instanceof Error?n:new Error(String(n))}),n}finally{t.set(yw,!1)}}async function nSe(t){return(await Gn(t,lJ,{options:{method:"POST"}})).data}const rSe=1e4;async function oSe(t){await ZCe(yn,e=>{const n=e.get(t);return((n==null?void 0:n.history)??[]).length>0},rSe)}function iSe(t,e,n){if(!t||!e)return!1;const r=t.getTime(),o=e.getTime(),i=n?n.getTime():null;return o<=r||i===null?!1:i<=r}function m9(){return`Copilot_${_u(new Date,"yyyyMMdd_HHmmss")}`}async function KRe(t,e){const n=m9(),o=await(await fetch(t)).blob(),i=URL.createObjectURL(o),s=document.createElement("a");s.href=i,s.download=n,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(i)}function sSe(t){t.target instanceof HTMLImageElement&&URL.revokeObjectURL(t.target.src)}async function aSe(t,e=!1){try{const n=await Qc(t,{analytics:{anonymousPath:"/attachments/*.png"}});return e&&n.status!==200?null:await n.blob()}catch{return null}}async function cSe(t,e=!1){try{const n=await aSe(t,e);return n?URL.createObjectURL(n):null}catch{return null}}const lSe=11,uSe=7,dSe=2,hSe=10,fSe=21,pSe=21,mSe=10,$P=l.object({daysActive:l.array(l.coerce.date())}),zw=l.object({result:l.enum(["dismissed","positive","negative"]),date:l.coerce.date(),dismissCounter:l.number()});function gSe(t){const e=new Date;let n=t;return t.some(r=>NI(r,e))||(n=[...t,e]),n.length>mSe?n.slice(-10):n}function vSe(){const t=lo(f1,$P),e=(t==null?void 0:t.daysActive)??[],n=gSe(e),r=Cg(new Date,uSe),o=n.filter(i=>j0(i,r)||NI(i,r)).length;return n!==e&&Oi(f1,$P,{daysActive:n}),o}function ySe(){const t=lo(H0,zw);if(!t)return!1;const e=t.result==="positive",n=t.result==="negative"&&j0(t.date,Cg(new Date,pSe)),r=t.result==="dismissed"&&j0(t.date,Cg(new Date,t.dismissCounter>5?fSe:hSe));return e||n||r}function bSe(t,e){let n="popUpDismiss";e==="negative"?n="appThumbDown":e==="positive"&&(n="appThumbUp"),En({source:n,conversationId:t});const r=lo(H0,zw),o=(r==null?void 0:r.result)==="dismissed"?r.dismissCounter:0,i={result:e,date:new Date,dismissCounter:e==="dismissed"?o+1:0};Oi(H0,zw,i)}function CSe(t={},e=!1){const[n,r]=m.useState(!1),[o,i]=m.useState(!1),{onFocus:s,onBlur:a,onPointerDown:c}=t;return[n,{onFocus:d=>{(!o||e)&&r(!0),s==null||s(d)},onBlur:d=>{r(!1),i(!1),a==null||a(d)},onPointerDown:d=>{i(!0),c==null||c(d)}}]}const SSe="bg-stone-300/20 dark:bg-midnight-350/5";function ESe(t,e){return t?t===!0?{animate:{...e}}:{animate:t}:{style:e}}function wSe(t,e,n,r){const o=e?r:n;return t?{animate:o}:{style:o}}function DA(t){const{children:e,size:n="md",position:r="default",nested:o=!1,background:i="default",stroke:s,className:a,containerRef:c,interactable:u=!1,label:d,animate:f,onFocus:p,onBlur:g,onPointerDown:v,onAnimationStart:b,onAnimationComplete:y,focusOnPointerDown:C,isSelected:S=!1,...w}=t,[E,I]=CSe({onFocus:p,onBlur:g,onPointerDown:v},C),T=S||E,_=o&&(i==="acrylic"||i==="acrylic-thin"),U=_?i0[`${n}-${r}`]:ISe[`${n}-${r}`],k=_?i0[`${n}-${r}`]:TSe[`${n}-${r}`],G=_?i0[`${n}-${r}`]:_Se[`${n}-${r}`],K={default:"bg-white/45 dark:bg-midnight-350/10",darker:SSe,acrylic:Qi,"acrylic-fallback":wH,"acrylic-thin":ra,"acrylic-thin-fallback":AH,transparent:"bg-transparent"},ie=u?{"aria-label":d,role:"button",tabIndex:0,...I,onKeyDown:x=>{var L;(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),(L=w.onClick)==null||L.call(w,x))}}:{onFocus:p,onBlur:g,onPointerDown:v},P=ESe(f,U),$=wSe(f,T,k,G),Z=a&&!a.includes("relative")&&!a.includes("absolute")&&!a.includes("fixed")&&"relative";return h.jsxs(xe.div,{className:W(K[i],a,Z,_&&"outline-1 outline-offset-2","isolate will-change-transform"),ref:c,onAnimationComplete:y,...P,...ie,...w,children:[e,h.jsx(xe.div,{className:W(T&&"border-foreground-750 dark:border-white",s&&!T&&"border-black/8 dark:border-white/8",!s&&!T&&"border-transparent",!_&&"border-[20px]",_&&s&&!T&&"border",_&&s&&T&&"border-2","pointer-events-none absolute inset-0"),...$})]})}const ISe={"xs-default":{clipPath:"var(--clip-path-squircle-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-24)"},"md-default":{clipPath:"var(--clip-path-squircle-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-48-60)"}},TSe={"xs-default":{clipPath:"var(--clip-path-squircle-stroke-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-stroke-24)"},"md-default":{clipPath:"var(--clip-path-squircle-stroke-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-stroke-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-stroke-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-stroke-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-stroke-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-stroke-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-stroke-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-stroke-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-stroke-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-stroke-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-stroke-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-stroke-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-stroke-48-60)"}},_Se={"xs-default":{clipPath:"var(--clip-path-squircle-stroke-focused-16)"},"sm-default":{clipPath:"var(--clip-path-squircle-stroke-focused-24)"},"md-default":{clipPath:"var(--clip-path-squircle-stroke-focused-36)"},"lg-default":{clipPath:"var(--clip-path-squircle-stroke-focused-48)"},"xl-default":{clipPath:"var(--clip-path-squircle-stroke-focused-60)"},"xs-top":{clipPath:"var(--clip-path-squircle-stroke-focused-16-12)"},"sm-top":{clipPath:"var(--clip-path-squircle-stroke-focused-24-16)"},"md-top":{clipPath:"var(--clip-path-squircle-stroke-focused-36-24)"},"lg-top":{clipPath:"var(--clip-path-squircle-stroke-focused-48-36)"},"xl-top":{clipPath:"var(--clip-path-squircle-stroke-focused-60-48)"},"xs-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-12-16)"},"sm-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-16-24)"},"md-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-24-36)"},"lg-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-36-48)"},"xl-bottom":{clipPath:"var(--clip-path-squircle-stroke-focused-48-60)"}},i0={"xs-default":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:16,borderBottomRightRadius:16},"sm-default":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:24,borderBottomRightRadius:24},"md-default":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:36,borderBottomRightRadius:36},"lg-default":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xl-default":{borderTopLeftRadius:60,borderTopRightRadius:60,borderBottomLeftRadius:60,borderBottomRightRadius:60},"xs-top":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:12,borderBottomRightRadius:12},"sm-top":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:16,borderBottomRightRadius:16},"md-top":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:24,borderBottomRightRadius:24},"lg-top":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:36,borderBottomRightRadius:36},"xl-top":{borderTopLeftRadius:60,borderTopRightRadius:60,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xs-bottom":{borderTopLeftRadius:12,borderTopRightRadius:12,borderBottomLeftRadius:16,borderBottomRightRadius:16},"sm-bottom":{borderTopLeftRadius:16,borderTopRightRadius:16,borderBottomLeftRadius:24,borderBottomRightRadius:24},"md-bottom":{borderTopLeftRadius:24,borderTopRightRadius:24,borderBottomLeftRadius:36,borderBottomRightRadius:36},"lg-bottom":{borderTopLeftRadius:36,borderTopRightRadius:36,borderBottomLeftRadius:48,borderBottomRightRadius:48},"xl-bottom":{borderTopLeftRadius:48,borderTopRightRadius:48,borderBottomLeftRadius:60,borderBottomRightRadius:60}};function Tb({className:t,style:e}){return h.jsx("div",{className:W("animate-[shimmer_2s_infinite] bg-black/5 bg-gradient-to-r dark:bg-white/5","from-transparent via-background-150 to-transparent","bg-[length:50%_100%] bg-no-repeat",t),style:e})}function ASe(t){const{isImageOrVideo:e}=t;return h.jsx("div",{className:"flex flex-col gap-3 px-4",children:h.jsx(Tb,{className:W("w-full",e?"h-[144px] sm:h-[176px]":"h-[300px]"),style:{clipPath:"var(--clip-path-squircle-36)"}})})}function GP(t){const{type:e,length:n}=t;if(e==="ads")return h.jsx("div",{});const r=e==="image"||e==="video",o=r&&n===1;return h.jsx(DA,{size:"md",stroke:!0,className:W("relative flex",o?"w-[300px]":"w-full","flex-col py-3 transition-opacity duration-300 ease-in-out"),children:h.jsx(ASe,{isImageOrVideo:r})})}function WRe(t){if(t.type==="image")return t.images.length;if(t.type==="video")return t.videos.length}function kSe(t){var g;const{uploadedFile:e,onRemove:n,scenario:r,isUploading:o}=t,{t:i}=He(),[s,a]=m.useState(null),[c,u]=m.useState(!1),d=i(r==="screenshot"?"composer.screenshotAdded":"composer.uploadedImageAltText");m.useEffect(()=>{const v=URL.createObjectURL(e);return u(!1),a(v),()=>{URL.revokeObjectURL(v)}},[e]);const f=v=>{u(!0),v.target instanceof HTMLImageElement&&URL.revokeObjectURL(v.target.src)};if(!s)return null;const p=(g=ye.instance().config().composer)==null?void 0:g.smallAttachmentCard;return h.jsxs(xe.div,{className:W("relative max-w-fit shrink-0",{"mx-1 mt-2 h-[58px]":p,"h-32":!p}),layout:"position",initial:ct,animate:c?Lt:ct,exit:ct,transition:{delay:lU},children:[h.jsx(xe.img,{className:W("w-auto rounded-xl border border-black/8 object-contain shadow-inner dark:border-white/8",{"h-[58px]":p,"h-32":!p}),src:s,role:"img","aria-label":d,alt:d,onLoad:f,onError:f,draggable:!1}),h.jsx(gd,{msg:d}),h.jsx(xe.button,{type:"button",title:i("composer.removeImage"),"aria-label":i("composer.removeImage"),onClick:n,className:"absolute end-0.5 top-0.5 m-1 rounded-full border border-black/20 bg-white fill-black p-1 text-black",children:h.jsx(ko,{className:"size-3"})}),o&&h.jsxs(Ln,{className:"absolute inset-0 grid place-items-center bg-white/80 dark:bg-white/45",children:[h.jsx(m.Suspense,{fallback:h.jsx("div",{"aria-hidden":!0}),children:h.jsx(kt,{type:"spinnerThemed",className:"size-11"})}),h.jsx(gd,{msg:i("fileUpload.uploadingFile"),type:"polite"})]})]})}function xSe(t){const{attachments:e,onRemove:n}=t,{t:r}=He(),o=i=>{const s=e[i];s!=null&&s.file&&(n(i),pA({msg:r("fileUpload.attachmentRemoved"),type:"polite"}))};return h.jsx("div",{className:"relative flex max-h-64 min-w-0 max-w-full flex-wrap gap-2 overflow-y-auto overflow-x-hidden px-1",children:e.map(({file:i,error:s,processing:a,scenario:c},u)=>{if(s||!i)return null;const d=_s(i);return Op(d)?h.jsx(mA,{onRemove:()=>o(u),filename:i.name,fileType:d,isUploading:a},`attachment-${u}`):h.jsx(kSe,{uploadedFile:i,onRemove:()=>o(u),scenario:c,isUploading:a},`attachment-${u}`)})})}function RSe(t){const{text:e,onClick:n,className:r,testId:o}=t;return h.jsx(Ue,{title:"",onClick:n,className:at("min-w-fit",r),color:"chip",testId:o,children:h.jsx("span",{className:"px-1",children:e})})}const NSe=1300;function jA(){var c;const t=!!((c=ye.instance().config().landingPage)!=null&&c.enablePromptedGreetings),e=me("intent-image-gen-prompted-greeting"),n=me("qa-intent-image-gen-prompted-greeting"),r=me("intent-f1-prompted-greeting"),o=me("qa-intent-f1-prompted-greeting"),i=me("conversation-starter-prompted-greeting-c1"),s=me("qa-conversation-starter-prompted-greeting-c1"),a=me("qa-conversation-starter-prompted-greeting-debug");return t&&(e||n||r||o||i||s||a)}function PSe(){const[t,e]=lt(JL),n=jA();return m.useEffect(()=>{let r;return n?(e(!1),r=window.setTimeout(()=>{e(!0)},NSe)):e(!1),()=>{r&&clearTimeout(r)}},[e,n]),t}function OSe(t){var v;const{className:e,onWidgetClick:n,pageName:r="chatPage"}=t,{isAppearanceOnHomeEnabled:o}=Dp(),i=m.useRef(null),s=iI(i,{once:!0,amount:"all"}),a=O(Rd),c=(a==null?void 0:a.source)??"chatStarterPills",u=O(mT),d=jA(),f=O(JL),p=(v=ye.instance().config().landingPage)==null?void 0:v.stackStarterChipsForSmallScreens;m.useEffect(()=>{s&&Pd({page:r,scenario:c,element:"chatStarterPills"})},[s,c,r]);const g=b=>{const{prompt:y,id:C,actionType:S,uri:w,source:E,text:I,index:T}=b;dt({pageName:r,source:c,scenario:C,customData:JSON.stringify({prompt:y,text:I,index:T})}),n({actionType:S,id:C,prompt:y,uri:w,source:E})};return d&&!f||!a||!["text","textAndGreeting"].includes(a.type)?null:h.jsx(Ln,{role:"list","aria-label":"",className:at("mx-auto flex w-full gap-2 p-2 sm:flex-wrap sm:p-4",p?"mb-1 flex-col items-end space-y-1 sm:flex-row":"scrollbar-container max-h-[110px] overflow-x-auto overflow-y-hidden",o?"sm:justify-center":"sm:justify-start",e),id:u??"",ref:i,children:a.items.map((b,y)=>{const{id:C,text:S}=b,{type:w}=b.action,E="prompt"in b.action?b.action.prompt:void 0,I="uri"in b.action?b.action.uri:void 0;switch(a.type){case"text":case"textAndGreeting":return h.jsx(RSe,{text:S,onClick:()=>g({prompt:E,uri:I,id:C,actionType:w,source:"pills",text:S,index:y}),className:W(p&&"w-auto min-w-min max-w-[80%] text-start"),testId:`starter-prompt-${C}`},C);default:return null}})})}function MSe(t){const{imgAlt:e,imgSrc:n,text:r,className:o,onClick:i,fetchPriority:s}=t,[a,c]=m.useState(!1);return h.jsx("div",{className:"aspect-[155/190] w-full min-w-[100px] max-w-full sm:w-[155px] sm:min-w-[120px] sm:max-w-[155px]",children:h.jsxs("button",{className:at("relative flex h-full w-full flex-col items-center gap-2 rounded-lg bg-white p-2 shadow-md transition-all duration-[400ms] ease-[cubic-bezier(0,0,0,1)] hover:scale-[1.025] hover:shadow-lg dark:bg-slate-700",o),onClick:i,type:"button",children:[!a&&h.jsx(Tb,{className:"aspect-square w-full rounded-md"}),h.jsx("img",{className:at("aspect-square w-full rounded-md object-cover",a?"opacity-100":"opacity-0"),src:n,alt:e,onLoad:()=>c(!0),onError:()=>c(!1),fetchPriority:s}),h.jsx("div",{className:"flex w-full flex-1 items-center justify-center px-2",children:h.jsx("p",{className:"truncate text-center text-xs-strong",children:r})})]})})}function KP(t){const{className:e,text:n,imgSrc:r,imgAlt:o,variant:i,onClick:s,fetchPriority:a}=t,[c,u]=m.useState(!1);return h.jsx("div",{className:at("max-w-full drop-shadow-md transition-shadow hover:drop-shadow-lg sm:min-w-[120px]",i==="kickstarter"&&"aspect-[166/200] w-[166px] sm:max-w-[166px]",i==="feature-discovery"&&"aspect-[155/200] w-[155px] sm:max-w-[155px]"),children:h.jsxs(DA,{interactable:!0,stroke:!0,onClick:s,className:at("relative h-full w-full transition-transform duration-[400ms] ease-[cubic-bezier(0,0,0,1)] hover:scale-[1.025]",e),children:[!c&&h.jsx(Tb,{className:"absolute size-full"}),h.jsx("img",{src:r,alt:o,className:at("absolute size-full object-cover",c?"opacity-100":"opacity-0"),onLoad:()=>u(!0),onError:()=>u(!1),fetchPriority:a}),c&&h.jsx("div",{className:"absolute z-10 flex size-full flex-col px-4 py-5",children:h.jsx("p",{className:W("mt-auto line-clamp-2 overflow-hidden text-center text-xs-strong",i==="feature-discovery"&&"text-white/80",i==="kickstarter"&&"text-white"),children:n})})]})})}const LSe=l.union([l.literal("open"),l.literal("close")]),g9=l.object({sidebarVisibility:LSe.optional()});function DSe(t){Oi(hM,g9,{sidebarVisibility:t})}function v9(){var t;return((t=lo(hM,g9))==null?void 0:t.sidebarVisibility)??"close"}function jSe(){return!ye.instance().config().sidebarNavigation||sA({breakpoint:"md"})?!1:v9()!=="close"}const Ra=M(jSe()),USe={deepLink:"deepLink",prefillComposer:"chatBox",sendMessage:"chat"};function FSe(t){const{className:e,onWidgetClick:n}=t,r=pr({breakpoint:"md"}),o=ho(),i=O(Ra),s=o&&i&&!r,a=m.useRef(null),c=O(Rd),u=iI(a,{once:!0,amount:"all"});m.useEffect(()=>{u&&c&&Pd({page:"chatPage",scenario:"widgets",element:c.id,customData:JSON.stringify({visibleItems:c.items.map(p=>p.id)})})},[u,c]);const d=p=>{const{prompt:g,id:v,actionType:b,uri:y,widgetName:C,source:S}=p,w=b==="deepLink"?JSON.stringify({uri:y}):void 0;dt({pageName:"chatPage",sectionName:"widgets",scenario:C,source:v,destination:USe[b],customData:w}),n({actionType:b,id:v,prompt:g,uri:y,source:S})},f=p=>{const g=new URL(p);return g.searchParams.set("o","7"),g.searchParams.set("rm","3"),g.toString()};return!c||c.type!=="textAndImage"?null:h.jsx("div",{className:at("grid w-full grid-cols-2 gap-6 px-2 sm:flex sm:items-center",s&&"scrollbar-container justify-start overflow-x-auto bp-960:justify-center bp-960:overflow-x-hidden",!s&&"sm:justify-center",e),ref:a,children:c.items.map((p,g)=>{const{id:v,text:b}=p,{type:y}=p.action,C="prompt"in p.action?p.action.prompt:void 0,S="uri"in p.action?p.action.uri:void 0,{altText:w,url:E}=p.thumbnail,I={actionType:y,id:v,prompt:C,uri:S,widgetName:c.id,source:"widgets"},T=g%2===0?"-rotate-2 hover:rotate-0":"rotate-2 hover:rotate-0";switch(c.id){case"kickstarter":return h.jsx(KP,{text:b,imgSrc:f(E),imgAlt:w,variant:"kickstarter",onClick:()=>d(I),className:T,fetchPriority:"high"},v);case"feature-discovery":return h.jsx(KP,{text:b,imgSrc:f(E),imgAlt:w,variant:"feature-discovery",onClick:()=>d(I),className:T,fetchPriority:"high"},v);case"image-generation":return h.jsx(MSe,{text:b,imgSrc:f(E),imgAlt:w,className:T,onClick:()=>d(I),fetchPriority:"high"},v);default:return null}})})}function BSe(t){const[e,n]=m.useState(!1),{tab:r,className:o=""}=t,{t:i}=He();return e||!r.favIconUrl?h.jsx(AA,{className:W("size-5",o)}):h.jsx("img",{src:r.favIconUrl,alt:i("composer.multiTabs.tabFavIconAltText"),className:W("size-4 rounded bg-white",o),onError:()=>{n(!0)}})}function HSe(t){try{return new URL(t).hostname.replace(/^www\./,"")}catch{return null}}function zSe(t,e=5){const n=new Set;for(const r of t){if(n.size>=e)break;if(r.url){const o=HSe(r.url);o&&n.add(o)}}return Array.from(n).join(", ")}function VSe(t,e=5){const n=new Set;for(const r of t){if(n.size>=e)break;r.title&&n.add(r.title)}return Array.from(n).join(", ")}function $Se(t){const{tabs:e}=t,n=m.useMemo(()=>VSe(e,5),[e]),r=e.length-1;return h.jsxs("div",{className:"flex",children:[h.jsx("span",{className:"min-w-0 truncate font-semibold text-foreground-750 text-xs",children:n}),r>0&&h.jsxs("span",{className:"ms-1 font-semibold text-foreground-750 text-xs",children:["+",r]})]})}function GSe(t){const{tabs:e}=t,n=m.useMemo(()=>zSe(e,5),[e]);return h.jsx("span",{className:"truncate text-foreground-750 opacity-60 text-2xs",children:n})}function y9(t){const{tabs:e,onRemove:n,showRemoveIcon:r,onClick:o}=t,{t:i}=He(),s=m.useMemo(()=>e.slice(0,3),[e]),a=u=>{u.stopPropagation(),n==null||n()},c=u=>{u.stopPropagation(),o==null||o()};return h.jsxs(xe.div,{className:"relative flex h-[58px] w-full flex-row items-center justify-center gap-2 overflow-hidden rounded-xl border border-black/8 bg-white/90 p-3 dark:border-white/8 dark:bg-midnight-800/80",layout:"position",initial:ct,animate:Lt,exit:ct,onClick:c,children:[h.jsx("div",{className:W("flex h-5 min-w-5 flex-none items-center justify-center rounded bg-white/90 dark:bg-midnight-800/80"),children:s.map((u,d)=>h.jsx(BSe,{tab:u,className:W(d>0&&"-ms-[6px]")},u.id))}),h.jsxs("div",{className:"me-7 flex min-w-0 flex-1 flex-col",children:[h.jsx($Se,{tabs:e}),h.jsx(GSe,{tabs:e})]}),r&&h.jsx("button",{type:"button",title:i("composer.removeImage"),"aria-label":i("composer.removeImage"),onClick:a,tabIndex:0,className:"absolute end-0.5 top-0.5 m-1 rounded-full p-1 text-foreground-850 safe-hover:bg-black/5 dark:safe-hover:bg-black/30",children:h.jsx(ko,{className:"size-3"})})]})}function KSe({onClick:t,showRemoveIcon:e=!0}){const[n,r]=lt(md),o=m.useMemo(()=>Array.from(n.values()),[n]);return n.size===0?null:h.jsx("div",{className:"flex min-h-[60px] cursor-pointer flex-col gap-2",children:h.jsx(y9,{showRemoveIcon:e,tabs:o,onRemove:()=>{r(new Map)},onClick:t})})}const b9=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M11.7498 3C12.1295 3 12.4434 3.28201 12.4931 3.64808L12.5 3.74985L12.5012 11H19.7543C20.1685 11 20.5043 11.3358 20.5043 11.75C20.5043 12.1297 20.2221 12.4435 19.8561 12.4932L19.7543 12.5H12.5012L12.5032 19.7491C12.5033 20.1633 12.1676 20.4993 11.7534 20.4993C11.3737 20.4993 11.0598 20.2173 11.0101 19.8512L11.0032 19.7494L11.0012 12.5H3.7522C3.33798 12.5 3.0022 12.1642 3.0022 11.75C3.0022 11.3703 3.28435 11.0565 3.65043 11.0068L3.7522 11H11.0012L11 3.75015C10.9999 3.33594 11.3356 3 11.7498 3Z"})),qRe=Object.freeze(Object.defineProperty({__proto__:null,default:b9},Symbol.toStringTag,{value:"Module"}));function WSe({onRef:t,onClick:e}){const{t:n}=He(),r=O(cb);return h.jsx(Wo,{data:{title:n("common.open"),testId:"plus-button",isVisible:!0,ariaExpanded:r==="plus",onClick:e},ref:t,children:h.jsx(b9,{className:"size-6","aria-hidden":!0})})}const _b=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("mask",{id:"mask0_21044_3802",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:20,height:20},m.createElement("path",{d:"M19.7803 1.28033C20.0732 0.987435 20.0732 0.512561 19.7803 0.219669C19.4874 -0.0732238 19.0125 -0.0732228 18.7196 0.219671L8.71967 10.2197L8.25 11.75L9.78033 11.2803L19.7803 1.28033ZM4.25 1C2.45507 1 1 2.45508 1 4.25V15.75C1 17.5449 2.45507 19 4.25 19H15.75C17.5449 19 19 17.5449 19 15.75V7.75C19 7.33579 18.6642 7 18.25 7C17.8358 7 17.5 7.33579 17.5 7.75V15.75C17.5 16.7165 16.7165 17.5 15.75 17.5H4.25C3.2835 17.5 2.5 16.7165 2.5 15.75V4.25C2.5 3.2835 3.2835 2.5 4.25 2.5H12.25C12.6642 2.5 13 2.16421 13 1.75C13 1.33579 12.6642 1 12.25 1H4.25Z",fill:"currentColor"})),m.createElement("g",{mask:"url(#mask0_21044_3802)"},m.createElement("rect",{width:24,height:24,transform:"translate(-2 -2)",fill:"currentColor"}))),YRe=Object.freeze(Object.defineProperty({__proto__:null,default:_b},Symbol.toStringTag,{value:"Module"})),C9=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.92188 11.8237H19.4529C19.4529 11.8237 19.4529 9.89366 19.4529 9.6831C18.6246 6.41578 15.6854 4 12.1862 4C9.56739 4 7.26337 5.35396 5.92188 7.4044C5.92188 8.82754 5.92188 11.8237 5.92188 11.8237Z",fill:"#0364B8"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.15227 8.30349L9.15203 8.30431C8.23597 7.73294 7.1565 7.40234 6.00013 7.40234C5.97439 7.40234 5.94909 7.404 5.92344 7.40431C2.64519 7.44587 0 10.1364 0 13.4511C0 14.7371 0.399257 15.9285 1.07801 16.9086H14.1906V11.3459L9.15227 8.30349Z",fill:"#0078D4"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.4514 9.68327C19.3425 9.67596 19.233 9.6709 19.1223 9.6709C18.4357 9.6709 17.7825 9.81469 17.1899 10.073L14.1875 11.3461V16.9176H23.4143C23.7861 16.2237 23.9974 15.4296 23.9974 14.5855C23.9974 11.9828 21.9902 9.85405 19.4514 9.68327Z",fill:"#1490DF"}),m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.1602 14.3467L17.9151 13.5949L15.0613 11.8716L14.1907 11.3459L11.8941 12.3202L7.49635 14.1859L5.52123 15.0238L1.07812 16.9087C2.16256 18.4747 3.96212 19.5 6.00025 19.5H19.1255C20.9807 19.5 22.5937 18.4551 23.4175 16.9175L19.1602 14.3467Z",fill:"#28A8EA"})),QRe=Object.freeze(Object.defineProperty({__proto__:null,default:C9},Symbol.toStringTag,{value:"Module"})),UA=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("g",null,m.createElement("path",{id:"Shape",d:"M11.7717 3.74212C14.1132 1.39853 17.9121 1.39853 20.2553 3.74168C22.5384 6.02474 22.5969 9.68995 20.4309 12.0439L20.2428 12.2413L11.4427 21.0395L11.4062 21.0697C9.94492 22.3865 7.69092 22.3417 6.28355 20.9344C4.96453 19.6153 4.84241 17.5527 5.9172 16.096C5.94054 16.0506 5.96879 16.0068 6.002 15.9657L6.05556 15.9061L6.14247 15.8183L6.28355 15.6704L6.28647 15.6733L13.7222 8.21901C13.9881 7.95239 14.4047 7.92763 14.6986 8.14509L14.7829 8.2176C15.0495 8.48351 15.0742 8.90014 14.8568 9.19404L14.7843 9.27826L7.18966 16.8913C6.47202 17.7669 6.5219 19.0612 7.3393 19.8786C8.16836 20.7077 9.48801 20.7472 10.3638 19.997L19.1965 11.1666C20.952 9.40894 20.952 6.5597 19.1946 4.80234C17.4922 3.0999 14.765 3.0467 12.9986 4.64274L12.8307 4.80234L12.8181 4.81665L3.28179 14.353C2.9889 14.6459 2.51403 14.6459 2.22113 14.353C1.95487 14.0867 1.93066 13.67 2.14852 13.3764L2.22113 13.2923L11.77 3.74168L11.7717 3.74212Z",fill:"currentColor"}))),JRe=Object.freeze(Object.defineProperty({__proto__:null,default:UA},Symbol.toStringTag,{value:"Module"})),S9=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",...t},m.createElement("path",{fill:"currentColor",d:"M6.3 3A3.2 3.2 0 0 0 3 6.3v11.4C3 19.6 4.5 21 6.3 21h11.4c1.8 0 3.3-1.5 3.3-3.3V6.3C21 4.5 19.5 3 17.7 3H6.3ZM4.5 6.3c0-1 .8-1.8 1.8-1.8h11.4c1 0 1.8.8 1.8 1.8v11.4c0 1-.8 1.8-1.8 1.8H6.3c-1 0-1.8-.8-1.8-1.8V6.3ZM8 7.5c-.3 0-.5.2-.5.5v2.3a.8.8 0 0 1-1.5 0V8c0-1.1.9-2 2-2h2.3a.8.8 0 0 1 0 1.5H8Zm0 9a.5.5 0 0 1-.5-.5v-2.3a.8.8 0 0 0-1.5 0V16c0 1.1.9 2 2 2h2.3a.8.8 0 0 0 0-1.5H8ZM16.5 8c0-.3-.2-.5-.5-.5h-2.3a.8.8 0 0 1 0-1.5H16a2 2 0 0 1 2 2v2.3a.8.8 0 0 1-1.5 0V8Zm-.5 8.5c.3 0 .5-.2.5-.5v-2.3a.8.8 0 0 1 1.5 0V16a2 2 0 0 1-2 2h-2.3a.8.8 0 0 1 0-1.5H16Z"})),XRe=Object.freeze(Object.defineProperty({__proto__:null,default:S9},Symbol.toStringTag,{value:"Module"})),E9=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...t},m.createElement("path",{d:"M3 5.75A2.75 2.75 0 0 1 5.75 3h12.5A2.75 2.75 0 0 1 21 5.75v6.272a6.471 6.471 0 0 0-1.5-.709V5.75c0-.69-.56-1.25-1.25-1.25H5.75c-.69 0-1.25.56-1.25 1.25v12.5c0 .69.56 1.25 1.25 1.25h5.563c.173.534.412 1.037.709 1.5H5.75A2.75 2.75 0 0 1 3 18.25V5.75ZM23 17.5a5.5 5.5 0 1 0-11 0 5.5 5.5 0 0 0 11 0Zm-5 .5.001 2.503a.5.5 0 1 1-1 0V18h-2.505a.5.5 0 0 1 0-1H17v-2.5a.5.5 0 1 1 1 0V17h2.497a.5.5 0 0 1 0 1H18Z"})),ZRe=Object.freeze(Object.defineProperty({__proto__:null,default:E9},Symbol.toStringTag,{value:"Module"})),Rh=W("flex w-full flex-row items-center gap-2");function qSe(t){const{startNewChatDisabled:e,startNewConversation:n,selectFile:r,selectOneDriveFile:o,takeScreenshot:i,selectUserOpenedTabs:s,uploadButtonDisabled:a=!1}=t,c=m.useRef(null),{t:u}=He(),d=O(rl),f=O(ft),p=m.useRef(void 0);return yb(c),m.useEffect(()=>{i&&p.current!==f&&iye(f)},[f,i]),h.jsxs(Tl,{className:"pointer-events-auto relative flex flex-col rounded-2xl contrast-more:border-2","data-testid":"composer-plus-menu",role:"menu",circular:!0,children:[h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",className:"ps-3.5",title:u("composer.startNewChat"),onClick:n,testId:"new-chat-button",ref:c,disabled:e,children:h.jsxs("div",{className:Rh,children:[h.jsx(_b,{className:"size-5"}),u("composer.startNewChatShort")]})}),r&&!d&&h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:u("composer.upload"),disabled:a,testId:"file-upload-button",onClick:g=>{g.preventDefault(),r()},children:h.jsxs("div",{className:Rh,children:[h.jsx(UA,{className:"size-6"})," ",u("composer.upload")]})}),i&&h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:u("composer.takeScreenshot"),onClick:g=>{g.preventDefault(),g.stopPropagation(),i(),lye(f)},children:h.jsxs("div",{className:Rh,children:[h.jsx(S9,{className:"size-6"}),u("composer.takeScreenshotShort")]})}),o&&h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:u("composer.addFromOneDrive"),onClick:g=>{g.preventDefault(),g.stopPropagation(),o()},children:h.jsxs("div",{className:Rh,children:[h.jsx(C9,{className:"size-6"}),u("composer.addFromOneDrive")]})}),s&&h.jsx(Ue,{role:"menuitem",variant:"rect",color:"subtle-dimmed-inverted",title:u("composer.multiTabs.addTab"),onClick:g=>{g.preventDefault(),g.stopPropagation(),s()},children:h.jsxs("div",{className:Rh,children:[h.jsx(E9,{className:"size-6"}),u("composer.multiTabs.addTab")]})})]})}function YSe(){const[t,e]=m.useState(!1);return m.useEffect(()=>{async function n(){const{uiOverrides:{showScreenshotButton:r=()=>Promise.resolve(!1)}={}}=ye.instance().config(),o=await r();e(o)}n().catch(()=>{})},[]),t}function QSe({startNewChatDisabled:t,uploadButtonDisabled:e=!1,onStartNewConversation:n,onSelectFileIfEnabled:r,onSelectOneDriveFileIfEnabled:o,onTakeScreenshot:i,onSelectUserOpenedTabsIfEnabled:s}){const[a,c]=lt(cb),u=YSe(),f=`plus-menu-${mp()}`,p=a==="plus";return h.jsx(TA,{isOpen:p,onIsOpenChange:g=>c(v=>g?"plus":v==="plus"?null:v),renderTrigger:g=>h.jsx(WSe,{onRef:g.ref,onClick:v=>{g.onClick(v),dt({source:"composerPlusButton",pageName:"chatPage",customData:JSON.stringify({isOpen:p})})}}),options:{placement:"top-start",offset:{mainAxis:10,crossAxis:-12},hideOnMenuClick:!0},className:at(Qi,"p-2"),children:h.jsx(qSe,{startNewChatDisabled:t,uploadButtonDisabled:e,startNewConversation:n,selectFile:r,selectOneDriveFile:o,takeScreenshot:u?i:void 0,selectUserOpenedTabs:s})},f)}const WP=el.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)}),s0={dedupe:!0},JSe=(t,e,n)=>{const{cache:r,compare:o,suspense:i,fallbackData:s,revalidateOnMount:a,revalidateIfStale:c,refreshInterval:u,refreshWhenHidden:d,refreshWhenOffline:f,keepPreviousData:p}=n,[g,v,b,y]=Eo.get(r),[C,S]=bs(t),w=m.useRef(!1),E=m.useRef(!1),I=m.useRef(C),T=m.useRef(e),A=m.useRef(n),_=()=>A.current,U=()=>_().isVisible()&&_().isOnline(),[k,G,K,ie]=Ii(r,C),P=m.useRef({}).current,$=je(s)?n.fallback[C]:s,Z=(Q,oe)=>{for(const we in P){const N=we;if(N==="data"){if(!o(Q[N],oe[N])&&(!je(Q[N])||!o(Se,oe[N])))return!1}else if(oe[N]!==Q[N])return!1}return!0},x=m.useMemo(()=>{const Q=!C||!e?!1:je(a)?_().isPaused()||i?!1:je(c)?!0:c:a,oe=Y=>{const Ie=io(Y);return delete Ie._k,Q?{isValidating:!0,isLoading:!0,...Ie}:Ie},we=k(),N=ie(),te=oe(we),Ce=we===N?te:oe(N);let D=te;return[()=>{const Y=oe(k());return Z(Y,D)?(D.data=Y.data,D.isLoading=Y.isLoading,D.isValidating=Y.isValidating,D.error=Y.error,D):(D=Y,Y)},()=>Ce]},[r,C]),L=ey.useSyncExternalStore(m.useCallback(Q=>K(C,(oe,we)=>{Z(we,oe)||Q()}),[r,C]),x[0],x[1]),ne=!w.current,se=g[C]&&g[C].length>0,fe=L.data,X=je(fe)?$:fe,ge=L.error,Oe=m.useRef(X),Se=p?je(fe)?Oe.current:fe:X,Fe=se&&!je(ge)?!1:ne&&!je(a)?a:_().isPaused()?!1:i?je(X)?!1:c:je(X)||c,Re=!!(C&&e&&ne&&Fe),Ve=je(L.isValidating)?Re:L.isValidating,he=je(L.isLoading)?Re:L.isLoading,B=m.useCallback(async Q=>{const oe=T.current;if(!C||!oe||E.current||_().isPaused())return!1;let we,N,te=!0;const Ce=Q||{},D=!b[C]||!Ce.dedupe,Y=()=>kc?!E.current&&C===I.current&&w.current:C===I.current,Ie={isValidating:!1,isLoading:!1},Je=()=>{G(Ie)},it=()=>{const Be=b[C];Be&&Be[1]===N&&delete b[C]},st={isValidating:!0};je(k().data)&&(st.isLoading=!0);try{if(D&&(G(st),n.loadingTimeout&&je(k().data)&&setTimeout(()=>{te&&Y()&&_().onLoadingSlow(C,n)},n.loadingTimeout),b[C]=[oe(S),xc()]),[we,N]=b[C],we=await we,D&&setTimeout(it,n.dedupingInterval),!b[C]||b[C][1]!==N)return D&&Y()&&_().onDiscarded(C),!1;Ie.error=dn;const Be=v[C];if(!je(Be)&&(N<=Be[0]||N<=Be[1]||Be[1]===0))return Je(),D&&Y()&&_().onDiscarded(C),!1;const $e=k().data;Ie.data=o($e,we)?$e:we,D&&Y()&&_().onSuccess(we,C,n)}catch(Be){it();const $e=_(),{shouldRetryOnError:wt}=$e;$e.isPaused()||(Ie.error=Be,D&&Y()&&($e.onError(Be,C,$e),(wt===!0||Ir(wt)&&wt(Be))&&(!_().revalidateOnFocus||!_().revalidateOnReconnect||U())&&$e.onErrorRetry(Be,C,$e,nn=>{const _t=g[C];_t&&_t[0]&&_t[0](Tr.ERROR_REVALIDATE_EVENT,nn)},{retryCount:(Ce.retryCount||0)+1,dedupe:!0})))}return te=!1,Je(),!0},[C,r]),Pe=m.useCallback((...Q)=>ny(r,I.current,...Q),[]);if(Ao(()=>{T.current=e,A.current=n,je(fe)||(Oe.current=fe)}),Ao(()=>{if(!C)return;const Q=B.bind(dn,s0);let oe=0;const N=SI(C,g,(te,Ce={})=>{if(te==Tr.FOCUS_EVENT){const D=Date.now();_().revalidateOnFocus&&D>oe&&U()&&(oe=D+_().focusThrottleInterval,Q())}else if(te==Tr.RECONNECT_EVENT)_().revalidateOnReconnect&&U()&&Q();else{if(te==Tr.MUTATE_EVENT)return B();if(te==Tr.ERROR_REVALIDATE_EVENT)return B(Ce)}});return E.current=!1,I.current=C,w.current=!0,G({_k:S}),Fe&&(je(X)||ys?Q():vI(Q)),()=>{E.current=!0,N()}},[C]),Ao(()=>{let Q;function oe(){const N=Ir(u)?u(k().data):u;N&&Q!==-1&&(Q=setTimeout(we,N))}function we(){!k().error&&(d||_().isVisible())&&(f||_().isOnline())?B(s0).then(oe):oe()}return oe(),()=>{Q&&(clearTimeout(Q),Q=-1)}},[u,d,f,C]),m.useDebugValue(Se),i&&je(X)&&C){if(!kc&&ys)throw new Error("Fallback data is required when using suspense in SSR.");T.current=e,A.current=n,E.current=!1;const Q=y[C];if(!je(Q)){const oe=Pe(Q);WP(oe)}if(je(ge)){const oe=B(s0);je(Se)||(oe.status="fulfilled",oe.value=!0),WP(oe)}else throw ge}return{mutate:Pe,get data(){return P.data=!0,Se},get error(){return P.error=!0,ge},get isValidating(){return P.isValidating=!0,Ve},get isLoading(){return P.isLoading=!0,he}}},XSe=CI(JSe),ZSe=t=>bs(t?t(0,null):null)[0],a0=Promise.resolve(),e0e=t=>(e,n,r)=>{const o=m.useRef(!1),{cache:i,initialSize:s=1,revalidateAll:a=!1,persistSize:c=!1,revalidateFirstPage:u=!0,revalidateOnMount:d=!1,parallel:f=!1}=r,[,,,p]=Eo.get(yI);let g;try{g=ZSe(e),g&&(g=UO+g)}catch{}const[v,b,y]=Ii(i,g),C=m.useCallback(()=>je(v()._l)?s:v()._l,[i,g,s]);ey.useSyncExternalStore(m.useCallback(_=>g?y(g,()=>{_()}):()=>{},[i,g]),C,C);const S=m.useCallback(()=>{const _=v()._l;return je(_)?s:_},[g,s]),w=m.useRef(S());Ao(()=>{if(!o.current){o.current=!0;return}g&&b({_l:c?w.current:S()})},[g,i]);const E=d&&!o.current,I=t(g,async _=>{const U=v()._i,k=v()._r;b({_r:dn});const G=[],K=S(),[ie]=Ii(i,_),P=ie().data,$=[];let Z=null;for(let x=0;x<K;++x){const[L,ne]=bs(e(x,f?null:Z));if(!L)break;const[se,fe]=Ii(i,L);let X=se().data;const ge=a||U||je(X)||u&&!x&&!je(P)||E||P&&!je(P[x])&&!r.compare(P[x],X);if(n&&(typeof k=="function"?k(X,ne):ge)){const Oe=async()=>{if(!(L in p))X=await n(ne);else{const Fe=p[L];delete p[L],X=await Fe}fe({data:X,_k:ne}),G[x]=X};f?$.push(Oe):await Oe()}else G[x]=X;f||(Z=X)}return f&&await Promise.all($.map(x=>x())),b({_i:dn}),G},r),T=m.useCallback(function(_,U){const k=typeof U=="boolean"?{revalidate:U}:U||{},G=k.revalidate!==!1;return g?(G&&(je(_)?b({_i:!0,_r:k.revalidate}):b({_i:!1,_r:k.revalidate})),arguments.length?I.mutate(_,{...k,revalidate:G}):I.mutate()):a0},[g,i]),A=m.useCallback(_=>{if(!g)return a0;const[,U]=Ii(i,g);let k;if(Ir(_)?k=_(S()):typeof _=="number"&&(k=_),typeof k!="number")return a0;U({_l:k}),w.current=k;const G=[],[K]=Ii(i,g);let ie=null;for(let P=0;P<k;++P){const[$]=bs(e(P,ie)),[Z]=Ii(i,$),x=$?Z().data:dn;if(je(x))return T(K().data);G.push(x),ie=x}return T(G)},[g,i,T,S]);return{size:S(),setSize:A,mutate:T,get data(){return I.data},get error(){return I.error},get isValidating(){return I.isValidating},get isLoading(){return I.isLoading}}},t0e=HO(XSe,e0e);function FA(t,e,n){const{data:r,error:o,isLoading:i,size:s,setSize:a,mutate:c}=t0e(e,t,{revalidateFirstPage:!!(n!=null&&n.refreshInterval),...n}),u=m.useCallback(async()=>{await c()},[c]),d=m.useCallback(async()=>{await a(s+1)},[a,s]),f=r==null?void 0:r[s-1],p=s>0&&!!r&&typeof f>"u",g=i||p,v=f?!!e(s+1,f):!1;return{loader:{loading:g,hasNextPage:v,error:o,onLoadMore:d,data:r},refetch:u}}function w9(){const t=PU(),e=O(ft),n=O(BI),r=m.useCallback(async({url:i,args:s,conversationId:a})=>{const c=await Gn(i,OL,{query:s,analytics:{anonymousPath:"/conversations/*/history"},parseOptions:{safe:!0}}).then(u=>u.data);return c.results.length>0&&(c.results=t9(c.results),t(a,u=>{var d;u.length===0&&n0e((d=c.results.at(0))==null?void 0:d.createdAt),c.results.reverse(),u.unshift(...c.results)})),c},[t]);return FA(r,(i,s)=>{if(!e||n||!(s!=null&&s.next)&&i>0)return null;const a={url:`/conversations/${e}/history`,conversationId:e};return s!=null&&s.next&&(a.args={cursor:s.next}),a})}function n0e(t){try{const e=Ye(Lo),n=e==null?void 0:e.updatedAt;if(!t||!n)return;const r=new Date(n),o=new Date(t);(r.getTime()-o.getTime())/1e3/60>1&&V.trackEvent({name:"system",data:{eventName:"historyUpdatedAtDiscrepancy",eventInfo_conversationId:e.id,eventInfo_conversationUpdatedAt:n,eventInfo_lastMessageCreatedAt:t}})}catch{}}function r0e(){const t=m.useRef(0),e=m.useRef(0),n=m.useRef(0),r=m.useRef(0),o=m.useRef(0),i=m.useRef(0),s=m.useRef(""),a=m.useRef(""),c=m.useRef(""),u=m.useRef(!1),d=m.useRef(!1),f=m.useRef(!1),p=m.useRef(!1),g=m.useRef(!1),v=m.useRef(!1),b=m.useRef(!1),y=m.useRef(!1),C=m.useRef(void 0),S=m.useCallback(L=>{t.current=performance.now(),C.current=L?"appearance":void 0},[]),w=m.useCallback(L=>{o.current=0,i.current=0,u.current=!1,e.current=performance.now(),s.current=L,a.current=crypto.randomUUID(),V.trackEvent({name:"interaction",data:{eventName:"copilotCompose",eventInfo_conversationId:s.current,eventInfo_inputMethod:"voice",eventInfo_landingPage:V.getLandingPage(),eventInfo_scenario:C.current}}),V.trackEvent({name:"interaction",data:{eventName:"audioStartSent",eventInfo_conversationId:s.current,eventInfo_callId:a.current,eventInfo_duration:e.current-t.current,eventInfo_scenario:C.current}})},[]),E=m.useCallback(L=>{d.current=!1,f.current=!1,p.current=!1,g.current=!1,v.current=!1,b.current=!1,y.current=!1,c.current=L,n.current=performance.now(),Og.onStartMessage(L,n.current),i.current&&V.trackEvent({name:"system",data:{eventName:"copilotAudioReqtoResp",eventInfo_conversationId:s.current,eventInfo_callId:a.current,eventInfo_messageId:c.current,eventInfo_duration:n.current-i.current,eventInfo_scenario:C.current}}),V.trackEvent({name:"system",data:{eventName:"copilotAudioStartMessage",eventInfo_conversationId:s.current,eventInfo_callId:a.current,eventInfo_messageId:c.current,eventInfo_scenario:C.current,eventInfo_firstTurn:!u.current}})},[]),I=m.useCallback(()=>{d.current=!0},[]),T=m.useCallback(L=>{L===c.current&&(f.current=!0)},[]),A=m.useCallback(()=>{o.current=performance.now()},[]),_=m.useCallback(()=>{p.current=!0,!(!u.current||!c.current)&&(r.current=performance.now(),g.current||(g.current=!0,n.current&&V.trackEvent({name:"system",data:{eventName:"copilotAudioResptoReceived",eventInfo_conversationId:s.current,eventInfo_callId:a.current,eventInfo_messageId:c.current,eventInfo_duration:r.current-n.current,eventInfo_scenario:C.current}}),i.current&&V.trackEvent({name:"system",data:{eventName:"copilotAudioFirstTokenReceived",eventInfo_conversationId:s.current,eventInfo_callId:a.current,eventInfo_messageId:c.current,eventInfo_duration:r.current-i.current,eventInfo_scenario:C.current}})))},[]),U=m.useCallback(()=>{i.current=performance.now(),Og.onSpeechEndDetected(i.current),o.current&&V.trackEvent({name:"system",data:{eventName:"copilotAudioInput",eventInfo_conversationId:s.current,eventInfo_callId:a.current,eventInfo_duration:i.current-o.current,eventInfo_scenario:C.current}})},[]),k=m.useCallback(()=>{b.current||(b.current=!0,V.trackEvent({name:"system",data:{eventName:"copilotAudioCharacterAnimationReceived",eventInfo_conversationId:s.current,eventInfo_duration:performance.now()-i.current,eventInfo_messageId:c.current,eventInfo_callId:a.current,eventInfo_scenario:C.current}}))},[]),G=m.useCallback(L=>{const{messageId:ne,voiceType:se}=L;if(V.trackEvent({name:"system",data:{eventName:"copilotAudioMessageDone",eventInfo_conversationId:s.current,eventInfo_callId:a.current,eventInfo_messageId:ne,eventInfo_scenario:C.current,eventInfo_firstTurn:!u.current,eventInfo_transcriptReceived:d.current,eventInfo_textReceived:f.current,eventInfo_audioReceived:p.current}}),!u.current){u.current=!0,V.trackEvent({name:"system",data:{eventName:"copilotAudioCallSetUp",eventInfo_duration:performance.now()-t.current,eventInfo_conversationId:s.current,eventInfo_callId:a.current,eventInfo_responseVoiceType:se,eventInfo_scenario:C.current}});return}!v.current&&ne===c.current&&(v.current=!0,i.current&&V.trackEvent({name:"system",data:{eventName:"copilotAudioLastTokenReceived",eventInfo_conversationId:s.current,eventInfo_messageId:ne,eventInfo_callId:a.current,eventInfo_duration:r.current-i.current,eventInfo_scenario:C.current}}),V.trackEvent({name:"system",data:{eventName:"copilotResponseRender",eventInfo_inputMethod:"voice",eventInfo_responseMethod:"voice",eventInfo_conversationId:s.current,eventInfo_messageId:c.current,eventInfo_responseVoiceType:se,eventInfo_landingPage:V.getLandingPage(),eventInfo_scenario:C.current}}))},[]),K=m.useCallback(L=>{const ne=performance.now()-e.current;V.trackEvent({name:"system",data:{eventName:"copilotAudioCallEnd",eventInfo_conversationId:s.current,eventInfo_callId:a.current,eventInfo_duration:ne,eventInfo_numMessages:L,eventInfo_scenario:C.current}}),a.current=""},[]),ie=m.useCallback(L=>{V.trackEvent({name:"system",data:{eventName:"copilotAudioStartFailed",eventInfo_conversationId:s.current,eventInfo_callId:a.current,eventInfo_duration:performance.now()-e.current,eventInfo_reason:L,reason:L,eventInfo_scenario:C.current}})},[]),P=m.useCallback(L=>{V.trackEvent({name:"system",data:{eventName:"copilotAudioStartTimeout",eventInfo_conversationId:s.current,eventInfo_duration:L,eventInfo_scenario:C.current}})},[]),$=m.useCallback(L=>{V.trackEvent({name:"system",data:{eventName:"copilotAudioTerminated",eventInfo_conversationId:s.current,eventInfo_callId:a.current,eventInfo_duration:performance.now()-e.current,eventInfo_reason:L,reason:L,eventInfo_scenario:C.current}})},[]),Z=m.useCallback(L=>{V.trackEvent({name:"system",data:{eventName:"copilotAudioError",eventInfo_conversationId:s.current,eventInfo_callId:a.current,eventInfo_duration:performance.now()-e.current,eventInfo_errorCode:L,eventInfo_scenario:C.current}})},[]),x=m.useCallback(()=>{if(!y.current){y.current=!0;const L=Math.round(performance.now()-(i.current||n.current));V.trackEvent({name:"system",data:{eventName:"copilotAudioStart",eventInfo_conversationId:s.current,eventInfo_callId:a.current,eventInfo_messageId:c.current,eventInfo_duration:L,eventInfo_scenario:C.current}})}},[]);return m.useMemo(()=>({onBeforeStartCall:S,onAudioStartFailed:ie,onAudioStartTimeout:P,onStartCall:w,onStartMessage:E,onTranscriptReceived:I,onTextReceived:T,onAudioInterrupt:A,onAudioReceived:_,onSpeechEndDetected:U,onCharacterAnimationReceived:k,onMessageDone:G,onTerminated:$,onEndCall:K,onError:Z,onAudioStart:x}),[S,ie,P,w,E,I,T,A,_,k,U,G,$,K,Z,x])}const o0e="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/call_ending-BxIIadI4.mp3",i0e="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/call_opening-CKuCznU5.mp3";function BA({data:t,parsedAudioData:e,audioContext:n,gainNode:r,sourceNodes:o,nextBufferTime:i,updateNextBufferTime:s,onAudioEnd:a,outputVolumeMuted:c=!1,getPlaySignal:u,updateAudioDuration:d,onAudioStart:f,playbackRate:p}){const g=e??T6(t);g.length!==0&&navigator.locks.request("audio-playback",async()=>{const v=g.length/Xf;d==null||d(v);const b=u==null?void 0:u(v);if(b)try{console.log("Awaiting play signal"),await b}catch(y){y instanceof Error&&(`${y.message}`,void 0);return}try{f(),await s0e(g,n,r,o,i,s,()=>a(t),c,p)}catch(y){console.error("Error playing audio:",y)}})}async function s0e(t,e,n,r,o,i,s,a,c=1){let u=t;if(c!==1){const{processAudioStretch:v}=await z(async()=>{const{processAudioStretch:b}=await import("./audio-stretch-processor-D0CzCbTE.js");return{processAudioStretch:b}},[]);u=v(t,c,Xf)}const d=e.createBuffer(1,u.length,Xf);d.getChannelData(0).set(u);const f=e.createBufferSource();f.buffer=d,f.connect(n),a&&(n.gain.value=0);const p=rt();if(r.size===0){const v=p.get(Dw),b=p.get(Lw),y=v+(e.currentTime-b);p.set(Dw,y)}r.add(f),f.onended=()=>{s(),p.set(Lw,e.currentTime),r.delete(f),r.size===0&&p.set(Mw,!1)};const g=d.length/d.sampleRate;o.current<e.currentTime&&i(e.currentTime),f.start(o.current),p.set(Mw,!0),i(o.current+g)}async function a0e(t,e,n,r,o){const i=r&&await r(),s=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0,autoGainControl:!0,sampleRate:I6,...i}}),a=s.getAudioTracks()[0];a&&(a.onended=d=>{o==null||o(d)});const c=e.createMediaStreamSource(s),u=e.createScriptProcessor(8192,1,1);return c.connect(n),n.connect(u),u.connect(e.destination),u.onaudioprocess=d=>{const f=d.inputBuffer.getChannelData(0),p=new Int16Array(f.length);for(let v=0;v<f.length;v+=1){const b=f[v];typeof b=="number"&&(p[v]=Eve(b))}const g=Sve(p.buffer);t(g)},s}async function qP(t,e){const n=await Promise.race([Fj(e),new Promise(r=>{try{const o=new Audio(t);o.addEventListener("ended",()=>r(o),{once:!0}),o.play()}catch{}})]);n==null||n.remove()}const c0e=Xf*2;class l0e{constructor(){J(this,"audioBuffer",[]);J(this,"totalBufferSize",0);J(this,"lastProcessOptions",null)}addAudioData(e){if(!e)return!1;const n=T6(e),r=n.length;return r===0?!1:(this.audioBuffer.push({audioData:n,bufferSize:r}),this.totalBufferSize+=r,this.totalBufferSize>=c0e)}getLastProcessOptions(){return this.lastProcessOptions}setLastProcessOptions(e){this.lastProcessOptions=e}mergeAudioChunks(){const e=new Float32Array(this.totalBufferSize);let n=0;for(const r of this.audioBuffer){const{audioData:o}=r;e.set(o,n),n+=o.length}return e}getAudioData(){if(this.audioBuffer.length===0)return null;if(this.audioBuffer.length===1){const e=this.audioBuffer[0];return e?e.audioData:null}return this.mergeAudioChunks()}clearBuffer(){this.audioBuffer=[],this.totalBufferSize=0}}function u0e(t,e){const n=t.data;if(!e){BA(t);return}e.setLastProcessOptions(t),e.addAudioData(n)&&I9(e)}function d0e(t){t&&I9(t)}function I9(t){const e=t.getAudioData(),n=t.getLastProcessOptions();!e||!n||(BA({...n,parsedAudioData:e}),t.clearBuffer())}const eNe={lmks_rest:"lmksRest",frames:"frames",expr:"expr",neck_pose:"neckPose",jaw_pose:"jawPose",eyes_pose:"eyesPose",eyes_open_ratio:"eyesOpenRatio",rotation:"rotation",translation:"translation",lmks:"lmks"};class h0e{constructor(e,n){J(this,"lmksRest");J(this,"frames");this.lmksRest=e,this.frames=n}}class f0e{constructor(e,n){J(this,"exp");J(this,"pose");this.exp=e,this.pose=n}isValid(){return this.exp.dtype!==""&&this.exp.data.length>0||this.pose.dtype!==""&&this.pose.data.length>0}}const p0e=3.141592653589793,YP="System.Single, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089";function m0e(t){const e=[],n=[],r=(a,c)=>{if(c>=a.length)throw new Error("index out of range");return a[c]===void 0?0:a[c]};for(const{frame:a,offset:c}of t){if(a.length<97)return console.log("Invalid frame length"),null;const u=new Array(28).fill(0);u[12]=r(a,78),u[16]=r(a,43),u[17]=r(a,43),u[21]=r(a,72),u[23]=.5*r(a,52)+.5*r(a,53),u[24]=.75*r(a,76),u[26]=.75*r(a,76),e.push({exp:u,offset:c});const d=[[-1*r(a,88)+p0e,-1*r(a,89),r(a,90)],[0,r(a,92),-1*r(a,91)],[0,r(a,95),-1*r(a,94)]];n.push(d)}const o={dtype:YP,shape:[e.length,16],data:e,isColumnMajor:!1},i={dtype:YP,shape:[n.length,3,3],data:n,isColumnMajor:!1};return new f0e(o,i)}class g0e{constructor(){J(this,"LOCK_NAME","animation-data-frames-lock");J(this,"TIMEOUT_MSEC",W$);J(this,"a2eState",{frames:[],timeoutId:null});J(this,"vasaState",{frames:[],timeoutId:null});J(this,"a2eConfig",{getAnimationData:e=>m0e(e),calculateDuration:e=>e/vM});J(this,"vasaConfig",{getAnimationData:e=>new h0e([],e),calculateDuration:e=>e/yM});J(this,"waitingForLock",new Set);J(this,"lockedBy",null);J(this,"unblock",()=>{})}async requestLock(e,n){if(typeof navigator<"u"&&navigator.locks){if(this.waitingForLock.has(e))return;this.waitingForLock.add(e),await navigator.locks.request(this.LOCK_NAME,async()=>{this.lockedBy&&this.lockedBy!==this.LOCK_NAME&&await new Promise(r=>{this.unblock=()=>{r()}}),await n(),this.waitingForLock.delete(e)})}else await n()}lockAnimation(e){this.lockedBy=e}unlockAnimation(){this.lockedBy=null,this.unblock()}setA2EFrame(e,n,r){e&&(this.a2eState.frames.push({frame:e,offset:n}),this.addFrames(this.a2eState,this.a2eConfig,r))}setVasaFrame(e,n){e&&(this.vasaState.frames.push(e),this.addFrames(this.vasaState,this.vasaConfig,n))}async addFrames(e,n,r){const o=e;this.requestLock("addFrames",async()=>{if(o.frames.length>=X$){o.timeoutId&&clearTimeout(o.timeoutId),this.flushFrames(o,n,r);return}if(!o.timeoutId){const i=window.setTimeout(()=>{this.flushFrames(o,n,r)},this.TIMEOUT_MSEC);o.timeoutId=i}})}flushFrames(e,n,r){this.requestLock("flushFrames",async()=>{if(e.frames.length===0)return;rt().set(RM,{animationData:n.getAnimationData(e.frames)});const o=n.calculateDuration(e.frames.length);r==null||r(o),`${e.frames.length}`;const i=e;i.frames=[],i.timeoutId=null})}resetFrames(){for(const e of[this.a2eState,this.vasaState])e.timeoutId&&clearTimeout(e.timeoutId),e.frames=[],e.timeoutId=null}}class Kv{constructor(){J(this,"totalAudioDuration",0);J(this,"totalAnimationDataDuration",0);J(this,"nonInitialPromiseChecked",0);J(this,"animationDataFrameHandler");J(this,"isFrameAppendable",!1);this.animationDataFrameHandler=new g0e}lockAnimation(e){this.animationDataFrameHandler&&this.animationDataFrameHandler.lockAnimation(e)}unlockAnimation(){this.animationDataFrameHandler&&this.animationDataFrameHandler.unlockAnimation()}addAnimationDataDuration(e){this.totalAnimationDataDuration+=e*1e3}addAudioDuration(e){const n=e*1e3;this.totalAudioDuration+=n}getAnimationSyncPromise(e,n){return`${this.totalAudioDuration}${this.totalAnimationDataDuration}`,e===0?Kv.constructCharacterTalkPromise(q$):n===0?null:this.totalAudioDuration>this.totalAnimationDataDuration+J$&&(this.nonInitialPromiseChecked+=1,this.nonInitialPromiseChecked%Q$===1)?Kv.constructCharacterTalkPromise(Y$):null}resetAudioAnimationSync(e=null){this.animationDataFrameHandler&&(this.animationDataFrameHandler.resetFrames(),this.totalAudioDuration=0,this.totalAnimationDataDuration=0);const n=rt();n.set(wbe,e??null),n.set(Mw,!1),n.set(Dw,0),n.set(Lw,0)}enableFramesAppending(){this.isFrameAppendable=!0}disableFramesAppending(){this.isFrameAppendable=!1}setA2EFrame(e,n){if(this.isFrameAppendable&&this.animationDataFrameHandler){if(((e==null?void 0:e.length)??0)===0)return;n!==this.totalAnimationDataDuration&&(`${n}${this.totalAnimationDataDuration}`,void 0),this.totalAnimationDataDuration+=1/vM*1e3,this.animationDataFrameHandler.setA2EFrame(e,n),`${this.totalAudioDuration}${this.totalAnimationDataDuration}`}}setVasaFrameData(e){this.isFrameAppendable&&this.animationDataFrameHandler&&(this.totalAnimationDataDuration+=1/yM*1e3,this.animationDataFrameHandler.setVasaFrame(e))}static constructCharacterTalkPromise(e){const n="start-audio-playback-custom",r=new AbortController,{signal:o}=r,i=new Promise(c=>{const u=()=>{c(),r.abort()};window.addEventListener(n,u,{once:!0,signal:o})}),s=new Promise((c,u)=>{const d=()=>{u(new Error("Audio interrupted")),r.abort()};Pt.on("voice:audio-interrupted",d)}),a=new Promise(c=>{setTimeout(()=>{c(),r.abort()},e)});return Promise.race([i,s,a])}}const v0e=null;function y0e(t){return t instanceof Error&&(t.name==="NotFoundError"||t.name==="OverconstrainedError")}const b0e=1;function Mm(t,e){Pt.emit(`voice:audio-${e}-volume-changed`,t)}function C0e({initAudio:t,getAudioConstraints:e,onCallTerminated:n,onSpeechEndDetected:r,keepAudioInputAlive:o=!1,shouldRefetchHistory:i=!0}){const s=_e(vc),a=_e(RM),c=_e(hG),u=me("experimental-vasa"),d=wT(),f=_e(Zu),p=me("voice-call-jingles"),g=_e(rG),v=O(ft),b=O(my),y=O(fp),C=_e(qh),S=_e(oG),w=_e(Nc),E=_e(Id),I=me("voice-speed"),T=O(BL),A=PU(),{refetch:_}=w9(),{showBoundary:U}=uO(),k=m.useRef(),G=m.useRef(),K=m.useRef(),ie=mF(0),P=m.useRef(null),$=m.useRef(null),Z=m.useRef(null),x=m.useRef(null),L=m.useRef(new Set),ne=m.useRef(null),[se,fe]=m.useState(!1),X=m.useRef(0),ge=q=>{X.current=q},Oe=q=>{var ce;return(ce=ne.current)==null?void 0:ce.addAudioDuration(q)},Se=m.useRef("inactive"),Fe=m.useCallback(()=>d?!!Ye(Zu):!1,[d]),Re=m.useRef(!1),Ve=m.useRef(""),he=m.useRef(I?new l0e:void 0),B=m.useRef(0),Pe=m.useCallback(q=>{Re.current&&q===Ve.current&&(g("listening"),s("listening"),fe(!1))},[g,s]),Q=m.useCallback(q=>{const{analyser:ce,frameIdRef:De,volume:Ge}=q;if(!ce)return;const Me=new Uint8Array(ce.frequencyBinCount),F=b0e,re=()=>{var ke;ce.getByteTimeDomainData(Me);const de=wve(Me);Math.abs(de-Ge.get())>F&&((ke=q.update)==null||ke.call(q,de),Ge.set(de)),De.current=requestAnimationFrame(re)};re()},[]),oe=q=>{q.current!==null&&(cancelAnimationFrame(q.current),q.current=null)};m.useEffect(()=>()=>{oe(Z),oe($)},[]);const[we,N]=m.useState(!t),te=r0e();m.useEffect(()=>{t||(N(!0),C("waiting-for-user-interaction"))},[t,N,C]);const Ce=m.useCallback(async()=>{v&&(A(v,q=>q.splice(0)),await _())},[_,v,A]),D=m.useCallback(async()=>{if(K.current){for(const q of K.current.getTracks())q.stop();K.current=null}if(k.current)try{await k.current.close(),k.current=null}catch(q){console.error("Unable to close audioContextIn",q)}oe($),ie.set(0),Mm(0,"input"),An(xh,null)},[ie]),Y=m.useCallback(async q=>{if(Se.current="inactive",await D(),G.current)try{await G.current.close(),G.current=null}catch(ce){console.error("Unable to close audioContextOut",ce)}oe(Z),Pw.set(0),Mm(0,"output"),fe(!1),N(!1),q.sendAudioEnd(),g("idle"),Ye(qh)==="available"&&(p&&qP(o0e,3e3),i&&await Ce(),te.onEndCall(B.current),B.current=0,E(!0))},[D,g,p,Ce,i,te,E]),Ie=m.useCallback(async q=>{k.current=new AudioContext({sampleRate:I6}),P.current=k.current.createAnalyser(),X.current=0;const ce=async()=>{o&&Se.current==="active"&&(await D(),await Ie(q))};let De=null;try{De=await a0e(q.sendAudio,k.current,P.current,e,ce)}catch(Ge){Ge instanceof Error&&(Ge.name==="NotAllowedError"||Ge.name==="NotSupportedError")?(C("microphone-denied"),await Y(q),V.trackEvent({name:"system",data:{eventName:"copilotNoMicrophoneAccess"}})):y0e(Ge)?(C("microphone-not-found"),await Y(q),V.trackEvent({name:"system",data:{eventName:"copilotMicrophoneNotFound"}})):U(new Error(`Error starting audio capture: ${Ge}`))}if(De){if(we)for(const Ge of De.getTracks())Ge.enabled=!1;K.current=De,Q({volume:ie,analyser:P.current,frameIdRef:$,update:Ge=>{Mm(Ge,"input")}})}},[we,Q,ie,o,D,e,C,Y,U]),Je=m.useRef(!1),it=m.useCallback(()=>{if(oe(Z),!G.current)return;const q=G.current.createGain(),ce=G.current.createAnalyser();q.connect(ce),ce.connect(G.current.destination),x.current=q,fe(!0),Q({volume:Pw,analyser:ce,frameIdRef:Z,update:De=>{Mm(De,"output")}})},[Q]),st=m.useCallback(q=>{const ce=q==="mute";if(N(ce),An(Ebe,ce),K.current)for(const De of K.current.getTracks())De.enabled=q==="unmute"},[]),Be=m.useCallback(q=>{var ce;if(Fe())return(ce=ne.current)==null?void 0:ce.getAnimationSyncPromise(X.current,q)},[Fe]),$e=m.useCallback(async q=>{G.current=new AudioContext({sampleRate:Xf}),X.current=0,it(),Je.current||(Je.current=!0,await Ie(q)),Ye(zI)&&st("mute")},[Ie,it,st]),wt=m.useCallback(()=>{const q=ye.instance().config().audioConfigClientType;if(q)return q;if(Fe())return"character"},[Fe]),nn=m.useCallback(async q=>{var Me;if(!v||!t)return;C("checking-availability"),S(null),Je.current=!1;const{sendAudioStart:ce}=q,De=wt();ce(v,{voice:y??((Me=b[0])==null?void 0:Me.id)},De);const Ge=1e4;setTimeout(()=>{Ye(qh)==="checking-availability"&&Se.current==="active"&&te.onAudioStartTimeout(Ge)},Ge),te.onStartCall(v),p&&await navigator.locks.request("audio-playback",async()=>{var F,re;(F=ne.current)==null||F.lockAnimation("audio-playback"),await qP(i0e,3e3),(re=ne.current)==null||re.unlockAnimation()}),bu("onStartVoiceChat")},[v,t,C,y,b,te,S,p,wt]),_t=m.useCallback(()=>{var q,ce;for(const De of L.current)De.stop();L.current.clear(),(q=G.current)==null||q.close(),G.current=null,fe(!1),(ce=ne.current)==null||ce.resetAudioAnimationSync()},[]),rn=m.useCallback(async q=>{_t(),await Y(q),n()},[Y,n,_t]),Rn=SA(I?T:ly),j=m.useCallback(q=>ce=>{var De,Ge,Me,F,re,de,ke;switch(ce.event){case"startMessage":{const{messageId:ve}=ce;if(te.onStartMessage(ve),_t(),Se.current==="inactive")break;$e(q),C("available"),g("listening"),fe(!0),An(n0,!1),(De=ne.current)==null||De.resetAudioAnimationSync(G.current),(Ge=ne.current)==null||Ge.enableFramesAppending();break}case"transcriptEvent":{te.onTranscriptReceived();break}case"appendText":{const{messageId:ve}=ce;te.onTextReceived(ve);break}case"audioStartFailed":{const{reason:ve}=ce,{success:Ke}=LL.safeParse(ve);C(Ke?ve:"error"),te.onAudioStartFailed(ve);break}case"audioTimeRemaining":{const{seconds:ve}=ce;S(ve);break}case"audio":{if(Se.current==="inactive")break;if(te.onAudioReceived(),g("responding"),fe(!0),Ve.current=ce.audio,G.current&&x.current){const ve={data:ce.audio,audioContext:G.current,gainNode:x.current,sourceNodes:L.current,nextBufferTime:X,updateNextBufferTime:ge,onAudioEnd:Pe,outputVolumeMuted:u,getPlaySignal:Be,updateAudioDuration:Fe()?Oe:void 0,onAudioStart:te.onAudioStart,playbackRate:Rn};I?u0e(ve,he.current):BA(ve)}break}case"characterAnimation":{if(te.onCharacterAnimationReceived(),Fe()){const{frame:ve}=ce;(ve==null?void 0:ve.model)==="spda2e"&&((Me=ne.current)==null||Me.setA2EFrame(ve.poseDiffusion,ce.offsetInMilliseconds)),(ve==null?void 0:ve.model)==="vasa"&&((F=ne.current)==null||F.setVasaFrameData(ve))}break}case"callUI":{const{callUI:ve}=ce,Ke=Ye(xh);ve?Array.isArray(ve.topics)?(ve.selectedIndex??(ve.selectedIndex=-1),An(xh,ve)):An(xh,{...Ke??{},...ve,topics:(Ke==null?void 0:Ke.topics)??null}):An(xh,null);break}case"characterEmotion":{Fe()&&c({emotion:ce.emotion,bodyReaction:ce.bodyReaction});break}case"interruptAudio":{Fe()&&(Pt.emit("voice:audio-interrupted"),(re=ne.current)==null||re.resetAudioAnimationSync(),(de=ne.current)==null||de.disableFramesAppending(),a(null)),g("listening"),s("listening"),te.onAudioInterrupt(),_t(),An(n0,!0),c(null);break}case"speechEndDetected":{te.onSpeechEndDetected(),s("thinking"),r==null||r();break}case"callTerminated":{rn(q),te.onTerminated(ce.reason);break}case"error":{const{errorCode:ve}=ce;switch(ve){case"over-turn-limit":{w(0);break}case"character-out-of-capacity":{q.setCallType("standard");break}}Se.current==="active"&&te.onError(ve);break}case"done":{const{messageId:ve}=ce;Re.current=!0,B.current+=1,he.current&&d0e(he.current),te.onMessageDone({messageId:ve,voiceType:y??((ke=b[0])==null?void 0:ke.id)}),An(n0,!0);break}case"banned":{const{expiresAt:ve}=ce,Ke=Y_(ve);Ke&&(Q_(Ke,"voice",ve),_t(),Y(q));break}case"callTypeChanged":{const{callType:ve}=ce;ve==="standard"&&f(void 0);break}}},[te,_t,$e,C,Fe,S,g,Pe,u,Be,s,a,r,rn,w,y,b,Y,f,Rn,I,c]);return{toggleVoiceChat:m.useCallback(async q=>{if(q==="start"&&Se.current==="active")return;if(q==="start"){const De=oE();te.onBeforeStartCall(De)}if(q==="end"&&Se.current==="inactive")return;Se.current=q==="start"&&t?"active":"inactive",q==="start"&&Fe()&&(ne.current=new Kv),Og.onVoiceChatToggled(q,v);const ce=await Rs({useMockConnection:!!v0e});q==="start"?(ce.setOnEvent(j(ce)),await nn(ce)):(ce.setOnEvent(()=>{}),await Y(ce))},[j,Fe,nn,Y,te,t,v]),toggleMute:st,isInputMuted:we,inputVolume:ie,hasOutputVolume:se}}const tNe="https://picassostaticassetsstg.azureedge.net/character/try-now/lumi_intro_394_222";function QP(t,e){if(!t)return!1;const n=mn(j$)??mn(U$);return!e&&!n}function S0e({isAudioCall:t,onCallTerminated:e,onMute:n,onUnmute:r}){const o=$t(),i=tD(),[s,a]=ab(),c=s==="audioCall",[u,d]=m.useState(!1),f=O(Zu),p=me("appearance-try-now-modal"),g=O(zI),{state:v,setState:b}=CA({defaultValue:!c}),{toggleVoiceChat:y,toggleMute:C,hasOutputVolume:S,inputVolume:w,isInputMuted:E}=C0e({initAudio:v,onCallTerminated:e}),I=m.useRef(y);I.current=y,m.useEffect(()=>{t?!c&&!QP(p,f)&&!g&&I.current("start"):I.current("end")},[o,t,c,I,f,g,p]);const T=m.useCallback(()=>{y("start"),v&&!u&&(d(!0),C("unmute"))},[y,v,u,C]),A=m.useCallback(()=>{a(),b(!0),y("end")},[a,b,y]),_=m.useCallback(()=>{b(!0),C(E?"unmute":"mute"),E?r==null||r():n==null||n()},[b,C,E,n,r]);m.useEffect(()=>{t&&c&&v&&T()},[v,t,c,T]);const U=m.useCallback(async(K=!1)=>{(!t||K)&&await k()!=="NotSupported"||(await i({talk:!0}),QP(p,f)||T())},[t,p,i,f,T]);m.useEffect(()=>{c&&U(!0)},[c,U]);async function k(){return(await Hle.run({onAudioCall:async()=>"NotSupported"})).onAudioCall()}const G=m.useCallback(K=>{const{toLocation:ie}=K,P=ie.pathname;t&&!P.endsWith("/talk")&&I.current("end")},[t]);return W_(G),{launchAudioCall:U,startAudioCallIfNotStartedAlready:T,endAudioCall:A,toggleAudioInput:_,inputVolume:w,isInputMuted:E,hasOutputVolume:S,isAudioDeepLink:c,canInitAudio:v}}const T9={sdk:"8.0",messaging:{origin:window.location.origin,channelId:crypto.randomUUID()},accessibility:{showFocusOnLoad:!1,enableFocusTrap:!0},authentication:{},entry:{oneDrive:{recent:{}}},typesAndSources:{mode:"files",filters:Ome,pivots:{oneDrive:!0,recent:!0,photos:!1}}},E0e=new URLSearchParams({app:"CMC",scenario:"AnalyzeDoc",filePicker:JSON.stringify(T9),locale:Ot.resolvedLanguage??"en-US"}),_9="https://onedrive.live.com",w0e=`${_9}/picker?${E0e}`;async function A9(){const t=await Qle();return(t==null?void 0:t.accessToken)??""}function I0e(t){return t!==null&&typeof t=="object"&&"type"in t&&t.type==="initialize"&&"channelId"in t&&typeof t.channelId=="string"}function T0e({port:t,onClose:e,onPick:n,setIsLoading:r,onError:o}){return async i=>{let s;switch(i.data.type){case"notification":i.data.data.notification==="page-loaded"&&r(!1);break;case"command":switch(t.postMessage({type:"acknowledge",id:i.data.id}),i.data.data.command){case"authenticate":s=await A9(),typeof s<"u"?t.postMessage({type:"result",id:i.data.id,data:{result:"token",token:s}}):(t.postMessage({type:"result",id:i.data.id,data:{result:"error",error:{code:"authTokenError",message:"Could not get OneDrive authentication token."}}}),r(!1),o(),e());break;case"close":e();break;case"pick":i.data.data.items!==void 0&&i.data.data.items.length>0&&i.data.data.items[0]!==void 0&&(n(i.data.data.items[0]),t.postMessage({type:"result",id:i.data.id,data:{result:"success"}}),e());break;default:r(!1),t.postMessage({result:"error",error:{code:"unsupportedCommand",message:i.data.data.command},isExpected:!0}),o(),e();break}break}}}function _0e({onClose:t,onPick:e,onError:n}){const r=m.useRef(null),{t:o}=He(),[i,s]=m.useState(!0);return m.useEffect(()=>{var f;const a=()=>{const p={title:o("composer.errors.attachmentOneDrive.title"),message:o("composer.errors.attachmentOneDrive.message")};n(p),V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:p.message,eventInfo_details:"Error submitting message"}})},c=(f=r.current)==null?void 0:f.contentWindow;let u,d;return c&&(async()=>{const g=c.document.createElement("form");g.method="POST",g.action=w0e,c.document.body.appendChild(g);const v=c.document.createElement("input");v.type="hidden",v.name="access_token",v.value=await A9(),g.appendChild(v),window.addEventListener("message",b=>{if(b.origin&&b.origin===_9){const y=b.data;if(I0e(y)&&y.channelId===T9.messaging.channelId){if([d]=b.ports,!d){s(!1),a(),t();return}u=T0e({port:d,onClose:t,onPick:e,onError:a,setIsLoading:s}),d.addEventListener("message",u),d.start(),d.postMessage({type:"activate"})}}}),g.submit()})(),()=>{u&&window.removeEventListener("message",u),d&&d.close()}},[t,e,n,o]),h.jsxs(Kd,{isOpen:!0,onClose:t,className:"flex h-[90vh] max-h-[680px] w-[90vw] max-w-[1080px]",fullBleed:!0,children:[i&&h.jsxs("div",{className:"flex size-full items-center justify-center","aria-live":"polite",role:"status","aria-label":o("oneDrive.pickerLoading"),children:[h.jsx("span",{className:"sr-only",children:o("oneDrive.pickerLoading")}),h.jsx(kt,{className:"size-20"})]}),h.jsx("iframe",{title:o("onedrive.filePicker"),ref:r,hidden:i,width:"100%",height:"100%"})]})}const A0e="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/add-BTcFT5ig.svg",k0e="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/image-zMo0jLdY.svg",x0e="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/podcast-BQmBU8ew.svg",R0e="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/quiz-BBvkoZrF.svg",N0e="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/research-i8a7tpJF.svg";function P0e(t){const{onPrefillComposerInput:e,disabled:n=!1}=t,r=O(hT),o=O(fT),[i,s]=lt(wn),a=O(gr),c=O(wy),u=Pr(),d=_e(bl),f=xA(),{handleProSubscription:p}=Vv({payflowEntryPoint:"PodcastLimit",skuType:c?"FreeTrial":"1Mo-Paid",upsellReason:"",entryStyle:"Button"}),{handleProSubscription:g}=Vv({payflowEntryPoint:"ResearchReportLimit",skuType:c?"FreeTrial":"1Mo-Paid",upsellReason:"",entryStyle:"Button"}),v=O0e({remainingPodcastGeneration:r,remainingResearchReportGeneration:o,isPro:(a==null?void 0:a.isPro)??!1}),b=_e(Jj),y=LA(),C=m.useCallback(E=>{const I=v[E];if(I){switch(I.key){case"image":b("image");break;case"podcast":if(!u&&r===0){d({isOpen:!0,scenario:"podcast",reason:"createPodcast"});return}if(!(a!=null&&a.isPro)&&r===0){if(!f)return;p();return}b("podcast");break;case"researchReport":if(!u&&o===0){d({isOpen:!0,scenario:"researchReport",reason:"createResearchReport"});return}if(!(a!=null&&a.isPro)&&o===0){if(!f)return;g();return}b("researchReport"),s("research");break;case"quiz":b("quiz");break;case"actions":b("actions"),s("computerUse");break;default:b(null);break}e(I.composerInputPrompt??"")}},[v,b,e,a,r,o,f,p,g,u,d,s]),S=m.useCallback(()=>{b(null),Hw(),s("chat")},[b,s]),w=m.useRef(null);return m.useEffect(()=>{var E;y.length===0&&i!=="research"&&i!=="computerUse"&&((E=w.current)==null||E.setSelectedItemIndex(0),S())},[y,S,i]),h.jsx(IA,{ref:w,items:v,onSelect:C,defaultSelectedItemIndex:0,onReset:S,disabled:n,onMenuClick:()=>dt({source:"composerCreateButton",pageName:"chatPage"})})}function Kl(t){return e=>{rye(t,e)}}function Wl(t){return e=>{sye(t,e)}}function O0e({remainingPodcastGeneration:t,remainingResearchReportGeneration:e,isPro:n}){const r=me("podcast-in-create-drawer"),o=P6(),i=tA(),s=r,a=o,c=me("quiz-in-create-drawer"),{t:u}=He("translation",{keyPrefix:"composer.create"});return m.useMemo(()=>{const f={key:"create",title:u("buttonTitle"),icon:h.jsx(or,{url:A0e,className:"size-5"}),description:u("buttonDescription"),composerInputPrompt:"",testId:"composer-create-button",onImpression:Kl(null),beforeClick:Wl(null),isIconEnabledInButton:!0},p={key:"image",title:u("image.title"),icon:h.jsx(or,{url:k0e,className:"size-6"}),description:u("image.description"),composerInputPrompt:u("image.prompt"),testId:"composer-create-image-button",onImpression:Kl("image"),beforeClick:Wl("image")};function g(){return{key:"podcast",title:u("podcast.title"),icon:h.jsx(or,{url:x0e,className:"size-6"}),description:u("podcast.description"),composerInputPrompt:u("podcast.prompt"),testId:"composer-create-podcast-button",onImpression:Kl("podcast"),beforeClick:Wl("podcast"),tags:t!==null&&n===!1?[{label:u("podcast.remainingCalls",{remainingCalls:t.toString()}),color:t>0?"neutral":"accent"}]:void 0}}function v(){return{key:"researchReport",title:u("researchReport.title"),icon:h.jsx(or,{url:N0e,className:"size-6"}),description:u("researchReport.description"),composerInputPrompt:u("researchReport.prompt"),testId:"composer-create-research-report-button",onImpression:Kl("researchReport"),beforeClick:Wl("researchReport"),tags:e!==null&&n===!1?[{label:u("researchReport.remainingCalls",{remainingCalls:e.toString()}),color:e>0?"neutral":"accent"}]:void 0}}function b(){return{key:"quiz",title:u("quiz.title"),icon:h.jsx(or,{url:R0e,className:"size-6"}),description:u("quiz.description"),composerInputPrompt:u("quiz.prompt"),testId:"composer-create-quiz-button",onImpression:Kl("quiz"),beforeClick:Wl("quiz")}}function y(){return{key:"actions",title:u("actions.title"),icon:h.jsx(or,{url:N6,className:"size-6"}),description:u("actions.description"),composerInputPrompt:u("actions.prompt"),testId:"composer-create-actions-button",onImpression:Kl("actions"),beforeClick:Wl("actions"),tags:n===!1?[{label:u("actions.labsTag"),color:"accent"}]:void 0}}return[f,p,a?v():void 0,s?g():void 0,c?b():void 0,i?y():void 0].filter(C=>C!==void 0)},[t,n,u,i,s,a,e,c])}function M0e({selectFile:t,disabled:e=!1}){const{t:n}=He();return h.jsx("div",{className:"flex",children:h.jsx(Ue,{role:"menuitem",variant:"rect",size:"36-sm",color:"subtle-dimmed-inverted",title:n("composer.upload"),disabled:e,testId:"file-upload-button","aria-label":n("composer.upload"),className:"size-9 p-1",onClick:r=>{r.preventDefault(),t()},children:h.jsx(UA,{className:"size-6"})})})}function L0e(t){const{createConversation:e}=_p(),n=_e(zr),r=_e(kp),o=_e(Ap);return m.useCallback(async()=>{try{n(null),r(null),t==null||t(),await e()}finally{o("center")}},[e,o,n,r,t])}const k9=rt(),HA=M(null),zA=M(null);function x9(t){k9.set(HA,t)}function R9(t){k9.set(zA,t)}function D0e(t,e){var s;const n={eventInfo_inputLength:t.length};let r=n;const o=Ye(HA);if(o){const{source:a,type:c,prompt:u}=o;a==="widgets"?r={...n,widget:c,widgetPromptLength:u.length}:r={...n,pill:c,pillPromptLength:u.length}}const i=Ye(zA);return i&&(r={...r,autoCompleteLength:i.prompt.length}),(e==null?void 0:e.length)!==0&&((s=e==null?void 0:e[0])!=null&&s.scenario)&&(r={...r,uploadFileScenario:e[0].scenario}),JSON.stringify(r)}function j0e(t){const e=Ye(HA),n=Ye(zA),r=e==null?void 0:e.prompt.trim(),o=t.trim(),i=n==null?void 0:n.prompt.trim(),s=n==null?void 0:n.prefix.trim(),a=o.toLowerCase()===(i==null?void 0:i.toLowerCase());return!a&&!e?null:a?!r||!o.toLowerCase().includes(r.toLowerCase())?"autoComplete":s&&s.length>r.length?(e==null?void 0:e.source)==="widgets"?"widgetWithTextAndAutoComplete":"pillWithTextAndAutoComplete":(s==null?void 0:s.length)===r.length?(e==null?void 0:e.source)==="widgets"?"widgetWithAutoComplete":"pillWithAutoComplete":"autoComplete":!r||!o.toLowerCase().includes(r.toLowerCase())?null:o.length>r.length?(e==null?void 0:e.source)==="widgets"?"widgetWithText":"pillWithText":(e==null?void 0:e.source)==="widgets"?"widget":"pill"}function U0e(){x9(null),R9(null)}const N9=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("g",{id:"Facebook"},m.createElement("path",{id:"Initiator",d:"M23.9995 12.0441C23.9995 5.39238 18.627 0 11.9998 0C5.37253 0 0 5.39238 0 12.0441C0 17.6923 3.87448 22.4319 9.1011 23.7336V15.7248H6.62675V12.0441H9.1011V10.4581C9.1011 6.35879 10.9495 4.45872 14.9594 4.45872C15.7197 4.45872 17.0315 4.60855 17.5681 4.75789V8.0941C17.2849 8.06424 16.7929 8.0493 16.1819 8.0493C14.2144 8.0493 13.4541 8.79748 13.4541 10.7424V12.0441H17.3737L16.7003 15.7248H13.4541V24C19.3959 23.2798 24 18.202 24 12.0441H23.9995Z",fill:"currentColor"}))),nNe=Object.freeze(Object.defineProperty({__proto__:null,default:N9},Symbol.toStringTag,{value:"Module"})),P9=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("g",{id:"Linkedin"},m.createElement("path",{id:"Shape",d:"M23.6999 2.75909C23.6999 1.39872 22.5971 0.295929 21.2368 0.295929H2.76308C1.40272 0.295929 0.299927 1.39872 0.299927 2.75909V21.2328C0.299927 22.5931 1.40272 23.6959 2.76308 23.6959H21.2368C22.5971 23.6959 23.6999 22.5931 23.6999 21.2328V2.75909ZM3.63848 9.12156H7.24935V20.6943H3.63848V9.12156ZM16.4313 8.83425C19.8921 8.83425 20.6797 10.9844 20.753 13.861L20.7589 14.3469V20.6942H17.1519L17.1517 14.9161C17.1477 13.5985 17.0603 11.9984 15.278 11.9984C13.4002 11.9984 13.1135 13.4611 13.1135 14.971V20.6942H9.51161V9.12143H12.9689V10.7028H13.0188L13.1052 10.5509C13.6314 9.68925 14.7739 8.83425 16.4313 8.83425ZM3.35125 5.45367C3.35125 4.30239 4.28565 3.36809 5.44404 3.36809C6.59732 3.36809 7.53556 4.30239 7.53556 5.45367C7.53556 6.60623 6.59732 7.54053 5.44404 7.54053C4.28565 7.54053 3.35125 6.60623 3.35125 5.45367Z",fill:"currentColor"}))),rNe=Object.freeze(Object.defineProperty({__proto__:null,default:P9},Symbol.toStringTag,{value:"Module"})),O9=t=>m.createElement("svg",{viewBox:"0 0 21 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("g",{id:"X",clipPath:"url(#clip0_6073_56392)"},m.createElement("path",{id:"Vector",d:"M12.4027 8.46429L19.8482 0H18.0838L11.619 7.34942L6.45547 0H0.5L8.3082 11.1136L0.5 19.9897H2.26443L9.09152 12.2285L14.5445 19.9897H20.5L12.4023 8.46429H12.4027ZM9.98608 11.2115L9.19495 10.1049L2.90018 1.29901H5.61025L10.6902 8.40562L11.4813 9.51229L18.0847 18.7498H15.3746L9.98608 11.212V11.2115Z",fill:"currentColor"})),m.createElement("defs",null,m.createElement("clipPath",{id:"clip0_6073_56392"},m.createElement("rect",{width:20,height:20,transform:"translate(0.5)"})))),oNe=Object.freeze(Object.defineProperty({__proto__:null,default:O9},Symbol.toStringTag,{value:"Module"})),M9=t=>m.createElement("svg",{viewBox:"0 0 24 26",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.7316 5.90629C16.9458 4.03307 14.5706 3.00095 12.0399 3C6.82519 3 2.5812 7.44545 2.57938 12.9097C2.57847 14.6565 3.0144 16.3615 3.84224 17.8641L2.5 23L7.51513 21.6219C8.89682 22.4117 10.4527 22.8275 12.0358 22.828H12.0399C17.2537 22.828 21.4982 18.382 21.5 12.9178C21.5009 10.2696 20.5179 7.77999 18.7316 5.90677V5.90629ZM12.0399 21.1543H12.0367C10.626 21.1539 9.24204 20.7566 8.03454 20.0063L7.74739 19.8276L4.77124 20.6454L5.56551 17.6056L5.37862 17.2938C4.5916 15.9823 4.17564 14.4664 4.17655 12.9102C4.17836 8.36876 7.70565 4.67364 12.0431 4.67364C14.1433 4.67459 16.1175 5.53232 17.6021 7.08953C19.0868 8.64627 19.9037 10.7162 19.9028 12.9168C19.901 17.4588 16.3737 21.1539 12.0399 21.1539V21.1543ZM16.3528 14.9854C16.1165 14.8614 14.9544 14.2626 14.7375 14.1799C14.5207 14.0972 14.3633 14.0559 14.2059 14.3039C14.0485 14.552 13.5954 15.1099 13.4575 15.2748C13.3196 15.4401 13.1816 15.4606 12.9453 15.3365C12.709 15.2125 11.9474 14.9511 11.0442 14.1077C10.3416 13.4509 9.86709 12.6403 9.72924 12.3922C9.59133 12.1442 9.71472 12.0102 9.83263 11.8871C9.93876 11.7759 10.069 11.5977 10.1873 11.4532C10.3058 11.3088 10.3448 11.2052 10.4237 11.0403C10.5026 10.8749 10.4632 10.7305 10.4042 10.6064C10.3452 10.4824 9.87258 9.26352 9.67524 8.76791C9.48334 8.28512 9.28833 8.3507 9.14361 8.34262C9.00571 8.33549 8.84832 8.33407 8.69046 8.33407C8.53261 8.33407 8.27674 8.39584 8.05993 8.6439C7.84312 8.89192 7.23254 9.49114 7.23254 10.7095C7.23254 11.9279 8.07946 13.106 8.19784 13.2714C8.31622 13.4367 9.86482 15.9377 12.2359 17.0107C12.7997 17.2658 13.2402 17.4184 13.5835 17.5324C14.1497 17.7211 14.665 17.6945 15.0723 17.6308C15.5264 17.5595 16.4708 17.0316 16.6677 16.4532C16.8645 15.8749 16.8645 15.3788 16.8056 15.2757C16.7466 15.1726 16.5888 15.1103 16.3524 14.9863L16.3528 14.9854Z"})),iNe=Object.freeze(Object.defineProperty({__proto__:null,default:M9},Symbol.toStringTag,{value:"Module"})),c0="size-6",sg={facebook:{displayName:"Facebook",linkGenerator:t=>`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(t)}`,icon:h.jsx(N9,{className:c0})},twitter:{displayName:"X",linkGenerator:(t,e)=>`https://twitter.com/intent/tweet?url=${encodeURIComponent(t)}&text=${encodeURIComponent(e)}`,icon:h.jsx(O9,{className:c0})},whatsapp:{displayName:"WhatsApp",linkGenerator:(t,e)=>`https://api.whatsapp.com/send?text=${encodeURIComponent(`${e} ${t}`)}`,icon:h.jsx(M9,{className:"size-8"})},linkedin:{displayName:"LinkedIn",linkGenerator:(t,e)=>`https://www.linkedin.com/shareArticle?mini=true&url=${encodeURIComponent(t)}&title=${encodeURIComponent(e)}`,icon:h.jsx(P9,{className:c0})}};function F0e(t){const{socialMedia:e,className:n,loading:r,disabled:o,onClickSocialMedia:i,includeTitle:s}=t,a=sg[e].icon,c="56-xl",u="subtle-dimmed-inverted",d=sg[e].displayName,f=at("flex-1",n);return h.jsxs(Ue,{size:c,color:u,title:d,className:f,onClick:p=>i(e,p),disabled:o,children:[r?h.jsx(kt,{className:"size-8"}):a,s&&h.jsx("span",{className:"font-medium text-foreground-550 text-3xs",children:sg[e].displayName})]})}function B0e(t,e,n){if(!e)return;const r=sg[t].linkGenerator(e,"");window.open(r,"_blank")}function H0e({isOpen:t,onClose:e}){const{t:n}=He(),r=hU(),o=m.useMemo(()=>["twitter","facebook","whatsapp"],[]);return h.jsx(Kd,{isOpen:t,className:"grid size-full max-h-[640px] max-w-[640px] justify-center gap-4",onClose:e,headerText:n("common.share"),children:(r==null?void 0:r.type)==="image"&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"mx-auto mb-4 flex h-full w-fit overflow-hidden rounded-2xl",children:h.jsx("img",{src:r.url,alt:r.altText,className:"size-full object-contain"})}),h.jsx(nve,{value:r.url,title:n("share.copy"),size:"56-xl",variant:"pill",className:"w-full"}),h.jsx("div",{className:"flex w-full items-center justify-around",children:o.map(i=>h.jsx(F0e,{socialMedia:i,className:"flex flex-col gap-1",onClickSocialMedia:s=>{B0e(s,r.url)},includeTitle:!0},i))}),h.jsx("div",{className:"text-center text-foreground-550 text-2xs",children:n("share.shareImageDescription")})]})})}const z0e=m.lazy(()=>z(()=>import("./product-purchase-BX-QLk-z.js"),__vite__mapDeps([231,1,2,232,233,234,235,236,237,238,239,225])).then(t=>({default:t.ProductPurchase}))),V0e=1.25,$0e=64,G0e={opacity:0,scale:V0e,translateY:$0e},K0e={opacity:1,scale:1,translateY:0},ql="size-6",W0e=m.lazy(()=>z(()=>import("./upsell-block-CS4B43uq.js"),__vite__mapDeps([240,1,2,241]))),q0e=m.lazy(()=>z(()=>import("./price-tracking-block-jnIGWj1x.js").then(t=>t.p),__vite__mapDeps([242,1,2,243,244,245,246,247])).then(t=>({default:t.PriceTrackingBlock}))),Y0e=m.lazy(()=>z(()=>import("./composer-auto-complete-y_rmBgxo.js"),__vite__mapDeps([248,1,2]))),Q0e=m.lazy(()=>z(()=>import("./composer-actions-prompt-suggestions-DAQLOWPV.js"),__vite__mapDeps([249,1,2,250,251,252,253,254,255,256,257,258,259])).then(t=>({default:t.ComposerActionsPromptSuggestions}))),J0e=m.lazy(()=>z(()=>import("./voice-options-CzIEydkw.js").then(t=>t.v),__vite__mapDeps([260,1,2]))),X0e=m.lazy(()=>z(()=>import("./think-deeper-pro-subscription-DPRAwU8N.js"),__vite__mapDeps([261,1,2]))),Z0e=m.lazy(()=>z(()=>import("./over-task-quota-CVgos6OK.js"),__vite__mapDeps([262,1,2,263])).then(t=>({default:t.OverTaskQuota}))),eEe=m.lazy(()=>z(()=>import("./computer-use-task-closed-DqX5oLRQ.js"),__vite__mapDeps([264,1,2,265,266,267,268,269,270,271,263])).then(t=>({default:t.ComputerUseTaskClosed}))),tEe=m.lazy(()=>z(()=>import("./safety-risk-card-B82OdvVB.js"),__vite__mapDeps([272,1,2,273,263])).then(t=>({default:t.SafetyRiskCard}))),nEe=m.lazy(()=>z(()=>import("./add-to-page-BB6TUIrU.js"),__vite__mapDeps([274,1,2])).then(t=>({default:t.AddToPage}))),rEe=m.lazy(()=>z(()=>import("./cross-selling-strip-consumer-DIz85p53.js"),__vite__mapDeps([275,1,2,241]))),oEe=m.lazy(()=>z(()=>import("./composer-prompt-review-DJfiBtRG.js"),__vite__mapDeps([276,1,2,277]))),l0=m.lazy(()=>z(()=>import("./composer-action-DCqABhNR.js"),__vite__mapDeps([263,1,2]))),iEe=m.lazy(()=>z(()=>import("./biometric-consent-Dxtk_1He.js"),__vite__mapDeps([278,1,2])).then(t=>({default:t.BiometricConsent}))),sEe=m.lazy(()=>z(()=>Promise.resolve().then(()=>cve),void 0)),aEe=m.lazy(()=>z(()=>import("./daily-briefing-chat-3MbAqTmN.js"),__vite__mapDeps([279,1,2,280,281])).then(t=>({default:t.DailyBriefingChat}))),cEe=m.lazy(()=>z(()=>import("./composer-sign-in-DmvZ0ATv.js"),__vite__mapDeps([282,1,2,283]))),lEe=m.lazy(()=>z(()=>import("./daily-briefing-composer-player-DCDAhbPN.js"),__vite__mapDeps([284,1,2,269,265,266,267,268,281])));function uEe(){var kk,xk;const{t}=He(),e=me("image-copy-paste"),n=O(rl),r=me("pay-native-checkout"),o=me("shopping-card"),i=me("multiplecharacters"),s=me("anonymousattachmentupload"),a=me("onedrive-file-upload"),c=me("ds-editprompt"),u=!lb(),d=O(zL),f=me("multi-file-upload"),p=me("dr-nano-single-file-upload"),g=jue(),v=ui(),b=tD(),y=eCe(),C=$t(),S=O(In),w=ho(),E=O(Ra),I=pr({breakpoint:"sm"}),T=Gv({breakpoint:"h760"}),A=Gv({breakpoint:"h550"}),_=RA(),U=KCe(),k=LA(),G=GCe(),[K,ie]=m.useState(null),P=_e(SM),[$,Z]=lt(bl),x=O(Hde),L=O(zde),ne=O(iG),se=O(AM),fe=O(nG),X=O(yw),[ge,Oe]=m.useState(!1),Se=fe||ge,{startConversationDisabled:Fe}=_p(),Re=O(ks),[Ve,he]=m.useState(!1),[B,Pe]=lt(zr),Q=_e(sue),[oe,we]=lt(WJ),[N,te]=lt(kp),Ce=_e(TM),D=O(ds),Y=(D==null?void 0:D.type)==="popup",Ie=tCe(),Je=Y||Ie,it=o9(),st=(kk=ye.instance().config().composer)==null?void 0:kk.enableAppShadow,{isPlaying:Be,pause:$e,onToggleVoiceSettings:wt,resetAllTimers:nn}=Z6(),_t=xbe(),rn=cCe(),Rn=Zbe(),j=Pr(),ue=m.useRef(null),q=m.useRef(null),ce=m.useRef(null),[De,Ge]=m.useState(!1),[Me,F]=m.useState(null),re=m.useCallback(be=>{F(be)},[F]),de=m.useCallback(()=>{Ge(!1)},[Ge]),ke=me("imagegenv3"),ve=me("logged-out-sharing"),Ke=me("remove-prefill-space-after-prompt-cmc"),{isMediaViewerOpen:tt,closeMediaViewer:ot,isPictureInPictureSupported:vt,triggerPictureInPicture:Kn,showOneLineComposerWhenMediaViewerOpen:bn,contentComposerType:lr,contentPageType:tr}=Aa(),Tn=hU(),di=lr===Ov.IMAGE_VIEWER,fo=lr===Ov.CLOSE_BUTTON,Na=_e(Ap),Mr=C.endsWith("/talk"),Dn=C.endsWith("/daily"),Pa=me("1s-dbchat"),jp=me("discover-composer-off"),Nn=Sb(),Jd=Dn||Nn,Xd=Ybe(),Ns=fb(),Ps=C.startsWith("/chats")&&!Mr,Oa=C.startsWith("/shares"),nt=tr==="weather",H=O(qh),{login:Ne}=Vd(),We=B==="dialog",Gt=r&&B==="checkout",Wn=Vbe(),[Dt]=lt(wn),[ur,po]=m.useState(!1),Ma=O(Jj),on=K6(),{isCentralComposerEnabled:Up,isAutoSuggestEnabled:Fp,isStarterPromptsEnabled:J7,isWidgetSectionEnabled:X7,isAppearanceOnHomeEnabled:Z7}=Dp(),{floatingStyles:e8,edgeTabMenuRefs:xb,isMultiTabsMenuExpanded:t8,setIsMultiTabsMenuExpanded:JA,multiTabsMenuMode:n8,setMultiTabsMenuMode:XA,handleMentionEvent:r8,handleMultiTabsMenuSaveBtnEvent:o8,handleMultiTabsMenuCloseBtnEvent:i8,handleUserInputEnterEvent:s8,handleUserInputKeydownEvent:ZA}=mbe(),a8=O(tfe),Zd=Dt==="computerUse",Al=Up&&(!B||B==="biometric-consent"),ek=Fp&&!B&&!Zd,tk=G==="autosuggest"&&ek,nk=m.useId(),c8=O(gT),l8=J7&&(!B||B==="biometric-consent")&&!Zd&&!c8&&(!A||I),u8=Al&&X7&&!Zd&&!I&&!T,eh=m.useRef(null),d8=Jv("programmatic"),h8=!Mr&&!Dn&&!Nn&&!Al&&!Gt&&!nt;let rk=!0;const Rb=(Ns||Ps||Xd||Oa)&&(!B||B==="biometric-consent")&&!(tt&&!bn);Rb&&((xk=ye.instance().config().composer)!=null&&xk.disableTextInput)&&(rk=!1);const ok=Gt,Nb=O(G_),ik=O(aG),[Pb,sk]=lt(lue),kl=O(uue);me("multiple-research-tasks-in-conversation");const xl=Gde(),th=O(Ar),La=th==="side-by-side"&&(xl==null?void 0:xl.type)==="computerUse",ak=Eb(),Bp=La&&!wU(xl.status),nh=La&&Qde(xl),f8=La&&Jde(xl),p8=!C.endsWith("/agents")&&!Dn&&!Xd&&!Oa&&!Z7&&!tt&&!g,ck=nh||La||Dn||kl||tt,m8=m.useCallback(()=>{const be=[];if(ue.current){const qe=ue.current.getTextAreaRef();qe.current&&be.push(qe)}return be},[ue]),lk=!(tt&&!bn)&&!Mr&&(!B||B==="daily-briefing-chat"),Hp=ne||!lk||Bp||nh||f8||kl,Ob=Rbe(lk),rh=O(cue),Os=O(aue),[Mb,uk]=lt(Qj),Lb=nl(),oh=B==="prompt-sign-in"||B==="prompt-3p-sign-in"||B==="prompt-location"||B==="prompt-review"||B==="confirm-link-navigation"||B==="cross-promo-card"||B==="shopping-upsell-card"||B==="shopping-price-tracking"||B==="add-to-page"||B==="safety-risk-card"||B==="computer-use-task-closed"||B==="over-task-quota"||B==="daily-briefing-chat"||B==="upsell-microsoft-account-for-pro-subscription"||B==="biometric-consent"||B==="finance-watchlist-unfollow-toast",dk=!Mr&&B!=="daily-briefing-player"&&B!=="audioSettings"&&B!=="reasoning-mode-pro-subscription"&&B!=="checkout"&&!oh&&!(tt&&!bn),g8=m.useCallback(be=>{Xs(be)},[]),v8=()=>{var qe;const be=((qe=ye.instance().config().composer)==null?void 0:qe.homeButtonState)??"enabled";return be!=="enabled"?be:Ns?"disabled":"enabled"},y8=m.useCallback(()=>{var be;(be=ue.current)==null||be.focus(),Ja(!0)},[]),b8=m.useCallback(()=>{q.current&&(q.current.value="")},[]),Rl=m.useCallback((be,qe)=>{Z({isOpen:!0,scenario:qe??null,reason:be})},[Z]),C8=m.useCallback(()=>{Rl("fileUpload")},[Rl]),{processUploadedFiles:hk,processUploadedLocalFiles:Ms,isUploadingAttachments:S8,uploadedAttachments:Nl,resetFileUpload:E8,removeAttachment:Db}=jbe(y8,Xs,b8,C8),w8=O(efe),hi=Nl.filter(({error:be})=>!be),jb=(hi.length>0||Ob)&&!Mr,fk=hi.length>0,I8=S8,pk=!!(k.trim().length>0||fk)&&!Hp,mk=!!((K&&K.length>0)===!0||I8||Se||X||k.trim().length===0&&Dt==="computerUse"),gk=f&&hi.length>=Rw,[T8,_8]=m.useMemo(()=>{const{reason:be}=$;return be?[t(`signInPrompt.${be}Header`,t("signInPrompt.header")),t(`signInPrompt.${be}Text`,t("signInPrompt.text"))]:[t("signInPrompt.header"),t(ve?"signInPrompt.textV2":"signInPrompt.textV3")]},[ve,$,t]),[vk,A8]=m.useState({onSubmitCallback:null,onCancelCallback:null}),[Ub,Fb]=m.useState(!1);m.useEffect(()=>{!tt&&Ub&&Fb(!1)},[tt,Ub]);const k8=m.useCallback(async()=>new Promise(be=>{if(Ye($L)||hi.length===0){be(!0);return}Pe("biometric-consent"),A8({onSubmitCallback:()=>{Pe(null),be(!0)},onCancelCallback:()=>{Pe(null),be(!1)}})}),[hi,Pe]),x8=m.useCallback(be=>{var jt;if(!ZA(be)&&be.key==="ArrowDown"&&(jt=ue.current)!=null&&jt.contains(document.activeElement)&&eh.current){be.preventDefault();const xt=eh.current.querySelector("button");xt&&xt.focus()}},[ZA]),Bb=async be=>{var qe,jt;if(Oa&&await VP(),!pk||!k&&!fk||mk){await pc.onSubmitMessageBlocked();return}ke&&!await k8()||(Hw(),B8?(jt=ue.current)==null||jt.focus():(qe=ue.current)==null||qe.blur(),await W8(be??k))},R8=m.useCallback(async()=>{await b()},[b]),{launchAudioCall:Hb,startAudioCallIfNotStartedAlready:zb,endAudioCall:ih,toggleAudioInput:N8,hasOutputVolume:Vb,inputVolume:P8,isInputMuted:O8,isAudioDeepLink:M8,canInitAudio:L8}=S0e({isAudioCall:Mr,onCallTerminated:R8,onMute:()=>En({source:"audioCall",scenario:"mute"})});m.useEffect(()=>{x&&(Pe(Lb?"prompt-3p-sign-in":"prompt-sign-in"),$.isOpen&&Z({...$,isOpen:!1,reason:$.reason??(ne?"overTurnLimit":null)}),Ja(!0))},[Pe,Z,x,$,Lb,ne]),m.useEffect(()=>{L&&("geolocation"in navigator?setTimeout(()=>{Pe("prompt-location"),Ja(!0),sr("hasBeenPromptedForLocation","true"),V.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"seen"}})},zz):V.trackEvent({name:"system",data:{eventName:"geolocationUnavailable"}}))},[Pe,L]),m.useEffect(()=>{Jd?Pe("daily-briefing-player"):Je?(Ja(!0),Pe("cross-promo-card")):Pe(nh?"safety-risk-card":Bp?"computer-use-task-closed":null)},[Pe,Je,Bp,nh,Jd]);const $b=m.useRef(null),D8=bb(be=>{const qe=document.getElementById("app");qe&&(Q(be.height),qe.style.setProperty("--composer-container-height",`${be.height}px`))}),j8=()=>{Bo(),we(void 0)},yk=()=>{Ve&&(zb(),he(!1))},Bo=()=>{if(Dn&&B==="daily-briefing-chat"&&(Pe("daily-briefing-player"),Hw()),B==="prompt-3p-sign-in"&&(Nn||Dn)&&Pe("daily-briefing-player"),!(ne||Dn||Nn||Bp||nh)){if(We&&(Os!=null&&Os.closeDialogCallback)){Os.closeDialogCallback();return}B==="prompt-review"&&bSe(Ye(ft),"dismissed"),B==="cross-promo-card"&&it(),B==="audioSettings"&&yk(),Pe(null),B==="prompt-sign-in"&&$.scenario&&Z({isOpen:!1,scenario:null})}},Gb=m.useCallback(async()=>{ih(),Na("bottom"),await b()},[b,ih,Na]);m.useEffect(()=>{ye.instance().config().endAudioOnVisibilityHidden&&!ik&&(Be?$e==null||$e():Mr&&Gb())},[Gb,Mr,Be,$e,ik]);const bk={title:t("composer.endAudioCall"),icon:h.jsx(ko,{className:ql,"aria-hidden":!0}),isVisible:!0,onClick:Gb},U8=fbe(),Ck=()=>{Dn||Nn?$e==null||$e():Mr&&ih(),he(!0)},zp=_e(cb),Kb=(Dt==="chat"||Dt==="reasoning"||Dt==="smart"||Dt==="research"&&p)&&!La,Kr=Dt==="research"?vb:wa,F8=Pme(Kr);m.useEffect(()=>{var qe;const be=Object.keys(Kr);for(const[jt,xt]of Nl.entries())be.includes(((qe=xt.file)==null?void 0:qe.type)??"")||Db(jt)},[Kr,Nl,Db]);const B8=NA(),dr=wA(),H8=dr&&(Dt==="chat"||Dt==="research"||Dt==="computerUse"),z8=dr&&Ma===null,sh=dr&&!Mr&&!tt,ah=m.useCallback(()=>{zp(null)},[zp]);m.useEffect(()=>{ah()},[dk,ah]),m.useEffect(()=>{ig(k&&Nb?"autosuggest":Zd&&(!k||dr)?"actions-autosuggest":"starter-prompts")},[Nb,k,dr,Zd]),Xc({onOutsideEvent:()=>{Bo()},elements:[$b],includeScroll:!1,invokeOnce:!1}),Xc({onOutsideEvent:Gh,elements:[$b,eh],includeScroll:!1,invokeOnce:!1});const Sk={title:t("composer.closeVoiceSettings"),icon:h.jsx(ko,{className:ql,"aria-hidden":!0}),isVisible:!0,onClick:qb},Vp={title:t("imageCard.composer.closeImageViewer"),icon:h.jsx(ko,{className:ql,"aria-hidden":!0}),isVisible:!0,onClick:ot},Ek={title:t("imageCard.composer.shareImageViewer"),icon:h.jsx(G6,{className:ql,"aria-hidden":!0}),isVisible:!0,onClick:()=>{Fb(!0)}},wk={title:t("imageCard.composer.downloadImageViewer"),icon:h.jsx(hA,{className:ql,"aria-hidden":!0}),isVisible:!0,onClick:async()=>{if((Tn==null?void 0:Tn.type)==="image")try{await d6({url:Tn.url,fileName:m9()})}catch(be){const qe=be instanceof Error?be.message:"unknown error on downloading image";xw(qe)}}},V8=be=>{var xt;Ja(!0),i&&W6("idle");const{relatedTarget:qe}=be;((xt=eh.current)==null?void 0:xt.contains(qe))||setTimeout(()=>Gh(),100)},$8=be=>{ek&&be&&l9(be)},Ik=m.useCallback(async be=>{const{actionType:qe,id:jt,prompt:xt,uri:Zi,source:es}=be;switch(qe){case"prefillComposer":{if(xt){jt&&x9({prompt:xt,type:jt,source:es});const mo=Ke?xt:`${xt} `;Om({prompt:mo})}break}case"sendMessage":{if(xt)try{Oe(!0),await pc.submitMessage({text:xt,inputMethod:"text"})}finally{Oe(!1)}break}case"deepLink":{Zi&&Zi==="copilotn://voiceCall"&&await Hb();break}}},[Ke,Hb]),G8=(be,qe)=>{R9({prompt:be,prefix:qe}),Bb(be)},Tk=m.useCallback(be=>{Om({prompt:be}),te(null),Ce(null)},[te,Ce]);m.useEffect(()=>{((N==null?void 0:N.source)==="promptInUrl"||(N==null?void 0:N.source)==="edgeOnAskCopilot")&&Tk(N.prompt)},[N,Tk]);const Wb=m.useCallback((be,qe)=>{const{scenario:jt,reasonIfSignInError:xt}=qe;be.message==="not-signed-in"?Rl(xt,jt):Xs(l6(be.message))},[Rl]),K8=me("local-agents"),W8=async be=>{var es,mo,Rk,Nk;const qe=j0e(be),jt=D0e(be,Nl),xt=be.trim(),Zi=Dt==="research"&&c?{research:{awaitUserConfirmation:!0}}:void 0;if(B!=="daily-briefing-chat"&&(E8(),Ja(!0),f9(!1),P(!0),Pe(null)),Gh(),K8){if(xt.startsWith("/agent")){await y();return}if(C.endsWith("/agents"))return}B!=="daily-briefing-chat"&&!g&&await b();try{Oe(!0);let Ls;_t&&(Ls=_t),rn&&(Ls=rn),Rn&&(Ls=Rn),await pc.submitMessage({text:xt,filesWithAttachment:Nl,inputMethod:"text",scenario:qe??void 0,customData:jt??void 0,reference:Ls,context:Zi})}catch(Ls){if(Ls instanceof Error){let Pk={};hi.length>0&&(Pk={eventInfo_uploadFileSize:((mo=(es=hi[0])==null?void 0:es.file)==null?void 0:mo.size)??0,eventInfo_uploadFileType:((Nk=(Rk=hi[0])==null?void 0:Rk.file)==null?void 0:Nk.type)??"",eventInfo_numDocumentsUploaded:hi.length}),V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:Ls.message,eventInfo_details:"Error submitting message",...Pk}}),Wb(Ls,{reasonIfSignInError:"fileUpload"})}else V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitMessage",eventInfo_errorMessage:"Unknown error",eventInfo_details:"Error submitting message"}}),Xs({title:t("composer.errors.default.title"),message:t("composer.errors.default.message")})}finally{Oe(!1),U0e()}},ch=m.useCallback(be=>{const qe=!j&&!s;return qe&&Rl("fileUpload",be),qe},[j,s,Rl]),_k=m.useCallback(()=>{var be;ch()||(be=q.current)==null||be.click()},[ch]);m.useEffect(()=>{if(Hp||!e)return()=>{};const be=async qe=>{const{file:jt,error:xt}=Dme(qe);(jt??xt)&&(qe.preventDefault(),xt?Wb(xt,{reasonIfSignInError:"fileUpload"}):jt&&Ms({rawFiles:[jt],scenario:"pasteUpload",replaceExisting:!f,supportedMimeTypes:Kr}))};return document.addEventListener("paste",be),()=>document.removeEventListener("paste",be)},[Ms,Hp,e,Wb,f,Kr]),m.useEffect(()=>{Pb!==null&&(Ms({rawFiles:[Pb],scenario:"fileUpload",replaceExisting:!f,supportedMimeTypes:Kr}),sk(null))},[Pb,Ms,sk,f,Kr]),m.useEffect(()=>{Me&&!De&&(hk({uploads:[{kind:"onedrive",item:Me,file:new File([],Me.name)}],scenario:"fileUpload",replaceExisting:!f,supportedMimeTypes:Kr}),F(null))},[Me,F,De,hk,f,Kr]),m.useEffect(()=>{Dn&&nn()},[Dn]);function q8(be){const qe=Array.from(be.target.files??[]),jt=qe[0];if(qe.length===0||!jt)return;Ms({rawFiles:f?qe:[jt],scenario:"fileUpload",replaceExisting:!f,supportedMimeTypes:Kr})}const Y8=be=>{if(!Kb||(be.preventDefault(),ch()))return;ah();const qe=be.dataTransfer.files[0],jt=Array.from(be.dataTransfer.files);qe&&Ms({rawFiles:f?jt:[qe],scenario:"fileUpload",replaceExisting:!f,supportedMimeTypes:Kr})};function qb(){po(!0),Pe(be=>be==="audioSettings"?Dn||Nn?(wt("close"),"daily-briefing-player"):(yk(),null):"audioSettings")}async function Q8(){Oa&&await VP(),En({source:"audioCallButton"}),await Hb()}m.useEffect(()=>{const be=qe=>qe==="start"?zb():ih();return Pt.on("composer:request-voice",be),()=>{Pt.off("composer:request-voice",be)}},[ih,zb]),m.useEffect(()=>{const be=()=>{var qe;(qe=ue.current)==null||qe.focus()};return Pt.on("composer:focus-input",be),()=>{Pt.off("composer:focus-input",be)}},[]);const J8=m.useCallback(()=>{var be;(be=ue.current)==null||be.focus()},[ue]),X8=L0e(J8),Z8=m.useCallback(async()=>{if(ch())return;ah();const{file:be,error:qe}=await Fle.run({});be?Ms({rawFiles:[be],scenario:"screenshot",replaceExisting:!f,supportedMimeTypes:Kr}):qe&&Xs(qe)},[ah,ch,Ms,f,Kr]),eF=async()=>{Bo(),"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(async be=>{const{latitude:qe,longitude:jt,accuracy:xt}=be.coords;V.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"shared",eventInfo_locationAccuracy:xt}}),await Hr({path:"/user/location",args:{body:{latitude:qe,longitude:jt,accuracyInMeters:xt,provider:xt<100?"gps":"wifi"}}})},be=>{V.trackEvent({name:"interaction",data:{eventName:"locationPrompt",eventInfo_action:"denied",eventInfo_error:{code:be.code,message:be.message}}}),Xs({title:t("composer.errors.location.title"),message:t("composer.errors.location.message")})},{enableHighAccuracy:!0})},tF=$6({from:"/",scenario:"voice"}),nF=()=>{const be=h.jsx(Wo,{className:"end-0",data:bk,children:bk.icon});if(B==="dismiss-audio-call-only")return be;switch(H){case"requires-account":case"signed-out":return h.jsxs(h.Fragment,{children:[be,h.jsx(EA,{className:"mx-2",title:t("voice.signUpOrLogin"),onClick:tF})]});case"time-expired-non-pro":case"time-expired-month-non-pro":return h.jsxs(h.Fragment,{children:[be,U8]});case"time-expired":case"checking-availability":case"error":case"not-in-flight":case"throttled":case"throttled-non-pro":case"region-not-available":case"time-expired-month":case"microphone-denied":case"microphone-not-found":return be;case"waiting-for-user-interaction":case"available":return h.jsx(xe.div,{className:W(B!=="audioSettings"&&"flex"),children:B==="audioSettings"?h.jsx(Wo,{className:"end-0",data:Sk,children:Sk.icon}):h.jsxs(h.Fragment,{children:[be,h.jsx(bve,{className:"mx-2",inputVolume:P8,isMuted:O8,isOutputPlaying:Vb,coachUserUnmute:M8&&!L8&&!ur,onClick:N8}),h.jsx(Pm,{children:h.jsx(Wo,{className:"start-0",data:{title:t("composer.voiceSettings"),isVisible:!0,onClick:qb},children:h.jsx(or,{url:pbe,className:ql,"aria-hidden":!0})})})]})});default:return H}},Yb=({enableActionButtons:be})=>{var es;let qe;hi.length>0?qe=t("userInput.messageRequiredPlaceholderText"):Ob?Kb?qe=t("userInput.imageDropPreviewPlaceHolderText"):qe=t("userInput.fileDropNotSupportedPlaceHolderText",{chatMode:qf(Dt)}):Oa?qe=t("userInput.continueConversationInputPlaceholderText"):d!=null&&d.name&&i?qe=t("userInput.characterPlaceholderText",{character:d.name}):kl?qe=t("research.placeholder"):Pa&&Dn&&(qe=t(B==="daily-briefing-chat"?"userInput.dailyChatInputPlaceholderText":"userInput.dailyComposerInputPlaceholderText"));const jt=(es=ye.instance().config().composer)==null?void 0:es.smallAttachmentCard,Zi=B==="daily-briefing-player"&&Pa&&Dn?"":void 0;return h.jsxs(h.Fragment,{children:[h.jsxs(xe.div,{className:W("w-full",{"mt-2 h-auto min-h-32 px-2":jb&&!on&&!jt,"mt-2 h-[58px] px-2":jb&&!on&&jt,"h-auto":on,"h-0":!jb&&!on}),layout:!0,children:[w8&&h.jsx(xSe,{onRemove:Db,attachments:Nl}),on&&a8&&h.jsx(xe.div,{className:"z-10 mt-2 w-full px-2","data-testid":"browser-tabs-preview",children:h.jsx(KSe,{onClick:()=>{XA("update"),JA(!0)}})})]}),h.jsx(MA,{ref:ue,className:W("w-auto grow",dr&&!Dn&&"mt-1"),disabled:Hp,disabledClassName:Zi,inputValue:k,errorMessage:K,onClick:async()=>{p8&&(Ns&&dt({source:"composerInput",scenario:"clickNavigateToChat",pageName:"discover"}),await b())},onBlur:V8,onChange:mo=>p9(mo),onFocus:$8,onEnter:async()=>{s8()||await Bb()},onKeyDown:x8,onMentionIfEnabled:on?r8:void 0,setInput:Bw,setError:ie,placeholder:qe,characterLimit:se,rightButtons:be?[h.jsx(_P,{config:Ak()},"composer-action-button")]:void 0,testId:"composer-input","aria-autocomplete":"both","aria-controls":tk?nk:void 0})]})},Ak=()=>{if(Se||kl)return{mode:"stop",onClick:pc.stopMessage};if(pk)return{mode:"submit",disabled:mk,onClick:Bb};if(!n&&!ck)return{mode:"microphone",onClick:Q8}};function $p(be){return be?Uve:jve}function rF(be){return be?Bve:Fve}const oF=({showChatModeSwitcherButton:be,showPlusButton:qe,showUploadFileButton:jt,homeButtonState:xt,enableInputActionButtons:Zi})=>{const es=dr?"to-stone-400/8 from-stone-400/5 dark:from-midnight-800/65 dark:to-midnight-800/65":"from-stone-400/10 to-white/35 dark:from-slate-700/35 dark:to-midnight-800/65";return h.jsx(xe.div,{className:W("relative max-h-full w-expanded-composer max-w-chat bg-gradient-to-b p-1.5",es),layout:!0,style:{borderRadius:$p(sh),boxShadow:Re==="dark"?k6:A6},ref:xb.setReference,children:h.jsxs(xe.div,{className:W(dr?$ve:Vve),layout:!0,style:{borderRadius:rF(sh)},children:[h.jsx(xe.div,{className:W(Hve,zve,Ob?"before:opacity-100 before:delay-100 before:duration-200":"before:opacity-0"),layout:!0,onDragOver:mo=>mo.preventDefault(),onDrop:mo=>Y8(mo),children:Yb({enableActionButtons:Zi})}),!Zi&&h.jsxs(xe.div,{className:W("relative bottom-0 flex justify-between pb-0.5",dr?"mt-1 pe-2.5 ps-1.5":"px-2"),layout:!0,children:[h.jsxs("div",{className:"flex gap-1",children:[h.jsx(wye,{state:xt}),h.jsxs("div",{className:"flex gap-2",children:[be&&h.jsx(Eye,{disableChatModeSwitcher:!ck}),H8&&h.jsx(P0e,{onPrefillComposerInput:mo=>{Om({prompt:mo})},disabled:Se||kl}),z8&&h.jsx(dye,{disabled:Se||kl})]})]}),h.jsxs("div",{className:"flex gap-2",children:[qe&&h.jsx(QSe,{startNewChatDisabled:Fe,onStartNewConversation:X8,onSelectFileIfEnabled:Kb?_k:void 0,uploadButtonDisabled:gk,onSelectOneDriveFileIfEnabled:(S==null?void 0:S.provider)==="microsoft"&&a?()=>{Ge(!0),zp(null)}:void 0,onTakeScreenshot:Z8,onSelectUserOpenedTabsIfEnabled:on?()=>{zp(null),XA("add"),JA(!0)}:void 0}),jt&&h.jsx(M0e,{selectFile:_k,disabled:gk}),h.jsx(_P,{config:Ak()})]})]})]})})},iF=async()=>{$.scenario&&(En({source:"signin",scenario:$.scenario}),Z({isOpen:!1,scenario:null})),Lb?await v({from:"/conversations",to:"/login"}):await Ne({provider:"microsoft"})};return!Wn||!rk||Ns&&jp&&!tt?null:h.jsxs(h.Fragment,{children:[h.jsx(H0e,{isOpen:Ub,onClose:()=>Fb(!1)}),ok&&h.jsx("div",{className:W("fixed inset-0 size-full bg-stone-850/30 backdrop-blur-[10px] dark:bg-midnight-850/70")}),h.jsxs("div",{"data-testid":"composer",ref:D8,className:W("pointer-events-none absolute bottom-0 flex",Al&&"sm:bottom-1/2 sm:translate-y-1/2 sm:pt-36",Zt.composer,th==="side-by-side"&&Ps&&w&&!ak&&"mb-2",th==="side-by-side"&&Ps&&!ak&&"w-1/4 min-w-chat-side-by-side",th==="side-by-side"&&Ps&&"end-0 pe-1",(th==="chat-only"||I||!Ps)&&"w-full"),children:[h.jsx("input",{type:"file",accept:F8.join(","),className:"hidden",ref:q,onChange:q8,"aria-hidden":"true",multiple:f}),h.jsx(xn,{children:h8&&h.jsx(Ive,{dynamicHeight:B===null&&!Ns})}),h.jsxs(xe.div,{className:W("relative flex w-full flex-col-reverse items-center px-3 sm:flex-col",Al?"sm:mb-0":"sm:mb-8",st?"mb-3":"mb-4",(Dn||Nn)&&"min-w-72"),initial:u?"enter":!1,animate:"animate",variants:{enter:G0e,animate:K0e},transition:db,style:TI,children:[u8&&h.jsx(Ln,{className:"pointer-events-auto flex h-[250px] w-full max-w-chat justify-center px-2 pb-4",initial:u?"initial":!1,children:h.jsx(FSe,{onWidgetClick:Ik})}),h.jsxs(oO,{transition:U?Jue:{duration:0},children:[h.jsxs(xe.div,{className:W("relative max-h-full min-h-composer min-w-16 max-w-chat rounded-5xl",on&&"z-40",w&&E&&!Al&&!_&&"md:top-2"),children:[i&&dk&&h.jsx(Rve,{}),h.jsx(xe.div,{className:"absolute inset-0",layout:!0,style:{borderRadius:$p(sh),boxShadow:WCe(Re,dr)}}),h.jsx(xn,{children:Vb&&h.jsx(TP,{})}),h.jsx(xe.div,{className:W("relative",_H),layout:!0,style:{borderRadius:$p(sh),boxShadow:qCe(Re,dr)},children:h.jsxs(xe.div,{className:W("pointer-events-auto relative flex flex-col overflow-hidden contrast-more:border-2",We&&"max-w-72",ok&&ra),"data-testid":"composer-content",ref:$b,layout:!0,style:{borderRadius:$p(sh),boxShadow:YCe(Re)},children:[h.jsx(xn,{children:Vb&&h.jsx(TP,{isNested:!0})}),h.jsxs(xn,{children:[B&&B!=="daily-briefing-player"&&B!=="dismiss-audio-call-only"&&h.jsxs(xe.div,{className:W(!We&&!oh&&B!=="reasoning-mode-pro-subscription"&&"border-b border-black/10 dark:border-white/10",B==="reasoning-mode-pro-subscription"&&"sm:w-think-deeper-pro-subscription",B==="audioSettings"&&"w-settings",oh&&B!=="daily-briefing-chat"&&"w-prompt-sign-in",oh&&(B==="computer-use-task-closed"||B==="safety-risk-card")&&"max-w-single-image",B==="daily-briefing-chat"&&(E?"min-w-chat-side-by-side bp-960:max-w-full lg:w-expanded-composer":"w-expanded-composer")),layout:!0,children:[B!=="dialog"&&h.jsxs(xe.div,{"data-testid":"audio-settings-dialog",className:W("t-custom-scrollbar max-h-expanded-section overflow-auto",B==="audioSettings"&&"px-2 py-4"),layout:!0,initial:ct,animate:{...Lt,transition:{delay:Ro.default}},ref:ce,children:[h.jsx(xn,{children:oh&&h.jsxs(Pm,{children:[B==="biometric-consent"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{"aria-hidden":!0}),children:h.jsx(iEe,{onSubmit:vk.onSubmitCallback,onCancel:vk.onCancelCallback})}),B==="prompt-sign-in"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(l0,{header:T8,text:_8,primaryAction:{title:t("common.loginText"),onClick:iF},testid:"prompt-sign-in-composer-action",secondaryAction:ne?void 0:{onClick:Bo,title:t("common.maybeLater"),testid:"maybe-later-button"}})}),B==="prompt-3p-sign-in"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(cEe,{dismiss:Bo})}),B==="upsell-microsoft-account-for-pro-subscription"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(sEe,{dismiss:Bo,source:"Composer"})}),B==="daily-briefing-chat"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(aEe,{dismiss:Bo,inputUI:Yb({enableActionButtons:!0})})}),B==="prompt-location"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(l0,{header:t("locationPermission.header"),text:t("locationPermission.text"),primaryAction:{title:t("locationPermission.share"),onClick:eF},secondaryAction:{onClick:Bo,title:t("common.maybeLater")}})}),B==="confirm-link-navigation"&&Mb&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(l0,{showImage:!1,header:t("composer.linkConfirmation.header"),text:t("composer.linkConfirmation.text",{url:Mb}),primaryAction:{title:t("common.continue"),onClick:()=>{En({source:"linkNavigationConfirmButton"}),window.open(sa(yf(Mb)),"_blank",d8),Bo(),uk(void 0)}},secondaryAction:{onClick:()=>{Bo(),uk(void 0)},title:t("common.cancel")}})}),B==="prompt-review"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(oEe,{})}),B==="cross-promo-card"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(rEe,{variant:"aggressive"})}),o&&B==="shopping-upsell-card"&&h.jsx(m.Suspense,{fallback:h.jsx(GP,{}),children:h.jsx(W0e,{onDismiss:()=>Pe(null)})}),B==="shopping-price-tracking"&&oe&&h.jsx(m.Suspense,{fallback:h.jsx(GP,{}),children:h.jsx(q0e,{content:oe.data,messageId:oe.messageId,cardType:oe.cardType,onConfirm:()=>Pe("shopping-upsell-card"),onCancel:j8})}),B==="add-to-page"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(nEe,{onClose:Bo})}),B==="safety-risk-card"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(tEe,{})}),B==="computer-use-task-closed"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(eEe,{})}),B==="over-task-quota"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(Z0e,{})})]})}),B==="audioSettings"&&h.jsx(Pm,{children:h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(J0e,{onVoiceSelected:Ck,onVoiceSpeedChange:Ck})})}),B==="reasoning-mode-pro-subscription"&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(X0e,{})}),Gt&&h.jsx(Pm,{children:h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex max-h-expanded-section w-prompt-sign-in flex-col overflow-auto rounded-t-5xl p-5 sm:w-checkout-composer",children:h.jsx("div",{className:"flex h-expanded-composer-fallback items-center justify-center",children:h.jsx(kt,{className:"size-12"})})}),children:h.jsx(z0e,{})})})]}),We&&rh&&Os&&h.jsx(Kve,{titleKey:rh.titleKey,textKey:rh.textKey,buttonTextKey:rh.buttonTextKey,onClick:rh.onClick,button:Os.button,cancelButton:Os.cancelButton,closeDialogCallback:Os.closeDialogCallback})]}),(Dn&&B!=="daily-briefing-chat"||Nn)&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-composer w-daily-briefing items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(lEe,{onDismissAudioSettingClick:()=>qb(),isPodcast:Nn,inputUI:Pa&&!Nn?Yb({enableActionButtons:!1}):void 0})}),Mr&&(!B||B==="audioSettings"||B==="dismiss-audio-call-only")&&h.jsx("div",{className:"flex justify-center p-2",children:nF()}),Rb&&oF({showChatModeSwitcherButton:!dr,showPlusButton:!dr,showUploadFileButton:dr&&!n&&Dt!=="computerUse",homeButtonState:La||dr?"hidden":v8(),enableInputActionButtons:tt&&bn||dr&&La}),tt&&fo&&h.jsxs(xe.div,{className:W("relative flex max-h-full max-w-chat justify-center",!B&&"p-2",!We&&"h-composer"),layout:!0,children:[h.jsx(Wo,{data:Vp,children:Vp.icon}),vt&&h.jsx(Zye,{onClick:Kn})]}),tt&&di&&h.jsxs(xe.div,{className:W("relative flex max-h-full max-w-chat justify-center",!B&&"p-2",!We&&"h-composer"),layout:!0,children:[(Tn==null?void 0:Tn.type)==="image"&&Tn.shareable&&h.jsx(Wo,{data:Ek,children:Ek.icon}),(Tn==null?void 0:Tn.type)==="image"&&Tn.downloadable&&h.jsx(Wo,{data:wk,children:wk.icon}),h.jsx(Wo,{data:Vp,children:Vp.icon})]}),De&&h.jsx(_0e,{onPick:re,onClose:de,onError:g8})]})]})})]}),Al&&h.jsxs(Ln,{id:G,className:W("pointer-events-auto flex h-[150px] w-full max-w-chat flex-none items-end px-2 sm:flex-initial sm:items-start",Zt.composerBottomSlot),delay:.2,initial:u?"initial":!1,children:[tk&&h.jsx(m.Suspense,{fallback:null,children:h.jsx(Y0e,{id:nk,dataResponse:Nb,onClick:(be,qe)=>G8(be,qe),onHighlight:be=>Bw(be),onDismiss:Gh,className:"mb-3 sm:mb-0 sm:mt-3",ref:eh})}),G==="actions-autosuggest"&&h.jsx(m.Suspense,{fallback:null,children:h.jsx(Q0e,{onClick:be=>Om({prompt:be})})}),G==="starter-prompts"&&l8&&h.jsx(OSe,{className:"sm:mt-8",onWidgetClick:Ik})]}),on&&t8&&Rb&&h.jsx(Xye,{onSave:o8,styles:e8,onRef:xb.setFloating,onClose:i8,outsideClickElements:m8(),mode:n8,originElement:xb.reference})]})]})]})]})}function L9(t){const e=me("force-cookie-banner-location");return(t&&cy.includes(t))===!0||e}function dEe(t){const{isChecked:e,label:n,description:r,className:o,onChange:i,accessory:s,disabled:a}=t,c=m.useId(),[u,d]=m.useState(!1),f=()=>d(!0),p=()=>d(!1),{focusable:g}=Ed({autoRestoreFocus:!0,forceFocus:!0});let v=e?"bg-system-green-400":"bg-black/20 dark:bg-white/20";return a&&(v="bg-black/20 after:bg-white/40 dark:bg-white/20 dark:after:bg-black/40"),h.jsxs("label",{className:W("flex items-center justify-between gap-4",!a&&"cursor-pointer",o),htmlFor:c,ref:g.ref,children:[h.jsxs("div",{className:"flex flex-1 flex-col",children:[h.jsx("span",{className:"text-foreground-800 text-sm",children:n}),r&&h.jsx("span",{className:"font-medium text-foreground-450 text-xs",children:r})]}),h.jsxs("span",{className:"flex flex-row items-center gap-2",children:[s,h.jsx("input",{id:c,type:"checkbox",title:n,checked:e,onChange:b=>i(b.target.checked),onFocus:f,onBlur:p,className:"sr-only",disabled:a}),h.jsx("div",{className:W("relative h-6 w-10 rounded-full","after:absolute after:start-[2px] after:top-[2px] after:size-5 after:rounded-full after:transition-all contrast-more:forced-color-adjust-none",v,!a&&"after:bg-white after:shadow-switch after:hover:scale-110 after:active:w-6",e&&"after:translate-x-4",e&&!a&&"after:active:translate-x-3",u&&"outline")})]})]})}function hEe(){const t=ci("kill-cookie-banner"),e=O(Vr),[n,r]=lt(VI),[o,i]=m.useState("main"),[s,a]=m.useState(!1),[c,u]=m.useState(!1),[d,f]=m.useState(!1),p=L9(e),g=!!iM(),v=!t&&p&&!g&&!n;if(m.useEffect(()=>{v&&V.trackEvent({name:"system",data:{eventName:"cookieBannerShown",eventInfo_region:e}})},[e,v]),!v)return null;const b=y=>{V.trackEvent({name:"interaction",data:{eventName:"cookieBannerChoice",eventInfo_analytics:y.analytics,eventInfo_advertising:y.advertising,eventInfo_socialMedia:y.socialMedia}}),p$(y),r(!0)};return h.jsxs("div",{className:"pointer-events-none absolute inset-x-0 top-0 flex w-full justify-center p-3",children:[h.jsx("div",{className:"absolute top-0 h-3.5 w-full bg-stone-150 opacity-90 dark:bg-midnight-850"}),h.jsx("div",{className:W("relative w-full max-w-cookie-banner rounded-xl border border-black/5 shadow-xl dark:border-black/40",Qi,Zt.modal),children:h.jsxs("div",{className:"pointer-events-auto relative max-h-[90vh] overflow-auto p-5",id:"cookie-banner",children:[o==="main"&&h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("h3",{className:"text-md",children:ee("cookies.heading")}),h.jsxs("div",{className:"flex flex-col gap-x-8 gap-y-6 text-2xs sm:flex-row",children:[h.jsxs("div",{className:"flex flex-col gap-x-5 gap-y-4 text-2xs sm:flex-row",children:[h.jsx("p",{children:ee("cookies.bannerIntro")}),h.jsxs("p",{children:[ee("cookies.bannerExplanation"),h.jsx(aa,{href:pd,title:ee("cookies.privacyLink"),className:"ps-1 underline",children:ee("cookies.privacyLink")})]})]}),h.jsxs("div",{className:"flex min-w-44 shrink-0 grow flex-col gap-2",children:[h.jsx(Ue,{variant:"rect",size:"32-xs",onClick:()=>b({analytics:!0,advertising:!0,socialMedia:!0}),title:ee("cookies.accept"),testId:"cookie-banner-accept-button",children:ee("cookies.accept")}),h.jsx(Ue,{variant:"rect",size:"32-xs",onClick:()=>b({analytics:!1,advertising:!1,socialMedia:!1}),title:ee("cookies.reject"),testId:"cookie-banner-reject-button",children:ee("cookies.reject")}),h.jsx(Ue,{variant:"rect",color:"subtle-dimmed",size:"32-xs",onClick:()=>{i("more-options")},title:ee("cookies.moreOptions"),testId:"cookie-banner-options-button",children:ee("cookies.moreOptions")})]})]})]}),o==="more-options"&&h.jsxs("div",{className:"flex flex-col",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(Ue,{title:ee("common.backText"),variant:"circle",color:"subtle-dimmed",size:"32-xs",onClick:()=>i("main"),children:h.jsx($d,{className:"rotate-180"})}),h.jsx("h3",{className:"ps-3 text-md",children:ee("cookies.moreOptionsHeading")})]}),h.jsx("p",{className:"py-3 text-2xs",children:ee("cookies.essentialCookiesExplanation")}),h.jsx(u0,{label:ee("cookies.advertisingLabel"),explanation:ee("cookies.advertisingDescription"),isChecked:c,onChange:()=>u(y=>!y)}),h.jsx(u0,{label:ee("cookies.analyticsLabel"),explanation:ee("cookies.analyticsDescription"),isChecked:s,onChange:()=>a(y=>!y)}),h.jsx(u0,{label:ee("cookies.socialMediaLabel"),explanation:ee("cookies.socialMediaDescription"),isChecked:d,onChange:()=>f(y=>!y)}),h.jsx("div",{className:"flex justify-end",children:h.jsx(Ue,{variant:"rect",size:"36-sm",className:"w-fit px-7",onClick:()=>{b({analytics:s,advertising:c,socialMedia:d})},title:ee("cookies.savePreferences"),children:ee("cookies.savePreferences")})})]})]})})]})}function u0(t){const{label:e,explanation:n,isChecked:r,onChange:o}=t;return h.jsxs(h.Fragment,{children:[h.jsx(vA,{horizontalMargin:!1}),h.jsx(dEe,{label:e,className:"w-full py-2 pe-1",isChecked:r,onChange:o}),h.jsx("p",{className:"pb-4 pt-1 text-2xs",children:n})]})}function fEe(){const[t,e]=m.useState(!0),n=O(ds),r=o9(),o=m.useMemo(()=>n==null?void 0:n.images,[n]),i=m.useMemo(()=>({title:n==null?void 0:n.title,subTitle:n==null?void 0:n.subTitle}),[n]),a=O(ks)==="dark"?o==null?void 0:o.dark:o==null?void 0:o.light,c=i;m.useEffect(()=>{Su({name:"interaction",status:"Shown",eventName:"crossPromotionStripCard",source:"bottomRightCard"})},[]);const u=()=>{e(!1),r()};return n===null||!t?null:h.jsx(Ln,{mode:"sync",className:"fixed bottom-5 end-5 z-[1000]",children:h.jsxs("div",{className:W("flex h-32 w-96 flex-col justify-center rounded-5xl border border-white bg-background-100 p-3 dark:border-white/5 dark:bg-background-250"),children:[h.jsxs("div",{className:"flex items-center",children:[a&&h.jsx("img",{src:a,alt:ee("crossSelling.imageAlt"),className:"size-24 rounded-lg object-cover"}),h.jsxs("div",{className:"me-6 ms-3",children:[h.jsx("div",{className:"mb-1 text-sm",children:h.jsx("strong",{children:c.title})}),h.jsx("div",{className:"text-sm",children:c.subTitle})]})]}),h.jsx("div",{className:"absolute end-1.5 top-1.5 flex self-start",children:h.jsx(Ue,{title:ee("common.closeText"),variant:"square",color:"subtle-dimmed","aria-label":ee("common.closeText"),onClick:u,className:"flex size-8 items-center justify-center p-1.5",children:h.jsx(ko,{className:"m-0 size-5 self-center p-0"})})})]})})}function JP({icon:t,text:e,buttonText:n,buttonColor:r,buttonOnClick:o,className:i=""}){return h.jsxs("div",{className:W("flex items-center justify-between",i),children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("div",{className:"flex size-10 items-center justify-center rounded-[8.5px] border border-black/10 bg-background-200 dark:border-white/10",children:h.jsx("div",{className:"m-1 size-6",children:t})}),h.jsx("p",{className:"text-base",children:e})]}),h.jsx(Ue,{className:"h-10 w-24",color:r,title:n,"aria-label":n,variant:"rect",onClick:o,children:n})]})}const D9=t=>m.createElement("svg",{viewBox:"0 0 192 192",xmlns:"http://www.w3.org/2000/svg",fill:"none",...t},m.createElement("circle",{cx:96,cy:96,r:74,stroke:"currentColor",strokeWidth:12}),m.createElement("ellipse",{cx:96,cy:96,stroke:"currentColor",strokeWidth:12,rx:30,ry:74}),m.createElement("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:12,d:"M28 72h136M28 120h136"})),sNe=Object.freeze(Object.defineProperty({__proto__:null,default:D9},Symbol.toStringTag,{value:"Module"})),pEe="https://ercz.adj.st/home?network=1g17o7tz&campaign=1gl0zo0u&adj_t=1gl0zo0u&adj_deep_link=sapphirecopilot%3A%2F%2Fhome%3Fnetwork%3D1g17o7tz%26campaign%3D1gl0zo0u&adj_redirect_android=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.microsoft.copilot&adj_redirect_ios=https%3A%2F%2Fapps.apple.com%2Fus%2Fapp%2Fmicrosoft-copilot%2Fid6472538445%3Fct%3DCMC_Copilot_ContinueChatting%26pt%3D80423";function mEe(){const t=NA(),e=dM(),n=lM(),r=x$(),o=m.useRef(null),[i,s]=m.useState(!1),a=O(Ey),c=O(dl),u=O(_M);m.useEffect(()=>{if(!u||!a||c||t||n||r||!e){s(!1);return}const p=mn(u1),g=mn(hC),v=!jv(p,3*vg),b=oA(g,3);v||b?(s(!0),Su({name:"system",status:"Shown",eventName:"copilotMobileCrossSelling"})):Su({name:"system",status:"TriggeredButSnoozed",eventName:"copilotMobileCrossSelling"})},[c,t,n,r,a,u,e]);const d=()=>{sr(u1,Date.now().toString());const p=mn(hC);sr(hC,`${parseInt(p??"0",10)+1}`),s(!1),Su({name:"interaction",status:"Dismissed",eventName:"copilotMobileCrossSelling"})},f=()=>{window.open(pEe),s(!1),Su({name:"interaction",status:"Clicked",eventName:"copilotMobileCrossSelling"})};return i?h.jsx(Ln,{mode:"sync",className:W("relative",Zt.modal),children:h.jsx("div",{className:"fixed inset-0 grid bg-stone-850/30 dark:bg-midnight-850/70",children:h.jsx("div",{ref:o,className:"mb-0 h-fit w-full self-end justify-self-center rounded-t-3xl border border-white/10 bg-background-200 p-2 contrast-more:border-2 md:mb-5 md:w-fit md:rounded-3xl",children:h.jsxs("div",{className:"mx-3 mb-6 mt-3 flex flex-col gap-4",children:[h.jsx("div",{className:"text-md md:text-center",children:ee("crossSelling.header")}),h.jsx(JP,{icon:h.jsx(Mp,{}),text:ee("crossSelling.copilotApp"),buttonText:ee("common.open"),buttonColor:"strong",buttonOnClick:f,className:"gap-14"}),h.jsx(JP,{icon:h.jsx(D9,{}),text:ee("crossSelling.browser"),buttonText:ee("common.continue"),buttonColor:"subtle-bright",buttonOnClick:d,className:"gap-14"})]})})})}):null}function gEe({pixelUrl:t,onComplete:e}){return m.useEffect(()=>{const n=setTimeout(()=>{e()},3e3);return()=>{clearTimeout(n)}},[t,e]),h.jsx("img",{className:"hidden",src:t,width:"1",height:"1",alt:"",referrerPolicy:"no-referrer-when-downgrade",onLoad:e,onError:e})}function vEe(){const t=me("ads-pixels"),[e,n]=lt(NM),r=O(VI),o=O(Vr),i=(o&&cy.includes(o))===!0,s=m.useMemo(()=>sp(),[r]),a=!i||s.advertising;if(!t||!a)return null;const c=Object.values(e).filter(u=>u.isMounted).map(u=>u.url);return h.jsx("div",{className:"absolute start-[-9999px] top-[-9999px] size-px overflow-hidden",children:c.map(u=>h.jsx(gEe,{pixelUrl:u,onComplete:()=>n(d=>d[u]?{...d,[u]:{...d[u],isMounted:!1}}:d)},u))})}function yEe({onClick:t}){return h.jsx("div",{className:"absolute end-0 top-0 z-10 p-1 rtl:right-auto",children:h.jsx(Ue,{title:ee("product.dismiss"),"aria-label":ee("product.dismiss"),variant:"rect",color:"subtle-bright-inverted",size:"32-xs",onClick:t,children:h.jsx(ko,{className:"size-4"})})})}const bEe=["overflow-hidden","rounded-[20px]","border","border-solid","border-white/20","shadow-[0px_6px_12px_0px_rgba(0,0,0,0.08)]","backdrop-blur-[30px]","bg-acrylic-default-tint-light/95","dark:bg-acrylic-default-tint-dark/95"];function CEe(t){const{title:e,subtitle:n,dismiss:r,link:o,dismissable:i=!0,className:s,Icon:a,iconClassName:c,isRTL:u,onClick:d}=t,f=n??o?h.jsxs(h.Fragment,{children:[typeof n=="string"?`${n} `:null,o&&h.jsx("span",{className:"font-sans font-normal leading-5 text-accent-450 underline text-sm dark:text-accent-600",role:"button",tabIndex:0,"aria-label":o,children:o})]}):null;return h.jsx("div",{className:W("pointer-events-none absolute start-1/2 top-5 -translate-x-1/2",Zt.toastNotification,s),children:h.jsx(xn,{children:h.jsxs(xe.div,{className:W("pointer-events-auto","relative",bEe,d&&"cursor-pointer"),initial:{opacity:0,y:-40,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-40,scale:.98},transition:{type:"spring",stiffness:400,damping:30},onClick:d,children:[i&&h.jsx(yEe,{onClick:r}),h.jsx("div",{className:W("flex","flex-col","items-center","justify-center","py-2","ps-2","pe-1.5",{"w-[min(381px,100vw)]":!!f}),children:h.jsxs("div",{className:W("relative flex w-full items-center p-0",{"gap-x-3":a,"flex-row-reverse":a&&u}),children:[a&&h.jsx("div",{className:"flex size-16 shrink-0 items-center justify-center rounded-xl border border-black/10 dark:border-white/10",children:h.jsx(a,{className:c})}),h.jsxs("div",{className:W("flex flex-1 flex-col justify-center py-1",{"ps-4":!a&&f,"pe-10":i&&f,"px-4":!f}),children:[h.jsx("header",{className:W("flex w-full overflow-hidden",{"items-center":!!f,"items-center justify-center":!f}),children:h.jsx("h2",{className:W("font-sans text-foreground-750",{"text-base-strong":!!f,"text-sm":!f}),children:e})}),f&&h.jsx("p",{className:"w-full font-sans font-normal leading-5 text-foreground-700 text-sm",children:f}),h.jsx(gd,{msg:`${e??""} ${typeof n=="string"?n:""}`,type:"assertive"})]})]})})]})},e)})}function SEe(){const[t,e]=lt(Gd),n=hb(),r=m.useCallback(()=>{t!=null&&t.trackingArgs&&dt({source:"toastNotification",scenario:t.trackingArgs.scenario,customData:t.trackingArgs.customData})},[t]),o=m.useCallback(()=>{e(null)},[e]),i=m.useCallback(()=>{if(!(t!=null&&t.action))return;r();const{action:s}=t;s(),o()},[t,r,o]);return m.useEffect(()=>{let s;return t!=null&&t.dismissAfter&&(s=window.setTimeout(o,t.dismissAfter)),()=>clearTimeout(s)},[t,o]),t?h.jsx(CEe,{title:t.title,subtitle:t.subtitle,link:t.link,dismissable:t.dismissable,className:t.className,Icon:t.iconProvider,dismiss:s=>{s==null||s.stopPropagation(),o()},isRTL:n,onClick:t.action?i:void 0}):null}function EEe(){var o;const t=me("top-banner-upgrade-surface-app"),e=(o=ye.instance().config().uiOverrides)==null?void 0:o.showUpgradeAppTopBanner,n=t&&e;m.useEffect(()=>{n&&V.trackEvent({name:"system",data:{eventName:"upgradeSurfaceApp",eventInfo_status:"Shown"}})},[n]);const r=()=>{V.trackEvent({name:"interaction",data:{eventName:"upgradeSurfaceApp",eventInfo_status:"Clicked"}}),window.open("macappstore://apps.apple.com/app/id6738511300")};return n?h.jsxs("div",{className:"pointer-events-none absolute inset-x-0 top-0 flex w-full justify-center p-3",children:[h.jsx("div",{className:"absolute top-0 h-3.5 w-full bg-stone-150 opacity-90 dark:bg-midnight-850"}),h.jsx("div",{className:W("relative w-full max-w-cookie-banner rounded-xl border border-black/5 shadow-xl dark:border-black/40",Qi,Zt.modal),children:h.jsx("div",{className:"pointer-events-auto relative max-h-[90vh] overflow-auto p-5",id:"cookie-banner",children:h.jsxs("div",{className:"flex flex-col gap-4",children:[h.jsx("h3",{className:"text-md",children:ee("upgradeSurface.heading")}),h.jsxs("div",{className:"flex flex-col gap-x-8 gap-y-6 text-2xs sm:flex-row",children:[h.jsxs("div",{className:"flex flex-col gap-x-5 gap-y-4 text-2xs sm:flex-row",children:[h.jsx("p",{children:ee("upgradeSurface.primaryDescription")}),h.jsx("p",{children:ee("upgradeSurface.secondaryDescription")})]}),h.jsx("div",{className:"flex min-w-44 shrink-0 grow flex-col justify-center gap-2",children:h.jsx(Ue,{variant:"rect",size:"32-xs",onClick:r,title:ee("upgradeSurface.buttonText"),children:ee("upgradeSurface.buttonText")})})]})]})})})]}):null}function wEe(t,e){if(!(e!=null&&e.next)&&t>0)return null;const n={url:"/pages",isFirstPage:t===0};return e!=null&&e.next&&(n.args={cursor:e.next}),n}function IEe(t={}){const{disabled:e=!1}=t,n=ci("kill-shared-page"),r=m.useCallback(async({url:o,args:i})=>{const s={...i,...n?{}:{"api-version":"2"}};return await Gn(o,FY,{query:s,analytics:{anonymousPath:"/pages"}}).then(c=>c.data)},[n]);return FA(r,e?()=>null:wEe)}function TEe(){const t=me("pages"),e=me("pages-anonymous"),n=Pr();return{canCreatePageForSignedOut:e&&t,canCreatePage:(n||e)&&t}}function aNe(){dt({pageName:"chatPage",sectionName:"chatResponse",source:"addToPage"})}function cNe(t){dt({pageName:"addToPage",source:t})}function _Ee(){dt({sectionName:"actionMenu",source:"createNewPage"})}function AEe(t){dt({pageName:t,source:"openPage"})}function lNe(){dt({pageName:"pages",sectionName:"editBar",source:"askCopilot"})}function uNe(t,e){dt({pageName:"pages",sectionName:"suggestions",source:t==="accept"?"applyRevision":"reject",customData:JSON.stringify({eventInfo_pageId:e})})}function dNe(t){const{reaction:e,pageId:n,suggestionId:r,messageId:o,startIndex:i,endIndex:s,oldText:a,replacement:c}=t;dt({pageName:"pages",sectionName:"suggestions",source:"pagesFeedback",scenario:e,customData:JSON.stringify({eventInfo_pageId:n,eventInfo_reaction:e,eventInfo_suggestionId:r,eventInfo_messageId:o,eventInfo_startIndex:i,eventInfo_endIndex:s,eventInfo_oldText:a,eventInfo_replacement:c})})}function hNe(t){ii({feature:"page",...t})}const fNe=["createPage","addToExistingPage","openPageOnChat","openPageOnHistory","copyPage"];function pNe(t,e,n){Pc({feature:"page",scenario:t,duration:Math.round(e),customData:JSON.stringify({eventInfo_pageId:n})})}function mNe(){dt({pageName:"pages",source:"hyperlinkInPages"})}function gNe({sectionName:t,pageId:e}){dt({sectionName:t,source:"deletePage",customData:JSON.stringify({eventInfo_pageId:e})})}function vNe({sectionName:t,pageId:e}){dt({sectionName:t,source:"renamePage",customData:JSON.stringify({eventInfo_pageId:e})})}function yNe(t){V.trackEvent({name:"interaction",data:{eventName:"copilotPagesEdited",eventInfo_customData:JSON.stringify({eventInfo_pageId:t})}})}function bNe(t){const{pageName:e,sectionName:n,pageId:r}=t;dt({pageName:e,sectionName:n,source:"pagesSharing",customData:JSON.stringify({eventInfo_pageId:r})})}function CNe(t){const{sectionName:e,pageId:n}=t;dt({sectionName:e,source:"removePagesSharing",customData:JSON.stringify({eventInfo_pageId:n})})}const SNe=["pagesHistory","direct"];function ENe(t){V.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"pagesSharing",eventInfo_impressionScenario:t}})}const wNe=["responsePreviewedPage","chatCreateNewPage","chatAddToExistingPage","chatDirectToNewPage","pagesHistory","actionMenuCreateNewPage","makeACopyViewerPage","makeACopyOwnerPage","makeACopyViewOnly","makeACopyPagesHistory"];function INe(t){V.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"pages",eventInfo_impressionScenario:t}})}function TNe(t){const{pageName:e,sectionName:n,pageId:r}=t;dt({pageName:e,sectionName:n,source:"makePagesCopy",customData:JSON.stringify({eventInfo_pageId:r})})}function _Ne(){dt({pageName:"pages",source:"printPage"})}function kEe(t){V.trackEvent({name:"system",data:{eventName:"copilotImpression",eventInfo_impressionPage:"3-Pages",eventInfo_impressionScenario:t}})}function xEe(){const t=ui(),e=qv(),n=_e(Ra);return m.useCallback(async({pageId:r,closeSidebar:o,sourcePage:i,impressionScenario:s,featureLatencyInfo:a})=>{AEe(i),o&&n(!1),await t({to:"/pages/$pageId",params:{pageId:r},from:e.state.location.pathname,state:{...a,impressionScenario:s}})},[t,e.state.location.pathname,n])}const XP="/pages";async function REe(t,e){const n=await Hr({path:"/pages",args:{body:{title:t,content:e},analytics:{anonymousPath:XP}}}),r=await n.json(),o=HY.safeParse(r);if(!n.ok&&o.success)throw new Error(o.data.errorCode);try{return DY.parse(r)}catch(i){throw i instanceof dg&&kf(i,XP,!1),i}}function NEe(){const{canCreatePage:t,canCreatePageForSignedOut:e}=TEe(),{t:n}=He(),[r,o]=m.useState(!1),i=nl(),s=_e(zr),a=_e(bl),c=xEe();return{creatingPage:r,createPage:t?async({content:d,sourcePage:f,impressionScenario:p,featureLatencyInfo:g})=>{o(!0);try{const{id:v}=await REe("",d);await c({pageId:v,closeSidebar:!0,sourcePage:f,impressionScenario:p,featureLatencyInfo:g})}catch(v){v instanceof Error&&v.message==="page-count-exceeded"&&e?(kEe(f),s(i?"prompt-3p-sign-in":"prompt-sign-in"),a({isOpen:!0,scenario:"sidebarActionCreatePage",reason:"pageLimitReached"})):Xs({title:n("common.somethingWrong"),message:n("pages.errorCreatingMessage")})}finally{o(!1)}}:null}}function PEe(t){const{callback:e,signInScenario:n,onShowSignIn:r,signInReason:o}=t,i=Pr(),s=_e(bl);return(...a)=>{if(!i){s({isOpen:!0,scenario:n,reason:o}),r&&typeof r=="function"&&r();return}e(...a)}}function VA(){const{createConversation:t}=_p(),e=_e(Ap);return{startNewConversation:()=>{t(),e("center")}}}function j9(t){const{buttonSize:e}=t,{t:n}=He(),{startNewConversation:r}=VA(),{createPage:o}=NEe(),i=Pr(),s=me("pages-anonymous"),{refetch:a}=IEe({disabled:!i&&!s}),c=async()=>{_Ee(),await(o==null?void 0:o({content:"",sourcePage:"createNewPage",impressionScenario:"actionMenuCreateNewPage",featureLatencyInfo:{scenario:"createPage",startTimestamp:Date.now()}})),await a()},u=PEe({callback:c,signInScenario:"sidebarActionCreatePage",signInReason:"createPage"}),d=async()=>{!i&&s?c():u()};return h.jsx(TA,{options:{placement:"bottom-end",hideOnMenuClick:!0,roleType:"menu"},className:Qi,renderTrigger:({onClick:f,...p})=>h.jsx(Ue,{...p,title:n("sidebar.actions.menuTitle"),color:"subtle-dimmed-inverted",variant:"rect",size:e,className:"!min-w-7 !px-0",onClick:g=>{dt({source:"sidebarActionsMenu",customData:JSON.stringify({buttonSize:e})}),f(g)},children:h.jsx($d,{className:"size-3.5 rotate-90"})}),children:h.jsxs("div",{className:"flex flex-col gap-2",children:[h.jsx(Ue,{color:"subtle-dimmed-inverted",size:"40-base",variant:"rect",alignment:"start",title:n("sidebar.actions.newChat"),onClick:r,children:n("sidebar.actions.newChat")}),h.jsx(Ue,{color:"subtle-dimmed-inverted",size:"40-base",alignment:"start",variant:"rect",title:n("sidebar.actions.newPage"),onClick:()=>{setTimeout(()=>{d()},0)},children:n("sidebar.actions.newPage")})]})})}const U9=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M9.15898 16.8666C9.36292 17.0528 9.67918 17.0384 9.86536 16.8345C10.0515 16.6305 10.0371 16.3143 9.8332 16.1281L3.66535 10.4974H17.4961C17.7722 10.4974 17.9961 10.2735 17.9961 9.99736C17.9961 9.72122 17.7722 9.49736 17.4961 9.49736H3.66824L9.8332 3.86927C10.0371 3.68309 10.0515 3.36684 9.86536 3.16289C9.67918 2.95895 9.36292 2.94456 9.15898 3.13074L2.24263 9.44478C2.10268 9.57254 2.02285 9.74008 2.00314 9.91323C1.99851 9.94058 1.99609 9.96869 1.99609 9.99736C1.99609 10.0242 1.99821 10.0506 2.00229 10.0763C2.02047 10.2522 2.10058 10.4229 2.24263 10.5526L9.15898 16.8666Z",fill:"currentColor"})),ANe=Object.freeze(Object.defineProperty({__proto__:null,default:U9},Symbol.toStringTag,{value:"Module"})),F9=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M2 4.5C2 4.22386 2.22386 4 2.5 4H13.5C13.7761 4 14 4.22386 14 4.5C14 4.77614 13.7761 5 13.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM2 14.5C2 14.2239 2.22386 14 2.5 14H12.5C12.7761 14 13 14.2239 13 14.5C13 14.7761 12.7761 15 12.5 15H2.5C2.22386 15 2 14.7761 2 14.5ZM2.5 9C2.22386 9 2 9.22386 2 9.5C2 9.77614 2.22386 10 2.5 10H17.5C17.7761 10 18 9.77614 18 9.5C18 9.22386 17.7761 9 17.5 9H2.5Z",fill:"currentColor"})),kNe=Object.freeze(Object.defineProperty({__proto__:null,default:F9},Symbol.toStringTag,{value:"Module"}));function OEe(){const[t,e]=m.useState(!1);return m.useEffect(()=>{async function n(){const o=await(ye.instance().config().isConversationHistoryHidden??(()=>Promise.resolve(!1)))();e(o)}n().catch(()=>{})},[]),t}function MEe(t){const{open:e,toggle:n}=t,{startNewConversation:r}=VA(),[o]=lt(Ar),i=O(ol),{t:s}=He(),a=me("pages"),c=$t(),u=Sb(),d=o==="chat-only"||e,f=!OEe(),p=!e&&(c.startsWith("/daily")||c.endsWith("/talk")||u||c.startsWith("/labs/experiments/3d-generations"));return h.jsx("div",{className:W("pointer-events-none absolute start-0 top-0 w-full p-1 pe-3.5",Zt.sidebar),children:h.jsx("div",{className:"relative",children:h.jsxs("div",{className:"absolute flex min-w-full items-center justify-between gap-1 p-1",children:[h.jsx(xn,{children:p&&h.jsx(xe.div,{className:W("pointer-events-auto absolute inset-0 rounded-2xl border border-stroke-100 shadow-md dark:border-stroke-300",Qi),initial:"initial",animate:"animate",exit:"exit",variants:{initial:ct,animate:Lt,exit:ct},transition:Oo})}),h.jsxs("div",{className:"pointer-events-auto flex shrink-0 items-center gap-1","data-theme":i&&!e?i.theme:void 0,children:[(f||d&&e)&&h.jsx(Ue,{title:s(e?"sidebar.close":"sidebar.open"),className:"after:absolute after:inset-0 after:rounded-lg hover:after:bg-black/3 dark:hover:after:bg-white/5",color:"subtle-dimmed-inverted",variant:"square",size:"28-xxs",onClick:()=>{dt({source:"sidebarToggle",pageName:c,customData:JSON.stringify({isOpen:e})}),n()},testId:"sidebar-toggle-button",children:e?h.jsx(U9,{className:"size-4"}):h.jsx(F9,{className:"size-4"})}),d&&(f||!e)&&h.jsxs("div",{className:"flex rounded-lg hover:bg-black/3 dark:hover:bg-white/5",children:[h.jsx(Ue,{title:s("composer.startNewChat"),color:"subtle-dimmed-inverted",variant:"square",size:"28-xxs",onClick:()=>{dt({source:"sidebarNewConversation",destination:"/chat",pageName:c,customData:JSON.stringify({isOpen:e})}),r()},children:h.jsx(_b,{className:"size-4"})}),a&&h.jsx(j9,{buttonSize:"28-xxs"})]})]})]})})})}const ZP=65,LEe=100;function e2({count:t=1}){const e=m.useMemo(()=>Array.from({length:t},()=>`${Math.floor(Math.random()*(LEe-ZP+1))+ZP}%`),[t]);return h.jsx("div",{className:"flex flex-col gap-5 px-3 py-1",children:e.map((n,r)=>h.jsx("div",{style:{width:n},className:W("relative h-5 overflow-hidden rounded-lg bg-background-300 opacity-30 dark:bg-background-250 dark:opacity-40","border border-background-300 dark:border-background-250","after:absolute after:-start-[300%] after:end-0 after:start-0 after:h-full","after:opacity-50 dark:after:opacity-5","after:bg-gradient-to-r after:from-transparent after:via-white after:to-transparent","after:bg-[length:80%_100%] after:bg-no-repeat","after:animate-[shimmer-translate_2s_infinite]")},r))})}const DEe="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/labs-entry-BqXQ5OEs.png",B9=t=>m.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M19.2501 11.0017C20.2166 11.0017 21.0001 11.7852 21.0001 12.7517V19.2517C21.0001 20.2182 20.2166 21.0017 19.2501 21.0017H14.7501C13.7836 21.0017 13.0001 20.2182 13.0001 19.2517V12.7517C13.0001 11.7852 13.7836 11.0017 14.7501 11.0017H19.2501ZM9.26831 15.0141C10.2348 15.0141 11.0183 15.7976 11.0183 16.7641V19.2517C11.0183 20.2182 10.2348 21.0017 9.26831 21.0017H4.75391C3.78741 21.0017 3.00391 20.2182 3.00391 19.2517V16.7641C3.00391 15.7976 3.78741 15.0141 4.75391 15.0141H9.26831ZM19.2501 12.5017H14.7501C14.612 12.5017 14.5001 12.6136 14.5001 12.7517V19.2517C14.5001 19.3898 14.612 19.5017 14.7501 19.5017H19.2501C19.3882 19.5017 19.5001 19.3898 19.5001 19.2517V12.7517C19.5001 12.6136 19.3882 12.5017 19.2501 12.5017ZM9.26831 16.5141H4.75391C4.61584 16.5141 4.50391 16.626 4.50391 16.7641V19.2517C4.50391 19.3898 4.61584 19.5017 4.75391 19.5017H9.26831C9.40639 19.5017 9.51831 19.3898 9.51831 19.2517V16.7641C9.51831 16.626 9.40639 16.5141 9.26831 16.5141ZM9.25391 3C10.2204 3 11.0039 3.7835 11.0039 4.75V11.25C11.0039 12.1682 10.2968 12.9212 9.39743 12.9942L9.25391 13H4.75391C3.78741 13 3.00391 12.2165 3.00391 11.25V4.75C3.00391 3.7835 3.78741 3 4.75391 3H9.25391ZM9.25391 4.5H4.75391C4.61584 4.5 4.50391 4.61193 4.50391 4.75V11.25C4.50391 11.3881 4.61584 11.5 4.75391 11.5H9.25391L9.31123 11.4934C9.42167 11.4675 9.50391 11.3683 9.50391 11.25V4.75C9.50391 4.61193 9.39198 4.5 9.25391 4.5ZM19.2501 3C20.2166 3 21.0001 3.7835 21.0001 4.75V7.25C21.0001 8.2165 20.2166 9 19.2501 9H14.7501C13.7836 9 13.0001 8.2165 13.0001 7.25V4.75C13.0001 3.7835 13.7836 3 14.7501 3H19.2501ZM14.7501 4.5C14.612 4.5 14.5001 4.61193 14.5001 4.75V7.25C14.5001 7.38807 14.612 7.5 14.7501 7.5H19.2501C19.3882 7.5 19.5001 7.38807 19.5001 7.25V4.75C19.5001 4.61193 19.3882 4.5 19.2501 4.5H14.7501Z",fill:"currentColor"})),xNe=Object.freeze(Object.defineProperty({__proto__:null,default:B9},Symbol.toStringTag,{value:"Module"}));function t2(t){return t?{x:t.scrollLeft,y:t.scrollTop}:{x:0,y:0}}function jEe(t){const[e,n]=m.useState(t2(t.current));return m.useEffect(()=>{const r=t.current;let o=null;if(r===null)return()=>{};function i(){o===null&&(o=window.requestAnimationFrame(()=>{n(t2(r)),o=null}))}return r.addEventListener("scroll",i),()=>r.removeEventListener("scroll",i)}),e}function UEe(t,e){let n=!1;return(...r)=>{n||(t(...r),n=!0,setTimeout(()=>{n=!1},e))}}function n2(t,e=1e3){const n=m.useRef();return m.useEffect(()=>{n.current=t},[t]),m.useMemo(()=>UEe((...i)=>{var s;(s=n.current)==null||s.call(n,...i)},e),[e])}function FEe({onScrollStart:t,onScrollEnd:e,scrollRefs:n}){const r=m.useRef({}),o=n2(s=>{const{target:a}=s;a instanceof Window?r.current={scrollSource:"window",scrollStartTime:Date.now(),scrollStartX:a.scrollX,scrollStartY:a.scrollY}:a instanceof HTMLElement&&(r.current={scrollSource:a.id,scrollStartTime:Date.now(),scrollStartX:a.scrollLeft,scrollStartY:a.scrollTop}),t==null||t(r.current)}),i=n2(s=>{const{target:a}=s;a instanceof Window?(r.current={...r.current,scrollEndX:a.scrollX,scrollEndY:a.scrollY,scrollDuration:Date.now()-(r.current.scrollStartTime??0)},e==null||e(r.current)):a instanceof HTMLElement?(r.current={...r.current,scrollEndX:a.scrollLeft,scrollEndY:a.scrollTop,scrollDuration:Date.now()-(r.current.scrollStartTime??0)},e==null||e(r.current)):r.current={}});m.useEffect(()=>{var a,c;const s={passive:!0};for(const u of n)(a=u.current)==null||a.addEventListener("scroll",o,s),(c=u.current)==null||c.addEventListener("scrollend",i,s);return()=>{var u,d;for(const f of n)(u=f.current)==null||u.removeEventListener("scroll",o),(d=f.current)==null||d.removeEventListener("scrollend",i)}},[n,o,i])}function H9(t){const{scrollableRef:e,customData:n}=t,r=m.useCallback(o=>{window.requestAnimationFrame(()=>{EZ({...o,scrollSource:t.source??o.scrollSource,customData:JSON.stringify(n)})})},[n,t.source]);FEe({onScrollEnd:r,scrollRefs:[e]})}const r2="sticky bg-sidebar-light dark:bg-sidebar-dark",o2="before:pointer-events-none before:absolute before:h-10 before:w-full before:from-sidebar-light before:to-transparent dark:before:from-sidebar-dark",BEe="bg-labs-light dark:bg-labs-dark",HEe=m.lazy(()=>z(()=>import("./sidebar-pages-Co_2Dopo.js"),__vite__mapDeps([285,1,2,286])).then(t=>({default:t.SidebarPages}))),zEe=m.lazy(()=>z(()=>import("./conversations-PCpfdoIJ.js"),__vite__mapDeps([287,1,2,288,289,290,286,291])));function VEe(){const{t}=He(),e=$t(),n=ui(),r=Pr(),o=me("pages"),i=me("pages-sidebar-empty-cta"),s=me("pages-anonymous"),a=(r||i||s)&&o,c=me("labs-landing");me("share-campaign-gallery");const u=fb(),d=u||e==="/daily",f=e.startsWith("/labs");e.startsWith("/campaigns/gallery");const p=O(Ey),g=m.useRef(null),{y:v}=jEe(g),b=v>0,y=RA(),C=_e(Ra);return H9({scrollableRef:g,source:"sidebar"}),h.jsx("div",{className:W("h-screen px-1 py-2",y?"w-full":"w-sidebar"),children:h.jsx("div",{className:"t-custom-scrollbar h-full overflow-y-auto overflow-x-hidden",ref:g,children:h.jsxs("div",{className:"flex min-h-full w-full flex-col px-2",children:[h.jsxs("div",{className:W(r2,o2,"top-0 z-10 flex flex-col gap-px pb-3 pt-[72px]","before:bottom-0 before:top-full before:bg-gradient-to-b before:opacity-90",b&&"after:absolute after:bottom-0 after:mx-1 after:w-[calc(100%-8px)] after:border-b after:border-black/8 dark:after:border-white/10",y&&"whitespace-nowrap"),children:[h.jsx(Ue,{className:W("flex-col px-2.5 py-2",d&&"!bg-black/5 dark:!bg-white/8"),title:t("composer.goToHome"),color:"subtle-dimmed-inverted",onClick:async()=>{u?y&&C(!1):(dt({source:"sidebarDiscoverButton",destination:"/",pageName:e}),await n({to:"/",from:e}))},testId:"sidebar-discover-button",children:h.jsxs("span",{className:"flex w-full items-center gap-3",children:[h.jsx("span",{className:"relative flex size-10 shrink-0 items-center justify-center bg-caramel-350/40 text-caramel-600 squircle-16 dark:bg-slate-650/60 dark:text-slate-250",children:h.jsx(B9,{className:"size-6"})}),h.jsxs("span",{className:"flex flex-1 flex-col",children:[h.jsx("span",{className:"h-6 w-full text-start text-base-strong",children:t("sidebar.discover")}),h.jsx("span",{className:"w-full text-start text-foreground-650 text-xs",children:t("sidebar.discoverDescription")})]})]})}),c&&h.jsx(Ue,{className:W("flex-col px-2.5 py-2",f&&"!bg-black/5 dark:!bg-white/8"),title:t("sidebar.labsDescription"),color:"subtle-dimmed-inverted",onClick:async()=>{dt({source:"sidebarLabsButton",destination:"/labs",pageName:e}),await n({to:"/labs",from:e}),y&&f&&C(!1)},children:h.jsxs("span",{className:"flex w-full items-center gap-3",children:[h.jsx("span",{className:W("relative flex size-10 shrink-0 items-center justify-center squircle-16",BEe),children:h.jsx("img",{src:DEe,alt:t("sidebar.labs"),className:"size-6"})}),h.jsxs("span",{className:"flex flex-1 flex-col",children:[h.jsx("span",{className:"h-6 w-full text-start text-base-strong",children:t("sidebar.labs")}),h.jsx("span",{className:"w-full text-start text-foreground-650 text-xs",children:t("sidebar.labsDescription")})]})]})}),kI]}),h.jsxs("div",{className:"relative flex grow flex-col py-5",children:[a&&h.jsx(m.Suspense,{fallback:null,children:h.jsx(HEe,{})}),h.jsx("h2",{className:"mb-5 flex gap-2 px-3 align-middle text-base-strong",children:t("sidebar.conversations")}),p?h.jsx(m.Suspense,{fallback:h.jsx(e2,{count:16}),children:h.jsx(zEe,{inSidebar:!0})}):h.jsx(e2,{count:16})]}),h.jsx("div",{className:W(r2,o2,"bottom-0 before:bottom-full before:bg-gradient-to-t")})]})})})}function i2(t){const{className:e,text:n}=t;return h.jsx("p",{className:at("inline h-min flex-none rounded border px-0.5 uppercase text-3xs",e),children:n})}const $Ee="https://studiostaticassetsprod.azureedge.net/bundle-cmc/assets/copilot-wordmark-DvWA6bVb.svg",z9=t=>m.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M3.75 8.5C3.75 8.08579 4.08579 7.75 4.5 7.75H5.75C6.16421 7.75 6.5 8.08579 6.5 8.5C6.5 8.91421 6.16421 9.25 5.75 9.25H4.5C4.08579 9.25 3.75 8.91421 3.75 8.5ZM3.75 12C3.75 11.5858 4.08579 11.25 4.5 11.25H5.75C6.16421 11.25 6.5 11.5858 6.5 12C6.5 12.4142 6.16421 12.75 5.75 12.75H4.5C4.08579 12.75 3.75 12.4142 3.75 12ZM3.75 15.5C3.75 15.0858 4.08579 14.75 4.5 14.75H5.75C6.16421 14.75 6.5 15.0858 6.5 15.5C6.5 15.9142 6.16421 16.25 5.75 16.25H4.5C4.08579 16.25 3.75 15.9142 3.75 15.5ZM4.25 3C2.45507 3 1 4.45507 1 6.25V17.75C1 19.5449 2.45508 21 4.25 21H19.75C21.5449 21 23 19.5449 23 17.75V6.25C23 4.45507 21.5449 3 19.75 3H4.25ZM19.75 19.5H9V4.5H19.75C20.7165 4.5 21.5 5.2835 21.5 6.25V17.75C21.5 18.7165 20.7165 19.5 19.75 19.5ZM4.25 4.5H7.5V19.5H4.25C3.2835 19.5 2.5 18.7165 2.5 17.75V6.25C2.5 5.2835 3.2835 4.5 4.25 4.5Z",fill:"currentColor"})),RNe=Object.freeze(Object.defineProperty({__proto__:null,default:z9},Symbol.toStringTag,{value:"Module"}));function GEe(){const t=O(MI),e=O(fy);return t&&!!e}function KEe(t){const{open:e,toggle:n}=t,{startNewConversation:r}=VA(),[o]=lt(Ar),i=O(ol),{t:s}=He(),a=me("pages"),c=$t(),u=Sb(),d=o==="chat-only"||e,f=GEe(),p=!e&&(c.startsWith("/daily")||c.endsWith("/talk")||u||c.startsWith("/labs/experiments/3d-generations"));return h.jsx("div",{className:W("pointer-events-none absolute start-0 top-0 w-full p-2.5 pe-3.5",Zt.sidebar),children:h.jsx("div",{className:"relative",children:h.jsxs("div",{className:"absolute flex min-w-full items-center justify-between gap-1 p-1",children:[h.jsx(xn,{children:p&&h.jsx(xe.div,{className:W("pointer-events-auto absolute inset-0 rounded-2xl border border-stroke-100 shadow-md dark:border-stroke-300",Qi),initial:"initial",animate:"animate",exit:"exit",variants:{initial:ct,animate:Lt,exit:ct},transition:Oo})}),h.jsx(Ln,{className:"flex items-center",delay:Ro.default,duration:Ro.slow,children:e&&h.jsxs(Ue,{role:"link",title:s("sidebar.homepageLink"),className:"pointer-events-auto absolute start-0 flex items-center gap-2.5 px-3.5",color:"subtle-dimmed-inverted",testId:"sidebar-copilot-brand-button",onClick:()=>{dt({source:"sidebarBrandButton",destination:"/chat",pageName:c}),r()},children:[h.jsx(Mp,{className:"size-6"}),h.jsxs("span",{className:"flex items-center text-md-strong",children:[h.jsx(or,{url:$Ee,className:"h-[18px] w-[58px]"}),f&&h.jsx(i2,{text:s("settings.copilotBeta.beta"),className:"ms-2 uppercase"})]})]})}),h.jsxs("div",{className:"pointer-events-auto flex shrink-0 items-center gap-1","data-theme":i&&!e?i.theme:void 0,children:[h.jsx(Ue,{title:s(e?"sidebar.close":"sidebar.open"),className:"after:absolute after:inset-0 after:rounded-xl hover:after:bg-black/3 dark:hover:after:bg-white/5",color:"subtle-dimmed-inverted",variant:"square",size:"36-sm",onClick:()=>{dt({source:"sidebarToggle",pageName:c,customData:JSON.stringify({isOpen:e})}),n()},testId:"sidebar-toggle-button",children:h.jsx(z9,{className:"size-6"})}),d&&h.jsxs("div",{className:"flex rounded-xl hover:bg-black/3 dark:hover:bg-white/5",children:[h.jsx(Ue,{title:s("composer.startNewChat"),color:"subtle-dimmed-inverted",variant:"square",size:"36-sm",onClick:()=>{dt({source:"sidebarNewConversation",destination:"/chat",pageName:c,customData:JSON.stringify({isOpen:e})}),r()},children:h.jsx(_b,{className:"size-5"})}),a&&h.jsx(j9,{buttonSize:"36-sm"})]}),!e&&f&&h.jsx(i2,{text:s("settings.copilotBeta.beta"),className:"relative m-2 uppercase"})]})]})})})}function WEe(){const[t,e]=lt(Ra),n=pr({breakpoint:"md"}),r=m.useRef(n),o=ye.instance().config().useCompactSidebarHeader??!1;W_(()=>{n&&e(!1)}),m.useEffect(()=>{r.current===!1&&n&&e(!1),r.current===!0&&!n&&e(v9()==="open"),r.current=n},[n,e]);const i=()=>{e(s=>!s),n||DSe(t?"close":"open")};return h.jsxs(h.Fragment,{children:[h.jsx(xn,{children:n&&t&&h.jsx(xe.div,{className:"fixed inset-0 bg-black/30",onClick:()=>e(!1),initial:"initial",animate:"animate",exit:"exit",variants:{initial:ct,animate:Lt,exit:ct},transition:Oo})}),h.jsxs(xe.div,{className:W("relative w-full bg-sidebar-light dark:bg-sidebar-dark",t&&"h-full"),layout:"position",children:[o?h.jsx(MEe,{open:t,toggle:i}):h.jsx(KEe,{open:t,toggle:i}),h.jsx(xn,{children:t&&h.jsx(xe.div,{className:"overflow-hidden",initial:"initial",animate:"animate",exit:"exit",variants:{initial:ct,animate:Lt,exit:ct},transition:Oo,children:h.jsx(VEe,{})})})]})]})}const qEe=324,s2="bg-sidebar-light dark:bg-sidebar-dark";function YEe(t){const{children:e,sidebar:n}=t,r=document.getElementById("app"),o=hb(),i=pr({breakpoint:"md"}),s=ho(),c=O(Ra)&&s,[u,d]=m.useState(!1),f=O(Ar),p=O(Yh),g=O(gy),v=RA();m.useEffect(()=>{r&&r.style.setProperty("--layout-offset-y",s&&c&&!i?`${vi}px`:"0px")},[r,s,c,i]);const b=c&&!i,y=f==="side-by-side",C=v?"100%":qEe,S=p||!!g;return h.jsxs("div",{className:W("flex h-full overflow-hidden",s2),inert:S?"":void 0,children:[n??(s&&h.jsx(xe.div,{className:W("h-full will-change-auto",i?"absolute":"relative",i&&s2,i&&Zt.sidebar),initial:{width:c?C:0},animate:{width:c?C:0},transition:Oo,onAnimationStart:()=>d(!0),onAnimationComplete:()=>d(!1),children:h.jsx(WEe,{})})),h.jsx(xe.main,{className:W("relative flex w-full min-w-0 will-change-auto","after:pointer-events-none after:fixed after:inset-2 after:start-[324px] after:rounded-[10px] after:border after:border-transparent after:transition-opacity dark:after:border-white/12 dark:after:border-s-white/8",b&&!u?"after:opacity-100 after:duration-1000":"after:opacity-0 after:duration-0"),initial:{paddingTop:b||y?vi:0,paddingBottom:!y&&b?vi:0,paddingLeft:b&&o?vi:0,paddingRight:b&&!o?vi:0},animate:{paddingTop:b||y?vi:0,paddingBottom:!y&&b?vi:0,paddingLeft:b&&o||!b&&y?vi:0,paddingRight:b&&!o||!b&&y?vi:0},transition:i?{duration:0}:Oo,children:e})]})}function QEe(t){const{children:e,className:n,clipPathBreakpoint:r="md",backgroundColor:o}=t,i=pr({breakpoint:r}),s=ho();return h.jsxs("div",{className:at("relative h-full overflow-hidden",n),children:[h.jsx("div",{className:W("absolute size-full",s&&!i&&"t-main-clip-path"),children:h.jsx(yl,{customColor:o,isFixed:!0})}),h.jsx("div",{className:W("relative size-full overflow-hidden",s&&!i&&"rounded-[10px]"),children:e})]})}var d0={exports:{}},a2;function JEe(){return a2||(a2=1,function(t){var e=function(){function n(p,g){return g!=null&&p instanceof g}var r;try{r=Map}catch{r=function(){}}var o;try{o=Set}catch{o=function(){}}var i;try{i=Promise}catch{i=function(){}}function s(p,g,v,b,y){typeof g=="object"&&(v=g.depth,b=g.prototype,y=g.includeNonEnumerable,g=g.circular);var C=[],S=[],w=typeof Buffer<"u";typeof g>"u"&&(g=!0),typeof v>"u"&&(v=1/0);function E(I,T){if(I===null)return null;if(T===0)return I;var A,_;if(typeof I!="object")return I;if(n(I,r))A=new r;else if(n(I,o))A=new o;else if(n(I,i))A=new i(function(x,L){I.then(function(ne){x(E(ne,T-1))},function(ne){L(E(ne,T-1))})});else if(s.__isArray(I))A=[];else if(s.__isRegExp(I))A=new RegExp(I.source,f(I)),I.lastIndex&&(A.lastIndex=I.lastIndex);else if(s.__isDate(I))A=new Date(I.getTime());else{if(w&&Buffer.isBuffer(I))return Buffer.allocUnsafe?A=Buffer.allocUnsafe(I.length):A=new Buffer(I.length),I.copy(A),A;n(I,Error)?A=Object.create(I):typeof b>"u"?(_=Object.getPrototypeOf(I),A=Object.create(_)):(A=Object.create(b),_=b)}if(g){var U=C.indexOf(I);if(U!=-1)return S[U];C.push(I),S.push(A)}n(I,r)&&I.forEach(function(x,L){var ne=E(L,T-1),se=E(x,T-1);A.set(ne,se)}),n(I,o)&&I.forEach(function(x){var L=E(x,T-1);A.add(L)});for(var k in I){var G;_&&(G=Object.getOwnPropertyDescriptor(_,k)),!(G&&G.set==null)&&(A[k]=E(I[k],T-1))}if(Object.getOwnPropertySymbols)for(var K=Object.getOwnPropertySymbols(I),k=0;k<K.length;k++){var ie=K[k],P=Object.getOwnPropertyDescriptor(I,ie);P&&!P.enumerable&&!y||(A[ie]=E(I[ie],T-1),P.enumerable||Object.defineProperty(A,ie,{enumerable:!1}))}if(y)for(var $=Object.getOwnPropertyNames(I),k=0;k<$.length;k++){var Z=$[k],P=Object.getOwnPropertyDescriptor(I,Z);P&&P.enumerable||(A[Z]=E(I[Z],T-1),Object.defineProperty(A,Z,{enumerable:!1}))}return A}return E(p,v)}s.clonePrototype=function(g){if(g===null)return null;var v=function(){};return v.prototype=g,new v};function a(p){return Object.prototype.toString.call(p)}s.__objToStr=a;function c(p){return typeof p=="object"&&a(p)==="[object Date]"}s.__isDate=c;function u(p){return typeof p=="object"&&a(p)==="[object Array]"}s.__isArray=u;function d(p){return typeof p=="object"&&a(p)==="[object RegExp]"}s.__isRegExp=d;function f(p){var g="";return p.global&&(g+="g"),p.ignoreCase&&(g+="i"),p.multiline&&(g+="m"),g}return s.__getRegExpFlags=f,s}();t.exports&&(t.exports=e)}(d0)),d0.exports}var XEe=JEe();const c2=aO(XEe);function ZEe(){const t=O(FL),e=m.useRef(!1);m.useEffect(()=>{t&&!e.current&&(V.trackEvent({name:"system",data:{eventName:"copilotStart",eventInfo_duration:window.appEnd-window.appStart,eventInfo_landingPage:V.getLandingPage()}}),e.current=!0)},[t])}const ewe={revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1,refreshInterval:PA};function twe(t){return function(n){return Gn(n,tQ,t?{query:{"api-version":"2"}}:void 0).then(r=>r.data)}}function os(t){return Array.isArray(t)?mf(t):{positive:mf(t.positive),negative:mf(t.negative)}}function mf(t){const e=t,n=e.slice(0,-1),r=e.slice(-1);return[...kve(n),...r]}function nwe(){const t=me("adspositivefeedbacksurvey"),e=twe(t),{data:n,mutate:r}=vl("/config",e,ewe),o=_e(my),i=_e(wM),s=_e(AM),a=_e(Mhe),c=_e(Lhe),u=_e(Dhe),d=_e(UI),f=_e(FI),p=_e(IM);i9(r),m.useEffect(()=>{n&&(o(n.voices),i(n.signInPrompts),s(n.maxTextMessageLength),a(n.maxPageContentLength),u(n.pageLimit),c(n.maxPageTitleLength),n.characters&&f(n.characters),n.feedbackOptions.text=mf(n.feedbackOptions.text),n.feedbackOptions.image=mf(n.feedbackOptions.image),n.feedbackOptions.card.local=os(n.feedbackOptions.card.local),n.feedbackOptions.card.ads=os(n.feedbackOptions.card.ads),n.feedbackOptions.card.video=os(n.feedbackOptions.card.video),n.feedbackOptions.card.image=os(n.feedbackOptions.card.image),n.feedbackOptions.card.shopping=os(n.feedbackOptions.card.shopping),n.feedbackOptions.card.sports=os(n.feedbackOptions.card.sports),n.feedbackOptions.card.finance=os(n.feedbackOptions.card.finance),n.feedbackOptions.card.quiz=os(n.feedbackOptions.card.quiz),n.feedbackOptions.card.weather=os(n.feedbackOptions.card.weather),d(n.feedbackOptions),p(n.messagePreview))},[n,i,o,s,a,c,d,f,u,p])}function rwe(){const t=op(yn);return m.useCallback(n=>{t(r=>{for(const{id:o,title:i,updatedAt:s,characterId:a,continuedAt:c}of n){const u=r.get(o);u?(u.title=i,u.updatedAt=s,u.characterId=a??null,u.continuedAt=c):r.set(o,{id:o,title:i,updatedAt:s,characterId:a??null,streamingState:"idle",history:[],continuedAt:null})}})},[t])}function owe(t,e){if(!(e!=null&&e.next)&&t>0)return null;const n={url:"/conversations",isFirstPage:t===0};return e!=null&&e.next&&(n.args={cursor:e.next}),n}function iwe(){const t=rwe(),e=_e(py),n=m.useCallback(async({url:r,args:o,isFirstPage:i})=>{const s=await Gn(r,vQ,{query:o}).then(a=>a.data);if(s.results.length>0){const a=s.results.map(c=>({...c,history:[],streamingState:"idle"}));t(a),e(!0)}else i&&e(!1);return s},[t,e]);return FA(n,owe)}function swe(){const t=_e(Vr),e=_e(UJ);return m.useCallback(async()=>{const n=await Gn("/user",wL,{parseOptions:{safe:!0},query:{"api-version":"2"}}).then(s=>s.data),{id:r,anid:o,isHistoryMigrationPending:i}=n;return V.setAnid(o),V.setPicassoId(r),e(i),t(n.regionCode),n},[e,t])}function awe(){const t=O(In),e=O(dl),{refetch:n}=iwe(),r=swe(),o=_e(gr),i=_e(Nc),s=_e(fp),a=_e(HL),c=_e(VL),u=_e(uT),d=_e(dT),f=_e(MJ),p=_e(dG),g=_e($L),v=_e(LJ),b=_e(jL),y=_e(hT),C=_e(fT),S=_e(DJ),w=me("multiplecharacters"),E=me("account-change-chat-reset"),I=ab()[0]==="audioCall";m.useEffect(()=>{(async()=>{const A=Promise.all([r(),Gn("/user/settings",pQ).then(Pe=>Pe.data),n()]),_=Ts.instance().getUserInfo(),[{id:U,firstName:k,isPro:G,inEeaPlusRegion:K,isEligibleForFreeTrial:ie,phoneLink:P,ageGroup:$,allowedToggles:Z,remainingCalls:x,subscriptions:L,accountTier:ne},{preferredVoice:se,preferredCharacter:fe,optOutOfTraining:X,optInToVoiceTraining:ge,optOutOfPersonalization:Oe,optOutOfPhoneConnection:Se,optInToGenerativeUI:Fe,allowBiometricDataUse:Re,allowOneDriveAccess:Ve,features:he}]=await A;if(V.setIsAad(e),o({id:U,firstName:k,isPro:G&&!e,inEeaPlusRegion:K,isEligibleForFreeTrial:ie,phoneLink:P,ageGroup:$,allowedToggles:Z,subscriptions:L,accountTier:ne,isStudent:void 0}),b(k??void 0),!E&&!I&&await RU(),se&&s(se),w&&fe){const Pe=bM(fe);a(Pe)}c(X),u(ge),d(Oe),f(!!Se),p(!!Fe),g(!!Re),v(!!Ve),S((he==null?void 0:he.suggestedFollowups)??!0),x&&(y(x.podcastGeneration),C(x.research)),V.setSettings({userSettingVoiceType:se??void 0,userConsentPersonalization:!Oe,userConsentModelTraining:!X,userSubscription:G?"pro":"free",accountTier:ne??void 0,activeSubscriptions:(L==null?void 0:L.map(Pe=>Pe.tier).join(","))??void 0});const B=await _;if(B){const{mail:Pe,givenName:Q,imgSrc:oe,isStudent:we}=B;o(N=>N&&{...N,givenName:Q,email:Pe,imgSrc:oe,isStudent:we}),Q&&!k&&b(Q),e||i(null)}})().catch(console.error)},[t,E,o,i,n,c,s,w,f,p,u,d,g,v,r,e,a,I,b,y,C,S])}const cwe=l.object({isMobileAppInstalled:l.boolean()}),lwe="/user/install-status";async function uwe(){try{return(await Gn(lwe,cwe,{options:{method:"GET"}})).data.isMobileAppInstalled}catch(t){throw console.error("Failed to fetch mobile app install status:",t),t}}function dwe(){const t=_e(HI),{data:e,error:n,isLoading:r,mutate:o}=vl("mobileAppInstallStatus",uwe,{revalidateOnFocus:!1,revalidateOnReconnect:!1,dedupingInterval:6e4});return m.useEffect(()=>{e!==void 0&&t(e)},[e,t]),{isMobileAppInstalled:e,isLoading:r,error:n||null,refetch:o}}const hwe="/user/narrative";function l2(t,e){var n;return(n=t.filter(r=>r.name===e)[0])==null?void 0:n.url}function NNe(t){const{background1:e,background2:n,background3:r}=t,i=[n,e,r].filter(a=>typeof a=="object"&&"light"in a&&"dark"in a);if(i.length===0)return[];const s=[];for(let a=0;a<i.length;a+=1){const c=i[a],u=i[(a+1)%i.length];!c||!u||(s.push({type:"gradient",from:c,to:u}),s.push({type:"solid",color:u}))}return s}function PNe(t,e,n){const r=t[e%t.length];return r?r.type==="gradient"?`linear-gradient(to bottom, ${n?`#${r.from.dark}`:`#${r.from.light}`}, ${n?`#${r.to.dark}`:`#${r.to.light}`})`:n?`#${r.color.dark}`:`#${r.color.light}`:"var(--background-color)"}function ONe(t,e){return e==="wavy-shape"?l2(t,"hero-image-wavy-tablet"):l2(t,`hero-image-${e}-tablet`)}const fwe=l.object({from:l.string()});function pwe(t){return fwe.safeParse(t).success}function MNe(t){return pwe(t)?t.from:"/"}const LNe={start:{...ct,y:300},end:{...Lt,y:0}},DNe={duration:Xue,ease:Zue},mwe={revalidateOnFocus:!1,shouldRetryOnError:!1,refreshInterval:PA};async function gwe(t){const{data:e,response:n}=await Gn(t,NY,{options:{method:"GET",headers:{"Content-Type":"application/json"}},query:{"api-version":"2"}});if(!n.ok)return null;const{id:r,sections:o,theme:i,masks:s,font:a,fontHandwriting:c}=e;return{id:r,sections:o.filter(u=>u.type!=="shareDefault"),config:{theme:i,masks:s,font:a,...c?{fontHandwriting:c}:{}}}}function vwe(){const t=Pr(),e=me("memory-narrative"),n=t&&e,{data:r,error:o,isLoading:i}=vl(n?hwe:null,gwe,mwe);return{isLoading:i,error:o,data:i||!r?null:r}}const V9=m.forwardRef((t,e)=>{var y;const{children:n}=t,r=gF(),o=!lb(),i=iO(),s=m.useRef(i),a=vF(),c=m.useContext(a);let u=c;const d=$t(),f=m.useRef(d),p=m.useRef((y=window.history.state)==null?void 0:y.from),g=ho();r?s.current=c2(i):(u=c2(c),u.__store.state.matches=[...i.map((C,S)=>({...s.current[S]??C,id:C.id})),...s.current.slice(i.length)]);const v=bwe(d,p.current,g)&&o;return ye.instance().config().disableRouteAnimation??!1?h.jsx("div",{ref:e,className:"relative size-full max-h-dvh",children:h.jsx(a.Provider,{value:u,children:n})}):h.jsx(xe.div,{ref:e,className:"relative size-full max-h-dvh",initial:p.current&&o?"enter":!1,animate:o?"animate":!1,exit:"exit",variants:{enter:{opacity:0,scale:u2(d,p.current,"enter",g)},animate:{opacity:1,scale:1},exit:{scale:u2(d,f.current,"exit",g),opacity:0,transition:{duration:v?void 0:0}}},layout:!0,transition:db,style:{willChange:"transform"},children:h.jsx(a.Provider,{value:u,children:n})})});V9.displayName="AnimatedOutlet";function ywe(t){const{children:e}=t;awe(),dwe(),vwe(),nwe(),vbe(),ZEe();const n=iO(),r=yF({strict:!1}),o=n.findIndex(s=>s.id===r.id)+1,i=n[o];return h.jsx(xn,{mode:"popLayout",children:h.jsx(V9,{children:e},i==null?void 0:i.id)})}function u2(t,e,n,r){const o=["/talk","/pages","/chats","/daily","/podcasts","/discover","/"],i=r&&t.startsWith("/chats")&&(e==null?void 0:e.startsWith("/chats")),s=t.startsWith("/pages")||t.startsWith("/chats")&&(e==null?void 0:e.startsWith("/pages")),a=t.endsWith("/talk")||(e==null?void 0:e.endsWith("/talk")),c=t.startsWith("/memory")||(e==null?void 0:e.startsWith("/memory")),u=s===!0||i===!0||a===!0||c===!0?1:.75,d=s===!0||i===!0||c===!0?1:1.5,f=o.findIndex(p=>p==="/talk"?t.endsWith(p):t.startsWith(p))<o.findIndex(p=>p==="/talk"?e==null?void 0:e.endsWith(p):e==null?void 0:e.startsWith(p));return n==="enter"?f?u:d:f?d:u}function bwe(t,e,n){return!(t.startsWith("/chats")&&(e!=null&&e.startsWith("/chats"))&&n)}const Cwe=m.lazy(()=>z(()=>Promise.resolve().then(()=>aA),void 0)),Swe=m.lazy(()=>z(()=>import("./settings-Dgk5npv1.js").then(t=>t.s),__vite__mapDeps([292,1,2,260,293,294,277,295,296,297,298,299,300,232,301,302,288,303,233,304,305,236,306,307,308,309,234,235,237,238,239,225,290,310,311,312,313,314,315,316,317,318,319,227,228,320]))),Ewe=m.lazy(()=>z(()=>import("./media-viewer-DiZqzZm3.js"),__vite__mapDeps([321,1,2,322,323,324])).then(t=>({default:t.MediaViewer}))),wwe=m.lazy(()=>z(()=>import("./picture-in-picture-CwdUze7e.js"),__vite__mapDeps([325,1,2,267,268,326,327,328,329,330])).then(t=>({default:t.PictureInPicture}))),Iwe=m.lazy(()=>z(()=>import("./composer-large-screen-LJ2UzgBX.js"),__vite__mapDeps([331,1,2,312,332])));function Twe(t){const{children:e,sidebar:n,customLayout:r}=t,o=$t(),{isMediaViewerOpen:i}=Aa(),{isPictureInPictureOpen:s}=fU(),a=ho(),c=Efe(),u=wfe(),d=ye.instance().config().appLayout,f=Ife({showSettings:d.showSettings,showSettingsRelyOnChatDetailLayout:d.showSettingsRelyOnChatDetailLayout}),p=O(ds),g=(p==null?void 0:p.type)==="card";return h.jsxs(h.Fragment,{children:[h.jsx(YEe,{sidebar:n,children:r?e:h.jsxs(QEe,{className:"flex-1",children:[h.jsx(SEe,{}),h.jsx(ywe,{children:e}),i&&h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"pointer-events-auto absolute inset-0 flex items-center justify-center",children:h.jsx(Cwe,{type:"spinnerThemed",className:"size-12"})}),children:h.jsx(Ewe,{})}),c&&h.jsx(uEe,{}),u&&h.jsx(m.Suspense,{fallback:null,children:h.jsx(Iwe,{})}),f&&h.jsx(m.Suspense,{fallback:null,children:h.jsx(Swe,{className:W("top-6",a&&"-me-1 -mt-3")})})]})}),d.showMobileCrossSelling&&o.startsWith("/chats")&&!o.endsWith("/talk")&&h.jsx(mEe,{}),g&&h.jsx(fEe,{}),d.showCookieBanner&&h.jsx(hEe,{}),s&&h.jsx(m.Suspense,{fallback:h.jsx(Nfe,{}),children:h.jsx(wwe,{})}),h.jsx(EEe,{}),h.jsx(uve,{}),h.jsx("div",{id:"inAppFeedbackOcv"}),h.jsx("div",{id:"popoverPortal"}),h.jsx(vEe,{})]})}function _we(){const{t}=He(),e=O(KL);let n="main";mn(F0)&&e==="permanent"&&(n="confirm-submission");const[r,o]=m.useState(n),[i,s]=m.useState(""),[a,c]=m.useState(!1),u=!i||i.trim().length===0||a,d=async()=>{if(!u){En({source:"submitBanAppeal"}),c(!0);try{await Hr({path:"/user/bans/appeal",args:{body:{appealText:`APPEAL: ${i}`}}}),o("confirm-submission"),sr(F0,new Date().toISOString())}catch(f){V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"submitBanAppeal",eventInfo_errorMessage:`${f}`,eventInfo_details:"Error submitting ban appeal"}})}c(!1)}};return h.jsxs("main",{className:"relative size-full",children:[h.jsx(yl,{forceGradient:!0}),h.jsxs(Ln,{id:r,className:"relative z-10 m-auto flex h-dvh max-w-[540px] flex-col items-center justify-center gap-3 p-12 text-center",children:[r==="main"&&h.jsxs(h.Fragment,{children:[h.jsx("h1",{className:"text-3xl",children:e==="permanent"?t("composer.userBan.permanent"):t("composer.userBan.temporary",{duration:t(e==="1-hr"?"composer.userBan.duration1Hr":"composer.userBan.duration24Hr")})}),h.jsx("p",{children:t(e==="permanent"?"composer.userBan.banMessagePermanent":"composer.userBan.banMessageTemporary")}),e==="permanent"&&h.jsx(Ue,{color:"strong",size:"56-xl",className:"mt-6 w-full",title:t("composer.userBan.submitAppeal"),onClick:()=>o("submit-appeal"),children:t("composer.userBan.submitAppeal")})]}),r==="submit-appeal"&&h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex w-full items-center pb-4",children:[h.jsx(Ue,{variant:"square",color:"subtle-dimmed-inverted",size:"32-xs",title:t("common.backText"),onClick:()=>o("main"),children:h.jsx(Rp,{className:"size-5 -rotate-90"})}),h.jsx("h2",{className:"grow pe-8",children:t("composer.userBan.submitAppeal")})]}),h.jsx("textarea",{className:"h-[240px] w-full resize-none rounded-xl bg-background-100 p-4 placeholder:text-foreground-650 contrast-more:border-2 dark:text-white",onChange:f=>s(f.target.value),disabled:a,placeholder:t("composer.userBan.submitAppealPlaceholder")}),h.jsx(Ue,{color:"strong",className:"w-full",size:"56-xl",title:t("common.submitText"),onClick:d,disabled:u,children:t("common.submitText")})]}),r==="confirm-submission"&&h.jsxs(h.Fragment,{children:[h.jsx("h1",{className:"text-3xl",children:t("composer.userBan.appealSubmitted")}),h.jsx("p",{children:t("composer.userBan.appealSubmittedDescription")}),h.jsx(gd,{msg:`${t("composer.userBan.appealSubmitted")}, ${t("composer.userBan.appealSubmittedDescription")}`})]})]})]})}const Awe=.05,kwe=.1;function xwe(){return ye.instance().config().sentryDsnOverride??"https://323dd84fb4f632ccd95493debe9312e0@o4508134825000960.ingest.us.sentry.io/4508799962644480"}async function Rwe(){const t=await z(()=>import("./vendor-DQYrLAfZ.js").then(r=>r.ah),__vite__mapDeps([1,2]));if(Fi("kill-sentry"))return;const n=[t.browserTracingIntegration(),t.tanstackRouterBrowserTracingIntegration(_l)];t.init({dsn:xwe(),release:nV(),sampleRate:kwe,environment:"production",integrations:n,tracesSampleRate:Awe}),t.setTag("surface","cmc")}function Nwe(t){const e=O(Vr);m.useEffect(()=>{V.ensureInitialized(),t&&(window.appEnd=performance.now(),performance.mark("startupTime-begin",{startTime:window.appStart}),performance.mark("startupTime-end",{startTime:window.appEnd}),performance.measure("startupTime","startupTime-begin","startupTime-end"),Rwe().catch(console.error))},[t]),m.useEffect(()=>{t&&e&&setTimeout(()=>{bu("onPageLoad")},1e3)},[t,e])}function Pwe(t){m.useEffect(()=>(document.addEventListener("visibilitychange",t),()=>{document.removeEventListener("visibilitychange",t)}),[t])}function Owe(){Pwe(()=>{document.visibilityState==="visible"?V.trackEvent({name:"system",data:{eventName:"copilotVisible"}}):V.trackEvent({name:"system",data:{eventName:"copilotBackground"}})})}const jNe={Pageseditor:"pageseditor-supported-features"},$9=l.discriminatedUnion("eventName",[l.object({eventName:l.literal("auth0.accountAdded")}),l.object({eventName:l.literal("auth0.accountRemoved")})]);function G9(){return lo(z0,l.boolean().nullable())===!0}function Mwe(){return lo(fM,l.boolean().nullable())===!0}function Lwe(){return lo(Sg,l.boolean().nullable())===!0}function Dwe(){return _l.state.location.pathname==="/login"}function K9(t){for(const e of t)if(e.tenantId===gg)return e;return t[0]}function gf(t){return Yo(t)?"AAD":"MSA"}function jwe(){const[t,e]=m.useState(!1),n=_e(In),r=_e(qo),o=O(_D);return m.useEffect(()=>{if(t||G9())return;function s(c){var u;if(c===null){n(null),V.setUserAccountType(void 0);return}n({id:((u=c.idTokenClaims)==null?void 0:u.oid)??"",tenantId:c.tenantId,provider:"microsoft",accountType:gf(c.tenantId)}),V.setUserAccountType(gf(c.tenantId))}async function a(){try{const{msal:c}=await wr.get();V.trackEvent({name:"system",data:{eventName:"copilotMsalInit",eventInfo_initTrigger:"hook",eventInfo_timing:performance.now()-window.appStart}}),e(!0);const{monitorAccountChangesAcrossTabs:u,enableAuth0:d}=ye.instance().config();u&&c.enableAccountStorageEvents(),c.addEventCallback(async f=>{if(Bj(f),(f.eventType===le.LOGIN_SUCCESS||f.eventType===le.ACQUIRE_TOKEN_SUCCESS)&&f.payload&&"account"in f.payload&&f.payload.account){const{account:p}=f.payload,g=c.getActiveAccount();(!g||g.homeAccountId!==p.homeAccountId)&&(c.setActiveAccount(p),s(p))}else if(f.eventType===le.LOGOUT_SUCCESS){const p=K9(c.getAllAccounts());c.setActiveAccount(p??null),s(p??null)}else f.eventType===le.ACCOUNT_ADDED?r({reason:"login"}):f.eventType===le.ACCOUNT_REMOVED&&r({reason:"logout"})}),d&&u&&Xh.addEventListener("message",f=>{const p=$9.safeParse(f.data);if(!p.success)return;const{eventName:g}=p.data;g==="auth0.accountAdded"?r({reason:"login"}):g==="auth0.accountRemoved"&&r({reason:"logout"})})}catch(c){V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"MsalInitError",eventInfo_details:"hook",eventInfo_errorMessage:c instanceof Error?c.message:""}})}}a().catch(console.error)},[t,r,n]),o===!0?o:t}async function Uwe(){const t=rt();async function e(){return await Ts.instance().getAccountFromProviders()!==null}function n(){return Mwe()?!Lwe():!1}function r(i){var s;if(i===null){t.set(In,null),V.setUserAccountType(void 0);return}t.set(In,{id:((s=i.idTokenClaims)==null?void 0:s.oid)??"",tenantId:i.tenantId,provider:"microsoft",accountType:gf(i.tenantId)}),V.setUserAccountType(gf(i.tenantId))}async function o(){try{ye.instance().config().enableAuth0&&await Co.get();const{msal:i}=await wr.get();V.trackEvent({name:"system",data:{eventName:"copilotMsalInit",eventInfo_initTrigger:"DCL",eventInfo_timing:performance.now()-window.appStart}}),i.addEventCallback(async d=>{if(Bj(d),a){d.eventType===le.ACCOUNT_ADDED?t.set(qo,{reason:"login"}):d.eventType===le.ACCOUNT_REMOVED&&t.set(qo,{reason:"logout"});return}if((d.eventType===le.LOGIN_SUCCESS||d.eventType===le.ACQUIRE_TOKEN_SUCCESS)&&d.payload&&"account"in d.payload&&d.payload.account){const{account:f}=d.payload,p=i.getActiveAccount();(!p||p.homeAccountId!==f.homeAccountId)&&(ca({authWorkflowAccountType:"microsoft",apiName:"msal:differentAccountLogin",extraInfo:{eventInfo_currentAccountId:p==null?void 0:p.homeAccountId,eventInfo_newAccountId:f.homeAccountId,eventInfo_eventType:d.eventType}}),i.setActiveAccount(f),r(f))}else if(d.eventType===le.LOGOUT_SUCCESS){const f=K9(i.getAllAccounts());i.setActiveAccount(f??null),r(f??null)}else d.eventType===le.ACCOUNT_ADDED?t.set(qo,{reason:"login"}):d.eventType===le.ACCOUNT_REMOVED&&t.set(qo,{reason:"logout"})});let s=!1;const a=Oc();if(a){const d=Ts.instance();await d.initAuthAccount(),s=!!await d.getAccountFromProviders()}else s=await e();t.set(_D,!0);const{monitorAccountChangesAcrossTabs:c,enableAuth0:u}=ye.instance().config();if(c&&i.enableAccountStorageEvents(),!s&&n()){const d=performance.now();try{const f=await i.ssoSilent(VH),p=performance.now()-d,g=gf(f.account.tenantId)==="MSA";g||DS({message:"SSO Silent returned an AAD account",errorCode:"unexpected_account_type"}),Oi(Sg,l.boolean(),!0),Dwe()&&DS({message:"User is on login page, skipping account update",errorCode:"sso_on_login_page"}),g?(i.setActiveAccount(f.account),r(f.account),Dle({accountUpdate:!0,accountType:"MSA",message:"Account set by MSAL silent SSO",duration:p}),Pt.emit("auth:account-set-by-msal-sso")):await i.logoutRedirect({account:f.account,onRedirectNavigate:()=>!1})}catch(f){DS({message:f instanceof Error?f.message:"Unknown error",errorCode:f instanceof St?f.errorCode:""})}}u&&c&&Xh.addEventListener("message",d=>{const f=$9.safeParse(d.data);if(!f.success)return;const{eventName:p}=f.data;p==="auth0.accountAdded"?t.set(qo,{reason:"login"}):p==="auth0.accountRemoved"&&t.set(qo,{reason:"logout"})})}catch(i){V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"MsalInitError",eventInfo_details:"DCL",eventInfo_errorMessage:i instanceof Error?i.message:""}})}}return o()}function Fwe(){const t=A$(),e=_e(pp);t&&(r=>Z$.includes(r))(t)&&e(t)}function Bwe(){const t=O(In),e=me("account-change-chat-reset");m.useEffect(()=>{e&&RU()},[t,e])}function Hwe(){const t=ci("kill-clarity");s9({onStartComplete:()=>{e()}});const e=()=>{try{if(t)return()=>{};window.clarity||(window.clarity=function(...o){window.clarity&&(window.clarity.q=window.clarity.q??[]).push(o)});const n=document.createElement("script");return n.type="text/javascript",n.async=!0,n.src="/cl/tag/n59ae4ieqq",document.body.appendChild(n),window.clarity("signal",async r=>{if(r.type==="cl_dtrs"&&r.value){const{sendChallengeResponse:o}=await Rs();o({method:"clarity",token:r.value})}}),window.clarity("metadata",()=>{bw({surface:"cmc"});const r=Ye(qL);r!==null&&bw({isNewUser:r.toString()})},!1,!0),()=>{delete window.clarity,n.remove()}}catch(n){return V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"useClarity",eventInfo_details:"Error loading Clarity",eventInfo_errorMessage:`${n}`}}),()=>{}}}}function h0(t){if(ye.instance().config().persistThemeChoice){const n=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";t!==n?sr(Eg,t):so(Eg)}document.documentElement.setAttribute("data-theme",t),Pt.emit("theme:color-applied",t)}function zwe(){const{persistThemeChoice:t,enforceTheme:e}=ye.instance().config(),[n,r]=lt(ks);m.useEffect(()=>{const o=window.matchMedia("(prefers-color-scheme: dark)"),i=a=>{const c=a.matches?"dark":"light";r(c),h0(c),t&&so(Eg)};let s=t?mn(Eg):"";return s!=="dark"&&s!=="light"&&(s=o.matches?"dark":"light"),e&&(s=e),r(s),h0(s),o.addEventListener("change",i),()=>{o.removeEventListener("change",i)}},[r,t,e]),m.useEffect(()=>{n&&h0(n)},[n])}function Vwe(){m.useEffect(()=>{if(window.ReportingObserver===void 0)return()=>{};const t=new ReportingObserver(e=>{for(const n of e){if(n.type!=="csp-violation"||!n.body)continue;const{body:r}=n,{blockedURL:o,documentURL:i,effectiveDirective:s,disposition:a}=r;console.error("Reporting CSP violation",{blockedURL:o,documentURL:i,effectiveDirective:s,disposition:a}),V.trackEvent({name:"system",data:{eventName:"copilotCSPViolation",eventInfo_blockedURL:o,eventInfo_documentURL:i,eventInfo_effectiveDirective:s,eventInfo_disposition:a}})}},{buffered:!0,types:["csp-violation"]});return t.observe(),()=>{t.disconnect()}},[])}function $we(){const t=me("custom-1ds"),e=O(Vr);m.useEffect(()=>{if(!t||!ye.instance().config().enableCustom1DS)return cM(),()=>{};if(!e)return()=>{};const n=()=>{if(window.oneDS){const{ApplicationInsights:i}=window.oneDS;return new i}},r=()=>{var c;window.OneDsAzureAnalytics=window.OneDsAzureAnalytics??n();function i(){var d;return!!!((d=window.OneDsAzureAnalytics)!=null&&d.getCookieMgr().get("MSCC"))}const s={adobe:i(),google:i()},a={instrumentationKey:"c72e6b24df604532a6282edd268b4ba4-9cdee1fe-5d2f-4626-9620-dbad9b53a8e5-8065",channelConfiguration:{eventsLimitInMem:50,autoFlushEventsLimit:1},propertyConfiguration:{userConsentCookieName:hy.name,gpcDataSharingOptIn:sM(),callback:{userConsentDetails:()=>{if(!cy.includes(e))return{Required:!0,Analytics:!0,SocialMedia:!0,Advertising:!0};const u=sp();return{Required:Object.values(u).includes(!0),Analytics:u.analytics,SocialMedia:u.socialMedia,Advertising:u.advertising}}}},webAnalyticsConfiguration:{coreData:{appId:"JS:Copilot_microsoft_com"},cookiesToCollect:["_mkto_trk"],urlCollectQuery:!0,syncMuid:i()},extensionConfig:{IdSyncPlugin:s}};window.postConsAzure1DSInit||((c=window.OneDsAzureAnalytics)==null||c.initialize(a,[]),window.postConsAzure1DSInit=!0)},o=document.createElement("script");return o.src="https://az416426.vo.msecnd.net/scripts/c/ms.analytics-web-4.min.js",o.async=!0,o.onload=r,document.head.appendChild(o),()=>{document.head.removeChild(o)}},[t,e])}function Gwe(t){const{handler:e}=vU({deferred:!0}),{handler:n}=BU({deferred:!0}),{passthroughType:r,prompt:o}=HU(),i=m.useCallback(c=>{V.setLandingPage("chatWithPartialPromptPassthrough"),e(c)},[e]),s=m.useCallback(c=>{V.setLandingPage("chatWithFullPromptPassthrough"),n(c)},[n]),a=m.useCallback(()=>{if(o&&r)switch(r){case"partial":i(o);break;case"full":s(o);break}},[s,i,r,o]);m.useEffect(()=>{t&&a()},[t,a])}function Kwe(){const t=$t(),e=m.useRef(!1),n=O(gr),[r,o]=lt(Zu),i=wT();m.useEffect(()=>{t.startsWith("/chats")&&vn("appearance-talk")==="1"&&(e.current=!0)},[t]),m.useEffect(()=>{i&&n&&e.current&&(e.current=!1,o($I))},[n,e,r,o,i])}function Wwe(){const t=O(ft),e=O(FL),n=me("adsidsync"),r=O(Vr),o=Pr(),i=L9(r),s=O(VI);m.useEffect(()=>{const{adsEnabled:a,enforceAdsOptOutOfPersonalization:c}=ye.instance().config();if(t&&e&&n){const u=iM(),f=sp().advertising;if(V.trackEvent({name:"system",data:{eventName:"copilotAdsSignal",eventInfo_scenario:"syncAdvertisingId",eventInfo_conversationId:t,eventInfo_additionalData:JSON.stringify({isAdsEnabled:a,isAdPersonalizationEnabled:f,isAuthenticated:o,isGdprPlusRegion:i,isChoiceCookieEmpty:!u})}}),!a)return;const p=new URLSearchParams;if(p.append("cpid",e),p.append("cvid",t),o&&p.append("cp","1"),u){if(i&&!f)return;f&&!c?p.append("ps","1"):p.append("ps","0")}else{if(i)return;p.append("ps","1")}const g=`https://c.bing.com/cp?${p}`,v=performance.now();fetch(g,{method:"GET",mode:"no-cors",credentials:"include"}).then(b=>{const y=performance.now();PD(g,"GET",y-v,b.clone())}).catch(b=>{V.trackEvent({name:"system",data:{eventName:"copilotWebError",eventInfo_errorType:"adsError",eventInfo_errorMessage:"Ads Id Sync failed with error",eventInfo_details:`Ads Id Sync failed: ${b}`}})})}},[s,t,r,i,n,e,o])}function qwe(t){const e=O(In),n=O(Ey),r=O(Iy),o=O(xd),i=O(wy),{upsellFromAuth0:s}=ye.instance().config().proSubscription,{handleProSubscription:a}=Vv({payflowEntryPoint:"RedirectFromAuth0Account",skuType:i?"FreeTrial":"1Mo-Paid",upsellReason:"",entryStyle:"Redirect"}),u=Pr()&&(e==null?void 0:e.provider)==="microsoft",d=me("cmc-m365-sku"),f=ni("pff"),p=g$("needsStartSubscription"),g=$t(),v=m.useRef(!1);m.useEffect(()=>{if(p&&d&&u&&!g.startsWith("/subscription/start")&&(f==="WinNative"||f==="EdgeSidepane")){aM("needsStartSubscription"),setTimeout(()=>{a()},0);return}if(!(s!=null&&s.navigateToProSubPageAfterLogin))return;const b=sessionStorage.getItem(_0);if(!b)return;async function y(C){const[,S]=C.split("-");if(S==="link"){const w=performance.now(),{getAuth0AccessToken:E,auth0:I}=await Co.get(),T=await E(Cf);if(!T){ii({feature:"accountLinkAuth0WithMSA",errorType:"LinkStartedWithoutAuth0Token"});return}try{await Hr({path:"/user/link",args:{body:{token:T}}})}catch(A){A instanceof Error&&ii({feature:"accountLinkAuth0WithMSA",errorType:A.name,errorMessage:A.message,exception:A.stack})}finally{I.logout({openUrl:!1}),Pc({feature:"accountLinkAuth0WithMSA",duration:performance.now()-w}),o||await a()}}}if(t&&!v.current&&n){if(v.current=!0,sessionStorage.removeItem(_0),(e==null?void 0:e.accountType)!=="MSA"||r)return;y(b)}},[t,a,s,e,o,r,n,g,u,f,d,p])}function Ywe(t){const e=_e(gy);m.useEffect(()=>{if(!t)return()=>{};const n=i=>sU(i)?(e(i.toString()),!0):!1,r=i=>{const s=i.target.closest("a");s&&s instanceof HTMLAnchorElement&&n(s.href)&&i.preventDefault()},o=window.open;return window.open=function(...s){return s.length>0&&typeof s[0]=="string"&&!n(s[0])?o.apply(window,s):null},document.addEventListener("click",r),()=>{window.open=o,document.removeEventListener("click",r)}},[t,e])}function Qwe(){m.useEffect(()=>{const t=mn(B0),e=Date.now();t||sr(B0,e.toString())},[])}function Jwe(){m.useEffect(()=>{},[])}function Xwe(t){const[e,n]=m.useState(!1),r=iU();return m.useEffect(()=>{e||!t||r({enablePageRedirect:!0,overwriteData:!1}).then(o=>{o&&n(!0)}).catch(console.error)},[r,e,t]),m.useEffect(()=>{const o=()=>{r({enablePageRedirect:!1,overwriteData:!0,eventDriven:!0}).catch(console.error)};return Pt.on("auth:account-set-by-msal-sso",o),()=>{Pt.off("auth:account-set-by-msal-sso",o)}},[r]),{appInitialized:e}}let W9=-1;const Ab=t=>{addEventListener("pageshow",e=>{e.persisted&&(W9=e.timeStamp,t(e))},!0)},vd=(t,e,n,r)=>{let o,i;return s=>{e.value>=0&&(s||r)&&(i=e.value-(o??0),(i||o===void 0)&&(o=e.value,e.delta=i,e.rating=((a,c)=>a>c[1]?"poor":a>c[0]?"needs-improvement":"good")(e.value,n),t(e)))}},q9=t=>{requestAnimationFrame(()=>requestAnimationFrame(()=>t()))},$A=()=>{const t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},kb=()=>{const t=$A();return(t==null?void 0:t.activationStart)??0},yd=(t,e=-1)=>{const n=$A();let r="navigate";return W9>=0?r="back-forward-cache":n&&(document.prerendering||kb()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},f0=new WeakMap;function Zwe(t,e){return f0.get(t)||f0.set(t,new e),f0.get(t)}const Y9=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver(o=>{Promise.resolve().then(()=>{e(o.getEntries())})});return r.observe({type:t,buffered:!0,...n}),r}}catch{}},Q9=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let wu=-1;const d2=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,Wv=t=>{document.visibilityState==="hidden"&&wu>-1&&(wu=t.type==="visibilitychange"?t.timeStamp:0,eIe())},h2=()=>{addEventListener("visibilitychange",Wv,!0),addEventListener("prerenderingchange",Wv,!0)},eIe=()=>{removeEventListener("visibilitychange",Wv,!0),removeEventListener("prerenderingchange",Wv,!0)},J9=()=>{var t;return wu<0&&(wu=(document.prerendering||(t=globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden")[0])==null?void 0:t.startTime)??d2(),h2(),Ab(()=>{setTimeout(()=>{wu=d2(),h2()})})),{get firstHiddenTime(){return wu}}},GA=t=>{document.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},f2=[1800,3e3],tIe=(t,e={})=>{GA(()=>{const n=J9();let r,o=yd("FCP");const i=Y9("paint",s=>{for(const a of s)a.name==="first-contentful-paint"&&(i.disconnect(),a.startTime<n.firstHiddenTime&&(o.value=Math.max(a.startTime-kb(),0),o.entries.push(a),r(!0)))});i&&(r=vd(t,o,f2,e.reportAllChanges),Ab(s=>{o=yd("FCP"),r=vd(t,o,f2,e.reportAllChanges),q9(()=>{o.value=performance.now()-s.timeStamp,r(!0)})}))})},nIe=t=>{const e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(e(t=Q9(t)),document.addEventListener("visibilitychange",t,{once:!0}))};let rIe=class{constructor(){J(this,"m")}h(e){var n;(n=this.m)==null||n.call(this,e)}};const p2=[2500,4e3],oIe=(t,e={})=>{GA(()=>{const n=J9();let r,o=yd("LCP");const i=Zwe(e,rIe),s=c=>{e.reportAllChanges||(c=c.slice(-1));for(const u of c)i.h(u),u.startTime<n.firstHiddenTime&&(o.value=Math.max(u.startTime-kb(),0),o.entries=[u],r())},a=Y9("largest-contentful-paint",s);if(a){r=vd(t,o,p2,e.reportAllChanges);const c=Q9(()=>{s(a.takeRecords()),a.disconnect(),r(!0)});for(const u of["keydown","click","visibilitychange"])addEventListener(u,()=>nIe(c),{capture:!0,once:!0});Ab(u=>{o=yd("LCP"),r=vd(t,o,p2,e.reportAllChanges),q9(()=>{o.value=performance.now()-u.timeStamp,r(!0)})})}})},m2=[800,1800],Vw=t=>{document.prerendering?GA(()=>Vw(t)):document.readyState!=="complete"?addEventListener("load",()=>Vw(t),!0):setTimeout(t)},iIe=(t,e={})=>{let n=yd("TTFB"),r=vd(t,n,m2,e.reportAllChanges);Vw(()=>{const o=$A();o&&(n.value=Math.max(o.responseStart-kb(),0),n.entries=[o],r(!0),Ab(()=>{n=yd("TTFB",0),r=vd(t,n,m2,e.reportAllChanges),r(!0)}))})},sIe=t=>{var i;const e=(i=performance.getEntriesByType("navigation")[0])==null?void 0:i.type;let n;const r=navigator;r.connection&&typeof r.connection.effectiveType=="string"&&(n=r.connection.effectiveType);const o={eventName:t.name,eventInfo_duration:t.value,eventInfo_navigationType:e,eventInfo_connectionType:n};V.trackEvent({name:"system",data:o});try{const s=`web-vitals-${t.name}`;performance.mark(s),performance.measure(`web-vitals-measure-${t.name}`)}catch{}};let g2=!1;function aIe(){const t=_e(MM);if(typeof window>"u"||g2)return;g2=!0;let e=!1;const n=o=>{sIe(o),t(i=>({...i,[o.name.toLowerCase()]:o.value}))},r=o=>{e||(e=!0,n(o))};iIe(n),tIe(n),oIe(r,{reportAllChanges:!0})}function cIe(){m.useEffect(()=>(window.addEventListener("unhandledrejection",g1),()=>{window.removeEventListener("unhandledrejection",g1)}),[])}function lIe(t={}){const{isAppInitialized:e=!1}=t,n=window.appStart;return m.useEffect(()=>!e||!n?()=>{}:(window.addEventListener("beforeunload",J1),()=>{window.removeEventListener("beforeunload",J1)}),[e,n]),{startTime:n}}function uIe(){typeof window<"u"&&(Object.defineProperty(window,"APP_VERSION",{value:xI()}),Object.defineProperty(window,"APP_SURFACE",{value:"cmc"}))}const dIe=new bF({defaultOptions:{queries:{retry:0,refetchOnWindowFocus:!1}}});function hIe({sidebar:t,customLayout:e=!1}){Qwe(),ab(),Fwe(),Cde(),gue();const n=jwe(),{appInitialized:r}=Xwe(n);aCe(),Gwe(r),zwe(),cIe();const o=b6();Ywe(o);const i=O(qo);lIe({isAppInitialized:r}),Owe(),ofe(),$we(),Kwe();const s=O(xf);return Nwe(r),aIe(),Bwe(),qwe(r),Jwe(),Hwe(),Vwe(),Wwe(),s==="user-banned"?h.jsx(_we,{}):s==="age-verification"?h.jsx(gde,{}):s?h.jsx(eA,{}):!r||!n?null:i?h.jsx(dU,{accountActionRequired:i}):h.jsx(CF,{client:dIe,children:h.jsx(oO,{reducedMotion:"user",children:h.jsx(Twe,{sidebar:t,customLayout:e,children:h.jsx(SF,{})})})})}function fIe(t){const{sidebar:e,customLayout:n,onError:r=mM}=t;return h.jsxs(lO,{fallback:h.jsx(eA,{}),onError:r,children:[h.jsx(Kme,{}),h.jsx(hIe,{sidebar:e,customLayout:n,onError:r})]})}uIe();document.addEventListener("DOMContentLoaded",()=>{G9()&&setTimeout(()=>Uwe(),0)});function pIe(){const t=Pr(),e=O(dT),n=_e(WL);m.useEffect(()=>{t&&!e&&nue()&&n(!0)},[t,e,n])}class KA{static install(){_le(new KA)}async maybeInstantiate(){return lo(K0,l.boolean().nullable())?new gIe:null}}const mIe={actAsBroker:!0,preferredInteractionType:Ee.Redirect};class gIe extends Uj{supportsPwBBroker(){return!0}async instantiateMsal(){IT({apiName:le.INITIALIZE_START,providerType:"microsoft",extraInfo:{eventInfo_isPWB:!0}});const e=new wle(RO,mIe,NO);return await e.initialize(),await e.initializeBrokering(),TT({apiName:le.INITIALIZE_END,providerType:"microsoft",extraInfo:{eventInfo_isPWB:!0}}),e}}oU();KA.install();function vIe(){pIe();const t=me("pages-layout-v2"),e=$t();let n=!1;return t&&e.startsWith("/pages")&&(n=!0),h.jsx(fIe,{customLayout:n})}const yIe=l.object({"prompt-branch":l.string().optional(),branch:l.string().optional()}),At=EF({component:vIe,validateSearch:NF(yIe),search:{middlewares:[wF(["prompt-branch","branch"])]}}),X9=m.lazy(()=>z(()=>import("./discover-BxQ0PB77.js").then(t=>t.d),__vite__mapDeps([333,1,2,334,335,336,337,289,268,267,271,338,339,340,341,342,343,344,345,346,332,347,348,349,350,239,225,351,352,275,241]))),bIe=Et("/")({component:()=>h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-full items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(X9,{})})}),CIe=Et("/discover")({component:()=>h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-full items-center justify-center",children:h.jsx(kt,{className:"size-12"})}),children:h.jsx(X9,{})})}),SIe=100,v2=.3,EIe=2*vi,wIe="bottom-[60px] sm:bottom-[120px] h-[50px]",Z9="min-h-[60px] sm:min-h-[120px]",e7="min-h-[calc(100dvh-60px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-120px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",IIe="min-h-[calc(100dvh-48px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-48px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",TIe="min-h-[calc(100dvh-80px-var(--chat-details-container-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))] sm:min-h-[calc(100dvh-80px-var(--composer-container-height)-(2*var(--layout-offset-y)))]",_Ie="bottom-[var(--character-component-height)] h-[50px]",AIe="min-h-[calc(100dvh-var(--character-component-height)-var(--composer-container-height)-(2*var(--layout-offset-y)))]";function kIe(t,e,n,r,o){const[i,s]=lt(SM),a=m.useCallback(()=>{s(E=>!E)},[s]),c=ho(),u=m.useMemo(()=>({variants:{start:{opacity:0},exiting:{opacity:0,y:-100,transition:{duration:.2,y:{duration:.3}}}},initial:"start",animate:i?"exiting":"default"}),[i]),d=m.useMemo(()=>({initial:{opacity:0,y:SIe},animate:{opacity:1,y:0,transition:{duration:.4,y:{duration:v2}}},exit:{opacity:0,y:-100,transition:{duration:.2,y:{duration:v2}}},onAnimationStart:E=>{typeof E=="object"&&!Array.isArray(E)&&E.opacity===1&&(setTimeout(()=>t(),10),s(!1))}}),[t,s]),f=n?_Ie:wIe,p=n?`min-h-[${r}px]`:Z9,{highlighted:g,backstage:v}=RIe(o,i),b=NIe(n,v,g),y=m.useRef(null),{scrollYProgress:C}=IF({target:y,container:e,offset:["end start","start start"]}),S=Wu(C,[EIe/100,1],[0,1]);return{toggleMessagesAreExiting:a,backstageMessagesProps:u,highlightedMessagesProps:d,opacity:c?S:C,sentinelRef:y,sentinelClasses:f,backstageClasses:p,highlightedClasses:b,highlighted:g,backstage:v}}function xIe(t){const e=t7(t);if(!e)return[];const n=t.at(-2),r=[];ma(n)&&r.push(n),ma(e)&&r.push(e);const o=t.at(-3);if((o==null?void 0:o.author)==="human"&&r.length===2)return[o,...r];const i=e.author==="human",s=!i&&(n==null?void 0:n.author)==="ai";return i||s?[e]:t.slice(-2)}function t7(t){return t.at(-1)}function RIe(t,e){const n=xIe(t),r=t.slice(0,-(n.length+(e?2:0)));return{highlighted:n,backstage:r}}function NIe(t,e,n){return t?AIe:ye.instance().config().smallAnochorTopWithoutHeader&&n.length>0?e.length===0?TIe:IIe:e7}function n7(){return W(Jf("pageContainer")??"px-6","mx-auto w-full max-w-chat")}function PIe(){var t=new Map;function e(n){var r=n.root,o=n.rootMargin,i=n.threshold,s=t.get(r);s||(s=new Map,t.set(r,s));var a=JSON.stringify({rootMargin:o,threshold:i}),c=s.get(a);if(!c){var u=new Map,d=new IntersectionObserver(function(f){f.forEach(function(p){var g=u.get(p.target);g==null||g(p)})},{root:r,rootMargin:o,threshold:i});c={observer:d,entryCallbacks:u},s.set(a,c)}return{observe:function(p,g){var v,b;(v=c)==null||v.entryCallbacks.set(p,g),(b=c)==null||b.observer.observe(p)},unobserve:function(p){var g,v;(g=c)==null||g.entryCallbacks.delete(p),(v=c)==null||v.observer.unobserve(p)}}}return{getObserver:e}}var OIe="0px",MIe=[0],LIe=PIe();function DIe(t){var e,n,r=(e=t==null?void 0:t.rootMargin)!=null?e:OIe,o=(n=t==null?void 0:t.threshold)!=null?n:MIe,i=m.useRef(null),s=m.useRef(null),a=m.useRef(null),c=m.useState(),u=c[0],d=c[1],f=m.useCallback(function(){var b=i.current;if(!b){d(void 0);return}var y=LIe.getObserver({root:s.current,rootMargin:r,threshold:o});y.observe(b,function(C){d(C)}),a.current=y},[r,o]),p=m.useCallback(function(){var b=a.current,y=i.current;y&&(b==null||b.unobserve(y)),a.current=null},[]),g=m.useCallback(function(b){p(),i.current=b,f()},[f,p]),v=m.useCallback(function(b){p(),s.current=b,f()},[f,p]);return[g,{entry:u,rootRef:v}]}function $w(){return $w=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$w.apply(this,arguments)}function jIe(t){var e,n=DIe(t),r=n[0],o=n[1],i=!!((e=o.entry)!=null&&e.isIntersecting),s=m.useState(i),a=s[0],c=s[1];return i&&!a&&c(!0),[r,$w({},o,{isVisible:i,wasEverVisible:a})]}var UIe=100;function FIe(t){var e=t.loading,n=t.hasNextPage,r=t.onLoadMore,o=t.rootMargin,i=t.disabled,s=t.delayInMs,a=s===void 0?UIe:s,c=jIe({rootMargin:o}),u=c[0],d=c[1],f=d.rootRef,p=d.isVisible,g=!i&&!e&&p&&n;return m.useEffect(function(){if(g){var v=setTimeout(function(){r()},a);return function(){clearTimeout(v)}}},[r,g,a]),[u,{rootRef:f}]}function BIe(t){const{children:e,onClick:n,title:r,className:o,spatialNavigationAutofocus:i=!0,disabled:s=!1,testId:a,hoverVariant:c=!1}=t,[u,d]=m.useState(!1),[f,p]=m.useState(!1),g=()=>d(!0),v=()=>d(!1),b=()=>p(!0),y=()=>p(!1),C=u||f&&c?"acrylic-thin-inverted":"acrylic-thin";return h.jsx(Ue,{disabled:s,variant:"pill",color:C,size:"64-xxl",testId:a,className:W("w-conversations items-center justify-center",o),onClick:n,onFocus:g,onBlur:v,onMouseEnter:b,onMouseLeave:y,title:r,spatialNavigationAutofocus:i,children:e})}async function Gw(t,e,n){try{await Hr({path:`/conversations/${t}/react`,args:{body:{[n]:e},analytics:{anonymousPath:"/conversations/*/react"}}})}catch{}}async function r7(t,e,n){try{await Hr({path:`/conversations/${t}/feedback`,args:{body:{types:Array.from(e),text:n},analytics:{anonymousPath:"/conversations/*/feedback"}}})}catch{}}const o7=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M10.052 17.7057C10.3913 18.683 11.6841 19.1333 12.4829 18.2962C12.6455 18.1257 12.8081 17.9416 12.9176 17.7774C13.2379 17.2968 13.3725 16.6641 13.4218 16.0477C13.4721 15.4195 13.438 14.7454 13.3738 14.1352C13.3093 13.5225 13.2129 12.9604 13.1328 12.5522C13.1294 12.5345 13.1259 12.5171 13.1225 12.5H14.006C15.8777 12.5 17.2924 10.8049 16.9576 8.96334L16.2737 5.20164C15.8017 2.60569 13.2078 0.970952 10.6622 1.66519L5.06251 3.19239C4.14894 3.44154 3.45455 4.18547 3.26885 5.11401L2.91581 6.87918C2.63809 8.2678 3.69991 9.43756 4.82905 9.88388C5.15163 10.0114 5.44337 10.1732 5.66974 10.374C7.37583 11.8875 7.99442 13.0971 9.05406 15.2231C9.4084 15.9339 9.77205 16.8995 10.052 17.7057ZM12.0165 12.1214L12.0169 12.1229L12.0187 12.1303L12.0262 12.1614C12.0328 12.1892 12.0426 12.231 12.0549 12.2851C12.0793 12.3933 12.1135 12.5507 12.1515 12.7446C12.2277 13.1333 12.3188 13.665 12.3793 14.2398C12.4401 14.8171 12.4685 15.4242 12.425 15.9679C12.3806 16.5235 12.2652 16.9532 12.0855 17.2227C12.0264 17.3113 11.9138 17.444 11.7594 17.6058C11.5605 17.8142 11.1314 17.7657 10.9967 17.3777C10.7141 16.5639 10.3334 15.5481 9.94904 14.777C8.88216 12.6365 8.19326 11.2759 6.33336 9.62597C5.99304 9.32406 5.58878 9.1089 5.19665 8.9539C4.31631 8.60592 3.75035 7.80549 3.89639 7.0753L4.24943 5.31013C4.36085 4.753 4.77748 4.30665 5.32562 4.15715L10.9254 2.62995C12.9052 2.08999 14.9227 3.36145 15.2898 5.38053L15.9738 9.14223C16.197 10.3699 15.2538 11.5 14.006 11.5H12.5015C12.3476 11.5 12.2022 11.5709 12.1074 11.6923C12.0127 11.8136 11.9792 11.972 12.0165 12.1214C12.0165 12.1214 12.0165 12.1213 12.0165 12.1214Z",fill:"currentColor"})),FNe=Object.freeze(Object.defineProperty({__proto__:null,default:o7},Symbol.toStringTag,{value:"Module"})),i7=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M10.052 2.29418C10.3913 1.31688 11.6841 0.866611 12.4829 1.70374C12.6455 1.87416 12.8081 2.05832 12.9176 2.22254C13.2379 2.70305 13.3725 3.33584 13.4218 3.9522C13.4721 4.58034 13.438 5.25446 13.3738 5.86473C13.3093 6.47735 13.2129 7.03948 13.1328 7.44766C13.1294 7.46535 13.1259 7.48277 13.1225 7.49989H14.006C15.8777 7.49989 17.2924 9.19503 16.9576 11.0365L16.2737 14.7983C15.8017 17.3942 13.2078 19.0289 10.6622 18.3347L5.06251 16.8075C4.14894 16.5583 3.45455 15.8144 3.26885 14.8859L2.91581 13.1207C2.63809 11.7321 3.69991 10.5623 4.82905 10.116C5.15163 9.9885 5.44337 9.82668 5.66974 9.62586C7.37583 8.11234 7.99442 6.90276 9.05406 4.77684C9.4084 4.06594 9.77205 3.10043 10.052 2.29418ZM12.0165 7.87851L12.0169 7.87696L12.0187 7.86962L12.0262 7.83852C12.0328 7.81068 12.0426 7.76892 12.0549 7.71482C12.0793 7.60658 12.1135 7.44919 12.1515 7.25525C12.2277 6.86655 12.3188 6.33493 12.3793 5.76005C12.4401 5.18282 12.4685 4.57569 12.425 4.03195C12.3806 3.47644 12.2652 3.04673 12.0855 2.77724C12.0264 2.68859 11.9138 2.55593 11.7594 2.3941C11.5605 2.18565 11.1314 2.23417 10.9967 2.62217C10.7141 3.43598 10.3334 4.45183 9.94904 5.22294C8.88216 7.36338 8.19326 8.72396 6.33336 10.3739C5.99304 10.6758 5.58878 10.891 5.19665 11.046C4.31631 11.394 3.75035 12.1944 3.89639 12.9246L4.24943 14.6898C4.36085 15.2469 4.77748 15.6932 5.32562 15.8427L10.9254 17.3699C12.9052 17.9099 14.9227 16.6384 15.2898 14.6194L15.9738 10.8577C16.197 9.62998 15.2538 8.49989 14.006 8.49989H12.5015C12.3476 8.49989 12.2022 8.42895 12.1074 8.3076C12.0127 8.18627 11.9792 8.02785 12.0165 7.87851C12.0165 7.87847 12.0165 7.87855 12.0165 7.87851Z",fill:"currentColor"})),BNe=Object.freeze(Object.defineProperty({__proto__:null,default:i7},Symbol.toStringTag,{value:"Module"}));function s7(t){const{titleText:e,subtitleText:n,positiveButtonText:r,negativeButtonText:o,positiveButtonTitle:i,negativeButtonTitle:s,modalHeaderText:a,onPositiveClick:c,onNegativeClick:u,isModalOpen:d,onModalClose:f,modalContent:p,className:g="",isDebugAudioRecorderEnabled:v=!1}=t;return h.jsxs("div",{className:g,children:[h.jsx("div",{className:"relative w-full pb-6 after:absolute after:mt-3 after:w-full after:border-b after:border-stroke-300"}),h.jsx("h2",{className:"mt-5 text-foreground-600 text-xs",children:h.jsx("strong",{children:e})}),h.jsx("p",{className:"mt-1 text-foreground-600 text-xs",children:n}),h.jsxs("div",{className:W("mt-3.5 grid w-fit min-w-72 grid-rows-1 gap-2",v?"grid-cols-3":"grid-cols-2"),children:[h.jsxs(Ue,{onClick:c,title:i,variant:"rect",size:"36-sm",children:[h.jsx(i7,{className:"size-5"})," ",r]}),h.jsxs(Ue,{onClick:u,title:s,variant:"rect",size:"36-sm",children:[h.jsx(o7,{className:"size-5"})," ",o]}),v&&h.jsx(Ue,{onClick:async()=>{const{AUDIO_RECORDER:b}=await z(async()=>{const{AUDIO_RECORDER:y}=await import("./audio-recorder-Sc-z7_UX.js");return{AUDIO_RECORDER:y}},__vite__mapDeps([353,1,2]));await b.download()},title:"Download audio debug",variant:"rect",size:"36-sm",children:"Download audio debug"})]}),d&&h.jsx(Kd,{isOpen:!0,onClose:f,headerText:a,className:"w-full max-w-[400px]",children:p})]})}function HIe(){}function zIe({inputValue:t,handleChange:e}){const[n,r]=m.useState(""),{t:o}=He();return ci("kill-free-form-text")?null:h.jsx(MA,{disabled:!1,className:"max-h-[8rem] grow-0 basis-[8rem] !items-start overflow-auto rounded-xl border-2 border-stone-700 bg-black/5 px-0.5",inputValue:t,characterLimit:Zz,autoFocus:!1,setInput:s=>{e(s)},placeholder:o("chat.feedback.placeholder"),errorMessage:n,setError:r,onEnter:HIe,isMultiLines:!0})}function a7(t){const{feedbackOptions:e,onSubmit:n}=t,{t:r}=He(),[o,i]=m.useState(new Set),[s,a]=m.useState(""),c=o.size===0,u=f=>{i(p=>{const g=new Set(p);return o.has(f)?g.delete(f):g.add(f),g})},d=async()=>{n(o,s),i(new Set)};return e?h.jsxs("div",{className:"flex flex-col gap-2 pt-2",children:[h.jsx("ul",{role:"list",className:"mt-0 flex list-none flex-col gap-2",children:e.map(f=>h.jsx("li",{children:h.jsx(v6,{label:f.label,setChecked:()=>u(f.type),checked:o.has(f.type)})},f.type))}),c?null:h.jsx(zIe,{inputValue:s,handleChange:a}),h.jsx(Ue,{title:r("chat.feedback.submitFeedbackButton"),size:"48-lg",color:"strong",className:"mt-4 max-h-12",disabled:c,onClick:d,children:r("chat.feedback.submitFeedbackButton")})]}):null}function VIe(t){var C,S;const{className:e}=t,n=O(UI),[r,o]=lt(vy),[i,s]=m.useState(!1),[a,c]=m.useState(),u=me("ads-showroom-picasso-feedback"),{t:d}=He(),f=w=>{En({source:"feedback",scenario:V$[w],conversationId:r==null?void 0:r.conversationId,additionalData:{brandId:r==null?void 0:r.brandId,brandName:(r==null?void 0:r.brandName)??""}})},p=()=>{s(!1),o(void 0)},g=async w=>{r!=null&&r.conversationId&&u&&await Gw(r.conversationId,w,"showroomReaction")},v=()=>{var w;f("thumbs-up"),c("thumbs-up"),(w=n==null?void 0:n.showroom)!=null&&w.positive?s(!0):p(),g("thumbs-up")},b=()=>{var w;f("thumbs-down"),c("thumbs-down"),(w=n==null?void 0:n.showroom)!=null&&w.negative?s(!0):p(),g("thumbs-down")},y=async(w,E)=>{p(),r&&V.trackEvent({name:"interaction",data:{eventName:"copilotSubmitFineConversationFeedback",eventInfo_fineFeedbackTypes:Array.from(w).join(","),eventInfo_conversationId:r.conversationId,eventInfo_additionalData:JSON.stringify({brandId:r.brandId,brandName:r.brandName,reactionType:a})}}),r!=null&&r.conversationId&&w.size>0&&r7(r.conversationId,w,E)};return h.jsx(s7,{titleText:d("ads.showroomFeedbackTitle",{brand:r==null?void 0:r.brandName}),subtitleText:d("ads.showroomFeedbackDescription"),positiveButtonText:d("ads.showroomFeedbackPositive"),negativeButtonText:d("ads.showroomFeedbackNegative"),positiveButtonTitle:d("reviewPrompt.positive"),negativeButtonTitle:d("reviewPrompt.negative"),modalHeaderText:d("ads.showroomFeedbackModalTitle"),onPositiveClick:v,onNegativeClick:b,isModalOpen:i,onModalClose:p,modalContent:h.jsx(a7,{onSubmit:y,feedbackOptions:a==="thumbs-up"?((C=n==null?void 0:n.showroom)==null?void 0:C.positive)??void 0:(S=n==null?void 0:n.showroom)==null?void 0:S.negative}),className:e,isDebugAudioRecorderEnabled:!1})}function $Ie(t){const{onSubmit:e}=t,{t:n}=He(),[r,o]=m.useState(!1),i=async s=>{o(!0),await e(s),o(!1)};return h.jsxs("div",{children:[h.jsx("p",{children:n("voice.feedback.reviewReason")}),h.jsx(Ue,{title:n("voice.feedback.okay"),size:"48-lg",color:"strong",className:"mt-4 max-h-12 w-full",disabled:r,onClick:()=>i(!0),children:n("voice.feedback.okay")}),h.jsx(Ue,{title:n("voice.feedback.noThanks"),size:"48-lg",color:"default",className:"mt-3 w-full",onClick:()=>i(!1),children:n("voice.feedback.noThanks")})]})}function GIe({className:t}){const e=O(ft),n=O(UI),r=_e(Id),[o,i]=lt(uT),[s,a]=m.useState(),c=me("debug-audio-recorder")&&!1,u=pZ(),{t:d}=He(),f=()=>{En({source:"voiceFeedback",scenario:"thumbsUp",conversationId:e,destination:u?"appearance":void 0}),e&&Gw(e,"thumbs-up","audioReaction"),r(!1),Pt.emit("feedback:ai-message-reaction","positive")},p=()=>{En({source:"voiceFeedback",scenario:"thumbsDown",conversationId:e,destination:u?"appearance":void 0}),e&&Gw(e,"thumbs-down","audioReaction"),a("feedback-options")},g=()=>{a(null),r(!1)},v=async(C,S)=>{e&&C.size>0&&r7(e,C,S),o?g():a("review-request")},b=async C=>{C&&(i(!0),await Vhe({optInToVoiceTraining:!0})),g()},y=()=>s==="feedback-options"?h.jsx(a7,{onSubmit:v,feedbackOptions:u?n==null?void 0:n.appearance:n==null?void 0:n.call}):s==="review-request"?h.jsx($Ie,{onSubmit:b}):null;return h.jsx(s7,{titleText:d(u?"voice.feedback.howWasAppearanceChat":"voice.feedback.howWasVoiceChat"),subtitleText:d("voice.feedback.giveFeedback"),positiveButtonText:d("voice.feedback.good"),negativeButtonText:d("voice.feedback.bad"),positiveButtonTitle:d("reviewPrompt.positive"),negativeButtonTitle:d("reviewPrompt.negative"),modalHeaderText:d(s==="feedback-options"?"voice.feedback.chooseWhatHappened":"voice.feedback.canMicrosoftReview"),onPositiveClick:f,onNegativeClick:p,isModalOpen:!!s,onModalClose:g,modalContent:y(),className:t,isDebugAudioRecorderEnabled:c})}const KIe=m.lazy(()=>z(()=>import("./index.es-xEQWo7JZ.js"),__vite__mapDeps([219,2,1]))),WIe=VU();function qIe({onAnimationClicked:t}){const e=m.useRef(null),{t:n}=He(),[r,o]=m.useState(null);m.useEffect(()=>{WIe.load("../../assets/lottie/character-thinking-cloud-animation.json").then(o).catch(()=>o(null))},[]),m.useEffect(()=>{const a=e.current;return a&&r&&a.playSegments([0,67],!0),()=>{a&&r&&a.playSegments([350,370],!0)}},[r]);const i=()=>{var c,u;(c=e.current)==null||c.playSegments([320,345],!0),(u=e.current)==null||u.pause(),t();const a=document.getElementById(OA);a==null||a.focus()},s=a=>{a.key==="Enter"&&i()};return h.jsx("div",{children:h.jsx(m.Suspense,{fallback:h.jsx("div",{}),children:h.jsx(KIe,{lottieRef:e,role:"button",tabIndex:0,"aria-label":n("characterAnimation.characterThinkingCloudAriaLabelText"),title:n("characterAnimation.characterThinkingCloudAriaLabelText"),animationData:r,loop:!1,onMouseDown:i,onMouseEnter:()=>{var a;return(a=e.current)==null?void 0:a.playSegments([275,295],!0)},onMouseLeave:()=>{var a;return(a=e.current)==null?void 0:a.playSegments([296,315],!0)},onKeyDown:s,onComplete:()=>{var a;return(a=e.current)==null?void 0:a.playSegments([68,274],!0)}})})})}const y2=1,YIe=m.lazy(()=>z(()=>import("./character-BvPQJS6D.js"),__vite__mapDeps([229,1,2,230])).then(t=>({default:t.Character})));function QIe({animatingMessageId:t,isStreamingMessage:e,displayedCharacterId:n,setCharacterComponentHeight:r}){const o=me("characterspeech"),[i,s]=m.useState(0),[a,c]=m.useState(!1),[u,d]=lt(vc),f=O(li),p=()=>{s(0),c(!1)};m.useEffect(()=>{let b;return o&&u==="idle"&&(b=setInterval(()=>{s(y=>y<y2?y+1:y),f.length>0&&i===y2&&!e&&(c(!0),V.trackEvent({name:"system",data:{eventName:"characterTalkToMeDisplayed",eventInfo_conversationId:Ye(ft),eventInfo_characterId:n}}))},1e3)),()=>clearInterval(b)},[u,n,f.length,o,i,e]),m.useEffect(()=>{o&&u!=="idle"&&u!=="hovering"&&p()},[u,o]);const g=async()=>{p(),d("responding"),await pc.submitMessage({command:{type:"promptCharacterSpeech"},inputMethod:"promptCharacterSpeech"}),V.trackEvent({name:"interaction",data:{eventName:"characterTalkToMeClicked",eventInfo_conversationId:Ye(ft),eventInfo_characterId:n}})};function v(){switch(n){case"aqua":return"translate-x-9";case"mica":return"translate-x-14";case"erin":return"translate-x-16";default:throw new Error("Invalid characterId provided to getTranslateXClass")}}return h.jsx(lO,{fallback:h.jsx(eA,{}),onError:tG(t,n),children:h.jsxs("div",{"data-testid":"character-div",className:W("sticky top-0 h-2/5 min-h-[40vh] w-full bg-gradient-chat-light-character dark:bg-midnight-850 dark:bg-none",Zt.babylonCharacter),style:{maskImage:"linear-gradient(to bottom, #000 95%, transparent 100%)"},children:[h.jsx(xn,{children:a&&h.jsx(xe.div,{className:W("absolute start-1/2 top-12 size-36",v()),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1},children:h.jsx(qIe,{onAnimationClicked:g})})}),h.jsx(m.Suspense,{fallback:h.jsx("div",{className:"flex h-full items-center justify-center",children:h.jsx(kt,{type:"spinnerThemed",className:"size-12"})}),children:h.jsx(YIe,{characterId:n,setCharacterComponentHeight:r})})]})})}function JIe({className:t}){const{t:e}=He();return h.jsxs("div",{className:at("flex items-center gap-2",t),children:[h.jsx(kt,{type:"reasoning",className:"size-11"}),h.jsxs("div",{className:"flex flex-col text-sm",children:[h.jsx("span",{children:e("chat.reasoningLoading.title")}),h.jsx("span",{className:"text-foreground-450 dark:text-foreground-600",children:e("chat.reasoningLoading.description")})]})]})}function b2(t){let e=0;for(const n of t)e+=n;return e}function XIe(t,e,n){let r=0,o=null,i=[],s=0;return{getValue:()=>{if(!n)return 0;if(!o){o=Math.floor(performance.now());const c=t[t.length-1];if(!c)s=0;else{const u=c+b2(i)*1e3;u>o?(s=(u-o)/1e3,i=[]):(s=0,i=[])}}const a=t[r];return a?(r+=1,i=[],Math.max((a-o)/1e3,0)):(s=Number((s+b2(i)).toFixed(3)),i=[],e(r,o,s),r+=1,s)},queueUpdate:a=>{i.push(a)}}}function ZIe(t){const e=m.useRef([]);return m.useCallback(()=>XIe(e.current,(n,r,o)=>{e.current[n]=r+o*1e3},t),[t])}function c7(t){const{isActive:e,animationDuration:n="5s",children:r,className:o,...i}=t;return h.jsx("div",{className:at(e&&"bg-gradient-to-l from-foreground-800 via-foreground-300 to-foreground-800 bg-[size:200%_100%] bg-clip-text text-transparent",o),style:{...e&&{animation:`shimmer-reverse ${n} linear infinite 0.5s`}},...i,children:r})}const l7=t=>m.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",...t},m.createElement("path",{fill:"currentColor",d:"M12 1.999C17.523 1.999 22 6.477 22 12.001c0 5.523-4.478 10.001-10.001 10.001-5.524 0-10.002-4.478-10.002-10.001C1.998 6.477 6.476 1.998 12 1.998Zm0 1.5a8.502 8.502 0 1 0 0 17.003A8.502 8.502 0 0 0 12 3.5Zm-.004 7a.75.75 0 0 1 .743.648l.007.102.004 5.502a.75.75 0 0 1-1.493.102l-.007-.101-.004-5.502a.75.75 0 0 1 .75-.75ZM12 7.002a.999.999 0 1 1 0 1.997.999.999 0 0 1 0-1.997Z",opacity:.8})),HNe=Object.freeze(Object.defineProperty({__proto__:null,default:l7},Symbol.toStringTag,{value:"Module"}));function eTe(t){const{status:e}=t;let n=h.jsx("div",{className:"size-5 pe-1","aria-hidden":"true"});switch(e){case"running":n=h.jsx(kt,{className:"size-5"});break;case"failed":n=h.jsx(l7,{className:"size-5"});break;case"completed":n=h.jsx(yA,{className:"size-5"});break}return h.jsx("div",{className:"ps-0.5",children:n})}function tTe(t){const{activity:e}=t,{steps:n,status:r,title:o}=e;return h.jsxs("div",{className:"flex flex-col gap-3",children:[h.jsx("div",{className:"flex items-center gap-2",children:h.jsx(c7,{className:"text-sm",isActive:r==="running",children:o})}),n.map((i,s)=>h.jsxs("div",{className:"flex flex-row gap-2 text-sm",children:[h.jsx(eTe,{status:i.status}),h.jsx("div",{className:"text-sm",children:i.title})]},s))]})}const u7="rounded-2xl border border-stroke-250 p-3";function d7(){const{t}=He(),e=t("chat.reasoningLoading.title");return h.jsx("div",{className:"text-sm",children:h.jsx(c7,{isActive:!0,children:e})})}function C2(){return h.jsx(xe.div,{initial:ct,animate:Lt,className:W("w-max",u7),children:h.jsx(d7,{})})}function zNe(t){var f;const{shouldAnimate:e,items:n,activities:r}=t,o=((f=n==null?void 0:n.at(-1))==null?void 0:f.text)??"",[i,s]=m.useState(0),a=ZIe(!0),{blocks:c}=m.useMemo(()=>{if(!o)return{blocks:[]};const p=a(),g=i6(o);return{blocks:Fv(g,p,()=>{s(i+1)})}},[a,o,i]),u=!!(o&&c.length>0),d=r&&r.length>0&&!u;return!u&&!d?null:h.jsx(xe.div,{initial:ct,animate:Lt,className:W("w-5/6",u7),children:d?h.jsx("div",{className:"flex flex-col gap-5",children:r.map((p,g)=>h.jsx(tTe,{activity:p},g))}):h.jsxs(h.Fragment,{children:[h.jsx(d7,{}),h.jsx("div",{className:"pt-3 text-sm",children:h.jsx(Hv,{blocks:c,shouldAnimate:e})})]})})}function p0(){const t=O(wn),e=O(lX),n=O(li),r=me("think-deeper-cot"),o=me("smart-mode-cot"),i=m.useMemo(()=>{var s;return n.length&&((s=n.at(-1))==null?void 0:s.content.some(a=>a.type==="chainOfThought"))},[n]);switch(t){case"chat":case"computerUse":case"research":return e?null:h.jsx(kt,{type:"spinnerThemed",className:"absolute -ms-2.5 -mt-2 size-11"});case"reasoning":return r?h.jsx(C2,{}):h.jsx(JIe,{className:"absolute -ms-2.5 -mt-2 w-max"});case"smart":return o&&i?h.jsx(C2,{}):h.jsx(kt,{type:"spinnerThemed",className:"absolute -ms-2.5 -mt-2 size-11"});default:return null}}const nTe=m.lazy(()=>z(()=>import("./actions-chat-detail-DSrVP4io.js"),__vite__mapDeps([354,1,2,355,356,357,358,359,345,273,322,323])).then(t=>({default:t.ActionsChatDetail}))),rTe=m.lazy(()=>z(()=>import("./showroom-chat-detail-Bsr4w-dW.js"),__vite__mapDeps([360,1,2])).then(t=>({default:t.ShowroomChatDetail})));function oTe(){const t=O(ol);return h.jsx("div",{className:"flex size-full items-center justify-center",children:t?h.jsx(m.Suspense,{fallback:h.jsx(S2,{}),children:h.jsx(rTe,{})}):h.jsx(m.Suspense,{fallback:h.jsx(S2,{}),children:h.jsx(nTe,{})})})}function S2(){return h.jsx("div",{className:"flex size-full items-center justify-center",children:h.jsx(kt,{className:"size-12"})})}const Lm=376,m0="0.5rem";function h7(t){const{children:e}=t,n=O(Ar),r=ho(),o=n==="side-by-side",i=Eb(),s=n==="side-by-side"&&!i,a=r?"bg-stone-150":"bg-gradient-chat-light",c=bb(u=>{const d=document.getElementById("app");d&&d.style.setProperty("--chat-details-container-height",i?`${u.height}px`:null)});return h.jsxs("div",{className:W("flex size-full max-h-[100vh] min-h-0",i&&"flex-col",o&&"bg-sidebar-light dark:bg-sidebar-dark",r&&o&&"pb-2"),style:s?{gap:m0}:void 0,children:[n!=="chat-only"&&h.jsx(xe.div,{ref:c,className:W("rounded-lg",i&&"h-fit",o&&"shadow-lg","dark:bg-midnight-850 dark:bg-none",a),initial:{width:s?`calc(100% - ${m0} - max(${Lm}px, 25%))`:"100%"},animate:{width:s?`calc(100% - ${m0} - max(${Lm}px, 25%))`:"100%"},transition:Oo,children:h.jsx(oTe,{})}),h.jsx(xe.div,{className:W(n==="detail-only"&&"hidden",o&&a,i?"h-[calc(100vh-var(--chat-details-container-height))]":"h-full",o&&"rounded-lg pb-px shadow-lg dark:bg-midnight-850 dark:bg-none"),initial:{width:s?`max(${Lm}px, 25%)`:"100%"},animate:{width:s?`max(${Lm}px, 25%)`:"100%"},transition:Oo,children:e})]})}function iTe(t,e,n){const r=Fm(t,e),o=Qu(e,{weekStartsOn:1}),i=Fm(o,e),s=Fm(Cg(o,7),e),a=_u(t,"EEEE",{weekStartsOn:1}),c=n(`dates.weekdays.${a.toLowerCase()}`),u=n(`dates.months.${_u(t,"MMMM").toLowerCase()}Abbr`),d=_u(t,"d"),f=n("dates.dayMonthDate",{day:c,month:u,date:d});return r>=1?f:r>=0?`${n("dates.today")}`:r>=-1?`${n("dates.yesterday")}`:r>=i?c:r>=s?n("dates.previousDay",{day:c}):f}function sTe(t,e){return iTe(t,new Date,e)}function VNe(t){const e=Math.max(0,t),n=Math.floor(e/60),r=e%60;return`${n}:${r<10?"0":""}${r}`}function aTe(t){const{date:e,className:n}=t,{t:r}=He();return h.jsxs("div",{className:W("flex items-center",n),children:[h.jsx("span",{className:"opacity-70 text-xs-strong","data-testid":"date-divider",children:sTe(e,r)}),h.jsx(vA,{verticalMargin:!1,color:"accent",className:"mt-px grow"})]})}function cTe(t){const{content:e}=t;return h.jsx("div",{className:"text-center text-foreground-450 text-xs dark:text-foreground-600",children:e})}const lTe="contrast-more:outline contrast-more:after:border-2 contrast-more:after:absolute contrast-more:after:pointer-events-none contrast-more:after:w-2/3 contrast-more:after:h-2/3",uTe="text-stone-550 active:text-stone-350 dark:text-slate-400 active:dark:text-slate-450",dTe="bg-white/3 safe-hover:bg-black/5 active:bg-black/3 dark:bg-black/3 dark:safe-hover:bg-white/5 dark:active:bg-white/3",hTe="border-[1px] border-black/8 dark:border-white/8",fTe=`${uTe} ${dTe} ${hTe}`;function pTe(t){const{children:e,isSelected:n,className:r,onClick:o,disabled:i,unselectedColorClass:s,variant:a="standard"}=t,{focusable:c}=Ed({autoRestoreFocus:!0,forceFocus:!0});let u;return n?u=Ac.strong:a==="flat"?u=fTe:u=Ac[s??"overlay-dimmed-inverted"],h.jsx("button",{disabled:i,type:"button",ref:c.ref,className:W("shadow-none dark:shadow-none",bf,uI["40-base"],dI["40-base"],T0["40-base"],Xv,u,r,n&&lTe),onClick:o,"aria-pressed":n,"data-spatial-focus-key":c.focusKey,children:e})}function mTe(t){const{query:e,messageId:n,index:r,onClick:o}=t,i=O(ft),s=()=>{En({source:"suggestionChip",conversationId:i,messageId:n}),V.trackEvent({name:"interaction",data:{eventName:"copilotSuggestionFollowupSelection",eventInfo_messageId:n,eventInfo_conversationId:i??"",eventInfo_suggestionIndex:r}}),o()};return h.jsx(pTe,{isSelected:!1,variant:"flat",className:"max-w-[80%] text-start sm:max-w-fit",onClick:s,children:h.jsx("span",{className:"p-1",children:e})})}function gTe(t){const{mostRecentMessageId:e,className:n}=t,r=O(uG),o=r&&e===r.messageId;return m.useEffect(()=>{o&&Pd({page:"chat",scenario:"suggestionReceived"})},[o]),h.jsx("div",{className:W("mt-auto",n),children:o&&h.jsx(vTe,{suggestions:r.suggestions,messageId:r.messageId})})}function vTe({suggestions:t,messageId:e}){const n=m.useRef(null),r=iI(n,{amount:"all",once:!0});return m.useEffect(()=>{r&&Pd({page:"chat",scenario:"suggestionRender"})},[r]),h.jsx(Ln,{ref:n,duration:Ro.suggestions,className:"flex flex-col items-end gap-3 pb-8",children:t.map((o,i)=>h.jsx(mTe,{index:i,messageId:e,onClick:()=>pc.submitMessage({text:o,inputMethod:"suggestion"}),query:o},o))})}function WA(t){const{pages:e,className:n,children:r,disableLink:o,clickSource:i}=t,{pushPages:s}=mU(),a=()=>{Pt.emit("disclaimer:open-settings"),s(e),dt({source:i??"settingsLink",destination:e[e.length-1]})};return o?h.jsx("span",{children:r}):h.jsx("button",{className:n,type:"button",title:"",onClick:a,children:r})}function E2(t){var e;return((e=ye.instance().config().settingsOverrides)==null?void 0:e[t.key])??t.default}function yTe(){const t=Pr(),e=O(VL),n=O(uT),r=O(dT),o=O(rl),i=O(FJ),s=!!O(BJ),a=!!O(HJ),c=!!(E2({key:"shouldShowTextModelTrainingSettings",default:!0})&&s),u=!!(E2({key:"shouldShowVoiceModelTrainingSettings",default:!0})&&a),d=me("view-settings-disclaimer"),f=c||u,p=!f||e&&!n,g=qj(),[v,b]=lt(WL),[y,C]=m.useState(!1);m.useEffect(()=>{if((f||i)&&t&&!o){if(v){C(!0),b(!1);return}if(g<D0){C(!0);return}let E;try{E=rue()}catch{E=new Date}const I=ZO(E,6),T=new Date;T>I&&(C(!0),sr(Af,T.toISOString()))}},[t,f,o,g,i,v,b]);const S=()=>p===void 0||r===void 0||i===void 0?null:o||!t?"chat.unauthenticatedDisclaimer":!i||!y?"chat.firstTurnDisclaimerBase":!p&&!r?d?"chat.firstTurnDisclaimerPersonalizationTrainingViewSettings":"chat.firstTurnDisclaimerPersonalizationTraining":p&&!r?d?"chat.firstTurnPersonalizationDisclaimerViewSettings":"chat.firstTurnPersonalizationDisclaimer":r&&!p?d?"chat.firstTurnTrainingDisclaimerViewSettings":"chat.firstTurnTrainingDisclaimer":"chat.firstTurnDisclaimerBase";return(()=>{var I,T,A;let E=S();return E?(I=ye.instance().config().uiOverrides)!=null&&I.hideTrainingDisclaimer?"chat.firstTurnDisclaimerBase":(E=((A=(T=ye.instance().config()).textOverrides)==null?void 0:A.call(T,E))??E,E):null})()}const qA="text-foreground-450 text-xs dark:text-foreground-600",bTe="underline",w2={settingsLink:h.jsx(WA,{pages:["menu","account","privacy"],className:W(qA,bTe),clickSource:"disclaimerSettingsLink"}),learnMoreLink:h.jsx(Ww,{link:Mv})},I2={termsLink:h.jsx(Ww,{link:Kf}),privacyLink:h.jsx(Ww,{link:pd})},CTe={settingsLink:h.jsx(WA,{pages:["menu","account","privacy"],className:W(qA),disableLink:!0})};function Kw(t){const{forceVisible:e,disableDisclaimerSettingsLink:n,className:r,testId:o}=t,i=yTe(),s=O(Lo);if(!(s==null?void 0:s.isNew)&&!e||!i)return null;const c=u=>{switch(u){case"chat.unauthenticatedDisclaimer":return h.jsxs(h.Fragment,{children:[h.jsx($o,{i18nKey:"chat.firstTurnDisclaimerBase"})," ",h.jsx($o,{i18nKey:u,components:{termsLink:I2.termsLink,privacyLink:I2.privacyLink}})]});case"chat.firstTurnTrainingDisclaimer":case"chat.firstTurnPersonalizationDisclaimer":case"chat.firstTurnDisclaimerPersonalizationTraining":case"chat.firstTurnTrainingDisclaimerViewSettings":case"chat.firstTurnPersonalizationDisclaimerViewSettings":case"chat.firstTurnDisclaimerPersonalizationTrainingViewSettings":return h.jsxs(h.Fragment,{children:[h.jsx($o,{i18nKey:"chat.firstTurnPersonalizationDisclaimerBase"})," ",h.jsx($o,{i18nKey:u,components:{settingsLink:n?CTe.settingsLink:w2.settingsLink}})]});case"chat.edge.firstTurnPersonalizationDisclaimer":case"chat.edge.firstTurnPersonalizationSettingsDisclaimer":return h.jsxs(h.Fragment,{children:[h.jsx($o,{i18nKey:"chat.firstTurnPersonalizationDisclaimerBase"})," ",h.jsx($o,{i18nKey:u,components:{learnMoreLink:w2.learnMoreLink,bold:h.jsx("strong",{})}})]});case"chat.firstTurnDisclaimerBase":case"chat.firstTurnPersonalizationDisclaimerBase":case"chat.tv.firstTurnDisclaimer":return h.jsx($o,{i18nKey:u});default:return null}};return h.jsx(Ln,{id:i,mode:"wait",className:W("space-y-8 pb-8",qA,r),"data-testid":o,children:c(i)})}function Ww(t){const{children:e,link:n,className:r}=t;return h.jsx(aa,{className:W("underline",r),href:n,title:"",children:e})}function f7(t){const{customBottomDisclaimer:e}=t,n=me("async-disclaimer-text"),r=LA(),[o,i]=m.useState(!n);return m.useEffect(()=>{r&&r.length>0&&i(!0)},[r]),e||(o?h.jsx(Ln,{className:"absolute bottom-0 flex max-w-chat justify-center px-6 text-center","data-testid":"bottom-disclaimer",children:h.jsx(Kw,{})}):null)}function STe(){return h.jsx("div",{"aria-hidden":!0,className:"flex size-full flex-col items-center justify-center"})}const Yl="absolute animate-dot-ellipsis size-2 rounded-full bg-background-450";function ETe(t){const{className:e}=t;return h.jsxs("div",{className:at("flex items-center justify-center gap-3",e),children:[h.jsxs("div",{className:"relative flex items-center justify-center",children:[h.jsx("div",{className:Yl,style:{animationDelay:"0ms"}}),h.jsx("div",{className:Yl,style:{animationDelay:"30ms"}})]}),h.jsxs("div",{className:"relative flex items-center justify-center",children:[h.jsx("div",{className:Yl,style:{animationDelay:"100ms"}}),h.jsx("div",{className:Yl,style:{animationDelay:"130ms"}})]}),h.jsxs("div",{className:"relative flex items-center justify-center",children:[h.jsx("div",{className:Yl,style:{animationDelay:"200ms"}}),h.jsx("div",{className:Yl,style:{animationDelay:"230ms"}})]})]})}function wTe(t){const{text:e,staggerChildren:n=.018,delayChildren:r=0,initialOpacity:o=0}=t;return h.jsx(xe.div,{variants:{show:{transition:{staggerChildren:n,delayChildren:r}}},initial:"hidden",animate:"show",children:cA(e).map((i,s)=>h.jsx(xe.span,{variants:{hidden:{opacity:o},show:{opacity:1,transition:{duration:f6}}},children:i},s))})}function ITe(){const t=pr({breakpoint:"md"}),e=ho(),n=O(Ra);return e&&n&&!t}const TTe={sm:"text-md",md:"text-xl",lg:"text-3xl"},T2=25;function _Te(t){const{subheading:e}=t;return h.jsx("h2",{className:"mt-4 text-foreground-800 text-base",children:e})}function ATe(t){const{className:e,fontSize:n="lg"}=t,r=O(Ty),o=O(UL),{t:i}=He(),s=ITe(),{greetingKey:a,widgetGreeting:c,widgetSubheading:u}=ZL(),d=jA(),f=PSe(),p=o&&o.length>T2?`${o.slice(0,T2)}…`:o,g=a?i(a,{name:p}):"";return d?h.jsx("div",{className:at(e,"flex w-full flex-col items-start justify-start gap-2 sm:mb-6 sm:h-[100px] sm:justify-end"),children:h.jsx("div",{className:"flex justify-start sm:min-h-8",children:!f||r?h.jsx("div",{className:"ms-2 mt-6 flex size-full sm:mt-0",children:h.jsx(ETe,{className:"flex-1"})}):h.jsxs("div",{className:"flex flex-col items-start gap-2",children:[h.jsxs(Ln,{className:"flex items-center gap-2 text-foreground-550 dark:text-foreground-750",id:c??g,children:[h.jsx("p",{className:"text-xs-strong",children:i("common.copilotText")}),h.jsx("p",{className:"text-xs",children:_u(new Date,"h:mm aa")})]}),h.jsx("h1",{className:"text-lg",children:h.jsx(p7,{text:c??g},c)})]})})}):h.jsxs("div",{className:at(e,"flex flex-col items-start text-pretty",TTe[n],s&&u&&"mb-8 bp-960:mb-0"),"data-testid":"launch-greeting",children:[h.jsx("h1",{children:g}),u&&h.jsx(_Te,{subheading:u})]})}const p7=m.memo(t=>{const{text:e}=t;return h.jsx(wTe,{text:e,staggerChildren:.02,delayChildren:.1},e)});p7.displayName="AnimatedTextMemo";function kTe(t){const{customLaunchGreeting:e,className:n}=t,r=pr({breakpoint:"sm"}),{showShoppingCardInNewChat:o}=_y();return e||h.jsx(ATe,{className:n,fontSize:r||o?"md":"lg"})}function xTe(t){const{className:e}=t,n=O(rl),r="top-disclaimer";return n?h.jsx(Kw,{forceVisible:!0,className:e,testId:r}):h.jsx(Kw,{className:e,testId:r})}function RTe({characterId:t,className:e}){const n=O(Lo),[r,o]=lt(EM),{t:i}=He();return m.useEffect(()=>{(n==null?void 0:n.isNew)===!1&&o(!1)},[o,n==null?void 0:n.isNew]),n!=null&&n.isNew?h.jsxs(Ln,{id:"character-disclaimer",mode:"wait",className:W("pb-2 text-stone-550/90 text-xs dark:text-slate-250/60",e),children:[i("characterAnimation.characterDisclaimerTextV2",{characterName:eG(t,i)})," ",r&&h.jsx($o,{i18nKey:"characterAnimation.characterSettingDisclaimerText",components:{settingsLink:h.jsx(WA,{pages:["menu","character-options"],className:"text-stone-550/90 underline text-xs dark:text-slate-250/60"})}})]}):null}function NTe(){return h.jsx(DA,{size:"sm",stroke:!0,className:"flex h-[172px] w-[324px] cursor-pointer flex-col p-4",children:h.jsx("div",{className:"flex flex-1",children:h.jsx(Tb,{className:"size-full",style:{clipPath:"var(--clip-path-squircle-36)"}})})})}const PTe=m.lazy(()=>z(()=>import("./contextual-shopping-card-DdCQzaf9.js"),__vite__mapDeps([361,1,2,362,247,243,363,364,244,245,246,232,365,322,323,366,367,368,369,370,371,350,239,225])).then(t=>({default:t.AnimatedContextualShoppingCard})));function m7(t){const{customLaunchGreeting:e,chatItemClasses:n}=t,{isCentralComposerEnabled:r,isWidgetSectionEnabled:o,isAppearanceOnHomeEnabled:i}=Dp(),s=pr({breakpoint:"sm"}),a=Gv({breakpoint:"h760"}),c=Gv({breakpoint:"h600"}),u=me("appr-home-toggle"),d=O(OJ),f=i&&(!u||!d)&&!c,p=me("multiplecharacters"),g=mp(),v=O(jI),b=O(QJ),y=!lb(),C=p&&v!==null,S=zU(),{launchGreetingShown:w,widgetSubheading:E}=ZL(),I=O(OM),{showShoppingCardInNewChat:T,shoppingProductMetadata:A,isCopilotOpenedViaNudge:_}=_y(),U=!_&&!b&&!C&&!w&&g&&!S,G=ye.instance().config().smallScreenShowTopDisclaimerAfterSendingMessage??!1?!g:!U,K=C||s&&G,P=O(wn)==="computerUse",$=o&&!P&&!s&&!a,Z=U&&"pb-2",x=m.lazy(()=>i?z(()=>import("./appearance-chat-CDw1O7wz.js"),__vite__mapDeps([372,1,2])).then(ne=>({default:ne.AppearanceChat})):Promise.resolve({default:()=>null})),L=h.jsxs(Ln,{delay:.2,initial:y?"initial":!1,className:at(r?"mt-2 flex flex-col items-start text-pretty pe-0 sm:absolute sm:inset-x-0 sm:inset-y-0 sm:mx-auto sm:mt-0 sm:max-w-chat sm:px-4 sm:pb-[calc(var(--composer-container-height))]":Z,T&&"mx-auto mt-2 max-w-sm sm:relative sm:mt-6 sm:max-w-md sm:px-4",f&&s&&"grow",$&&!E&&"sm:pb-[calc(var(--composer-container-height)-64px)]",$&&E&&"sm:pb-[calc(var(--composer-container-height)-32px)]"),children:[f&&r&&h.jsx("div",{className:at("order-2 flex w-full flex-col items-center justify-center sm:absolute sm:h-[calc(50%-60px-var(--composer-container-height)/2)]",s&&"grow"),children:h.jsx(m.Suspense,{fallback:h.jsx(STe,{}),children:h.jsx(x,{voiceAppearanceId:$I})})}),h.jsxs("div",{className:at("order-1 flex w-full flex-col gap-2 sm:top-0 sm:h-full sm:justify-center",i?"items-center":"items-start"),children:[U&&h.jsx(kTe,{customLaunchGreeting:e,className:at(i?"text-center":"sm:ps-2")}),C&&h.jsx(RTe,{characterId:v}),T&&A&&!I&&h.jsx(m.Suspense,{fallback:h.jsx(NTe,{}),children:h.jsx(PTe,{content:A})}),K&&h.jsx(xTe,{})]})]},"chat-welcome");return n?h.jsx("div",{className:n,children:L}):L}const _2=10,OTe=0,MTe=.2;function LTe({onClick:t,shouldShowScrollToBottomButton:e,bottomButtonClass:n=""}){const{t:r}=He(),o=O(Ar),i=Eb(),s=o==="side-by-side"&&!i;return h.jsx(xn,{children:e&&h.jsx(xe.div,{className:W("pointer-events-none absolute flex justify-center",Zt.chatScrollToBottomButton,s?"end-0 w-1/4 min-w-chat-side-by-side justify-end":"inset-x-0",n),initial:{...ct,y:_2},animate:{...Lt,y:OTe},exit:{...ct,y:_2},transition:{duration:MTe},children:h.jsx(Ue,{color:"acrylic",variant:"square",title:r("chat.scrollToBottom"),onClick:t,className:"pointer-events-auto",children:h.jsx("span",{className:"overflow-hidden rounded-xl bg-white/40 p-2 shadow-xl dark:bg-background-350/60",children:h.jsx(Rp,{className:"size-6 rotate-180"})})})})})}const g7=t=>m.createElement("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("mask",{id:"mask0_12117_44960",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:0,y:0,width:20,height:20},m.createElement("path",{d:"M7.19253 7.24894C7.46962 6.94112 7.94384 6.91617 8.25172 7.1932L10.7517 9.44267C10.9098 9.58487 11 9.78745 11 10C11 10.2126 10.9098 10.4152 10.7517 10.5574L8.25172 12.8068C7.94384 13.0839 7.46962 13.0589 7.19253 12.7511C6.91543 12.4433 6.94039 11.9692 7.24827 11.6922L8.29553 10.7499H4.75C4.33579 10.7499 4 10.4141 4 10C4 9.58591 4.33579 9.2502 4.75 9.2502H8.29553L7.24828 8.30789C6.94039 8.03086 6.91543 7.55675 7.19253 7.24894ZM20 15.2506C20 16.7691 18.7688 18 17.25 18L2.75 18C1.23122 18 0 16.7691 0 15.2506V4.74937C0 3.23093 1.23122 2 2.75 2H17.25C18.7688 2 20 3.23094 20 4.74937L20 15.2506ZM17.25 16.5003C17.9404 16.5003 18.5 15.9408 18.5 15.2506L18.5 4.74937C18.5 4.05917 17.9404 3.49966 17.25 3.49966L13.9958 3.49966L13.9958 16.5003H17.25ZM12.4958 16.5003L12.4958 3.49966L2.75 3.49965C2.05965 3.49965 1.5 4.05917 1.5 4.74937L1.5 15.2506C1.5 15.9408 2.05964 16.5003 2.75 16.5003L12.4958 16.5003Z",fill:"currentColor"})),m.createElement("g",{mask:"url(#mask0_12117_44960)"},m.createElement("rect",{width:24,height:24,transform:"translate(-2 -2)",fill:"currentColor"}))),$Ne=Object.freeze(Object.defineProperty({__proto__:null,default:g7},Symbol.toStringTag,{value:"Module"}));function DTe(){const t=!ci("kill-share-c2"),e=$t(),n=O(Lo);return!!(!O(rl)&&t&&e.startsWith("/chats")&&!e.endsWith("/talk")&&(n!=null&&n.history.length))}function v7(){const{t}=He(),e=pr({breakpoint:"md"}),n=pr({breakpoint:"sm"}),r=pr({breakpoint:"xl"}),o=O(Ar)==="side-by-side",i=O(Ra),s=$t(),a=_e(Ar),c=Eb(),u=o&&!n&&s.startsWith("/chats"),d=DTe()&&r,f=(e||!i||u||d)&&!c,p=m.useCallback(()=>{a("detail-only")},[a]);return h.jsx("div",{className:W("sticky top-0 z-10 w-full"),children:h.jsx(xn,{children:f&&h.jsx(xe.div,{className:"absolute h-16 w-full rounded-lg bg-stone-150/90 backdrop-blur-md dark:bg-midnight-850/80",initial:"initial",animate:"animate",exit:"exit",variants:{initial:ct,animate:Lt,exit:ct},transition:Oo,"data-testid":"sticky-header",children:u&&h.jsx(xe.div,{initial:ct,animate:Lt,exit:{transition:{duration:0},...ct},transition:Oo,children:h.jsx(Ue,{title:t("actions.hideDetails"),color:"subtle-dimmed",variant:"square",size:"36-sm",className:"ms-3.5 mt-1.5",onClick:p,children:h.jsx(g7,{className:"size-5"})})})})})})}const jTe="answerCards.ariaLabel.numberOfLocalResultsSingle",UTe="answerCards.ariaLabel.numberOfLocalResultsPlural";function FTe(t){let e="";for(const r of t.entities){if(e+=r.name,r.category&&(e+=`, ${r.category}`),r.price&&(e+=`, ${BTe(r.price)}`),r.reviews[0]){const o=r.reviews[0];e+=", ",e+=ee("answerCards.ariaLabel.ratedByReviewer",{rating:o.rating,reviewCount:o.count,reviewProvider:o.providerName})}r.phoneNumber&&(e+=", ",e+=ee("answerCards.ariaLabel.phoneNumber",{phoneNumber:r.phoneNumber})),r.location.address&&(e+=", ",e+=ee("answerCards.ariaLabel.address",{address:r.location.address})),e+=". "}const n=t.entities.length===1?jTe:UTe;return ee(n,{count:t.entities.length,resultSummary:e})}function BTe(t){switch(t.length){case 1:return ee("answerCards.ariaLabel.inexpensivePrices");case 2:return ee("answerCards.ariaLabel.averagePrices");default:return ee("answerCards.ariaLabel.expensivePrices")}}function HTe(t){const{content:e,announce:n}=t;let r;for(const o of e){switch(o.type){case"text":r=o.text;break;case"image":o.url?r=ee("chat.imageGenerated",{prompt:o.prompt??""}):r=ee("chat.imageGenerating");break;case"page":break;case"citation":break;case"card":r=zTe(o.card);break;case"error":r=o.text;break;case"task":break;case"deleted":break;case"chainOfThought":break;case"chainOfThoughtGroup":break;case"activity":break;case"memorySignal":r=o.text;break}r&&n({msg:r})}}function zTe(t){switch(t.type){case"localEntity":return FTe(t);case"ads":case"weather":case"weatherTemperatureHourly":case"weatherTemperatureDaily":case"weatherPrecipitationHourly":case"weatherPrecipitationDaily":case"image":case"phoneImages":case"phoneLinking":case"phoneAlarm":case"phoneTimer":case"phoneSendMessage":case"video":case"sportsSchedule":case"sportsGame":case"safetyHelpline":case"shopping":case"shoppingProducts":case"shoppingCurated":case"job":case"inlineVideo":case"quiz":case"financeChart":case"generativeUI":case"recipe":case"mediaSpotlight":case"inlineImage":case"m365":case"file":case"computerUseFeedback":return"";default:return""}}function VTe(t,e){const n=m.useRef();m.useEffect(()=>{var o;if(e==="streaming")return;const r=t.at(-1);r&&r.author==="ai"&&r.id!==((o=n.current)==null?void 0:o.id)&&(HTe({content:r.content,announce:pA}),n.current=r)},[t,e])}function $Te(t){m.useEffect(()=>{if(t.current){const e=r=>{var i,s,a,c,u;if(r.target&&r.target instanceof Element&&r.target.closest('[data-formatless-copy="false"]'))return;const o=window.getSelection();if(o!=null&&o.rangeCount){let d=document.createElement("div");const f=o.getRangeAt(0),{startContainer:p,endContainer:g}=f;d.appendChild(f.cloneContents());const v=(i=p.parentElement)==null?void 0:i.closest("pre"),b=(s=g.parentElement)==null?void 0:s.closest("pre"),y=!!v&&!!b&&v===b,C=!!((a=p.parentElement)!=null&&a.closest("table"))&&!GTe(f),S=d.getElementsByTagName("*");for(const T of S)T.getAttribute("data-copy")==="false"?T.remove():(T.removeAttribute("style"),T.removeAttribute("class"),T.removeAttribute("initial"),T.removeAttribute("animate"),T.removeAttribute("variants"),T.removeAttribute("custom"));if(y){const T=document.createElement("pre");T.appendChild(d),d=T}if(C){const T=document.createElement("table"),A=Array.from(d.children);for(const _ of A)T.appendChild(_);d=T}d.style.position="absolute",d.style.left="-9999px",document.body.appendChild(d);const w=window.getSelection(),E=document.createRange();E.selectNodeContents(d),w==null||w.removeAllRanges(),w==null||w.addRange(E);const I=(w==null?void 0:w.toString())??"";w==null||w.removeAllRanges(),w==null||w.addRange(f),document.body.removeChild(d),d.removeAttribute("style"),(c=r.clipboardData)==null||c.setData("text/plain",I),(u=r.clipboardData)==null||u.setData("text/html",y||C?d.outerHTML:d.innerHTML)}r.preventDefault()},n=t.current;return n.addEventListener("copy",e),()=>{n.removeEventListener("copy",e)}}return()=>{}},[t])}function GTe(t){var i,s,a,c;const{startContainer:e,endContainer:n}=t,r=((i=e.parentElement)==null?void 0:i.closest("td"))??((s=e.parentElement)==null?void 0:s.closest("th")),o=((a=n.parentElement)==null?void 0:a.closest("td"))??((c=n.parentElement)==null?void 0:c.closest("th"));return!!(r&&o&&r===o)}const KTe=typeof document<"u"?m.useLayoutEffect:m.useEffect;function WTe(t,e){const n=m.useRef(0),r=m.useRef(0);m.useEffect(()=>{const{current:o}=e,i=()=>{if(o){const s=o.scrollHeight-o.scrollTop;r.current=s}};return o==null||o.addEventListener("scroll",i,{passive:!0}),i(),()=>{o==null||o.removeEventListener("scroll",i)}},[e]),KTe(()=>{const{current:o}=e;o&&o.scrollTop+r.current!==o.scrollHeight&&(n.current===0?setTimeout(()=>{o.scrollTop=o.scrollHeight},100):o.scrollTop=o.scrollHeight-r.current,n.current=t)},[t,e])}function qTe(t,e){const n=ci("kill-review-prompt"),o=!!ye.instance().config().promptForReviews&&!n,i=_e(zr),s=m.useCallback(async c=>{if(!o)return;const{shown:u}=await Ble.run({});if(u)return;const f=vSe()>=dSe,p=c>lSe;(f||p)&&!ySe()&&(i("prompt-review"),V.trackEvent({name:"system",data:{eventName:"inAppSurveyPopUp",eventInfo_triggerType:p?"longChat":"activeDays"}}))},[o,i]),a=m.useRef(!1);m.useEffect(()=>{e&&(a.current=!0)},[e]),m.useEffect(()=>{e||!a.current||s(t)},[t,e,s])}function YTe(t){return m.useCallback(({behavior:n="smooth",delay:r=0})=>{setTimeout(()=>{t.current&&t.current.scrollTo({top:t.current.scrollHeight,behavior:n})},r)},[t])}const QTe=.1;function JTe(t){const{chatRef:e,isEnabled:n,hasMessages:r=!0}=t,o=m.useRef(null),[i,s]=m.useState(!1),a=m.useCallback(c=>{const u=c[0];u&&s(!u.isIntersecting&&r)},[r]);return m.useEffect(()=>{if(!n||!e.current||!o.current)return()=>{};const c=new IntersectionObserver(a,{root:e.current,threshold:QTe});return c.observe(o.current),()=>{c.disconnect()}},[n,e,a]),m.useEffect(()=>{r||s(!1)},[r]),{bottomRef:o,shouldShowScrollToBottomButton:i}}function XTe(){const t=O(pp),e=op(yn),n=O(LI);m.useEffect(()=>{e(r=>{if(n){const o=r.get(n);o&&(o.characterId=t)}})},[n,t,e])}async function ZTe(t,e){const n=yT(e);if(n){const{message:r,part:o}=n;if(!o.task)return;const i=await Rs();i.setConversationIdByMessageId({messageId:r.id,conversationId:t}),i.setMessageIdByTaskId({taskId:o.task.id,messageId:r.id})}}const e_e=window.requestIdleCallback||function(e){const n=Date.now();return setTimeout(()=>{e({didTimeout:!1,timeRemaining(){return Math.max(0,50-(Date.now()-n))}})},1)},y7=t=>m.createElement("svg",{viewBox:"0 0 20 20",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M2 6a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v7a2 2 0 0 1-1.164 1.818 1.497 1.497 0 0 0-.275-.379l-.446-.446A1 1 0 0 0 17 13V6a1 1 0 0 0-1-1H4a1 1 0 0 0-1 1v7a1 1 0 0 0 1 1h5v1H4a2 2 0 0 1-2-2V6Zm8.854 4.146A.5.5 0 0 0 10 10.5v7a.5.5 0 0 0 .91.287l1.571-2.245 2.943.452a.5.5 0 0 0 .43-.848l-5-5ZM11 15.915v-4.207l3.066 3.067-1.74-.268a.5.5 0 0 0-.486.207l-.84 1.2Z"})),GNe=Object.freeze(Object.defineProperty({__proto__:null,default:y7},Symbol.toStringTag,{value:"Module"})),b7=t=>m.createElement("svg",{viewBox:"0 0 64 64",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},m.createElement("path",{d:"M32.0007 5.33301C46.7282 5.33301 58.6673 17.2721 58.6673 31.9997C58.6673 46.7273 46.7282 58.6663 32.0007 58.6663C17.2731 58.6663 5.33398 46.7273 5.33398 31.9997C5.33398 17.2721 17.2731 5.33301 32.0007 5.33301ZM32.0007 8.66634C19.114 8.66634 8.66732 19.113 8.66732 31.9997C8.66732 44.8863 19.114 55.333 32.0007 55.333C44.8873 55.333 55.334 44.8863 55.334 31.9997C55.334 19.113 44.8873 8.66634 32.0007 8.66634ZM23.7105 21.3663L23.8458 21.4878L32.0007 29.6437L40.1555 21.4878C40.763 20.8803 41.7227 20.8398 42.3772 21.3663L42.5125 21.4878C43.12 22.0953 43.1605 23.0551 42.634 23.7095L42.5125 23.8449L34.3567 31.9997L42.5125 40.1545C43.12 40.762 43.1605 41.7217 42.634 42.3762L42.5125 42.5115C41.905 43.119 40.9453 43.1595 40.2908 42.633L40.1555 42.5115L32.0007 34.3557L23.8458 42.5115C23.2383 43.119 22.2786 43.1595 21.6241 42.633L21.4888 42.5115C20.8813 41.904 20.8408 40.9443 21.3673 40.2898L21.4888 40.1545L29.6447 31.9997L21.4888 23.8449C20.8813 23.2374 20.8408 22.2776 21.3673 21.6232L21.4888 21.4878C22.0963 20.8803 23.0561 20.8398 23.7105 21.3663Z"})),KNe=Object.freeze(Object.defineProperty({__proto__:null,default:b7},Symbol.toStringTag,{value:"Module"})),A2="size-5",k2="flex w-full items-center justify-end gap-1.5 text-foreground-450 dark:text-slate-400";function t_e({type:t}){const{t:e}=He();switch(t){case"takeTaskControl":return h.jsxs("div",{className:k2,children:[h.jsx(y7,{className:A2}),e("actions.tookControl")]});case"cancelTask":return h.jsxs("div",{className:k2,children:[h.jsx(b7,{className:A2}),e("actions.cancelledTask")]});case"createPage":case"appendToPage":case"promptCharacterSpeech":default:return null}}function n_e(t){const{fileName:e,fileType:n}=t,r=n!==""?n:fA(e);return Op(r)?h.jsx(mA,{filename:e,fileType:r}):null}function r_e(t){const{url:e}=t,{t:n}=He(),[r,o]=m.useState(null);return m.useEffect(()=>{if(!e){o(null);return}async function i(){o(await cSe(e))}i()},[e]),r?h.jsx("img",{className:"block h-full overflow-hidden rounded-2xl bg-background-static-250 object-cover object-center shadow-inner dark:bg-background-static-900",alt:n("chat.uploadedImageAltText"),src:r,onLoad:sSe}):null}function o_e(t){const{text:e}=t;return h.jsx("div",{className:"flex w-full flex-col items-end","data-content":"user-message",children:h.jsx("div",{className:W("font-ligatures-none h-fit max-w-[80%] self-end whitespace-pre-wrap break-words rounded-2xl bg-accent-250/60 px-5 py-3 dark:bg-accent-200",Yi("userMessage")??"text-base"),children:e})})}const C7=m.forwardRef((t,e)=>{const{children:n,tabBehavior:r="limited-trap-focus",ignoreDefaultKeydown:o,...i}=t,s=sO({tabBehavior:r,ignoreDefaultKeydown:o});return me("a11y-keyboard-navigation")?h.jsx(xe.div,{ref:e,...s,...i,tabIndex:0,children:n}):h.jsx(xe.div,{...i,ref:e,children:n})});C7.displayName="FocusableGroupMotion";function i_e(t){const{children:e,tabBehavior:n="limited-trap-focus",ignoreDefaultKeydown:r,...o}=t,i=sO({tabBehavior:n,ignoreDefaultKeydown:r});return me("a11y-keyboard-navigation")?h.jsx("div",{...i,...o,tabIndex:0,role:"article",children:e}):h.jsx("div",{...o,children:e})}const S7=t=>h.jsx(i_e,{...t});S7.Motion=C7;function s_e(){const{t}=He();return h.jsx("div",{className:"flex w-fit justify-end",children:h.jsx("div",{className:"flex h-32 w-44 items-center justify-center rounded-xl border border-stroke-250 bg-accent-200 px-4 py-2 dark:bg-accent-250",children:h.jsx("span",{className:"text-center text-foreground-450 text-sm",children:t("share.imagePlaceholder")})})})}function a_e({tabs:t=[]}){return t.length===0?null:h.jsx(Tl,{className:"flex min-h-[60px] flex-col gap-2",tabbable:!0,tabIndex:0,children:h.jsx(y9,{showRemoveIcon:!1,tabs:t})})}function c_e(t){const{message:e,className:n,isForSharing:r}=t,{t:o}=He(),s=!!O(ol),a=me("edge-multi-tabs-manual"),c=me("a11y-keyboard-navigation"),u=!ci("kill-share-c2"),d=o(c?"chat.userSaid":"chat.user"),f=(g,v,b)=>g.type==="document"?h.jsx(n_e,{fileType:g.contentType,fileName:g.fileName},`${b}-${v}`):u&&r?h.jsx(s_e,{},`${b}-${v}`):g.type==="image"?h.jsx("div",{className:"w-auto max-w-[min(80%,256px)]",children:h.jsx(r_e,{url:g.url})},`${b}-${v}`):null,p=e.content.filter(g=>g.type==="document"||g.type==="image");return h.jsxs(S7,{className:W("space-y-1",n),id:`${e.id}-user-message`,"aria-labelledby":`${e.id}-user-message`,children:[h.jsxs("div",{className:"relative space-y-3",children:[h.jsx("h2",{className:"sr-only","aria-label":d,"data-copy":"false",children:d}),p.length>0&&h.jsx("div",{className:"flex h-32 w-full flex-row justify-end gap-2 overflow-hidden",children:p.map((g,v)=>f(g,v,"file"))}),e.content.map((g,v)=>g.type==="browserTabs"?a&&U6(g.tabs)?h.jsx(a_e,{tabs:g.tabs},v):null:g.type==="text"?h.jsx(o_e,{text:g.text},v):g.type==="command"?h.jsx(t_e,{type:g.command.type},v):(g.type==="document",null)),e.emojiReaction&&h.jsx("div",{className:"absolute -bottom-3 end-3",children:e.emojiReaction})]}),!s&&e.brand&&h.jsx("div",{className:"w-full px-3 text-right text-foreground-600 text-xs",children:o("ads.aboutBrand",{brand:e.brand.brandLogo.businessName})})]},e.id)}const l_e=m.lazy(()=>z(()=>import("./ai-message-CpIQGH9j.js").then(t=>t.m),__vite__mapDeps([373,1,2,332,223,337,374,375,290,294,342,376,335,366]))),u_e=m.lazy(()=>z(()=>import("./side-by-side-messages-CCZSeufN.js"),__vite__mapDeps([377,1,2,373,332,223,337,374,375,290,294,342,376,335,366]))),d_e=1.5,x2="inline-block w-full space-y-8",YA="max-w-chat w-full";function E7(t){var F,re,de;const{className:e,conversationContainerClassName:n="mb-[var(--composer-container-height)]",bottomButtonClassName:r="bottom-[calc(var(--composer-container-height)+1.5rem)]",customLaunchGreeting:o,customBottomDisclaimer:i,enableHighlightedClasses:s=!0,enableBackstageClasses:a=!0,disableStickyHeader:c=!1,disableSuggestions:u=!1,reactionsToDisable:d}=t,{loader:f}=w9(),p=O(li),g=O(Lo),v=O(jI),b=O(wn),y=O(vy),C=pr({breakpoint:"sm"}),w=me("multiplecharacters")&&v!==null,E=me("scroll-to-bottom-button"),I=me("share-continue-v2"),T=!lb(),A=g==null?void 0:g.sideBySideComparisonId,_=!!A,[U,k]=m.useState(0);XTe();const G=m.useRef(null),K=YTe(G);WTe(p.length,G),$Te(G),H9({scrollableRef:G,source:"chat",customData:{conversationId:g==null?void 0:g.id}});const[ie]=FIe({...f,disabled:!!f.error}),{backstageMessagesProps:P,highlightedMessagesProps:$,sentinelRef:Z,sentinelClasses:x,backstageClasses:L,highlightedClasses:ne,opacity:se,highlighted:fe,backstage:X}=kIe(()=>K({behavior:"instant",delay:ye.instance().config().scrollToBottomDelay}),G,w,U,p),ge=Wu(se,ke=>ke<.5?"none":"auto"),Oe=()=>K({behavior:"smooth"}),{bottomRef:Se,shouldShowScrollToBottomButton:Fe}=JTe({chatRef:G,isEnabled:E,hasMessages:p.length>0}),Ve=O(DI).get((g==null?void 0:g.id)??""),he=O(Id);m.useEffect(()=>{g!=null&&g.id&&(ZTe(g.id,p),e_e(()=>{z(()=>import("./ai-message-CpIQGH9j.js").then(ke=>ke.m),__vite__mapDeps([373,1,2,332,223,337,374,375,290,294,342,376,335,366]))}))},[g==null?void 0:g.id,p]),VTe(p,g==null?void 0:g.streamingState);const B=t7(fe),Pe=(B==null?void 0:B.author)==="human"&&B.id===""||(g==null?void 0:g.streamingState)==="streaming",Q=!!O(jh),oe=O(Au),we=Pe&&!Ve||Q||oe,N=me("announce-loading"),te=m.useId(),{disableMultiturn:Ce}=ye.instance().config(),D=(re=(F=ye.instance().config().styleOverrides)==null?void 0:F.width)==null?void 0:re.chat;qTe(p.length,Pe);const Y=ho(),Ie=mp(),{showShoppingCardInNewChat:Je}=_y(),it=!w&&!C&&Ie,st=a&&!(Je&&!C),{crossPromotion:Be}=ye.instance().config(),$e=Be==null?void 0:Be.chatBanner,nn=O(ks)==="dark"?$e==null?void 0:$e.dark:$e==null?void 0:$e.light,[_t,rn]=m.useState(!1),{isMediaViewerOpen:Rn}=Aa(),j=me("chat-refactor-max-width"),ue=j?n7():void 0,q=j?"w-full":YA,ce=(g==null?void 0:g.streamingState)==="idle",De=!u&&!_,Ge=we&&!_,Me=(ke,ve=!1,Ke,tt=!1)=>ke.map((ot,vt)=>{const Kn=new Date(ot.createdAt),bn=vt>0?ke[vt-1]:Ke,lr=bn&&new Date(bn.createdAt),tr=!lr||!NI(Kn,lr),Tn=I&&iSe(g!=null&&g.continuedAt?new Date(g.continuedAt):null,Kn,lr);let di;return iX(ot)?di=h.jsx(m.Suspense,{fallback:h.jsx(p0,{}),children:h.jsx(u_e,{message:ot,conversationId:g==null?void 0:g.id,sideBySideComparisonId:A,isStreamingComplete:ce,shouldAnimate:ve,reactionsToDisable:d,isLastMessage:tt&&vt===ke.length-1})}):ot.author==="ai"?di=h.jsx(m.Suspense,{fallback:h.jsx(p0,{}),children:h.jsx(l_e,{message:ot,isStreamingComplete:ce,shouldAnimate:ve,reactionsToDisable:d,isLastMessage:tt&&vt===ke.length-1})}):di=h.jsx(c_e,{message:ot,className:ue}),h.jsxs(m.Fragment,{children:[Tn&&h.jsx(cTe,{content:ee("chat.continuedConversationDisclaimer")}),tr&&!Ce&&h.jsx(aTe,{date:Kn,className:ue}),di]},ot.id)});return h.jsx(h7,{children:h.jsxs("div",{className:W("scrollbar-stable flex size-full flex-col items-center overflow-y-auto overflow-x-hidden overscroll-contain text-foreground-800 sm:min-w-chat-side-by-side",(g==null?void 0:g.id)&&IU(g.id)&&"t-custom-scrollbar",ye.instance().config().showScrollbarOnHover&&"scrollbar-container",Rn&&"invisible",e),ref:G,"data-testid":"chat-page",children:[!c&&h.jsx(v7,{}),f.hasNextPage&&h.jsx("div",{ref:ie}),w&&h.jsx(QIe,{animatingMessageId:Ve,isStreamingMessage:Pe,displayedCharacterId:v,setCharacterComponentHeight:k}),Ce&&!we&&h.jsx(BIe,{title:ee("tv.chat.moveToMultiturn"),onClick:()=>{const ke=new URL(window.location.origin);ke.searchParams.set("wtv","1"),ke.searchParams.set("oem","lg-multiturn"),xp(ke.toString())},hoverVariant:!0,className:"fixed bottom-6 mx-4 px-8",children:ee("tv.chat.moveToMultiturn")}),nn&&_t&&h.jsxs("div",{className:"fixed bottom-6 end-6 flex w-40 flex-col items-center gap-1 rounded-3xl px-3 pb-2 pt-3 shadow-lg dark:bg-midnight-750",children:[h.jsx("img",{src:nn,alt:ee("crossSelling.chatBannerImageAlt"),className:"size-36 object-contain"}),h.jsx("p",{className:"mt-2 text-center text-foreground-750 text-xs",children:ee("crossSelling.chatBannerLabel")})]}),h.jsx(Tl.Motion,{circular:!1,tabbable:!0,initial:T?"start":!1,animate:"end",variants:{start:ct,end:{...Lt,transition:{duration:.2,delay:.2}}},className:W(n,"grow",!j&&(Jf("pageContainer")??"px-6"),q,D),layout:"position",transition:Oo,"data-content":"conversation","data-copy":"false",children:h.jsxs(m.Suspense,{fallback:h.jsx("div",{"aria-hidden":!0}),children:[h.jsxs(xe.div,{className:W("relative",Y||!c?"pt-10":"pt-6",X.length>0&&x2,st&&L),variants:P.variants,initial:T?P.initial:!1,animate:P.animate,style:{opacity:p.length>0?se:0,pointerEvents:ge},children:[h.jsx("div",{className:W("absolute -z-10 w-full",x),ref:Z}),Me(X)]}),h.jsxs("div",{className:W(s&&ne,"flex flex-col"),"data-testid":"highlighted-chats",children:[h.jsx(xn,{mode:"wait",initial:!1,children:h.jsxs(h.Fragment,{children:[h.jsx(m7,{customLaunchGreeting:o,chatItemClasses:ue}),fe.length>0&&h.jsxs(xe.div,{className:W(Ce?"pb-24":"pb-6",x2),initial:$.initial,animate:$.animate,exit:$.exit,onAnimationStart:$.onAnimationStart,onAnimationComplete:()=>{rn(!0)},children:[Me(_?oX(fe,A):fe,!!Ve,X[X.length-1]??void 0,!0),h.jsx(m.Suspense,{fallback:h.jsx("div",{"aria-hidden":!0}),children:Ge&&h.jsx("div",{className:ue,children:h.jsxs(xe.div,{"aria-hidden":!0,className:W("relative size-7"),initial:"start",animate:"end",variants:{start:{...ct},end:{...Lt,transition:{delay:d_e}}},children:[N&&h.jsx(gd,{id:te,timeout:3e3,msg:ee(b==="reasoning"?"chat.reasoning":"chat.loading"),type:"polite"}),h.jsx(p0,{})]})})}),h.jsx(Ln,{children:he&&h.jsx(GIe,{className:ue})}),h.jsx(Ln,{children:y&&y.visible&&h.jsx(VIe,{className:ue})})]},(de=fe[0])==null?void 0:de.createdAt)]})}),De&&h.jsx(gTe,{mostRecentMessageId:B==null?void 0:B.id,className:ue}),h.jsx("div",{ref:Se,style:{height:0,overflow:"hidden"}}),h.jsx(LTe,{shouldShowScrollToBottomButton:Fe,onClick:Oe,bottomButtonClass:r})]})]})}),it&&h.jsx(f7,{customBottomDisclaimer:i})]})})}const WNe=Object.freeze(Object.defineProperty({__proto__:null,CHAT_WIDTH_CLASSES:YA,default:E7},Symbol.toStringTag,{value:"Module"}));function w7(t){var b,y;const{className:e,conversationContainerClassName:n="mb-[var(--composer-container-height)]",customLaunchGreeting:r,customBottomDisclaimer:o,disableStickyHeader:i=!1,enableBackstageClasses:s=!0,enableHighlightedClasses:a=!0}=t,c=me("chat-refactor-max-width"),u=pr({breakpoint:"sm"}),d=ho(),f=!u,p=(y=(b=ye.instance().config().styleOverrides)==null?void 0:b.width)==null?void 0:y.chat,g=c?n7():void 0,v=c?"w-full":YA;return h.jsx(h7,{children:h.jsxs("div",{className:at("scrollbar-stable flex size-full flex-col items-center overflow-y-auto overflow-x-hidden overscroll-contain text-foreground-800 sm:min-w-chat-side-by-side",ye.instance().config().showScrollbarOnHover&&"scrollbar-container",e),"data-testid":"landing-page",children:[!i&&h.jsx(v7,{}),h.jsx(Tl.Motion,{circular:!1,tabbable:!0,initial:"start",animate:"end",variants:{start:ct,end:{...Lt,transition:{duration:.2,delay:.2}}},className:at(n,"grow",!c&&(Jf("pageContainer")??"px-6"),v,p),layout:"position",transition:Oo,children:h.jsxs(m.Suspense,{fallback:h.jsx("div",{"aria-hidden":!0}),children:[h.jsx("div",{className:at("relative",d||!i?"pt-10":"pt-6",s&&Z9)}),h.jsx("div",{className:at("flex",a&&e7),children:h.jsx(xn,{mode:"wait",initial:!1,children:h.jsx(m7,{customLaunchGreeting:r,chatItemClasses:g})})})]})}),f&&h.jsx(f7,{customBottomDisclaimer:o})]})})}const h_e=Et("/")({component:w7});Et("/w/landing")({component:w7});const f_e=TF("/chats/$conversationId");function p_e(t){const{disableStickyHeader:e,reactionsToDisable:n}=t,{conversationId:r}=f_e.useParams(),o=_e(ft),i=me("conversation-id-sync");return m.useEffect(()=>{i&&o(r)},[r,o,i]),h.jsx(E7,{disableStickyHeader:e,reactionsToDisable:n})}const m_e=Et("/chats/$conversationId")({component:p_e}),g_e=Et("/topic-selection")(),v_e=Et("/login")(),y_e=Et("/gaming")(),b_e=Et("/gallery")(),C_e=Et("/discover")(),S_e=Et("/daily")(),E_e=Et("/agents")(),w_e=Et("/referrals/")(),I_e=Et("/labs_/")(),T_e=Et("/subscription/start")(),__e=Et("/subscription/manage")(),A_e=Et("/shares/$conversationId")(),k_e=Et("/referrals/rules")(),x_e=Et("/pro/subscribe")(),R_e=Et("/pages/$pageId")(),N_e=Et("/memory/narrative")(),P_e=Et("/gallery/$galleryItemId")(),O_e=Et("/chats/private")(),M_e=Et("/campaigns/$campaignId")(),L_e=Et("/shares/podcasts/$shareId")(),D_e=Et("/shares/pages/$shareId")(),j_e=Et("/pro/redeem/$redeemCode")(),U_e=Et("/pro/ewallet/return")(),F_e=Et("/podcasts/$podcastType/$podcastId")(),B_e=Et("/labs_/experiments/$experimentAlias")(),H_e=Et("/chats_/$conversationId/talk")(),z_e=Et("/labs_/experiments/portrait/")(),V_e=Et("/labs_/experiments/3d-generations/")(),$_e=Et("/labs_/experiments/portrait/talk")(),G_e=Et("/labs_/experiments/3d-generations/my-creations")(),K_e=Et("/labs_/experiments/3d-generations/shares/$shareId")(),W_e=g_e.update({id:"/topic-selection",path:"/topic-selection",getParentRoute:()=>At}).lazy(()=>z(()=>import("./topic-selection.lazy-Cmwt7m3I.js"),__vite__mapDeps([378,1,2])).then(t=>t.Route)),q_e=v_e.update({id:"/login",path:"/login",getParentRoute:()=>At}).lazy(()=>z(()=>import("./login.lazy-BGRW2qNd.js"),__vite__mapDeps([379,1,2,283])).then(t=>t.Route)),Y_e=y_e.update({id:"/gaming",path:"/gaming",getParentRoute:()=>At}).lazy(()=>z(()=>import("./gaming.lazy-Db6xawJL.js"),__vite__mapDeps([380,1,2,227,228])).then(t=>t.Route)),I7=b_e.update({id:"/gallery",path:"/gallery",getParentRoute:()=>At}).lazy(()=>z(()=>import("./gallery.lazy-Dp4XTZRb.js"),__vite__mapDeps([381,1,2])).then(t=>t.Route)),Q_e=C_e.update({id:"/discover",path:"/discover",getParentRoute:()=>At}).lazy(()=>z(()=>Promise.resolve().then(()=>Tke),void 0).then(t=>t.Route)),J_e=S_e.update({id:"/daily",path:"/daily",getParentRoute:()=>At}).lazy(()=>z(()=>import("./daily.lazy-CmDdu5_h.js"),__vite__mapDeps([382,1,2,383,384,385,349,386,387,388,389,390,269,376,335,334])).then(t=>t.Route)),X_e=E_e.update({id:"/agents",path:"/agents",getParentRoute:()=>At}).lazy(()=>z(()=>import("./agents.lazy-CAxV22uy.js"),__vite__mapDeps([391,1,2])).then(t=>t.Route)),Z_e=bIe.update({id:"/",path:"/",getParentRoute:()=>At}),eAe=w_e.update({id:"/referrals/",path:"/referrals/",getParentRoute:()=>At}).lazy(()=>z(()=>import("./index.lazy-jLp0yI0y.js"),__vite__mapDeps([392,1,2,306,236,305,310,393,394,395,396,397,398])).then(t=>t.Route)),tAe=I_e.update({id:"/labs_/",path:"/labs/",getParentRoute:()=>At}).lazy(()=>z(()=>import("./index.lazy-B1YF079A.js"),__vite__mapDeps([399,1,2,400,401,402,403,404,405,406])).then(t=>t.Route)),nAe=T_e.update({id:"/subscription/start",path:"/subscription/start",getParentRoute:()=>At}).lazy(()=>z(()=>import("./subscription.start.lazy-DphNRaTu.js"),__vite__mapDeps([407,1,2])).then(t=>t.Route)),rAe=__e.update({id:"/subscription/manage",path:"/subscription/manage",getParentRoute:()=>At}).lazy(()=>z(()=>import("./subscription.manage.lazy-DsjvSxgj.js"),__vite__mapDeps([408,1,2,320,357])).then(t=>t.Route)),oAe=A_e.update({id:"/shares/$conversationId",path:"/shares/$conversationId",getParentRoute:()=>At}).lazy(()=>z(()=>import("./shares._conversationId.lazy-CaN1YCvx.js"),__vite__mapDeps([409,1,2])).then(t=>t.Route)),iAe=k_e.update({id:"/referrals/rules",path:"/referrals/rules",getParentRoute:()=>At}).lazy(()=>z(()=>import("./rules.lazy-C6ShG77E.js"),__vite__mapDeps([410,1,2,236,310,394,311,411])).then(t=>t.Route)),sAe=x_e.update({id:"/pro/subscribe",path:"/pro/subscribe",getParentRoute:()=>At}).lazy(()=>z(()=>import("./pro.subscribe.lazy-CRVxcb44.js"),__vite__mapDeps([412,1,2,237,238,239,225,413,414,270,415,416,417,418,300,232,297,419,420,302,421,422,319,423,424,425,235,236,426,427,428,429,430,227,228,431,432])).then(t=>t.Route)),aAe=R_e.update({id:"/pages/$pageId",path:"/pages/$pageId",getParentRoute:()=>At}).lazy(()=>z(()=>import("./pages._pageId.lazy-DaPeKC1Y.js"),__vite__mapDeps([433,1,2,434,435,436,437,438,439,440,374,441,442,280,443,337,386,286,444,445,288])).then(t=>t.Route)),cAe=N_e.update({id:"/memory/narrative",path:"/memory/narrative",getParentRoute:()=>At}).lazy(()=>z(()=>import("./memory.narrative.lazy-CR0Qwo-u.js"),__vite__mapDeps([446,1,2,296])).then(t=>t.Route)),lAe=P_e.update({id:"/$galleryItemId",path:"/$galleryItemId",getParentRoute:()=>I7}).lazy(()=>z(()=>import("./gallery._galleryItemId.lazy-CmKfS4YZ.js"),__vite__mapDeps([447,1,2])).then(t=>t.Route)),uAe=O_e.update({id:"/chats/private",path:"/chats/private",getParentRoute:()=>At}).lazy(()=>z(()=>import("./chats.private.lazy-CVOd5IiC.js"),__vite__mapDeps([448,1,2])).then(t=>t.Route)),dAe=M_e.update({id:"/campaigns/$campaignId",path:"/campaigns/$campaignId",getParentRoute:()=>At}).lazy(()=>z(()=>import("./campaigns._campaignId.lazy-DLJE0IuL.js"),__vite__mapDeps([449,1,2,327,322,323])).then(t=>t.Route)),hAe=h_e.update({id:"/w/landing",path:"/w/landing",getParentRoute:()=>At}),fAe=m_e.update({id:"/chats/$conversationId",path:"/chats/$conversationId",getParentRoute:()=>At}),pAe=L_e.update({id:"/shares/podcasts/$shareId",path:"/shares/podcasts/$shareId",getParentRoute:()=>At}).lazy(()=>z(()=>import("./shares.podcasts._shareId.lazy-C_izoiJV.js"),__vite__mapDeps([450,1,2,376,335,352,389,390])).then(t=>t.Route)),mAe=D_e.update({id:"/shares/pages/$shareId",path:"/shares/pages/$shareId",getParentRoute:()=>At}).lazy(()=>z(()=>import("./shares.pages._shareId.lazy-xGVP3W0-.js"),__vite__mapDeps([451,1,2,445,434,435,436,437,438,439,440,374,441,442,280,443,337,386,286,444,288,452])).then(t=>t.Route)),gAe=j_e.update({id:"/pro/redeem/$redeemCode",path:"/pro/redeem/$redeemCode",getParentRoute:()=>At}).lazy(()=>z(()=>import("./pro.redeem._redeemCode.lazy-BQ3AjGZU.js"),__vite__mapDeps([453,1,2])).then(t=>t.Route)),vAe=U_e.update({id:"/pro/ewallet/return",path:"/pro/ewallet/return",getParentRoute:()=>At}).lazy(()=>z(()=>import("./pro.ewallet.return.lazy-DQIzPOSr.js"),__vite__mapDeps([454,1,2,414,270])).then(t=>t.Route)),yAe=F_e.update({id:"/podcasts/$podcastType/$podcastId",path:"/podcasts/$podcastType/$podcastId",getParentRoute:()=>At}).lazy(()=>z(()=>import("./podcasts._podcastType._podcastId.lazy-CqKwr4-O.js"),__vite__mapDeps([455,1,2,383,384,385,349,386,387,388,389,390,269,376,335,334])).then(t=>t.Route)),bAe=B_e.update({id:"/labs_/experiments/$experimentAlias",path:"/labs/experiments/$experimentAlias",getParentRoute:()=>At}).lazy(()=>z(()=>import("./experiments._experimentAlias.lazy-Del7zFgV.js").then(t=>t.e),__vite__mapDeps([456,1,2,401,400,402,403,404,405,267,268])).then(t=>t.Route)),CAe=H_e.update({id:"/chats_/$conversationId/talk",path:"/chats/$conversationId/talk",getParentRoute:()=>At}).lazy(()=>z(()=>import("./chats_._conversationId.talk.lazy-fPi48_ok.js"),__vite__mapDeps([457,1,2,458,459,460,295])).then(t=>t.Route)),SAe=z_e.update({id:"/labs_/experiments/portrait/",path:"/labs/experiments/portrait/",getParentRoute:()=>At}).lazy(()=>z(()=>import("./index.lazy-WxYY6LWA.js"),__vite__mapDeps([461,1,2])).then(t=>t.Route)),EAe=V_e.update({id:"/labs_/experiments/3d-generations/",path:"/labs/experiments/3d-generations/",getParentRoute:()=>At}).lazy(()=>z(()=>import("./my-creations.lazy-nIN1Hg0E.js").then(t=>t.i),__vite__mapDeps([462,1,2,400,319,278,288,289,228,384,385,349,463])).then(t=>t.Route)),wAe=$_e.update({id:"/labs_/experiments/portrait/talk",path:"/labs/experiments/portrait/talk",getParentRoute:()=>At}).lazy(()=>z(()=>import("./talk.lazy-B9L4ztjn.js"),__vite__mapDeps([464,1,2])).then(t=>t.Route)),IAe=G_e.update({id:"/labs_/experiments/3d-generations/my-creations",path:"/labs/experiments/3d-generations/my-creations",getParentRoute:()=>At}).lazy(()=>z(()=>import("./my-creations.lazy-nIN1Hg0E.js").then(t=>t.m),__vite__mapDeps([462,1,2,400,319,278,288,289,228,384,385,349,463])).then(t=>t.Route)),TAe=K_e.update({id:"/labs_/experiments/3d-generations/shares/$shareId",path:"/labs/experiments/3d-generations/shares/$shareId",getParentRoute:()=>At}).lazy(()=>z(()=>import("./shares._shareId.lazy-DetqN_EA.js"),__vite__mapDeps([465,1,2])).then(t=>t.Route)),_Ae={GalleryGalleryItemIdLazyRoute:lAe},AAe=I7._addFileChildren(_Ae),kAe={IndexRoute:Z_e,AgentsLazyRoute:X_e,DailyLazyRoute:J_e,DiscoverLazyRoute:Q_e,GalleryLazyRoute:AAe,GamingLazyRoute:Y_e,LoginLazyRoute:q_e,TopicSelectionLazyRoute:W_e,ChatsConversationIdRoute:fAe,WLandingRoute:hAe,CampaignsCampaignIdLazyRoute:dAe,ChatsPrivateLazyRoute:uAe,MemoryNarrativeLazyRoute:cAe,PagesPageIdLazyRoute:aAe,ProSubscribeLazyRoute:sAe,ReferralsRulesLazyRoute:iAe,SharesConversationIdLazyRoute:oAe,SubscriptionManageLazyRoute:rAe,SubscriptionStartLazyRoute:nAe,LabsIndexLazyRoute:tAe,ReferralsIndexLazyRoute:eAe,ChatsConversationIdTalkLazyRoute:CAe,LabsExperimentsExperimentAliasLazyRoute:bAe,PodcastsPodcastTypePodcastIdLazyRoute:yAe,ProEwalletReturnLazyRoute:vAe,ProRedeemRedeemCodeLazyRoute:gAe,SharesPagesShareIdLazyRoute:mAe,SharesPodcastsShareIdLazyRoute:pAe,LabsExperiments3dGenerationsMyCreationsLazyRoute:IAe,LabsExperimentsPortraitTalkLazyRoute:wAe,LabsExperiments3dGenerationsIndexLazyRoute:EAe,LabsExperimentsPortraitIndexLazyRoute:SAe,LabsExperiments3dGenerationsSharesShareIdLazyRoute:TAe},xAe=At._addFileChildren(kAe)._addFileTypes(),_l=_F({routeTree:xAe});function RAe(){return h.jsx(AF,{router:_l})}(function(){const t="onabort onactivate onactivateinvisible onafterprint onafterupdate onanimationcancel onanimationend onanimationiteration onanimationstart onariarequest onauxclick onbeforeactivate onbeforecopy onbeforecut onbeforedeactivate onbeforeeditfocus onbeforepaste onbeforeprint onbeforeunload onbegin onblur onbounce oncancel oncanplay oncanplaythrough oncellchange onchange onclick onclose oncommand oncontextmenu oncontrolselect oncopy oncuechange oncut ondataavailable ondatasetchanged ondatasetcomplete ondblclick ondeactivate ondrag ondragdrop ondragend ondragenter ondragexit ondragleave ondragover ondragstart ondrop ondurationchange onemptied onend onended onerror onerrorupdate onexit onfilterchange onfinish onfocus onfocusin onfocusout onformdata onfullscreenchange onfullscreenerror ongotpointercapture onhelp oninput oninvalid onkeydown onkeypress onkeyup onlayoutcomplete onload onloadeddata onloadedmetadata onloadend onloadstart onlosecapture onlostpointercapture onmediacomplete onmediaerror onmessage onmousedown onmouseenter onmouseleave onmousemove onmouseout onmouseover onmouseup onmousewheel onmove onmoveend onmovestart onmozfullscreenchange onmozfullscreenerror onmscontentzoom onmsgesturechange onmsgesturedoubletap onmsgestureend onmsgesturehold onmsgesturestart onmsgesturetap onmsgotpointercapture onmsinertiastart onmslostpointercapture onmsmanipulationstatechanged onmspointercancel onmspointerdown onmspointerenter onmspointerleave onmspointermove onmspointerout onmspointerover onmspointerup onoffline ononline onoutofsync onoverscroll onpaste onpause onplay onplaying onpointercancel onpointerdown onpointerenter onpointerleave onpointermove onpointerout onpointerover onpointerrawupdate onpointerup onprogress onpropertychange onratechange onreadystatechange onrepeat onreset onresize onresizeend onresizestart onresume onreverse onrowdelete onrowenter onrowexit onrowinserted onscroll onscrollend onsearch onseek onseeked onseeking onselect onselectionchange onselectstart onshow onstalled onstart onstop onstorage onsubmit onsuspend onsynchrestored ontimeerror ontimeupdate ontoggle ontrackchange ontransitioncancel ontransitionend ontransitionrun ontransitionstart onunload onurlflip onvolumechange onwaiting onwebkitanimationend onwebkitanimationiteration onwebkitanimationstart onwebkitfullscreenchange onwebkitfullscreenerror onwebkittransitionend onwheel".split(" ");function e(){if(typeof window<"u"){const f=[];for(const p in HTMLElement.prototype)p.slice(0,2)==="on"&&f.push(p);return f}return t}const n=typeof window<"u",r=()=>{throw new TypeError("undefined conversion")},o=()=>null,{toLowerCase:i,toUpperCase:s}=String.prototype;function a(){throw new TypeError("Illegal constructor")}function c(){throw new TypeError("Illegal constructor")}const{l:u}=function(){function f(he){let B=ie.get(he);return B===void 0&&(B=w(null),ie.set(he,B)),B}function p(he){const B=A(he);if(B==null||A(B)!==_)throw Error();for(const Pe of T(B))E(he,Pe,{value:he[Pe]});return he}function g(he,B){I(he.prototype),delete he.name,E(he,"name",{value:B})}function v(he){return B=>B instanceof he&&ie.has(B)}function b(he,B){function Pe(oe,we){const N=B[we]||(he=="default"?o:r),te=I(new oe(K,he));return I({[we](Ce,...D){if(Ce=N(""+Ce,...D),Ce==null){if(he=="default")return Ce;Ce=""}return Ce=""+Ce,D=I(w(te)),f(D).v=Ce,D}}[we])}const Q=w(a.prototype);for(const oe of T(Re))Q[oe]=Pe(Re[oe],oe);return E(Q,"name",{value:he,writable:!1,configurable:!1,enumerable:!0}),I(Q)}function y(he,B,Pe,Q="",oe=""){if(he=s.apply(String(he)),(Q=oe||Q)||(Q="http://www.w3.org/1999/xhtml"),Q=U.apply(Se,[Q])?Se[Q]:null){if(U.apply(Q,[he])&&Q[he]&&U.apply(Q[he][B],[Pe])&&Q[he][B][Pe])return Q[he][B][Pe];if(U.apply(Q,["*"])&&U.apply(Q["*"][B],[Pe])&&Q["*"][B][Pe])return Q["*"][B][Pe]}}function C(){return x}const{assign:S,create:w,defineProperty:E,freeze:I,getOwnPropertyNames:T,getPrototypeOf:A,prototype:_}=Object,{hasOwnProperty:U}=_,{forEach:k,push:G}=Array.prototype,K=Symbol(),ie=p(new WeakMap),P=p([]),$=p([]);let Z=!0,x=null,L=!1;class ne{constructor(B,Pe){if(B!==K)throw Error("cannot call the constructor");E(this,"policyName",{value:Pe,enumerable:!0})}toString(){return f(this).v}valueOf(){return f(this).v}}class se extends ne{}g(se,"TrustedScriptURL");class fe extends ne{}g(fe,"TrustedHTML");class X extends ne{}g(X,"TrustedScript"),g(ne,"TrustedType");const ge=I(w(new fe(K,"")));f(ge).v="";const Oe=I(w(new X(K,"")));f(Oe).v="";const Se={"http://www.w3.org/1999/xhtml":{EMBED:{attributes:{src:se.name}},IFRAME:{attributes:{srcdoc:fe.name}},OBJECT:{attributes:{data:se.name,codebase:se.name}},SCRIPT:{attributes:{src:se.name,text:X.name},properties:{innerText:X.name,textContent:X.name,text:X.name}},"*":{attributes:{},properties:{innerHTML:fe.name,outerHTML:fe.name}}},"http://www.w3.org/2000/svg":{"*":{attributes:{},properties:{}}}};var Fe={codebase:"codeBase",formaction:"formAction"};!n||"srcdoc"in HTMLIFrameElement.prototype||delete Se["http://www.w3.org/1999/xhtml"].IFRAME.attributes.srcdoc;for(const he of Object.keys(Se["http://www.w3.org/1999/xhtml"])){Se["http://www.w3.org/1999/xhtml"][he].properties||(Se["http://www.w3.org/1999/xhtml"][he].properties={});for(const B of Object.keys(Se["http://www.w3.org/1999/xhtml"][he].attributes))Se["http://www.w3.org/1999/xhtml"][he].properties[Fe[B]?Fe[B]:B]=Se["http://www.w3.org/1999/xhtml"][he].attributes[B]}for(const he of e())Se["http://www.w3.org/1999/xhtml"]["*"].attributes[he]="TrustedScript",Se["http://www.w3.org/2000/svg"]["*"].attributes[he]="TrustedScript";const Re={createHTML:fe,createScriptURL:se,createScript:X},Ve=Re.hasOwnProperty;return Fe=w(c.prototype),S(Fe,{createPolicy:function(he,B){if(!he.match(/^[-#a-zA-Z0-9=_/@.%]+$/g))throw new TypeError("Policy "+he+" contains invalid characters.");if(L&&$.indexOf(he)===-1&&$.indexOf("*")===-1)throw new TypeError("Policy "+he+" disallowed.");if(he==="default"&&x)throw new TypeError("Policy "+he+" already exists.");if(L&&!Z&&P.indexOf(he)!==-1)throw new TypeError("Policy "+he+" exists.");P.push(he);const Pe=w(null);if(B&&typeof B=="object")for(const Q of T(B))Ve.call(Re,Q)&&(Pe[Q]=B[Q]);else console.warn("trustedTypes.createPolicy "+he+" was given an empty policy");return I(Pe),B=b(he,Pe),he==="default"&&(x=B),B},h:v(fe),j:v(se),i:v(X),c:function(he,B,Pe="",Q=""){return B=i.apply(String(B)),y(he,"attributes",B,Pe,Q)||null},f:function(he,B,Pe=""){return y(he,"properties",String(B),Pe)||null},g:function(he=""){if(!he)try{he=document.documentElement.namespaceURI}catch{he="http://www.w3.org/1999/xhtml"}return(he=Se[he])?JSON.parse(JSON.stringify(he)):{}},a:ge,b:Oe,o:x,TrustedHTML:fe,TrustedScriptURL:se,TrustedScript:X}),E(Fe,"defaultPolicy",{get:C,set:()=>{}}),{l:I(Fe),w:function(he,B){L=!0,$.length=0,k.call(he,Pe=>{G.call($,""+Pe)}),Z=B,P.length=0},m:function(){L=!1},s:C,u:function(){x=null,P.splice(P.indexOf("default"),1)}}}();if(typeof window<"u"&&(window.TrustedTypes&&typeof window.trustedTypes>"u"&&(window.trustedTypes=Object.freeze(window.TrustedTypes)),typeof window.trustedTypes>"u")){var d=Object.create(c.prototype);Object.assign(d,{isHTML:u.h,isScriptURL:u.j,isScript:u.i,createPolicy:u.createPolicy,getAttributeType:u.c,getPropertyType:u.f,getTypeMapping:u.g,emptyHTML:u.a,emptyScript:u.b,_isPolyfill_:!0}),Object.defineProperty(d,"defaultPolicy",Object.getOwnPropertyDescriptor(u,"defaultPolicy")||{}),window.trustedTypes=Object.freeze(d),window.TrustedHTML=u.TrustedHTML,window.TrustedScriptURL=u.TrustedScriptURL,window.TrustedScript=u.TrustedScript,window.TrustedTypePolicy=a,window.TrustedTypePolicyFactory=c}}).call(void 0);/*! @license DOMPurify 3.2.4 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.4/LICENSE */const{entries:T7,setPrototypeOf:R2,isFrozen:NAe,getPrototypeOf:PAe,getOwnPropertyDescriptor:OAe}=Object;let{freeze:xr,seal:Mo,create:_7}=Object,{apply:qw,construct:Yw}=typeof Reflect<"u"&&Reflect;xr||(xr=function(e){return e});Mo||(Mo=function(e){return e});qw||(qw=function(e,n,r){return e.apply(n,r)});Yw||(Yw=function(e,n){return new e(...n)});const Dm=Rr(Array.prototype.forEach),MAe=Rr(Array.prototype.lastIndexOf),N2=Rr(Array.prototype.pop),Nh=Rr(Array.prototype.push),LAe=Rr(Array.prototype.splice),ag=Rr(String.prototype.toLowerCase),g0=Rr(String.prototype.toString),P2=Rr(String.prototype.match),Ph=Rr(String.prototype.replace),DAe=Rr(String.prototype.indexOf),jAe=Rr(String.prototype.trim),zo=Rr(Object.prototype.hasOwnProperty),Cr=Rr(RegExp.prototype.test),Oh=UAe(TypeError);function Rr(t){return function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return qw(t,e,r)}}function UAe(t){return function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return Yw(t,n)}}function Ct(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ag;R2&&R2(t,null);let r=e.length;for(;r--;){let o=e[r];if(typeof o=="string"){const i=n(o);i!==o&&(NAe(e)||(e[r]=i),o=i)}t[o]=!0}return t}function FAe(t){for(let e=0;e<t.length;e++)zo(t,e)||(t[e]=null);return t}function Xa(t){const e=_7(null);for(const[n,r]of T7(t))zo(t,n)&&(Array.isArray(r)?e[n]=FAe(r):r&&typeof r=="object"&&r.constructor===Object?e[n]=Xa(r):e[n]=r);return e}function Mh(t,e){for(;t!==null;){const r=OAe(t,e);if(r){if(r.get)return Rr(r.get);if(typeof r.value=="function")return Rr(r.value)}t=PAe(t)}function n(){return null}return n}const O2=xr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),v0=xr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),y0=xr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),BAe=xr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),b0=xr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),HAe=xr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),M2=xr(["#text"]),L2=xr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),C0=xr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),D2=xr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),jm=xr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),zAe=Mo(/\{\{[\w\W]*|[\w\W]*\}\}/gm),VAe=Mo(/<%[\w\W]*|[\w\W]*%>/gm),$Ae=Mo(/\$\{[\w\W]*/gm),GAe=Mo(/^data-[\-\w.\u00B7-\uFFFF]+$/),KAe=Mo(/^aria-[\-\w]+$/),A7=Mo(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),WAe=Mo(/^(?:\w+script|data):/i),qAe=Mo(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),k7=Mo(/^html$/i),YAe=Mo(/^[a-z][.\w]*(-[.\w]+)+$/i);var j2=Object.freeze({__proto__:null,ARIA_ATTR:KAe,ATTR_WHITESPACE:qAe,CUSTOM_ELEMENT:YAe,DATA_ATTR:GAe,DOCTYPE_NAME:k7,ERB_EXPR:VAe,IS_ALLOWED_URI:A7,IS_SCRIPT_OR_DATA:WAe,MUSTACHE_EXPR:zAe,TMPLIT_EXPR:$Ae});const Lh={element:1,text:3,progressingInstruction:7,comment:8,document:9},QAe=function(){return typeof window>"u"?null:window},JAe=function(e,n){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let r=null;const o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(r=n.getAttribute(o));const i="dompurify"+(r?"#"+r:"");try{return e.createPolicy(i,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},U2=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function x7(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:QAe();const e=nt=>x7(nt);if(e.version="3.2.4",e.removed=[],!t||!t.document||t.document.nodeType!==Lh.document||!t.Element)return e.isSupported=!1,e;let{document:n}=t;const r=n,o=r.currentScript,{DocumentFragment:i,HTMLTemplateElement:s,Node:a,Element:c,NodeFilter:u,NamedNodeMap:d=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:g}=t,v=c.prototype,b=Mh(v,"cloneNode"),y=Mh(v,"remove"),C=Mh(v,"nextSibling"),S=Mh(v,"childNodes"),w=Mh(v,"parentNode");if(typeof s=="function"){const nt=n.createElement("template");nt.content&&nt.content.ownerDocument&&(n=nt.content.ownerDocument)}let E,I="";const{implementation:T,createNodeIterator:A,createDocumentFragment:_,getElementsByTagName:U}=n,{importNode:k}=r;let G=U2();e.isSupported=typeof T7=="function"&&typeof w=="function"&&T&&T.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:K,ERB_EXPR:ie,TMPLIT_EXPR:P,DATA_ATTR:$,ARIA_ATTR:Z,IS_SCRIPT_OR_DATA:x,ATTR_WHITESPACE:L,CUSTOM_ELEMENT:ne}=j2;let{IS_ALLOWED_URI:se}=j2,fe=null;const X=Ct({},[...O2,...v0,...y0,...b0,...M2]);let ge=null;const Oe=Ct({},[...L2,...C0,...D2,...jm]);let Se=Object.seal(_7(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Fe=null,Re=null,Ve=!0,he=!0,B=!1,Pe=!0,Q=!1,oe=!0,we=!1,N=!1,te=!1,Ce=!1,D=!1,Y=!1,Ie=!0,Je=!1;const it="user-content-";let st=!0,Be=!1,$e={},wt=null;const nn=Ct({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let _t=null;const rn=Ct({},["audio","video","img","source","image","track"]);let Rn=null;const j=Ct({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ue="http://www.w3.org/1998/Math/MathML",q="http://www.w3.org/2000/svg",ce="http://www.w3.org/1999/xhtml";let De=ce,Ge=!1,Me=null;const F=Ct({},[ue,q,ce],g0);let re=Ct({},["mi","mo","mn","ms","mtext"]),de=Ct({},["annotation-xml"]);const ke=Ct({},["title","style","font","a","script"]);let ve=null;const Ke=["application/xhtml+xml","text/html"],tt="text/html";let ot=null,vt=null;const Kn=n.createElement("form"),bn=function(H){return H instanceof RegExp||H instanceof Function},lr=function(){let H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(vt&&vt===H)){if((!H||typeof H!="object")&&(H={}),H=Xa(H),ve=Ke.indexOf(H.PARSER_MEDIA_TYPE)===-1?tt:H.PARSER_MEDIA_TYPE,ot=ve==="application/xhtml+xml"?g0:ag,fe=zo(H,"ALLOWED_TAGS")?Ct({},H.ALLOWED_TAGS,ot):X,ge=zo(H,"ALLOWED_ATTR")?Ct({},H.ALLOWED_ATTR,ot):Oe,Me=zo(H,"ALLOWED_NAMESPACES")?Ct({},H.ALLOWED_NAMESPACES,g0):F,Rn=zo(H,"ADD_URI_SAFE_ATTR")?Ct(Xa(j),H.ADD_URI_SAFE_ATTR,ot):j,_t=zo(H,"ADD_DATA_URI_TAGS")?Ct(Xa(rn),H.ADD_DATA_URI_TAGS,ot):rn,wt=zo(H,"FORBID_CONTENTS")?Ct({},H.FORBID_CONTENTS,ot):nn,Fe=zo(H,"FORBID_TAGS")?Ct({},H.FORBID_TAGS,ot):{},Re=zo(H,"FORBID_ATTR")?Ct({},H.FORBID_ATTR,ot):{},$e=zo(H,"USE_PROFILES")?H.USE_PROFILES:!1,Ve=H.ALLOW_ARIA_ATTR!==!1,he=H.ALLOW_DATA_ATTR!==!1,B=H.ALLOW_UNKNOWN_PROTOCOLS||!1,Pe=H.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Q=H.SAFE_FOR_TEMPLATES||!1,oe=H.SAFE_FOR_XML!==!1,we=H.WHOLE_DOCUMENT||!1,Ce=H.RETURN_DOM||!1,D=H.RETURN_DOM_FRAGMENT||!1,Y=H.RETURN_TRUSTED_TYPE||!1,te=H.FORCE_BODY||!1,Ie=H.SANITIZE_DOM!==!1,Je=H.SANITIZE_NAMED_PROPS||!1,st=H.KEEP_CONTENT!==!1,Be=H.IN_PLACE||!1,se=H.ALLOWED_URI_REGEXP||A7,De=H.NAMESPACE||ce,re=H.MATHML_TEXT_INTEGRATION_POINTS||re,de=H.HTML_INTEGRATION_POINTS||de,Se=H.CUSTOM_ELEMENT_HANDLING||{},H.CUSTOM_ELEMENT_HANDLING&&bn(H.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Se.tagNameCheck=H.CUSTOM_ELEMENT_HANDLING.tagNameCheck),H.CUSTOM_ELEMENT_HANDLING&&bn(H.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Se.attributeNameCheck=H.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),H.CUSTOM_ELEMENT_HANDLING&&typeof H.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Se.allowCustomizedBuiltInElements=H.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Q&&(he=!1),D&&(Ce=!0),$e&&(fe=Ct({},M2),ge=[],$e.html===!0&&(Ct(fe,O2),Ct(ge,L2)),$e.svg===!0&&(Ct(fe,v0),Ct(ge,C0),Ct(ge,jm)),$e.svgFilters===!0&&(Ct(fe,y0),Ct(ge,C0),Ct(ge,jm)),$e.mathMl===!0&&(Ct(fe,b0),Ct(ge,D2),Ct(ge,jm))),H.ADD_TAGS&&(fe===X&&(fe=Xa(fe)),Ct(fe,H.ADD_TAGS,ot)),H.ADD_ATTR&&(ge===Oe&&(ge=Xa(ge)),Ct(ge,H.ADD_ATTR,ot)),H.ADD_URI_SAFE_ATTR&&Ct(Rn,H.ADD_URI_SAFE_ATTR,ot),H.FORBID_CONTENTS&&(wt===nn&&(wt=Xa(wt)),Ct(wt,H.FORBID_CONTENTS,ot)),st&&(fe["#text"]=!0),we&&Ct(fe,["html","head","body"]),fe.table&&(Ct(fe,["tbody"]),delete Fe.tbody),H.TRUSTED_TYPES_POLICY){if(typeof H.TRUSTED_TYPES_POLICY.createHTML!="function")throw Oh('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof H.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Oh('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');E=H.TRUSTED_TYPES_POLICY,I=E.createHTML("")}else E===void 0&&(E=JAe(g,o)),E!==null&&typeof I=="string"&&(I=E.createHTML(""));xr&&xr(H),vt=H}},tr=Ct({},[...v0,...y0,...BAe]),Tn=Ct({},[...b0,...HAe]),di=function(H){let Ne=w(H);(!Ne||!Ne.tagName)&&(Ne={namespaceURI:De,tagName:"template"});const We=ag(H.tagName),Gt=ag(Ne.tagName);return Me[H.namespaceURI]?H.namespaceURI===q?Ne.namespaceURI===ce?We==="svg":Ne.namespaceURI===ue?We==="svg"&&(Gt==="annotation-xml"||re[Gt]):!!tr[We]:H.namespaceURI===ue?Ne.namespaceURI===ce?We==="math":Ne.namespaceURI===q?We==="math"&&de[Gt]:!!Tn[We]:H.namespaceURI===ce?Ne.namespaceURI===q&&!de[Gt]||Ne.namespaceURI===ue&&!re[Gt]?!1:!Tn[We]&&(ke[We]||!tr[We]):!!(ve==="application/xhtml+xml"&&Me[H.namespaceURI]):!1},fo=function(H){Nh(e.removed,{element:H});try{w(H).removeChild(H)}catch{y(H)}},Na=function(H,Ne){try{Nh(e.removed,{attribute:Ne.getAttributeNode(H),from:Ne})}catch{Nh(e.removed,{attribute:null,from:Ne})}if(Ne.removeAttribute(H),H==="is")if(Ce||D)try{fo(Ne)}catch{}else try{Ne.setAttribute(H,"")}catch{}},Mr=function(H){let Ne=null,We=null;if(te)H="<remove></remove>"+H;else{const Dt=P2(H,/^[\r\n\t ]+/);We=Dt&&Dt[0]}ve==="application/xhtml+xml"&&De===ce&&(H='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+H+"</body></html>");const Gt=E?E.createHTML(H):H;if(De===ce)try{Ne=new p().parseFromString(Gt,ve)}catch{}if(!Ne||!Ne.documentElement){Ne=T.createDocument(De,"template",null);try{Ne.documentElement.innerHTML=Ge?I:Gt}catch{}}const Wn=Ne.body||Ne.documentElement;return H&&We&&Wn.insertBefore(n.createTextNode(We),Wn.childNodes[0]||null),De===ce?U.call(Ne,we?"html":"body")[0]:we?Ne.documentElement:Wn},Dn=function(H){return A.call(H.ownerDocument||H,H,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},Pa=function(H){return H instanceof f&&(typeof H.nodeName!="string"||typeof H.textContent!="string"||typeof H.removeChild!="function"||!(H.attributes instanceof d)||typeof H.removeAttribute!="function"||typeof H.setAttribute!="function"||typeof H.namespaceURI!="string"||typeof H.insertBefore!="function"||typeof H.hasChildNodes!="function")},jp=function(H){return typeof a=="function"&&H instanceof a};function Nn(nt,H,Ne){Dm(nt,We=>{We.call(e,H,Ne,vt)})}const Jd=function(H){let Ne=null;if(Nn(G.beforeSanitizeElements,H,null),Pa(H))return fo(H),!0;const We=ot(H.nodeName);if(Nn(G.uponSanitizeElement,H,{tagName:We,allowedTags:fe}),H.hasChildNodes()&&!jp(H.firstElementChild)&&Cr(/<[/\w]/g,H.innerHTML)&&Cr(/<[/\w]/g,H.textContent)||H.nodeType===Lh.progressingInstruction||oe&&H.nodeType===Lh.comment&&Cr(/<[/\w]/g,H.data))return fo(H),!0;if(!fe[We]||Fe[We]){if(!Fe[We]&&Ns(We)&&(Se.tagNameCheck instanceof RegExp&&Cr(Se.tagNameCheck,We)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(We)))return!1;if(st&&!wt[We]){const Gt=w(H)||H.parentNode,Wn=S(H)||H.childNodes;if(Wn&&Gt){const Dt=Wn.length;for(let ur=Dt-1;ur>=0;--ur){const po=b(Wn[ur],!0);po.__removalCount=(H.__removalCount||0)+1,Gt.insertBefore(po,C(H))}}}return fo(H),!0}return H instanceof c&&!di(H)||(We==="noscript"||We==="noembed"||We==="noframes")&&Cr(/<\/no(script|embed|frames)/i,H.innerHTML)?(fo(H),!0):(Q&&H.nodeType===Lh.text&&(Ne=H.textContent,Dm([K,ie,P],Gt=>{Ne=Ph(Ne,Gt," ")}),H.textContent!==Ne&&(Nh(e.removed,{element:H.cloneNode()}),H.textContent=Ne)),Nn(G.afterSanitizeElements,H,null),!1)},Xd=function(H,Ne,We){if(Ie&&(Ne==="id"||Ne==="name")&&(We in n||We in Kn))return!1;if(!(he&&!Re[Ne]&&Cr($,Ne))){if(!(Ve&&Cr(Z,Ne))){if(!ge[Ne]||Re[Ne]){if(!(Ns(H)&&(Se.tagNameCheck instanceof RegExp&&Cr(Se.tagNameCheck,H)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(H))&&(Se.attributeNameCheck instanceof RegExp&&Cr(Se.attributeNameCheck,Ne)||Se.attributeNameCheck instanceof Function&&Se.attributeNameCheck(Ne))||Ne==="is"&&Se.allowCustomizedBuiltInElements&&(Se.tagNameCheck instanceof RegExp&&Cr(Se.tagNameCheck,We)||Se.tagNameCheck instanceof Function&&Se.tagNameCheck(We))))return!1}else if(!Rn[Ne]){if(!Cr(se,Ph(We,L,""))){if(!((Ne==="src"||Ne==="xlink:href"||Ne==="href")&&H!=="script"&&DAe(We,"data:")===0&&_t[H])){if(!(B&&!Cr(x,Ph(We,L,"")))){if(We)return!1}}}}}}return!0},Ns=function(H){return H!=="annotation-xml"&&P2(H,ne)},Ps=function(H){Nn(G.beforeSanitizeAttributes,H,null);const{attributes:Ne}=H;if(!Ne||Pa(H))return;const We={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ge,forceKeepAttr:void 0};let Gt=Ne.length;for(;Gt--;){const Wn=Ne[Gt],{name:Dt,namespaceURI:ur,value:po}=Wn,Ma=ot(Dt);let on=Dt==="value"?po:jAe(po);if(We.attrName=Ma,We.attrValue=on,We.keepAttr=!0,We.forceKeepAttr=void 0,Nn(G.uponSanitizeAttribute,H,We),on=We.attrValue,Je&&(Ma==="id"||Ma==="name")&&(Na(Dt,H),on=it+on),oe&&Cr(/((--!?|])>)|<\/(style|title)/i,on)){Na(Dt,H);continue}if(We.forceKeepAttr||(Na(Dt,H),!We.keepAttr))continue;if(!Pe&&Cr(/\/>/i,on)){Na(Dt,H);continue}Q&&Dm([K,ie,P],Fp=>{on=Ph(on,Fp," ")});const Up=ot(H.nodeName);if(Xd(Up,Ma,on)){if(E&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!ur)switch(g.getAttributeType(Up,Ma)){case"TrustedHTML":{on=E.createHTML(on);break}case"TrustedScriptURL":{on=E.createScriptURL(on);break}}try{ur?H.setAttributeNS(ur,Dt,on):H.setAttribute(Dt,on),Pa(H)?fo(H):N2(e.removed)}catch{}}}Nn(G.afterSanitizeAttributes,H,null)},Oa=function nt(H){let Ne=null;const We=Dn(H);for(Nn(G.beforeSanitizeShadowDOM,H,null);Ne=We.nextNode();)Nn(G.uponSanitizeShadowNode,Ne,null),Jd(Ne),Ps(Ne),Ne.content instanceof i&&nt(Ne.content);Nn(G.afterSanitizeShadowDOM,H,null)};return e.sanitize=function(nt){let H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ne=null,We=null,Gt=null,Wn=null;if(Ge=!nt,Ge&&(nt="<!-->"),typeof nt!="string"&&!jp(nt))if(typeof nt.toString=="function"){if(nt=nt.toString(),typeof nt!="string")throw Oh("dirty is not a string, aborting")}else throw Oh("toString is not a function");if(!e.isSupported)return nt;if(N||lr(H),e.removed=[],typeof nt=="string"&&(Be=!1),Be){if(nt.nodeName){const po=ot(nt.nodeName);if(!fe[po]||Fe[po])throw Oh("root node is forbidden and cannot be sanitized in-place")}}else if(nt instanceof a)Ne=Mr("<!---->"),We=Ne.ownerDocument.importNode(nt,!0),We.nodeType===Lh.element&&We.nodeName==="BODY"||We.nodeName==="HTML"?Ne=We:Ne.appendChild(We);else{if(!Ce&&!Q&&!we&&nt.indexOf("<")===-1)return E&&Y?E.createHTML(nt):nt;if(Ne=Mr(nt),!Ne)return Ce?null:Y?I:""}Ne&&te&&fo(Ne.firstChild);const Dt=Dn(Be?nt:Ne);for(;Gt=Dt.nextNode();)Jd(Gt),Ps(Gt),Gt.content instanceof i&&Oa(Gt.content);if(Be)return nt;if(Ce){if(D)for(Wn=_.call(Ne.ownerDocument);Ne.firstChild;)Wn.appendChild(Ne.firstChild);else Wn=Ne;return(ge.shadowroot||ge.shadowrootmode)&&(Wn=k.call(r,Wn,!0)),Wn}let ur=we?Ne.outerHTML:Ne.innerHTML;return we&&fe["!doctype"]&&Ne.ownerDocument&&Ne.ownerDocument.doctype&&Ne.ownerDocument.doctype.name&&Cr(k7,Ne.ownerDocument.doctype.name)&&(ur="<!DOCTYPE "+Ne.ownerDocument.doctype.name+`>
`+ur),Q&&Dm([K,ie,P],po=>{ur=Ph(ur,po," ")}),E&&Y?E.createHTML(ur):ur},e.setConfig=function(){let nt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};lr(nt),N=!0},e.clearConfig=function(){vt=null,N=!1},e.isValidAttribute=function(nt,H,Ne){vt||lr({});const We=ot(nt),Gt=ot(H);return Xd(We,Gt,Ne)},e.addHook=function(nt,H){typeof H=="function"&&Nh(G[nt],H)},e.removeHook=function(nt,H){if(H!==void 0){const Ne=MAe(G[nt],H);return Ne===-1?void 0:LAe(G[nt],Ne,1)[0]}return N2(G[nt])},e.removeHooks=function(nt){G[nt]=[]},e.removeAllHooks=function(){G=U2()},e}var F2=x7(),vf=class{constructor(t,e,n,r,o,i){J(this,"type",3);J(this,"name","");J(this,"prefix","");J(this,"value","");J(this,"suffix","");J(this,"modifier",3);this.type=t,this.name=e,this.prefix=n,this.value=r,this.suffix=o,this.modifier=i}hasCustomName(){return this.name!==""&&typeof this.name!="number"}},XAe=/[$_\p{ID_Start}]/u,ZAe=/[$_\u200C\u200D\p{ID_Continue}]/u,Qw=".*";function eke(t,e){return/^[\x00-\x7F]*$/.test(t)}function R7(t,e=!1){let n=[],r=0;for(;r<t.length;){let o=t[r],i=function(s){if(!e)throw new TypeError(s);n.push({type:"INVALID_CHAR",index:r,value:t[r++]})};if(o==="*"){n.push({type:"ASTERISK",index:r,value:t[r++]});continue}if(o==="+"||o==="?"){n.push({type:"OTHER_MODIFIER",index:r,value:t[r++]});continue}if(o==="\\"){n.push({type:"ESCAPED_CHAR",index:r++,value:t[r++]});continue}if(o==="{"){n.push({type:"OPEN",index:r,value:t[r++]});continue}if(o==="}"){n.push({type:"CLOSE",index:r,value:t[r++]});continue}if(o===":"){let s="",a=r+1;for(;a<t.length;){let c=t.substr(a,1);if(a===r+1&&XAe.test(c)||a!==r+1&&ZAe.test(c)){s+=t[a++];continue}break}if(!s){i(`Missing parameter name at ${r}`);continue}n.push({type:"NAME",index:r,value:s}),r=a;continue}if(o==="("){let s=1,a="",c=r+1,u=!1;if(t[c]==="?"){i(`Pattern cannot start with "?" at ${c}`);continue}for(;c<t.length;){if(!eke(t[c])){i(`Invalid character '${t[c]}' at ${c}.`),u=!0;break}if(t[c]==="\\"){a+=t[c++]+t[c++];continue}if(t[c]===")"){if(s--,s===0){c++;break}}else if(t[c]==="("&&(s++,t[c+1]!=="?")){i(`Capturing groups are not allowed at ${c}`),u=!0;break}a+=t[c++]}if(u)continue;if(s){i(`Unbalanced pattern at ${r}`);continue}if(!a){i(`Missing pattern at ${r}`);continue}n.push({type:"REGEX",index:r,value:a}),r=c;continue}n.push({type:"CHAR",index:r,value:t[r++]})}return n.push({type:"END",index:r,value:""}),n}function N7(t,e={}){let n=R7(t);e.delimiter??(e.delimiter="/#?"),e.prefixes??(e.prefixes="./");let r=`[^${vo(e.delimiter)}]+?`,o=[],i=0,s=0,a=new Set,c=S=>{if(s<n.length&&n[s].type===S)return n[s++].value},u=()=>c("OTHER_MODIFIER")??c("ASTERISK"),d=S=>{let w=c(S);if(w!==void 0)return w;let{type:E,index:I}=n[s];throw new TypeError(`Unexpected ${E} at ${I}, expected ${S}`)},f=()=>{let S="",w;for(;w=c("CHAR")??c("ESCAPED_CHAR");)S+=w;return S},p=S=>S,g=e.encodePart||p,v="",b=S=>{v+=S},y=()=>{v.length&&(o.push(new vf(3,"","",g(v),"",3)),v="")},C=(S,w,E,I,T)=>{let A=3;switch(T){case"?":A=1;break;case"*":A=0;break;case"+":A=2;break}if(!w&&!E&&A===3){b(S);return}if(y(),!w&&!E){if(!S)return;o.push(new vf(3,"","",g(S),"",A));return}let _;E?E==="*"?_=Qw:_=E:_=r;let U=2;_===r?(U=1,_=""):_===Qw&&(U=0,_="");let k;if(w?k=w:E&&(k=i++),a.has(k))throw new TypeError(`Duplicate name '${k}'.`);a.add(k),o.push(new vf(U,k,g(S),_,g(I),A))};for(;s<n.length;){let S=c("CHAR"),w=c("NAME"),E=c("REGEX");if(!w&&!E&&(E=c("ASTERISK")),w||E){let T=S??"";e.prefixes.indexOf(T)===-1&&(b(T),T=""),y();let A=u();C(T,w,E,"",A);continue}let I=S??c("ESCAPED_CHAR");if(I){b(I);continue}if(c("OPEN")){let T=f(),A=c("NAME"),_=c("REGEX");!A&&!_&&(_=c("ASTERISK"));let U=f();d("CLOSE");let k=u();C(T,A,_,U,k);continue}y(),d("END")}return o}function vo(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function B2(t){return t&&t.ignoreCase?"ui":"u"}function tke(t,e,n){return P7(N7(t,n),e,n)}function Iu(t){switch(t){case 0:return"*";case 1:return"?";case 2:return"+";case 3:return""}}function P7(t,e,n={}){n.delimiter??(n.delimiter="/#?"),n.prefixes??(n.prefixes="./"),n.sensitive??(n.sensitive=!1),n.strict??(n.strict=!1),n.end??(n.end=!0),n.start??(n.start=!0),n.endsWith="";let r=n.start?"^":"";for(let a of t){if(a.type===3){a.modifier===3?r+=vo(a.value):r+=`(?:${vo(a.value)})${Iu(a.modifier)}`;continue}e&&e.push(a.name);let c=`[^${vo(n.delimiter)}]+?`,u=a.value;if(a.type===1?u=c:a.type===0&&(u=Qw),!a.prefix.length&&!a.suffix.length){a.modifier===3||a.modifier===1?r+=`(${u})${Iu(a.modifier)}`:r+=`((?:${u})${Iu(a.modifier)})`;continue}if(a.modifier===3||a.modifier===1){r+=`(?:${vo(a.prefix)}(${u})${vo(a.suffix)})`,r+=Iu(a.modifier);continue}r+=`(?:${vo(a.prefix)}`,r+=`((?:${u})(?:`,r+=vo(a.suffix),r+=vo(a.prefix),r+=`(?:${u}))*)${vo(a.suffix)})`,a.modifier===0&&(r+="?")}let o=`[${vo(n.endsWith)}]|$`,i=`[${vo(n.delimiter)}]`;if(n.end)return n.strict||(r+=`${i}?`),n.endsWith.length?r+=`(?=${o})`:r+="$",new RegExp(r,B2(n));n.strict||(r+=`(?:${i}(?=${o}))?`);let s=!1;if(t.length){let a=t[t.length-1];a.type===3&&a.modifier===3&&(s=n.delimiter.indexOf(a)>-1)}return s||(r+=`(?=${i}|${o})`),new RegExp(r,B2(n))}var Qs={delimiter:"",prefixes:"",sensitive:!0,strict:!0},nke={delimiter:".",prefixes:"",sensitive:!0,strict:!0},rke={delimiter:"/",prefixes:"/",sensitive:!0,strict:!0};function oke(t,e){return t.length?t[0]==="/"?!0:!e||t.length<2?!1:(t[0]=="\\"||t[0]=="{")&&t[1]=="/":!1}function O7(t,e){return t.startsWith(e)?t.substring(e.length,t.length):t}function ike(t,e){return t.endsWith(e)?t.substr(0,t.length-e.length):t}function M7(t){return!t||t.length<2?!1:t[0]==="["||(t[0]==="\\"||t[0]==="{")&&t[1]==="["}var L7=["ftp","file","http","https","ws","wss"];function D7(t){if(!t)return!0;for(let e of L7)if(t.test(e))return!0;return!1}function ske(t,e){if(t=O7(t,"#"),e||t==="")return t;let n=new URL("https://example.com");return n.hash=t,n.hash?n.hash.substring(1,n.hash.length):""}function ake(t,e){if(t=O7(t,"?"),e||t==="")return t;let n=new URL("https://example.com");return n.search=t,n.search?n.search.substring(1,n.search.length):""}function cke(t,e){return e||t===""?t:M7(t)?F7(t):U7(t)}function lke(t,e){if(e||t==="")return t;let n=new URL("https://example.com");return n.password=t,n.password}function uke(t,e){if(e||t==="")return t;let n=new URL("https://example.com");return n.username=t,n.username}function dke(t,e,n){if(n||t==="")return t;if(e&&!L7.includes(e))return new URL(`${e}:${t}`).pathname;let r=t[0]=="/";return t=new URL(r?t:"/-"+t,"https://example.com").pathname,r||(t=t.substring(2,t.length)),t}function hke(t,e,n){return j7(e)===t&&(t=""),n||t===""?t:B7(t)}function fke(t,e){return t=ike(t,":"),e||t===""?t:QA(t)}function j7(t){switch(t){case"ws":case"http":return"80";case"wws":case"https":return"443";case"ftp":return"21";default:return""}}function QA(t){if(t==="")return t;if(/^[-+.A-Za-z0-9]*$/.test(t))return t.toLowerCase();throw new TypeError(`Invalid protocol '${t}'.`)}function pke(t){if(t==="")return t;let e=new URL("https://example.com");return e.username=t,e.username}function mke(t){if(t==="")return t;let e=new URL("https://example.com");return e.password=t,e.password}function U7(t){if(t==="")return t;if(/[\t\n\r #%/:<>?@[\]^\\|]/g.test(t))throw new TypeError(`Invalid hostname '${t}'`);let e=new URL("https://example.com");return e.hostname=t,e.hostname}function F7(t){if(t==="")return t;if(/[^0-9a-fA-F[\]:]/g.test(t))throw new TypeError(`Invalid IPv6 hostname '${t}'`);return t.toLowerCase()}function B7(t){if(t===""||/^[0-9]*$/.test(t)&&parseInt(t)<=65535)return t;throw new TypeError(`Invalid port '${t}'.`)}function gke(t){if(t==="")return t;let e=new URL("https://example.com");return e.pathname=t[0]!=="/"?"/-"+t:t,t[0]!=="/"?e.pathname.substring(2,e.pathname.length):e.pathname}function vke(t){return t===""?t:new URL(`data:${t}`).pathname}function yke(t){if(t==="")return t;let e=new URL("https://example.com");return e.search=t,e.search.substring(1,e.search.length)}function bke(t){if(t==="")return t;let e=new URL("https://example.com");return e.hash=t,e.hash.substring(1,e.hash.length)}var Bu,Sr,Jn,cn,mc,Hu,Jr,zu,Vu,$u,Ae,Un,H7,Jw,Kh,cg,yo,Xw,z7,lg,V7,$7,ug,cu,Za,G7,K7,W7,q7,yi,Y7,q2,Cke=(q2=class{constructor(t){sn(this,Ae);sn(this,Bu);sn(this,Sr,[]);sn(this,Jn,{});sn(this,cn,0);sn(this,mc,1);sn(this,Hu,0);sn(this,Jr,0);sn(this,zu,0);sn(this,Vu,0);sn(this,$u,!1);Ut(this,Bu,t)}get result(){return pe(this,Jn)}parse(){for(Ut(this,Sr,R7(pe(this,Bu),!0));pe(this,cn)<pe(this,Sr).length;Ut(this,cn,pe(this,cn)+pe(this,mc))){if(Ut(this,mc,1),pe(this,Sr)[pe(this,cn)].type==="END"){if(pe(this,Jr)===0){ze(this,Ae,Jw).call(this),ze(this,Ae,Za).call(this)?ze(this,Ae,Un).call(this,9,1):ze(this,Ae,cu).call(this)?ze(this,Ae,Un).call(this,8,1):ze(this,Ae,Un).call(this,7,0);continue}else if(pe(this,Jr)===2){ze(this,Ae,Kh).call(this,5);continue}ze(this,Ae,Un).call(this,10,0);break}if(pe(this,zu)>0)if(ze(this,Ae,K7).call(this))Ut(this,zu,pe(this,zu)-1);else continue;if(ze(this,Ae,G7).call(this)){Ut(this,zu,pe(this,zu)+1);continue}switch(pe(this,Jr)){case 0:ze(this,Ae,Xw).call(this)&&ze(this,Ae,Kh).call(this,1);break;case 1:if(ze(this,Ae,Xw).call(this)){ze(this,Ae,Y7).call(this);let t=7,e=1;ze(this,Ae,z7).call(this)?(t=2,e=3):pe(this,$u)&&(t=2),ze(this,Ae,Un).call(this,t,e)}break;case 2:ze(this,Ae,lg).call(this)?ze(this,Ae,Kh).call(this,3):(ze(this,Ae,ug).call(this)||ze(this,Ae,cu).call(this)||ze(this,Ae,Za).call(this))&&ze(this,Ae,Kh).call(this,5);break;case 3:ze(this,Ae,V7).call(this)?ze(this,Ae,Un).call(this,4,1):ze(this,Ae,lg).call(this)&&ze(this,Ae,Un).call(this,5,1);break;case 4:ze(this,Ae,lg).call(this)&&ze(this,Ae,Un).call(this,5,1);break;case 5:ze(this,Ae,W7).call(this)?Ut(this,Vu,pe(this,Vu)+1):ze(this,Ae,q7).call(this)&&Ut(this,Vu,pe(this,Vu)-1),ze(this,Ae,$7).call(this)&&!pe(this,Vu)?ze(this,Ae,Un).call(this,6,1):ze(this,Ae,ug).call(this)?ze(this,Ae,Un).call(this,7,0):ze(this,Ae,cu).call(this)?ze(this,Ae,Un).call(this,8,1):ze(this,Ae,Za).call(this)&&ze(this,Ae,Un).call(this,9,1);break;case 6:ze(this,Ae,ug).call(this)?ze(this,Ae,Un).call(this,7,0):ze(this,Ae,cu).call(this)?ze(this,Ae,Un).call(this,8,1):ze(this,Ae,Za).call(this)&&ze(this,Ae,Un).call(this,9,1);break;case 7:ze(this,Ae,cu).call(this)?ze(this,Ae,Un).call(this,8,1):ze(this,Ae,Za).call(this)&&ze(this,Ae,Un).call(this,9,1);break;case 8:ze(this,Ae,Za).call(this)&&ze(this,Ae,Un).call(this,9,1);break}}pe(this,Jn).hostname!==void 0&&pe(this,Jn).port===void 0&&(pe(this,Jn).port="")}},Bu=new WeakMap,Sr=new WeakMap,Jn=new WeakMap,cn=new WeakMap,mc=new WeakMap,Hu=new WeakMap,Jr=new WeakMap,zu=new WeakMap,Vu=new WeakMap,$u=new WeakMap,Ae=new WeakSet,Un=function(t,e){var n,r,o;switch(pe(this,Jr)){case 0:break;case 1:pe(this,Jn).protocol=ze(this,Ae,yi).call(this);break;case 2:break;case 3:pe(this,Jn).username=ze(this,Ae,yi).call(this);break;case 4:pe(this,Jn).password=ze(this,Ae,yi).call(this);break;case 5:pe(this,Jn).hostname=ze(this,Ae,yi).call(this);break;case 6:pe(this,Jn).port=ze(this,Ae,yi).call(this);break;case 7:pe(this,Jn).pathname=ze(this,Ae,yi).call(this);break;case 8:pe(this,Jn).search=ze(this,Ae,yi).call(this);break;case 9:pe(this,Jn).hash=ze(this,Ae,yi).call(this);break}pe(this,Jr)!==0&&t!==10&&([1,2,3,4].includes(pe(this,Jr))&&[6,7,8,9].includes(t)&&((n=pe(this,Jn)).hostname??(n.hostname="")),[1,2,3,4,5,6].includes(pe(this,Jr))&&[8,9].includes(t)&&((r=pe(this,Jn)).pathname??(r.pathname=pe(this,$u)?"/":"")),[1,2,3,4,5,6,7].includes(pe(this,Jr))&&t===9&&((o=pe(this,Jn)).search??(o.search=""))),ze(this,Ae,H7).call(this,t,e)},H7=function(t,e){Ut(this,Jr,t),Ut(this,Hu,pe(this,cn)+e),Ut(this,cn,pe(this,cn)+e),Ut(this,mc,0)},Jw=function(){Ut(this,cn,pe(this,Hu)),Ut(this,mc,0)},Kh=function(t){ze(this,Ae,Jw).call(this),Ut(this,Jr,t)},cg=function(t){return t<0&&(t=pe(this,Sr).length-t),t<pe(this,Sr).length?pe(this,Sr)[t]:pe(this,Sr)[pe(this,Sr).length-1]},yo=function(t,e){let n=ze(this,Ae,cg).call(this,t);return n.value===e&&(n.type==="CHAR"||n.type==="ESCAPED_CHAR"||n.type==="INVALID_CHAR")},Xw=function(){return ze(this,Ae,yo).call(this,pe(this,cn),":")},z7=function(){return ze(this,Ae,yo).call(this,pe(this,cn)+1,"/")&&ze(this,Ae,yo).call(this,pe(this,cn)+2,"/")},lg=function(){return ze(this,Ae,yo).call(this,pe(this,cn),"@")},V7=function(){return ze(this,Ae,yo).call(this,pe(this,cn),":")},$7=function(){return ze(this,Ae,yo).call(this,pe(this,cn),":")},ug=function(){return ze(this,Ae,yo).call(this,pe(this,cn),"/")},cu=function(){if(ze(this,Ae,yo).call(this,pe(this,cn),"?"))return!0;if(pe(this,Sr)[pe(this,cn)].value!=="?")return!1;let t=ze(this,Ae,cg).call(this,pe(this,cn)-1);return t.type!=="NAME"&&t.type!=="REGEX"&&t.type!=="CLOSE"&&t.type!=="ASTERISK"},Za=function(){return ze(this,Ae,yo).call(this,pe(this,cn),"#")},G7=function(){return pe(this,Sr)[pe(this,cn)].type=="OPEN"},K7=function(){return pe(this,Sr)[pe(this,cn)].type=="CLOSE"},W7=function(){return ze(this,Ae,yo).call(this,pe(this,cn),"[")},q7=function(){return ze(this,Ae,yo).call(this,pe(this,cn),"]")},yi=function(){let t=pe(this,Sr)[pe(this,cn)],e=ze(this,Ae,cg).call(this,pe(this,Hu)).index;return pe(this,Bu).substring(e,t.index)},Y7=function(){let t={};Object.assign(t,Qs),t.encodePart=QA;let e=tke(ze(this,Ae,yi).call(this),void 0,t);Ut(this,$u,D7(e))},q2),S0=["protocol","username","password","hostname","port","pathname","search","hash"],Ws="*";function H2(t,e){if(typeof t!="string")throw new TypeError("parameter 1 is not of type 'string'.");let n=new URL(t,e);return{protocol:n.protocol.substring(0,n.protocol.length-1),username:n.username,password:n.password,hostname:n.hostname,port:n.port,pathname:n.pathname,search:n.search!==""?n.search.substring(1,n.search.length):void 0,hash:n.hash!==""?n.hash.substring(1,n.hash.length):void 0}}function is(t,e){return e?Wh(t):t}function Dh(t,e,n){let r;if(typeof e.baseURL=="string")try{r=new URL(e.baseURL),e.protocol===void 0&&(t.protocol=is(r.protocol.substring(0,r.protocol.length-1),n)),!n&&e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.username===void 0&&(t.username=is(r.username,n)),!n&&e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.username===void 0&&e.password===void 0&&(t.password=is(r.password,n)),e.protocol===void 0&&e.hostname===void 0&&(t.hostname=is(r.hostname,n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&(t.port=is(r.port,n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&(t.pathname=is(r.pathname,n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&e.search===void 0&&(t.search=is(r.search.substring(1,r.search.length),n)),e.protocol===void 0&&e.hostname===void 0&&e.port===void 0&&e.pathname===void 0&&e.search===void 0&&e.hash===void 0&&(t.hash=is(r.hash.substring(1,r.hash.length),n))}catch{throw new TypeError(`invalid baseURL '${e.baseURL}'.`)}if(typeof e.protocol=="string"&&(t.protocol=fke(e.protocol,n)),typeof e.username=="string"&&(t.username=uke(e.username,n)),typeof e.password=="string"&&(t.password=lke(e.password,n)),typeof e.hostname=="string"&&(t.hostname=cke(e.hostname,n)),typeof e.port=="string"&&(t.port=hke(e.port,t.protocol,n)),typeof e.pathname=="string"){if(t.pathname=e.pathname,r&&!oke(t.pathname,n)){let o=r.pathname.lastIndexOf("/");o>=0&&(t.pathname=is(r.pathname.substring(0,o+1),n)+t.pathname)}t.pathname=dke(t.pathname,t.protocol,n)}return typeof e.search=="string"&&(t.search=ake(e.search,n)),typeof e.hash=="string"&&(t.hash=ske(e.hash,n)),t}function Wh(t){return t.replace(/([+*?:{}()\\])/g,"\\$1")}function Ske(t){return t.replace(/([.+*?^${}()[\]|/\\])/g,"\\$1")}function Eke(t,e){e.delimiter??(e.delimiter="/#?"),e.prefixes??(e.prefixes="./"),e.sensitive??(e.sensitive=!1),e.strict??(e.strict=!1),e.end??(e.end=!0),e.start??(e.start=!0),e.endsWith="";let n=".*",r=`[^${Ske(e.delimiter)}]+?`,o=/[$_\u200C\u200D\p{ID_Continue}]/u,i="";for(let s=0;s<t.length;++s){let a=t[s];if(a.type===3){if(a.modifier===3){i+=Wh(a.value);continue}i+=`{${Wh(a.value)}}${Iu(a.modifier)}`;continue}let c=a.hasCustomName(),u=!!a.suffix.length||!!a.prefix.length&&(a.prefix.length!==1||!e.prefixes.includes(a.prefix)),d=s>0?t[s-1]:null,f=s<t.length-1?t[s+1]:null;if(!u&&c&&a.type===1&&a.modifier===3&&f&&!f.prefix.length&&!f.suffix.length)if(f.type===3){let p=f.value.length>0?f.value[0]:"";u=o.test(p)}else u=!f.hasCustomName();if(!u&&!a.prefix.length&&d&&d.type===3){let p=d.value[d.value.length-1];u=e.prefixes.includes(p)}u&&(i+="{"),i+=Wh(a.prefix),c&&(i+=`:${a.name}`),a.type===2?i+=`(${a.value})`:a.type===1?c||(i+=`(${r})`):a.type===0&&(!c&&(!d||d.type===3||d.modifier!==3||u||a.prefix!=="")?i+="*":i+=`(${n})`),a.type===1&&c&&a.suffix.length&&o.test(a.suffix[0])&&(i+="\\"),i+=Wh(a.suffix),u&&(i+="}"),a.modifier!==3&&(i+=Iu(a.modifier))}return i}var wi,gc,Gu,Xn,Vo,Ku,Y2,wke=(Y2=class{constructor(t={},e,n){sn(this,wi);sn(this,gc,{});sn(this,Gu,{});sn(this,Xn,{});sn(this,Vo,{});sn(this,Ku,!1);try{let r;if(typeof e=="string"?r=e:n=e,typeof t=="string"){let a=new Cke(t);if(a.parse(),t=a.result,r===void 0&&typeof t.protocol!="string")throw new TypeError("A base URL must be provided for a relative constructor string.");t.baseURL=r}else{if(!t||typeof t!="object")throw new TypeError("parameter 1 is not of type 'string' and cannot convert to dictionary.");if(r)throw new TypeError("parameter 1 is not of type 'string'.")}typeof n>"u"&&(n={ignoreCase:!1});let o={ignoreCase:n.ignoreCase===!0};Ut(this,wi,Dh({pathname:Ws,protocol:Ws,username:Ws,password:Ws,hostname:Ws,port:Ws,search:Ws,hash:Ws},t,!0)),j7(pe(this,wi).protocol)===pe(this,wi).port&&(pe(this,wi).port="");let s;for(s of S0){if(!(s in pe(this,wi)))continue;let a={},c=pe(this,wi)[s];switch(pe(this,Gu)[s]=[],s){case"protocol":Object.assign(a,Qs),a.encodePart=QA;break;case"username":Object.assign(a,Qs),a.encodePart=pke;break;case"password":Object.assign(a,Qs),a.encodePart=mke;break;case"hostname":Object.assign(a,nke),M7(c)?a.encodePart=F7:a.encodePart=U7;break;case"port":Object.assign(a,Qs),a.encodePart=B7;break;case"pathname":D7(pe(this,gc).protocol)?(Object.assign(a,rke,o),a.encodePart=gke):(Object.assign(a,Qs,o),a.encodePart=vke);break;case"search":Object.assign(a,Qs,o),a.encodePart=yke;break;case"hash":Object.assign(a,Qs,o),a.encodePart=bke;break}try{pe(this,Vo)[s]=N7(c,a),pe(this,gc)[s]=P7(pe(this,Vo)[s],pe(this,Gu)[s],a),pe(this,Xn)[s]=Eke(pe(this,Vo)[s],a),Ut(this,Ku,pe(this,Ku)||pe(this,Vo)[s].some(u=>u.type===2))}catch{throw new TypeError(`invalid ${s} pattern '${pe(this,wi)[s]}'.`)}}}catch(r){throw new TypeError(`Failed to construct 'URLPattern': ${r.message}`)}}test(t={},e){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&e)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return!1;try{typeof t=="object"?n=Dh(n,t,!1):n=Dh(n,H2(t,e),!1)}catch{return!1}let r;for(r of S0)if(!pe(this,gc)[r].exec(n[r]))return!1;return!0}exec(t={},e){let n={pathname:"",protocol:"",username:"",password:"",hostname:"",port:"",search:"",hash:""};if(typeof t!="string"&&e)throw new TypeError("parameter 1 is not of type 'string'.");if(typeof t>"u")return;try{typeof t=="object"?n=Dh(n,t,!1):n=Dh(n,H2(t,e),!1)}catch{return null}let r={};e?r.inputs=[t,e]:r.inputs=[t];let o;for(o of S0){let i=pe(this,gc)[o].exec(n[o]);if(!i)return null;let s={};for(let[a,c]of pe(this,Gu)[o].entries())if(typeof c=="string"||typeof c=="number"){let u=i[a+1];s[c]=u}r[o]={input:n[o]??"",groups:s}}return r}static compareComponent(t,e,n){let r=(a,c)=>{for(let u of["type","modifier","prefix","value","suffix"]){if(a[u]<c[u])return-1;if(a[u]!==c[u])return 1}return 0},o=new vf(3,"","","","",3),i=new vf(0,"","","","",3),s=(a,c)=>{let u=0;for(;u<Math.min(a.length,c.length);++u){let d=r(a[u],c[u]);if(d)return d}return a.length===c.length?0:r(a[u]??o,c[u]??o)};return!pe(e,Xn)[t]&&!pe(n,Xn)[t]?0:pe(e,Xn)[t]&&!pe(n,Xn)[t]?s(pe(e,Vo)[t],[i]):!pe(e,Xn)[t]&&pe(n,Xn)[t]?s([i],pe(n,Vo)[t]):s(pe(e,Vo)[t],pe(n,Vo)[t])}get protocol(){return pe(this,Xn).protocol}get username(){return pe(this,Xn).username}get password(){return pe(this,Xn).password}get hostname(){return pe(this,Xn).hostname}get port(){return pe(this,Xn).port}get pathname(){return pe(this,Xn).pathname}get search(){return pe(this,Xn).search}get hash(){return pe(this,Xn).hash}get hasRegExpGroups(){return pe(this,Ku)}},wi=new WeakMap,gc=new WeakMap,Gu=new WeakMap,Xn=new WeakMap,Vo=new WeakMap,Ku=new WeakMap,Y2);globalThis.URLPattern||(globalThis.URLPattern=wke);let Q7;function qNe(t){Q7=t}function Ike(){var t,e;typeof window<"u"&&(window.copilotTrustedTypesPolicy=(t=window.trustedTypes)==null?void 0:t.createPolicy("copilotPolicy",{createHTML:n=>F2.sanitize(n)}),(e=window.trustedTypes)==null||e.createPolicy("default",{createScriptURL:n=>{const r=/^\/cl\//,o=new URLPattern({protocol:"https",hostname:"www.clarity.ms",pathname:"/s/*"}),i=new URLPattern({protocol:"https",hostname:"*.cloudflare.com"}),s=new URLPattern({protocol:"https",hostname:"bat.bing.com"}),a=new URLPattern({protocol:"https",hostname:"az416426.vo.msecnd.net"}),c=new URLPattern({protocol:"https",hostname:"fpt.dfp.microsoft.com"}),u=new URLPattern({protocol:"https",hostname:"assets.msn.com"}),d=new URLPattern({protocol:"https",hostname:"content.lifecycle.office.net"});if(r.test(n)||o.test(n)||i.test(n)||s.test(n)||a.test(n)||c.test(n)||u.test(n)||d.test(n)||n===Q7)return n;throw new Error(`Unsafe script URL "${n}" blocked by CSP.`)},createHTML:n=>F2.sanitize(n)}))}Ike();kF.createRoot(document.getElementById("app")).render(h.jsx(el.StrictMode,{children:h.jsx(RAe,{})}));const Tke=Object.freeze(Object.defineProperty({__proto__:null,Route:CIe},Symbol.toStringTag,{value:"Module"}));export{ft as $,OI as A,Ue as B,v6 as C,Kd as D,o9 as E,Ln as F,Su as G,ct as H,sr as I,t1e as J,ee as K,aa as L,oA as M,jv as N,vg as O,ks as P,yb as Q,Pd as R,gd as S,$o as T,dt as U,V,Ot as W,gr as X,Vge as Y,Ye as Z,z as _,Sxe as a,Vve as a$,DA as a0,PU as a1,Fxe as a2,Gd as a3,sX as a4,pc as a5,W1e as a6,bw as a7,lO as a8,tG as a9,Dhe as aA,bI as aB,cNe as aC,Pt as aD,nl as aE,Pr as aF,bl as aG,kEe as aH,Fke as aI,Uke as aJ,_p as aK,q6 as aL,Lo as aM,kRe as aN,ZL as aO,Due as aP,mX as aQ,jw as aR,qd as aS,Kw as aT,k6 as aU,A6 as aV,jve as aW,Fve as aX,Hve as aY,iRe as aZ,zve as a_,at as aa,Zt as ab,eA as ac,pr as ad,Gv as ae,Il as af,Qi as ag,lG as ah,wy as ai,In as aj,Iy as ak,Vv as al,xA as am,Jz as an,xd as ao,sve as ap,ave as aq,Gde as ar,zle as as,BN as at,bT as au,Mxe as av,xEe as aw,IEe as ax,FIe as ay,Dxe as az,Vke as b,Oye as b$,Vd as b0,$t as b1,Zv as b2,hI as b3,fI as b4,NEe as b5,PEe as b6,e2 as b7,xa as b8,qO as b9,bRe as bA,E7 as bB,XO as bC,Yle as bD,ii as bE,eve as bF,Gn as bG,ni as bH,M1e as bI,O1e as bJ,Hr as bK,Oi as bL,L1e as bM,n1e as bN,lo as bO,g$ as bP,pd as bQ,Kf as bR,vl as bS,k1e as bT,d1e as bU,dG as bV,h1e as bW,FL as bX,$Re as bY,b9 as bZ,hb as b_,En as ba,Xi as bb,vue as bc,xh as bd,Rp as be,SSe as bf,yA as bg,g6 as bh,_u as bi,Aa as bj,Rs as bk,Yme as bl,ed as bm,gh as bn,oxe as bo,ra as bp,sa as bq,Jke as br,Xke as bs,Zke as bt,zJ as bu,Vr as bv,ibe as bw,pa as bx,Ea as by,y6 as bz,W as c,Tse as c$,Mye as c0,$1e as c1,ci as c2,EI as c3,zke as c4,NI as c5,Qc as c6,u1e as c7,w0 as c8,mM as c9,LRe as cA,DRe as cB,au as cC,yf as cD,gA as cE,kM as cF,Lge as cG,Z3 as cH,Oj as cI,lce as cJ,ese as cK,Ua as cL,Ev as cM,ta as cN,Tt as cO,v4 as cP,zc as cQ,Gse as cR,va as cS,FE as cT,mr as cU,vxe as cV,UE as cW,gR as cX,U_ as cY,eae as cZ,VE as c_,kve as ca,i7 as cb,o7 as cc,bSe as cd,xp as ce,vc as cf,Z$ as cg,M$ as ch,FI as ci,Lye as cj,bb as ck,rxe as cl,RM as cm,Ebe as cn,bZ as co,j$ as cp,D$ as cq,M9 as cr,txe as cs,yO as ct,Cbe as cu,RRe as cv,oRe as cw,MRe as cx,ORe as cy,NRe as cz,Vi as d,Kj as d$,rle as d0,dce as d1,uce as d2,ym as d3,ice as d4,cj as d5,xae as d6,kae as d7,Oae as d8,HH as d9,iA as dA,Fj as dB,op as dC,X_ as dD,W_ as dE,yl as dF,_1e as dG,I1e as dH,gU as dI,dEe as dJ,AN as dK,wH as dL,b2 as dM,VNe as dN,Id as dO,vy as dP,BL as dQ,NA as dR,Z6 as dS,xRe as dT,ly as dU,tRe as dV,Pm as dW,Wo as dX,$v as dY,Ka as dZ,Ks as d_,URe as da,HTe as db,c7 as dc,wxe as dd,G6 as de,KRe as df,hA as dg,Ov as dh,pA as di,UI as dj,a7 as dk,ERe as dl,vA as dm,CRe as dn,_Re as dp,YL as dq,i1e as dr,b1e as ds,C1e as dt,y1e as du,Ay as dv,yG as dw,SRe as dx,sue as dy,Jue as dz,Tb as e,RA as e$,Mp as e0,Tl as e1,jEe as e2,ITe as e3,Jf as e4,YA as e5,c_e as e6,db as e7,TI as e8,K0e as e9,gNe as eA,pNe as eB,INe as eC,wNe as eD,fNe as eE,yn as eF,Sye as eG,TNe as eH,bNe as eI,WO as eJ,PA as eK,fU as eL,ade as eM,Dp as eN,Xge as eO,N1e as eP,fhe as eQ,FA as eR,iwe as eS,$6 as eT,ri as eU,LI as eV,UJ as eW,c1e as eX,ho as eY,P$ as eZ,Ra as e_,G0e as ea,zRe as eb,$Te as ec,Vbe as ed,Bbe as ee,HRe as ef,zbe as eg,EU as eh,bbe as ei,et as ej,WJ as ek,D6 as el,_y as em,Cw as en,gT as eo,mU as ep,Xc as eq,li as er,or as es,$Ee as et,jRe as eu,N$ as ev,Yke as ew,Qke as ex,R$ as ey,I2 as ez,kt as f,Eb as f$,tA as f0,nD as f1,sD as f2,Zge as f3,rD as f4,sTe as f5,x1e as f6,CNe as f7,ENe as f8,SNe as f9,dy as fA,GV as fB,Gke as fC,$ke as fD,Jv as fE,MB as fF,Tbe as fG,PRe as fH,Xv as fI,Y6 as fJ,Sb as fK,n2 as fL,uI as fM,dI as fN,T0 as fO,Cg as fP,uxe as fQ,Fm as fR,i6 as fS,ZIe as fT,Fv as fU,Hv as fV,xo as fW,LCe as fX,S1e as fY,Ar as fZ,Ig as f_,TEe as fa,Yve as fb,FRe as fc,tve as fd,P1e as fe,GRe as ff,BRe as fg,tSe as fh,t9 as fi,OL as fj,eSe as fk,TA as fl,Fi as fm,T1e as fn,xD as fo,zZ as fp,PL as fq,w9 as fr,Wt as fs,Wde as ft,VA as fu,Oxe as fv,ir as fw,uV as fx,lV as fy,r1 as fz,$d as g,xc as g$,Jde as g0,Yde as g1,b7 as g2,y7 as g3,wU as g4,sSe as g5,aSe as g6,yN as g7,l1e as g8,F2 as g9,bve as gA,Hle as gB,D9 as gC,p1e as gD,An as gE,wbe as gF,Dw as gG,nRe as gH,Mw as gI,n0 as gJ,s1e as gK,cxe as gL,lxe as gM,sxe as gN,axe as gO,h0e as gP,eNe as gQ,ixe as gR,hG as gS,Og as gT,HO as gU,CI as gV,Eo as gW,bs as gX,Ii as gY,je as gZ,ey as g_,CH as ga,FB as gb,Mge as gc,bxe as gd,yxe as ge,my as gf,j1e as gg,fp as gh,pTe as gi,SZ as gj,uC as gk,Zu as gl,wT as gm,E2 as gn,og as go,$I as gp,tD as gq,qh as gr,C0e as gs,Wxe as gt,Ive as gu,TP as gv,Jve as gw,S6 as gx,lI as gy,BIe as gz,Ro as h,_U as h$,dn as h0,Ir as h1,Tr as h2,ny as h3,Ao as h4,SI as h5,ys as h6,vI as h7,kc as h8,io as h9,LNe as hA,Zue as hB,Xue as hC,vwe as hD,NNe as hE,PNe as hF,ONe as hG,l2 as hH,MNe as hI,qEe as hJ,Oo as hK,UL as hL,v7 as hM,_m as hN,TRe as hO,l7 as hP,nxe as hQ,Rge as hR,Lxe as hS,zNe as hT,PD as hU,zIe as hV,o1e as hW,aNe as hX,d6 as hY,kI as hZ,V$ as h_,G1e as ha,w1e as hb,A1e as hc,K1e as hd,Qt as he,fxe as hf,pxe as hg,X1 as hh,mxe as hi,gxe as hj,qNe as hk,J_ as hl,BTe as hm,FG as hn,kf as ho,CSe as hp,ol as hq,xf as hr,wn as hs,Rxe as ht,Nxe as hu,jde as hv,Ude as hw,wTe as hx,S7 as hy,DNe as hz,Lt as i,HL as i$,ka as i0,VRe as i1,Pxe as i2,GP as i3,WRe as i4,j6 as i5,Vxe as i6,AM as i7,Xs as i8,l6 as i9,Xf as iA,_6 as iB,rRe as iC,zI as iD,QP as iE,tNe as iF,U$ as iG,DI as iH,rG as iI,pZ as iJ,Lke as iK,jke as iL,Dke as iM,rl as iN,q1e as iO,MJ as iP,DJ as iQ,F1e as iR,Bke as iS,OJ as iT,fy as iU,Hke as iV,ub as iW,GEe as iX,i2 as iY,pp as iZ,_ve as i_,fye as ia,Fbe as ib,Nhe as ic,Ahe as id,dhe as ie,n7 as ig,lve as ih,Yi as ii,L6 as ij,M6 as ik,gK as il,E1e as im,OP as io,EH as ip,fG as iq,MP as ir,Wke as is,qke as it,_f as iu,H6 as iv,oG as iw,U1e as ix,Pw as iy,wve as iz,ko as j,HCe as j$,eG as j0,LJ as j1,nU as j2,Pue as j3,Wue as j4,dT as j5,hwe as j6,jL as j7,BCe as j8,Mke as j9,fRe as jA,D1e as jB,z1e as jC,HI as jD,YO as jE,wRe as jF,IRe as jG,MI as jH,DTe as jI,fb as jJ,Ybe as jK,Exe as jL,kxe as jM,Axe as jN,Kke as jO,f1e as jP,Pc as jQ,bf as jR,Ibe as jS,Mle as jT,Qbe as jU,i9 as jV,Rke as jW,bO as jX,dRe as jY,mNe as jZ,_Ne as j_,Bye as ja,hRe as jb,pRe as jc,mRe as jd,VL as je,uT as jf,B1e as jg,H1e as jh,xM as ji,BJ as jj,HJ as jk,FJ as jl,Cxe as jm,Kxe as jn,m1e as jo,g1e as jp,v1e as jq,r1e as jr,Ey as js,pbe as jt,V1e as ju,vRe as jv,gRe as jw,zv as jx,Ow as jy,kA as jz,Ac as k,rNe as k$,lNe as k0,Dbe as k1,Lme as k2,Mme as k3,_s as k4,pb as k5,a1e as k6,Mhe as k7,Gxe as k8,xSe as k9,Ixe as kA,Txe as kB,_xe as kC,xxe as kD,aA as kE,$xe as kF,qxe as kG,Yxe as kH,Qxe as kI,Jxe as kJ,Xxe as kK,Zxe as kL,eRe as kM,sRe as kN,aRe as kO,cRe as kP,lRe as kQ,uRe as kR,yRe as kS,ARe as kT,qRe as kU,YRe as kV,QRe as kW,JRe as kX,XRe as kY,ZRe as kZ,nNe as k_,MA as ka,z9 as kb,QEe as kc,SEe as kd,ywe as ke,e1e as kf,jNe as kg,t7 as kh,hNe as ki,dNe as kj,uNe as kk,jxe as kl,Uxe as km,Lhe as kn,vNe as ko,yNe as kp,R1e as kq,DY as kr,Sre as ks,dxe as kt,hxe as ku,q_ as kv,ET as kw,Nke as kx,Pke as ky,Oke as kz,zr as l,oNe as l0,iNe as l1,sNe as l2,ANe as l3,kNe as l4,xNe as l5,RNe as l6,FNe as l7,BNe as l8,HNe as l9,$Ne as la,GNe as lb,KNe as lc,WNe as ld,oV as m,ui as n,$L as o,Q6 as p,Ww as q,Mv as r,Vhe as s,ye as t,He as u,dM as v,me as w,ds as x,mn as y,wg as z};
